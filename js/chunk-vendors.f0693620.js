(self["webpackChunktinymce6_vue"]=self["webpackChunktinymce6_vue"]||[]).push([[998],{396:function(e,t,n){"use strict";n.d(t,{Z:function(){return k}});var o=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],r=function(e){return-1!==o.map((function(e){return e.toLowerCase()})).indexOf(e.toLowerCase())},s=function(e,t,n){Object.keys(t).filter(r).forEach((function(o){var r=t[o];"function"===typeof r&&("onInit"===o?r(e,n):n.on(o.substring(2),(function(e){return r(e,n)})))}))},a=function(e,t){var n=e.$props.modelEvents?e.$props.modelEvents:null,o=Array.isArray(n)?n.join(" "):n;t.on(o||"change input undo redo",(function(){e.$emit("input",t.getContent({format:e.$props.outputFormat}))}))},i=function(e,t,n){var o=t.$props.value?t.$props.value:"",r=t.$props.initialValue?t.$props.initialValue:"";n.setContent(o||(t.initialized?t.cache:r)),t.$watch("value",(function(e,o){n&&"string"===typeof e&&e!==o&&e!==n.getContent({format:t.$props.outputFormat})&&n.setContent(e)})),t.$listeners.input&&a(t,n),s(e,t.$listeners,n),t.initialized=!0},l=0,c=function(e){var t=Date.now(),n=Math.floor(1e9*Math.random());return l++,e+"_"+n+l+String(t)},d=function(e){return null!==e&&"textarea"===e.tagName.toLowerCase()},u=function(e){return"undefined"===typeof e||""===e?[]:Array.isArray(e)?e:e.split(" ")},m=function(e,t){return u(e).concat(u(t))},p=function(e){return null===e||void 0===e},f=function(){return{listeners:[],scriptId:c("tiny-script"),scriptLoaded:!1}},g=function(){var e=f(),t=function(e,t,n,o){var r=t.createElement("script");r.referrerPolicy="origin",r.type="application/javascript",r.id=e,r.src=n;var s=function(){r.removeEventListener("load",s),o()};r.addEventListener("load",s),t.head&&t.head.appendChild(r)},n=function(n,o,r){e.scriptLoaded?r():(e.listeners.push(r),n.getElementById(e.scriptId)||t(e.scriptId,n,o,(function(){e.listeners.forEach((function(e){return e()})),e.scriptLoaded=!0})))},o=function(){e=f()};return{load:n,reinitialize:o}},h=g(),v=function(){return"undefined"!==typeof window?window:n.g},b=function(){var e=v();return e&&e.tinymce?e.tinymce:null},y={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],value:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(e){return"html"===e||"text"===e}}},x=function(){return x=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},x.apply(this,arguments)},w=function(e,t,n){return e(n||"div",{attrs:{id:t}})},C=function(e,t){return e("textarea",{attrs:{id:t},style:{visibility:"hidden"}})},S=function(e){return function(){var t=x(x({},e.$props.init),{readonly:e.$props.disabled,selector:"#"+e.elementId,plugins:m(e.$props.init&&e.$props.init.plugins,e.$props.plugins),toolbar:e.$props.toolbar||e.$props.init&&e.$props.init.toolbar,inline:e.inlineEditor,setup:function(t){e.editor=t,t.on("init",(function(n){return i(n,e,t)})),e.$props.init&&"function"===typeof e.$props.init.setup&&e.$props.init.setup(t)}});d(e.element)&&(e.element.style.visibility="",e.element.style.display=""),b().init(t)}},_={props:y,created:function(){this.elementId=this.$props.id||c("tiny-vue"),this.inlineEditor=this.$props.init&&this.$props.init.inline||this.$props.inline,this.initialized=!1},watch:{disabled:function(){this.editor.setMode(this.disabled?"readonly":"design")}},mounted:function(){if(this.element=this.$el,null!==b())S(this)();else if(this.element&&this.element.ownerDocument){var e=this.$props.cloudChannel?this.$props.cloudChannel:"5",t=this.$props.apiKey?this.$props.apiKey:"no-api-key",n=p(this.$props.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/"+t+"/tinymce/"+e+"/tinymce.min.js":this.$props.tinymceScriptSrc;h.load(this.element.ownerDocument,n,S(this))}},beforeDestroy:function(){null!==b()&&b().remove(this.editor)},deactivated:function(){var e;this.inlineEditor||(this.cache=this.editor.getContent(),null===(e=b())||void 0===e||e.remove(this.editor))},activated:function(){!this.inlineEditor&&this.initialized&&S(this)()},render:function(e){return this.inlineEditor?w(e,this.elementId,this.$props.tagName):C(e,this.elementId)}},k=_},1001:function(e,t,n){"use strict";function o(e,t,n,o,r,s,a,i){var l,c="function"===typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),o&&(c.functional=!0),s&&(c._scopeId="data-v-"+s),a?(l=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},c._ssrRegister=l):r&&(l=i?function(){r.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var d=c.render;c.render=function(e,t){return l.call(t),d(e,t)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,l):[l]}return{exports:e,options:c}}n.d(t,{Z:function(){return o}})},604:function(e,t,n){n(8407)},8407:function(e,t,n){var o=n(2214)["default"];n(1703),n(7658),n(5069),n(2707),n(4916),n(5306),n(3948),n(4603),n(8450),n(3210),function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.ModelManager");const t=(e,t,n)=>{var o;return!!n(e,t.prototype)||(null===(o=e.constructor)||void 0===o?void 0:o.name)===t.name},n=e=>{const n=typeof e;return null===e?"null":"object"===n&&Array.isArray(e)?"array":"object"===n&&t(e,String,((e,t)=>t.isPrototypeOf(e)))?"string":n},r=e=>t=>n(t)===e,s=e=>t=>typeof t===e,a=e=>t=>e===t,i=r("string"),l=r("object"),c=r("array"),d=a(null),u=s("boolean"),m=a(void 0),p=e=>null===e||void 0===e,f=e=>!p(e),g=s("function"),h=s("number"),v=()=>{},b=(e,t)=>(...n)=>e(t.apply(null,n)),y=(e,t)=>n=>e(t(n)),x=e=>()=>e,w=e=>e,C=(e,t)=>e===t;function S(e,...t){return(...n)=>{const o=t.concat(n);return e.apply(null,o)}}const _=e=>t=>!e(t),k=e=>()=>{throw new Error(e)},E=e=>e(),O=x(!1),T=x(!0);class A{constructor(e,t){this.tag=e,this.value=t}static some(e){return new A(!0,e)}static none(){return A.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?A.some(e(this.value)):A.none()}bind(e){return this.tag?e(this.value):A.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:A.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!==e&&void 0!==e?e:"Called getOrDie on None")}static from(e){return f(e)?A.some(e):A.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}A.singletonNone=new A(!1);const R=Array.prototype.slice,N=Array.prototype.indexOf,D=Array.prototype.push,B=(e,t)=>N.call(e,t),M=(e,t)=>B(e,t)>-1,I=(e,t)=>{for(let n=0,o=e.length;n<o;n++){const o=e[n];if(t(o,n))return!0}return!1},P=(e,t)=>{const n=[];for(let o=0;o<e;o++)n.push(t(o));return n},L=(e,t)=>{const n=e.length,o=new Array(n);for(let r=0;r<n;r++){const n=e[r];o[r]=t(n,r)}return o},F=(e,t)=>{for(let n=0,o=e.length;n<o;n++){const o=e[n];t(o,n)}},z=(e,t)=>{for(let n=e.length-1;n>=0;n--){const o=e[n];t(o,n)}},j=(e,t)=>{const n=[],o=[];for(let r=0,s=e.length;r<s;r++){const s=e[r],a=t(s,r)?n:o;a.push(s)}return{pass:n,fail:o}},U=(e,t)=>{const n=[];for(let o=0,r=e.length;o<r;o++){const r=e[o];t(r,o)&&n.push(r)}return n},H=(e,t,n)=>(z(e,((e,o)=>{n=t(n,e,o)})),n),$=(e,t,n)=>(F(e,((e,o)=>{n=t(n,e,o)})),n),V=(e,t,n)=>{for(let o=0,r=e.length;o<r;o++){const r=e[o];if(t(r,o))return A.some(r);if(n(r,o))break}return A.none()},W=(e,t)=>V(e,t,O),q=(e,t)=>{for(let n=0,o=e.length;n<o;n++){const o=e[n];if(t(o,n))return A.some(n)}return A.none()},G=e=>{const t=[];for(let n=0,o=e.length;n<o;++n){if(!c(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);D.apply(t,e[n])}return t},K=(e,t)=>G(L(e,t)),Y=(e,t)=>{for(let n=0,o=e.length;n<o;++n){const o=e[n];if(!0!==t(o,n))return!1}return!0},X=e=>{const t=R.call(e,0);return t.reverse(),t},J=(e,t)=>{const n={};for(let o=0,r=e.length;o<r;o++){const r=e[o];n[String(r)]=t(r,o)}return n},Q=(e,t)=>{const n=R.call(e,0);return n.sort(t),n},Z=(e,t)=>t>=0&&t<e.length?A.some(e[t]):A.none(),ee=e=>Z(e,0),te=e=>Z(e,e.length-1),ne=(e,t)=>{for(let n=0;n<e.length;n++){const o=t(e[n],n);if(o.isSome())return o}return A.none()},oe=Object.keys,re=Object.hasOwnProperty,se=(e,t)=>{const n=oe(e);for(let o=0,r=n.length;o<r;o++){const r=n[o],s=e[r];t(s,r)}},ae=(e,t)=>ie(e,((e,n)=>({k:n,v:t(e,n)}))),ie=(e,t)=>{const n={};return se(e,((e,o)=>{const r=t(e,o);n[r.k]=r.v})),n},le=e=>(t,n)=>{e[n]=t},ce=(e,t,n,o)=>{se(e,((e,r)=>{(t(e,r)?n:o)(e,r)}))},de=(e,t)=>{const n={};return ce(e,t,le(n),v),n},ue=(e,t)=>{const n=[];return se(e,((e,o)=>{n.push(t(e,o))})),n},me=e=>ue(e,w),pe=(e,t)=>fe(e,t)?A.from(e[t]):A.none(),fe=(e,t)=>re.call(e,t),ge=(e,t)=>fe(e,t)&&void 0!==e[t]&&null!==e[t],he=e=>{for(const t in e)if(re.call(e,t))return!1;return!0},ve="undefined"!==typeof window?window:Function("return this;")(),be=(e,t)=>{let n=void 0!==t&&null!==t?t:ve;for(let o=0;o<e.length&&void 0!==n&&null!==n;++o)n=n[e[o]];return n},ye=(e,t)=>{const n=e.split(".");return be(n,t)},xe=(e,t)=>ye(e,t),we=(e,t)=>{const n=xe(e,t);if(void 0===n||null===n)throw new Error(e+" not available on this browser");return n},Ce=Object.getPrototypeOf,Se=e=>we("HTMLElement",e),_e=e=>{const t=ye("ownerDocument.defaultView",e);return l(e)&&(Se(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(Ce(e).constructor.name))},ke=8,Ee=9,Oe=11,Te=1,Ae=3,Re=e=>{const t=e.dom.nodeName;return t.toLowerCase()},Ne=e=>e.dom.nodeType,De=e=>t=>Ne(t)===e,Be=e=>Ne(e)===ke||"#comment"===Re(e),Me=e=>Ie(e)&&_e(e.dom),Ie=De(Te),Pe=De(Ae),Le=De(Ee),Fe=De(Oe),ze=e=>t=>Ie(t)&&Re(t)===e,je=(e,t,n)=>{if(!(i(n)||u(n)||h(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},Ue=(e,t,n)=>{je(e.dom,t,n)},He=(e,t)=>{const n=e.dom;se(t,((e,t)=>{je(n,t,e)}))},$e=(e,t)=>{se(t,((t,n)=>{t.fold((()=>{qe(e,n)}),(t=>{je(e.dom,n,t)}))}))},Ve=(e,t)=>{const n=e.dom.getAttribute(t);return null===n?void 0:n},We=(e,t)=>A.from(Ve(e,t)),qe=(e,t)=>{e.dom.removeAttribute(t)},Ge=e=>$(e.dom.attributes,((e,t)=>(e[t.name]=t.value,e)),{}),Ke=(e,t)=>{const n=t||document,o=n.createElement("div");if(o.innerHTML=e,!o.hasChildNodes()||o.childNodes.length>1){const t="HTML does not have a single root node";throw console.error(t,e),new Error(t)}return Je(o.childNodes[0])},Ye=(e,t)=>{const n=t||document,o=n.createElement(e);return Je(o)},Xe=(e,t)=>{const n=t||document,o=n.createTextNode(e);return Je(o)},Je=e=>{if(null===e||void 0===e)throw new Error("Node cannot be null or undefined");return{dom:e}},Qe=(e,t,n)=>A.from(e.dom.elementFromPoint(t,n)).map(Je),Ze={fromHtml:Ke,fromTag:Ye,fromText:Xe,fromDom:Je,fromPoint:Qe},et=(e,t)=>{const n=e.dom;if(n.nodeType!==Te)return!1;{const e=n;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},tt=e=>e.nodeType!==Te&&e.nodeType!==Ee&&e.nodeType!==Oe||0===e.childElementCount,nt=(e,t)=>{const n=void 0===t?document:t.dom;return tt(n)?[]:L(n.querySelectorAll(e),Ze.fromDom)},ot=(e,t)=>{const n=void 0===t?document:t.dom;return tt(n)?A.none():A.from(n.querySelector(e)).map(Ze.fromDom)},rt=(e,t)=>e.dom===t.dom,st=(e,t)=>{const n=e.dom,o=t.dom;return n!==o&&n.contains(o)},at=et,it=e=>Ze.fromDom(e.dom.ownerDocument),lt=e=>Le(e)?e:it(e),ct=e=>Ze.fromDom(lt(e).dom.documentElement),dt=e=>Ze.fromDom(lt(e).dom.defaultView),ut=e=>A.from(e.dom.parentNode).map(Ze.fromDom),mt=e=>A.from(e.dom.parentElement).map(Ze.fromDom),pt=(e,t)=>{const n=g(t)?t:O;let o=e.dom;const r=[];while(null!==o.parentNode&&void 0!==o.parentNode){const e=o.parentNode,t=Ze.fromDom(e);if(r.push(t),!0===n(t))break;o=e}return r},ft=e=>A.from(e.dom.previousSibling).map(Ze.fromDom),gt=e=>A.from(e.dom.nextSibling).map(Ze.fromDom),ht=e=>L(e.dom.childNodes,Ze.fromDom),vt=(e,t)=>{const n=e.dom.childNodes;return A.from(n[t]).map(Ze.fromDom)},bt=e=>vt(e,0),yt=(e,t)=>{const n=ut(e);n.each((n=>{n.dom.insertBefore(t.dom,e.dom)}))},xt=(e,t)=>{const n=gt(e);n.fold((()=>{const n=ut(e);n.each((e=>{Ct(e,t)}))}),(e=>{yt(e,t)}))},wt=(e,t)=>{const n=bt(e);n.fold((()=>{Ct(e,t)}),(n=>{e.dom.insertBefore(t.dom,n.dom)}))},Ct=(e,t)=>{e.dom.appendChild(t.dom)},St=(e,t,n)=>{vt(e,n).fold((()=>{Ct(e,t)}),(e=>{yt(e,t)}))},_t=(e,t)=>{yt(e,t),Ct(t,e)},kt=(e,t)=>{F(t,((n,o)=>{const r=0===o?e:t[o-1];xt(r,n)}))},Et=(e,t)=>{F(t,(t=>{Ct(e,t)}))},Ot=e=>{e.dom.textContent="",F(ht(e),(e=>{Tt(e)}))},Tt=e=>{const t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},At=e=>{const t=ht(e);t.length>0&&kt(e,t),Tt(e)},Rt=(e,t)=>Ze.fromDom(e.dom.cloneNode(t)),Nt=e=>Rt(e,!1),Dt=e=>Rt(e,!0),Bt=(e,t)=>{const n=Ze.fromTag(t),o=Ge(e);return He(n,o),n},Mt=(e,t)=>{const n=Bt(e,t),o=ht(Dt(e));return Et(n,o),n},It=(e,t)=>{const n=Bt(e,t);xt(e,n);const o=ht(e);return Et(n,o),Tt(e),n},Pt=["tfoot","thead","tbody","colgroup"],Lt=e=>M(Pt,e),Ft=(e,t)=>({rows:e,columns:t}),zt=(e,t)=>({row:e,column:t}),jt=(e,t,n)=>({element:e,rowspan:t,colspan:n}),Ut=(e,t,n,o)=>({element:e,rowspan:t,colspan:n,isNew:o}),Ht=(e,t,n,o,r,s)=>({element:e,rowspan:t,colspan:n,row:o,column:r,isLocked:s}),$t=(e,t,n)=>({element:e,cells:t,section:n}),Vt=(e,t,n,o)=>({element:e,cells:t,section:n,isNew:o}),Wt=(e,t,n)=>({element:e,isNew:t,isLocked:n}),qt=(e,t,n,o)=>({element:e,cells:t,section:n,isNew:o}),Gt=(e,t,n,o)=>({startRow:e,startCol:t,finishRow:n,finishCol:o}),Kt=(e,t,n)=>({element:e,colspan:t,column:n}),Yt=(e,t)=>({element:e,columns:t}),Xt=e=>Fe(e)&&f(e.dom.host),Jt=g(Element.prototype.attachShadow)&&g(Node.prototype.getRootNode),Qt=x(Jt),Zt=Jt?e=>Ze.fromDom(e.dom.getRootNode()):lt,en=e=>{const t=Zt(e);return Xt(t)?A.some(t):A.none()},tn=e=>Ze.fromDom(e.dom.host),nn=e=>{if(Qt()&&f(e.target)){const t=Ze.fromDom(e.target);if(Ie(t)&&on(t)&&e.composed&&e.composedPath){const t=e.composedPath();if(t)return ee(t)}}return A.from(e.target)},on=e=>f(e.dom.shadowRoot),rn=e=>{const t=Pe(e)?e.dom.parentNode:e.dom;if(void 0===t||null===t||null===t.ownerDocument)return!1;const n=t.ownerDocument;return en(Ze.fromDom(t)).fold((()=>n.body.contains(t)),y(rn,tn))},sn=()=>an(Ze.fromDom(document)),an=e=>{const t=e.dom.body;if(null===t||void 0===t)throw new Error("Body is not available yet");return Ze.fromDom(t)},ln=(e,t,n)=>U(pt(e,n),t),cn=(e,t)=>U(ht(e),t),dn=(e,t)=>{let n=[];return F(ht(e),(e=>{t(e)&&(n=n.concat([e])),n=n.concat(dn(e,t))})),n},un=(e,t,n)=>ln(e,(e=>et(e,t)),n),mn=(e,t)=>cn(e,(e=>et(e,t))),pn=(e,t)=>nt(t,e);var fn=(e,t,n,o,r)=>e(n,o)?A.some(n):g(r)&&r(n)?A.none():t(n,o,r);const gn=(e,t,n)=>{let o=e.dom;const r=g(n)?n:O;while(o.parentNode){o=o.parentNode;const e=Ze.fromDom(o);if(t(e))return A.some(e);if(r(e))break}return A.none()},hn=(e,t,n)=>{const o=(e,t)=>t(e);return fn(o,gn,e,t,n)},vn=(e,t)=>{const n=e=>t(Ze.fromDom(e)),o=W(e.dom.childNodes,n);return o.map(Ze.fromDom)},bn=(e,t)=>{const n=e=>{for(let o=0;o<e.childNodes.length;o++){const r=Ze.fromDom(e.childNodes[o]);if(t(r))return A.some(r);const s=n(e.childNodes[o]);if(s.isSome())return s}return A.none()};return n(e.dom)},yn=(e,t,n)=>gn(e,(e=>et(e,t)),n),xn=(e,t)=>vn(e,(e=>et(e,t))),wn=(e,t)=>ot(t,e),Cn=(e,t,n)=>{const o=(e,t)=>et(e,t);return fn(o,yn,e,t,n)},Sn=(e,t,n=C)=>e.exists((e=>n(e,t))),_n=e=>{const t=[],n=e=>{t.push(e)};for(let o=0;o<e.length;o++)e[o].each(n);return t},kn=(e,t)=>void 0!==e&&null!==e?t(e):A.none(),En=(e,t)=>e?A.some(t):A.none(),On=(e,t,n)=>""===t||e.length>=t.length&&e.substr(n,n+t.length)===t,Tn=(e,t,n=0,o)=>{const r=e.indexOf(t,n);return-1!==r&&(!!m(o)||r+t.length<=o)},An=(e,t)=>On(e,t,0),Rn=(e,t)=>On(e,t,e.length-t.length),Nn=e=>t=>t.replace(e,""),Dn=Nn(/^\s+|\s+$/g),Bn=e=>e.length>0,Mn=e=>{const t=parseFloat(e);return isNaN(t)?A.none():A.some(t)},In=e=>void 0!==e.style&&g(e.style.getPropertyValue),Pn=(e,t,n)=>{if(!i(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);In(e)&&e.style.setProperty(t,n)},Ln=(e,t)=>{In(e)&&e.style.removeProperty(t)},Fn=(e,t,n)=>{const o=e.dom;Pn(o,t,n)},zn=(e,t)=>{const n=e.dom;se(t,((e,t)=>{Pn(n,t,e)}))},jn=(e,t)=>{const n=e.dom,o=window.getComputedStyle(n),r=o.getPropertyValue(t);return""!==r||rn(e)?r:Un(n,t)},Un=(e,t)=>In(e)?e.style.getPropertyValue(t):"",Hn=(e,t)=>{const n=e.dom,o=Un(n,t);return A.from(o).filter((e=>e.length>0))},$n=(e,t)=>{const n=e.dom;Ln(n,t),Sn(We(e,"style").map(Dn),"")&&qe(e,"style")},Vn=(e,t)=>{const n=e.dom,o=t.dom;In(n)&&In(o)&&(o.style.cssText=n.style.cssText)},Wn=(e,t,n=0)=>We(e,t).map((e=>parseInt(e,10))).getOr(n),qn=(e,t)=>Wn(e,t,1),Gn=e=>ze("col")(e)?Wn(e,"span",1)>1:qn(e,"colspan")>1,Kn=e=>qn(e,"rowspan")>1,Yn=(e,t)=>parseInt(jn(e,t),10),Xn=x(10),Jn=x(10),Qn=(e,t)=>Zn(e,t,T),Zn=(e,t,n)=>K(ht(e),(e=>et(e,t)?n(e)?[e]:[]:Zn(e,t,n))),eo=(e,t,n=O)=>{if(n(t))return A.none();if(M(e,Re(t)))return A.some(t);const o=e=>et(e,"table")||n(e);return yn(t,e.join(","),o)},to=(e,t)=>eo(["td","th"],e,t),no=e=>Qn(e,"th,td"),oo=e=>et(e,"colgroup")?mn(e,"col"):K(ao(e),(e=>mn(e,"col"))),ro=(e,t)=>Cn(e,"table",t),so=e=>Qn(e,"tr"),ao=e=>ro(e).fold(x([]),(e=>mn(e,"colgroup"))),io=(e,t)=>L(e,(e=>{if("colgroup"===Re(e)){const t=L(oo(e),(e=>{const t=Wn(e,"span",1);return jt(e,1,t)}));return $t(e,t,"colgroup")}{const n=L(no(e),(e=>{const t=Wn(e,"rowspan",1),n=Wn(e,"colspan",1);return jt(e,t,n)}));return $t(e,n,t(e))}})),lo=e=>ut(e).map((e=>{const t=Re(e);return Lt(t)?t:"tbody"})).getOr("tbody"),co=e=>{const t=so(e),n=ao(e),o=[...n,...t];return io(o,lo)},uo=(e,t)=>io(e,(()=>t)),mo=e=>{let t,n=!1;return(...o)=>(n||(n=!0,t=e.apply(null,o)),t)},po=(e,t,n,o)=>{const r=e.isiOS()&&!0===/ipad/i.test(n),s=e.isiOS()&&!r,a=e.isiOS()||e.isAndroid(),i=a||o("(pointer:coarse)"),l=r||!s&&a&&o("(min-device-width:768px)"),c=s||a&&!l,d=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n),u=!c&&!l&&!d;return{isiPad:x(r),isiPhone:x(s),isTablet:x(l),isPhone:x(c),isTouch:x(i),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:x(d),isDesktop:x(u)}},fo=(e,t)=>{for(let n=0;n<e.length;n++){const o=e[n];if(o.test(t))return o}},go=(e,t)=>{const n=fo(e,t);if(!n)return{major:0,minor:0};const o=e=>Number(t.replace(n,"$"+e));return bo(o(1),o(2))},ho=(e,t)=>{const n=String(t).toLowerCase();return 0===e.length?vo():go(e,n)},vo=()=>bo(0,0),bo=(e,t)=>({major:e,minor:t}),yo={nu:bo,detect:ho,unknown:vo},xo=(e,t)=>ne(t.brands,(t=>{const n=t.brand.toLowerCase();return W(e,(e=>{var t;return n===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())})).map((e=>({current:e.name,version:yo.nu(parseInt(t.version,10),0)})))})),wo=(e,t)=>{const n=String(t).toLowerCase();return W(e,(e=>e.search(n)))},Co=(e,t)=>wo(e,t).map((e=>{const n=yo.detect(e.versionRegexes,t);return{current:e.name,version:n}})),So=(e,t)=>wo(e,t).map((e=>{const n=yo.detect(e.versionRegexes,t);return{current:e.name,version:n}})),_o=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ko=e=>t=>Tn(t,e),Eo=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>Tn(e,"edge/")&&Tn(e,"chrome")&&Tn(e,"safari")&&Tn(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,_o],search:e=>Tn(e,"chrome")&&!Tn(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>Tn(e,"msie")||Tn(e,"trident")},{name:"Opera",versionRegexes:[_o,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ko("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ko("firefox")},{name:"Safari",versionRegexes:[_o,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(Tn(e,"safari")||Tn(e,"mobile/"))&&Tn(e,"applewebkit")}],Oo=[{name:"Windows",search:ko("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>Tn(e,"iphone")||Tn(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ko("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:ko("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ko("linux"),versionRegexes:[]},{name:"Solaris",search:ko("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ko("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ko("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],To={browsers:x(Eo),oses:x(Oo)},Ao="Edge",Ro="Chromium",No="IE",Do="Opera",Bo="Firefox",Mo="Safari",Io=()=>Po({current:void 0,version:yo.unknown()}),Po=e=>{const t=e.current,n=e.version,o=e=>()=>t===e;return{current:t,version:n,isEdge:o(Ao),isChromium:o(Ro),isIE:o(No),isOpera:o(Do),isFirefox:o(Bo),isSafari:o(Mo)}},Lo={unknown:Io,nu:Po,edge:x(Ao),chromium:x(Ro),ie:x(No),opera:x(Do),firefox:x(Bo),safari:x(Mo)},Fo="Windows",zo="iOS",jo="Android",Uo="Linux",Ho="macOS",$o="Solaris",Vo="FreeBSD",Wo="ChromeOS",qo=()=>Go({current:void 0,version:yo.unknown()}),Go=e=>{const t=e.current,n=e.version,o=e=>()=>t===e;return{current:t,version:n,isWindows:o(Fo),isiOS:o(zo),isAndroid:o(jo),isMacOS:o(Ho),isLinux:o(Uo),isSolaris:o($o),isFreeBSD:o(Vo),isChromeOS:o(Wo)}},Ko={unknown:qo,nu:Go,windows:x(Fo),ios:x(zo),android:x(jo),linux:x(Uo),macos:x(Ho),solaris:x($o),freebsd:x(Vo),chromeos:x(Wo)},Yo=(e,t,n)=>{const o=To.browsers(),r=To.oses(),s=t.bind((e=>xo(o,e))).orThunk((()=>Co(o,e))).fold(Lo.unknown,Lo.nu),a=So(r,e).fold(Ko.unknown,Ko.nu),i=po(a,s,e,n);return{browser:s,os:a,deviceType:i}},Xo={detect:Yo},Jo=e=>window.matchMedia(e).matches;let Qo=mo((()=>Xo.detect(navigator.userAgent,A.from(navigator.userAgentData),Jo)));const Zo=()=>Qo(),er=(e,t)=>{const n=(t,n)=>{if(!h(n)&&!n.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+n);const o=t.dom;In(o)&&(o.style[e]=n+"px")},o=n=>{const o=t(n);if(o<=0||null===o){const t=jn(n,e);return parseFloat(t)||0}return o},r=o,s=(e,t)=>$(t,((t,n)=>{const o=jn(e,n),r=void 0===o?0:parseInt(o,10);return isNaN(r)?t:t+r}),0),a=(e,t,n)=>{const o=s(e,n),r=t>o?t-o:0;return r};return{set:n,get:o,getOuter:r,aggregate:s,max:a}},tr=(e,t)=>Mn(e).getOr(t),nr=(e,t,n)=>tr(jn(e,t),n),or=(e,t,n,o)=>{const r=nr(e,`padding-${n}`,0),s=nr(e,`padding-${o}`,0),a=nr(e,`border-${n}-width`,0),i=nr(e,`border-${o}-width`,0);return t-r-s-a-i},rr=(e,t)=>{const n=e.dom,o=n.getBoundingClientRect().width||n.offsetWidth;return"border-box"===t?o:or(e,o,"left","right")},sr=e=>nr(e,"height",e.dom.offsetHeight),ar=e=>nr(e,"width",e.dom.offsetWidth),ir=e=>rr(e,"content-box"),lr=er("width",(e=>e.dom.offsetWidth)),cr=e=>lr.get(e),dr=e=>lr.getOuter(e),ur=ir,mr=ar,pr=(e,t,n)=>{const o=e.cells,r=o.slice(0,t),s=o.slice(t),a=r.concat(n).concat(s);return hr(e,a)},fr=(e,t,n)=>pr(e,t,[n]),gr=(e,t,n)=>{const o=e.cells;o[t]=n},hr=(e,t)=>qt(e.element,t,e.section,e.isNew),vr=(e,t)=>{const n=e.cells,o=L(n,t);return qt(e.element,o,e.section,e.isNew)},br=(e,t)=>e.cells[t],yr=(e,t)=>br(e,t).element,xr=e=>e.cells.length,wr=e=>{const t=j(e,(e=>"colgroup"===e.section));return{rows:t.fail,cols:t.pass}},Cr=(e,t,n)=>{const o=L(e.cells,n);return qt(t(e.element),o,e.section,!0)},Sr="data-snooker-locked-cols",_r=e=>We(e,Sr).bind((e=>A.from(e.match(/\d+/g)))).map((e=>J(e,T))),kr=e=>{const t=$(wr(e).rows,((e,t)=>(F(t.cells,((t,n)=>{t.isLocked&&(e[n]=!0)})),e)),{}),n=ue(t,((e,t)=>parseInt(t,10)));return Q(n)},Er=(e,t)=>e+","+t,Or=(e,t,n)=>A.from(e.access[Er(t,n)]),Tr=(e,t,n)=>{const o=Ar(e,(e=>n(t,e.element)));return o.length>0?A.some(o[0]):A.none()},Ar=(e,t)=>{const n=K(e.all,(e=>e.cells));return U(n,t)},Rr=e=>{const t={};let n=0;return F(e.cells,(e=>{const o=e.colspan;P(o,(r=>{const s=n+r;t[s]=Kt(e.element,o,s)})),n+=o})),t},Nr=e=>{const t={},n=[],o=ee(e).map((e=>e.element)).bind(ro),r=o.bind(_r).getOr({});let s=0,a=0,i=0;const{pass:l,fail:c}=j(e,(e=>"colgroup"===e.section));F(c,(e=>{const o=[];F(e.cells,(e=>{let n=0;while(void 0!==t[Er(i,n)])n++;const s=ge(r,n.toString()),l=Ht(e.element,e.rowspan,e.colspan,i,n,s);for(let o=0;o<e.colspan;o++)for(let r=0;r<e.rowspan;r++){const e=i+r,s=n+o,c=Er(e,s);t[c]=l,a=Math.max(a,s+1)}o.push(l)})),s++,n.push($t(e.element,o,e.section)),i++}));const{columns:d,colgroups:u}=te(l).map((e=>{const t=Rr(e),n=Yt(e.element,me(t));return{colgroups:[n],columns:t}})).getOrThunk((()=>({colgroups:[],columns:{}}))),m=Ft(s,a);return{grid:m,access:t,all:n,columns:d,colgroups:u}},Dr=e=>{const t=co(e);return Nr(t)},Br=e=>K(e.all,(e=>e.cells)),Mr=e=>me(e.columns),Ir=e=>oe(e.columns).length>0,Pr=(e,t)=>A.from(e.columns[t]),Lr={fromTable:Dr,generate:Nr,getAt:Or,findItem:Tr,filterItems:Ar,justCells:Br,justColumns:Mr,hasColumns:Ir,getColumnAt:Pr},Fr=(e,t=T)=>{const n=e.grid,o=P(n.columns,w),r=P(n.rows,w);return L(o,(n=>{const o=()=>K(r,(t=>Lr.getAt(e,t,n).filter((e=>e.column===n)).toArray())),s=e=>1===e.colspan&&t(e.element),a=()=>Lr.getAt(e,0,n);return zr(o,s,a)}))},zr=(e,t,n)=>{const o=e(),r=W(o,t),s=r.orThunk((()=>A.from(o[0]).orThunk(n)));return s.map((e=>e.element))},jr=e=>{const t=e.grid,n=P(t.rows,w),o=P(t.columns,w);return L(n,(t=>{const n=()=>K(o,(n=>Lr.getAt(e,t,n).filter((e=>e.row===t)).fold(x([]),(e=>[e])))),r=e=>1===e.rowspan,s=()=>Lr.getAt(e,t,0);return zr(n,r,s)}))},Ur=(e,t)=>{if(t<0||t>=e.length-1)return A.none();const n=e[t].fold((()=>{const n=X(e.slice(0,t));return ne(n,((e,t)=>e.map((e=>({value:e,delta:t+1})))))}),(e=>A.some({value:e,delta:0}))),o=e[t+1].fold((()=>{const n=e.slice(t+1);return ne(n,((e,t)=>e.map((e=>({value:e,delta:t+1})))))}),(e=>A.some({value:e,delta:1})));return n.bind((e=>o.map((t=>{const n=t.delta+e.delta;return Math.abs(t.value-e.value)/n}))))},Hr=(e,t)=>n=>"rtl"===$r(n)?t:e,$r=e=>"rtl"===jn(e,"direction")?"rtl":"ltr",Vr=er("height",(e=>{const t=e.dom;return rn(e)?t.getBoundingClientRect().height:t.offsetHeight})),Wr=e=>Vr.get(e),qr=e=>Vr.getOuter(e),Gr=sr,Kr=(e,t)=>{const n=(n,o)=>Kr(e+n,t+o);return{left:e,top:t,translate:n}},Yr=Kr,Xr=e=>{const t=e.getBoundingClientRect();return Yr(t.left,t.top)},Jr=(e,t)=>void 0!==e?e:void 0!==t?t:0,Qr=e=>{const t=e.dom.ownerDocument,n=t.body,o=t.defaultView,r=t.documentElement;if(n===e.dom)return Yr(n.offsetLeft,n.offsetTop);const s=Jr(null===o||void 0===o?void 0:o.pageYOffset,r.scrollTop),a=Jr(null===o||void 0===o?void 0:o.pageXOffset,r.scrollLeft),i=Jr(r.clientTop,n.clientTop),l=Jr(r.clientLeft,n.clientLeft);return Zr(e).translate(a-l,s-i)},Zr=e=>{const t=e.dom,n=t.ownerDocument,o=n.body;return o===t?Yr(o.offsetLeft,o.offsetTop):rn(e)?Xr(t):Yr(0,0)},es=(e,t)=>({row:e,y:t}),ts=(e,t)=>({col:e,x:t}),ns=e=>{const t=Qr(e);return t.left+dr(e)},os=e=>Qr(e).left,rs=(e,t)=>ts(e,os(t)),ss=(e,t)=>ts(e,ns(t)),as=e=>Qr(e).top,is=(e,t)=>es(e,as(t)),ls=(e,t)=>es(e,as(t)+qr(t)),cs=(e,t,n)=>{if(0===n.length)return[];const o=L(n.slice(1),((t,n)=>t.map((t=>e(n,t))))),r=n[n.length-1].map((e=>t(n.length-1,e)));return o.concat([r])},ds=e=>-e,us={delta:w,positions:e=>cs(is,ls,e),edge:as},ms={delta:w,edge:os,positions:e=>cs(rs,ss,e)},ps={delta:ds,edge:ns,positions:e=>cs(ss,rs,e)},fs=Hr(ms,ps),gs={delta:(e,t)=>fs(t).delta(e,t),positions:(e,t)=>fs(t).positions(e,t),edge:e=>fs(e).edge(e)},hs={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},vs=(()=>{const e="[0-9]+",t="[+-]?"+e,n="[eE]"+t,o="\\.",r=e=>`(?:${e})?`,s=["Infinity",e+o+r(e)+r(n),o+e+r(n),e+r(n)].join("|"),a=`[+-]?(?:${s})`;return new RegExp(`^(${a})(.*)$`)})(),bs=(e,t)=>I(t,(t=>I(hs[t],(t=>e===t)))),ys=(e,t)=>{const n=A.from(vs.exec(e));return n.bind((e=>{const n=Number(e[1]),o=e[2];return bs(o,t)?A.some({value:n,unit:o}):A.none()}))},xs=/(\d+(\.\d+)?)%/,ws=/(\d+(\.\d+)?)px|em/,Cs=ze("col"),Ss=(e,t,n)=>{const o=mt(e).getOrThunk((()=>an(it(e))));return t(e)/n(o)*100},_s=(e,t)=>{Fn(e,"width",t+"px")},ks=(e,t)=>{Fn(e,"width",t+"%")},Es=(e,t)=>{Fn(e,"height",t+"px")},Os=e=>Gr(e)+"px",Ts=(e,t,n,o)=>{const r=ro(e).map((e=>{const o=n(e);return Math.floor(t/100*o)})).getOr(t);return o(e,r),r},As=(e,t,n,o)=>{const r=parseFloat(e);return Rn(e,"%")&&"table"!==Re(t)?Ts(t,r,n,o):r},Rs=e=>{const t=Os(e);return t?As(t,e,Wr,Es):Wr(e)},Ns=(e,t,n)=>{const o=n(e),r=qn(e,t);return o/r},Ds=(e,t)=>Hn(e,t).orThunk((()=>We(e,t).map((e=>e+"px")))),Bs=e=>Ds(e,"width"),Ms=e=>Ds(e,"height"),Is=e=>Ss(e,cr,ur),Ps=e=>Cs(e)?cr(e):mr(e),Ls=e=>Ns(e,"rowspan",Rs),Fs=e=>{const t=Bs(e);return t.bind((e=>ys(e,["fixed","relative","empty"])))},zs=(e,t,n)=>{Fn(e,"width",t+n)},js=e=>cr(e)+"px",Us=e=>Ss(e,cr,ur)+"%",Hs=e=>Bs(e).exists((e=>xs.test(e))),$s=e=>Bs(e).exists((e=>ws.test(e))),Vs=e=>Bs(e).isNone(),Ws=x(xs),qs=ze("col"),Gs=e=>Bs(e).getOrThunk((()=>Ps(e)+"px")),Ks=e=>Ms(e).getOrThunk((()=>Ls(e)+"px")),Ys=e=>L(Lr.justColumns(e),(e=>A.from(e.element))),Xs=e=>{const t=Zo().browser,n=t.isChromium()||t.isFirefox();return!qs(e)||n},Js=(e,t,n,o,r,s)=>e.filter(o).fold((()=>s(Ur(n,t))),(e=>r(e))),Qs=(e,t,n,o)=>{const r=Fr(e),s=Lr.hasColumns(e)?Ys(e):r,a=[A.some(gs.edge(t))].concat(L(gs.positions(r,t),(e=>e.map((e=>e.x))))),i=_(Gn);return L(s,((e,t)=>Js(e,t,a,i,(e=>{if(Xs(e))return n(e);{const e=kn(r[t],w);return Js(e,t,a,i,(e=>o(A.some(cr(e)))),o)}}),o)))},Zs=e=>e.map((e=>e+"px")).getOr(""),ea=(e,t)=>Qs(e,t,Gs,Zs),ta=(e,t,n)=>Qs(e,t,Is,(e=>e.fold((()=>n.minCellWidth()),(e=>e/n.pixelWidth()*100)))),na=(e,t,n)=>Qs(e,t,Ps,(e=>e.getOrThunk(n.minCellWidth))),oa=(e,t,n,o,r)=>{const s=jr(e),a=[A.some(n.edge(t))].concat(L(n.positions(s,t),(e=>e.map((e=>e.y)))));return L(s,((e,t)=>Js(e,t,a,_(Kn),o,r)))},ra=(e,t,n)=>oa(e,t,n,Ls,(e=>e.getOrThunk(Jn))),sa=(e,t,n)=>oa(e,t,n,Ks,Zs),aa=(e,t)=>()=>rn(e)?t(e):parseFloat(Hn(e,"width").getOr("0")),ia=e=>{const t=aa(e,cr),n=x(0),o=(t,n)=>na(t,e,n);return{width:t,pixelWidth:t,getWidths:o,getCellDelta:n,singleColumnWidth:x([0]),minCellWidth:n,setElementWidth:v,adjustTableWidth:v,isRelative:!0,label:"none"}},la=e=>{const t=aa(e,(e=>parseFloat(Us(e)))),n=aa(e,cr),o=e=>e/n()*100,r=(e,t)=>[100-e],s=()=>Xn()/n()*100,a=n=>{const o=t(),r=n/100*o,s=o+r;ks(e,s)},i=(t,n)=>ta(t,e,n);return{width:t,pixelWidth:n,getWidths:i,getCellDelta:o,singleColumnWidth:r,minCellWidth:s,setElementWidth:ks,adjustTableWidth:a,isRelative:!0,label:"percent"}},ca=e=>{const t=aa(e,cr),n=w,o=(e,t)=>{const n=Math.max(Xn(),e+t);return[n-e]},r=n=>{const o=t()+n;_s(e,o)},s=(t,n)=>na(t,e,n);return{width:t,pixelWidth:t,getWidths:s,getCellDelta:n,singleColumnWidth:o,minCellWidth:Xn,setElementWidth:_s,adjustTableWidth:r,isRelative:!1,label:"pixel"}},da=(e,t)=>{const n=Ws().exec(t);return null!==n?la(e):ca(e)},ua=e=>{const t=Bs(e);return t.fold((()=>ia(e)),(t=>da(e,t)))},ma={getTableSize:ua,pixelSize:ca,percentageSize:la,noneSize:ia},pa=(e,t,n,o,r,s)=>({minRow:e,minCol:t,maxRow:n,maxCol:o,allCells:r,selectedCells:s}),fa=(e,t)=>{const n=e.grid.columns,o=e.grid.rows;let r=o,s=n,a=0,i=0;const l=[],c=[];return se(e.access,(e=>{if(l.push(e),t(e)){c.push(e);const t=e.row,n=t+e.rowspan-1,o=e.column,l=o+e.colspan-1;t<r?r=t:n>a&&(a=n),o<s?s=o:l>i&&(i=l)}})),pa(r,s,a,i,l,c)},ga=(e,t,n)=>{const o=e[n].element,r=Ze.fromTag("td");Ct(r,Ze.fromTag("br"));const s=t?Ct:wt;s(o,r)},ha=(e,t,n,o)=>{const r=U(e,(e=>"colgroup"!==e.section)),s=t.grid.columns,a=t.grid.rows;for(let i=0;i<a;i++){let e=!1;for(let a=0;a<s;a++)if(!(i<n.minRow||i>n.maxRow||a<n.minCol||a>n.maxCol)){const n=Lr.getAt(t,i,a).filter(o).isNone();n?ga(r,e,i):e=!0}}},va=(e,t,n,o)=>{se(n.columns,(e=>{(e.column<t.minCol||e.column>t.maxCol)&&Tt(e.element)}));const r=U(Qn(e,"tr"),(e=>0===e.dom.childElementCount));F(r,Tt),t.minCol!==t.maxCol&&t.minRow!==t.maxRow||F(Qn(e,"th,td"),(e=>{qe(e,"rowspan"),qe(e,"colspan")})),qe(e,Sr),qe(e,"data-snooker-col-series");const s=ma.getTableSize(e);s.adjustTableWidth(o)},ba=(e,t,n,o)=>{if(0===o.minCol&&t.grid.columns===o.maxCol+1)return 0;const r=na(t,e,n),s=$(r,((e,t)=>e+t),0),a=$(r.slice(o.minCol,o.maxCol+1),((e,t)=>e+t),0),i=a/s*n.pixelWidth(),l=i-n.pixelWidth();return n.getCellDelta(l)},ya=(e,t)=>{const n=e=>et(e.element,t),o=Dt(e),r=co(o),s=ma.getTableSize(e),a=Lr.generate(r),i=fa(a,n),l="th:not("+t+"),td:not("+t+")",c=Zn(o,"th,td",(e=>et(e,l)));F(c,Tt),ha(r,a,i,n);const d=Lr.fromTable(e),u=ba(e,d,s,i);return va(o,i,a,u),o},xa=" ",wa=(e,t)=>{const n=n=>{if(!e(n))throw new Error("Can only get "+t+" value of a "+t+" node");return o(n).getOr("")},o=t=>e(t)?A.from(t.dom.nodeValue):A.none(),r=(n,o)=>{if(!e(n))throw new Error("Can only set raw "+t+" value of a "+t+" node");n.dom.nodeValue=o};return{get:n,getOption:o,set:r}},Ca=wa(Pe,"text"),Sa=e=>Ca.get(e),_a=e=>Ca.getOption(e),ka=(e,t)=>Ca.set(e,t),Ea=e=>"img"===Re(e)?1:_a(e).fold((()=>ht(e).length),(e=>e.length)),Oa=e=>_a(e).filter((e=>0!==e.trim().length||e.indexOf(xa)>-1)).isSome(),Ta=e=>Me(e)&&"false"===Ve(e,"contenteditable"),Aa=["img","br"],Ra=e=>{const t=Oa(e);return t||M(Aa,Re(e))||Ta(e)},Na=e=>bn(e,Ra),Da=e=>Ba(e,Ra),Ba=(e,t)=>{const n=e=>{const o=ht(e);for(let r=o.length-1;r>=0;r--){const e=o[r];if(t(e))return A.some(e);const s=n(e);if(s.isSome())return s}return A.none()};return n(e)},Ma={scope:["row","col"]},Ia=e=>()=>{const t=Ze.fromTag("td",e.dom);return Ct(t,Ze.fromTag("br",e.dom)),t},Pa=e=>()=>Ze.fromTag("col",e.dom),La=e=>()=>Ze.fromTag("colgroup",e.dom),Fa=e=>()=>Ze.fromTag("tr",e.dom),za=(e,t,n)=>{const o=Mt(e,t);return se(n,((e,t)=>{null===e?qe(o,t):Ue(o,t,e)})),o},ja=e=>e,Ua=(e,t,n)=>{const o=Na(e);return o.map((o=>{const r=n.join(","),s=un(o,r,(t=>rt(t,e)));return H(s,((e,t)=>{const n=Nt(t);return Ct(e,n),n}),t)})).getOr(t)},Ha=(e,t)=>{se(Ma,((n,o)=>We(e,o).filter((e=>M(n,e))).each((e=>Ue(t,o,e)))))},$a=(e,t,n)=>{const o=(e,t)=>{Vn(e.element,t),$n(t,"height"),1!==e.colspan&&$n(t,"width")},r=r=>{const s=Ze.fromTag(Re(r.element),t.dom),a=n.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),i=a.length>0?Ua(r.element,s,a):s;return Ct(i,Ze.fromTag("br")),o(r,s),Ha(r.element,s),e(r.element,s),s},s=n=>{const r=Ze.fromTag(Re(n.element),t.dom);return o(n,r),e(n.element,r),r};return{col:s,colgroup:La(t),row:Fa(t),cell:r,replace:za,colGap:Pa(t),gap:Ia(t)}},Va=e=>({col:Pa(e),colgroup:La(e),row:Fa(e),cell:Ia(e),replace:ja,colGap:Pa(e),gap:Ia(e)}),Wa=(e,t)=>{const n=t||document,o=n.createElement("div");return o.innerHTML=e,ht(Ze.fromDom(o))},qa=e=>L(e,Ze.fromDom),Ga=e=>Cn(e,"[contenteditable]"),Ka=(e,t=!1)=>rn(e)?e.dom.isContentEditable:Ga(e).fold(x(t),(e=>"true"===Ya(e))),Ya=e=>e.dom.contentEditable,Xa=e=>Ze.fromDom(e.getBody()),Ja=e=>t=>rt(t,Xa(e)),Qa=e=>{qe(e,"data-mce-style");const t=e=>qe(e,"data-mce-style");F(no(e),t),F(oo(e),t),F(so(e),t)},Za=e=>Ze.fromDom(e.selection.getStart()),ei=e=>e.getBoundingClientRect().width,ti=e=>e.getBoundingClientRect().height,ni=(e,t)=>{const n=e.dom.getStyle(t,"width")||e.dom.getAttrib(t,"width");return A.from(n).filter(Bn)},oi=e=>/^(\d+(\.\d+)?)%$/.test(e),ri=e=>/^(\d+(\.\d+)?)px$/.test(e),si=e=>hn(e,ze("table")).exists(Ka),ai=(e,t)=>{const n=t.column,o=t.column+t.colspan-1,r=t.row,s=t.row+t.rowspan-1;return n<=e.finishCol&&o>=e.startCol&&r<=e.finishRow&&s>=e.startRow},ii=(e,t)=>t.column>=e.startCol&&t.column+t.colspan-1<=e.finishCol&&t.row>=e.startRow&&t.row+t.rowspan-1<=e.finishRow,li=(e,t)=>{let n=!0;const o=S(ii,t);for(let r=t.startRow;r<=t.finishRow;r++)for(let s=t.startCol;s<=t.finishCol;s++)n=n&&Lr.getAt(e,r,s).exists(o);return n?A.some(t):A.none()},ci=(e,t)=>Gt(Math.min(e.row,t.row),Math.min(e.column,t.column),Math.max(e.row+e.rowspan-1,t.row+t.rowspan-1),Math.max(e.column+e.colspan-1,t.column+t.colspan-1)),di=(e,t,n)=>{const o=Lr.findItem(e,t,rt),r=Lr.findItem(e,n,rt);return o.bind((e=>r.map((t=>ci(e,t)))))},ui=(e,t,n)=>di(e,t,n).bind((t=>li(e,t))),mi=(e,t,n,o)=>Lr.findItem(e,t,rt).bind((t=>{const r=n>0?t.row+t.rowspan-1:t.row,s=o>0?t.column+t.colspan-1:t.column,a=Lr.getAt(e,r+n,s+o);return a.map((e=>e.element))})),pi=(e,t,n)=>di(e,t,n).map((t=>{const n=Lr.filterItems(e,S(ai,t));return L(n,(e=>e.element))})),fi=(e,t)=>{const n=(e,t)=>st(t,e);return Lr.findItem(e,t,n).map((e=>e.element))},gi=(e,t,n)=>ro(e).bind((o=>{const r=yi(o);return mi(r,e,t,n)})),hi=(e,t,n)=>{const o=yi(e);return pi(o,t,n)},vi=(e,t,n,o,r)=>{const s=yi(e),a=rt(e,n)?A.some(t):fi(s,t),i=rt(e,r)?A.some(o):fi(s,o);return a.bind((e=>i.bind((t=>pi(s,e,t)))))},bi=(e,t,n)=>{const o=yi(e);return ui(o,t,n)},yi=Lr.fromTable;var xi=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],wi=()=>{const e=e=>Ze.fromDom(e.dom.cloneNode(!1)),t=e=>lt(e).dom,n=e=>!!Ie(e)&&("body"===Re(e)||M(xi,Re(e))),o=e=>!!Ie(e)&&M(["br","img","hr","input"],Re(e)),r=e=>Ie(e)&&"false"===Ve(e,"contenteditable"),s=(e,t)=>e.dom.compareDocumentPosition(t.dom),a=(e,t)=>{const n=Ge(e);He(t,n)},i=e=>{const t=Re(e);return M(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],t)},l=e=>Ie(e)?We(e,"lang"):A.none();return{up:x({selector:yn,closest:Cn,predicate:gn,all:pt}),down:x({selector:pn,predicate:dn}),styles:x({get:jn,getRaw:Hn,set:Fn,remove:$n}),attrs:x({get:Ve,set:Ue,remove:qe,copyTo:a}),insert:x({before:yt,after:xt,afterAll:kt,append:Ct,appendAll:Et,prepend:wt,wrap:_t}),remove:x({unwrap:At,remove:Tt}),create:x({nu:Ze.fromTag,clone:e,text:Ze.fromText}),query:x({comparePosition:s,prevSibling:ft,nextSibling:gt}),property:x({children:ht,name:Re,parent:ut,document:t,isText:Pe,isComment:Be,isElement:Ie,isSpecial:i,getLanguage:l,getText:Sa,setText:ka,isBoundary:n,isEmptyTag:o,isNonEditable:r}),eq:rt,is:at}};const Ci=(e,t,n,o)=>{const r=n[0],s=n.slice(1);return o(e,t,r,s)},Si=(e,t,n)=>n.length>0?Ci(e,t,n,_i):A.none(),_i=(e,t,n,o)=>{const r=t(e,n);return H(o,((n,o)=>{const r=t(e,o);return ki(e,n,r)}),r)},ki=(e,t,n)=>t.bind((t=>n.filter(S(e.eq,t)))),Ei=(e,t)=>S(e.eq,t),Oi=(e,t,n,o=O)=>{const r=[t].concat(e.up().all(t)),s=[n].concat(e.up().all(n)),a=e=>{const t=q(e,o);return t.fold((()=>e),(t=>e.slice(0,t+1)))},i=a(r),l=a(s),c=W(i,(t=>I(l,Ei(e,t))));return{firstpath:i,secondpath:l,shared:c}},Ti=Si,Ai=Oi,Ri=wi(),Ni=(e,t)=>Ti(Ri,((t,n)=>e(n)),t),Di=(e,t,n)=>Ai(Ri,e,t,n),Bi=e=>yn(e,"table"),Mi=(e,t,n)=>{const o=e=>t=>void 0!==n&&n(t)||rt(t,e);return rt(e,t)?A.some({boxes:A.some([e]),start:e,finish:t}):Bi(e).bind((r=>Bi(t).bind((s=>{if(rt(r,s))return A.some({boxes:hi(r,e,t),start:e,finish:t});if(st(r,s)){const n=un(t,"td,th",o(r)),a=n.length>0?n[n.length-1]:t;return A.some({boxes:vi(r,e,r,t,s),start:e,finish:a})}if(st(s,r)){const n=un(e,"td,th",o(s)),a=n.length>0?n[n.length-1]:e;return A.some({boxes:vi(s,e,r,t,s),start:e,finish:a})}return Di(e,t).shared.bind((a=>Cn(a,"table",n).bind((n=>{const a=un(t,"td,th",o(n)),i=a.length>0?a[a.length-1]:t,l=un(e,"td,th",o(n)),c=l.length>0?l[l.length-1]:e;return A.some({boxes:vi(n,e,r,t,s),start:c,finish:i})}))))}))))},Ii=(e,t)=>{const n=pn(e,t);return n.length>0?A.some(n):A.none()},Pi=(e,t)=>W(e,(e=>et(e,t))),Li=(e,t,n)=>wn(e,t).bind((t=>wn(e,n).bind((e=>Ni(Bi,[t,e]).map((n=>({first:t,last:e,table:n}))))))),Fi=(e,t)=>yn(e,"table").bind((n=>wn(n,t).bind((t=>Mi(t,e).bind((e=>e.boxes.map((t=>({boxes:t,start:e.start,finish:e.finish}))))))))),zi=(e,t,n,o,r)=>Pi(e,r).bind((e=>gi(e,t,n).bind((e=>Fi(e,o))))),ji=(e,t)=>Ii(e,t),Ui=(e,t,n)=>Li(e,t,n).bind((t=>{const n=t=>rt(e,t),o="thead,tfoot,tbody,table",r=yn(t.first,o,n),s=yn(t.last,o,n);return r.bind((e=>s.bind((n=>rt(e,n)?bi(t.table,t.first,t.last):A.none()))))})),Hi=w,$i=e=>{const t=(e,t)=>We(e,t).exists((e=>parseInt(e,10)>1)),n=e=>t(e,"rowspan")||t(e,"colspan");return e.length>0&&Y(e,n)?A.some(e):A.none()},Vi=(e,t,n)=>t.length<=1?A.none():Ui(e,n.firstSelectedSelector,n.lastSelectedSelector).map((e=>({bounds:e,cells:t}))),Wi="data-mce-selected",qi="td["+Wi+"],th["+Wi+"]",Gi="["+Wi+"]",Ki="data-mce-first-selected",Yi="td["+Ki+"],th["+Ki+"]",Xi="data-mce-last-selected",Ji="td["+Xi+"],th["+Xi+"]",Qi=Gi,Zi={selected:Wi,selectedSelector:qi,firstSelected:Ki,firstSelectedSelector:Yi,lastSelected:Xi,lastSelectedSelector:Ji},el=(e,t,n)=>({element:n,mergable:Vi(t,e,Zi),unmergable:$i(e),selection:Hi(e)}),tl=(e,t,n)=>({element:e,clipboard:t,generators:n}),nl=(e,t,n,o)=>({selection:Hi(e),clipboard:n,generators:o}),ol=e=>ro(e).bind((e=>ji(e,Zi.firstSelectedSelector))).fold(x(e),(e=>e[0])),rl=e=>(t,n)=>{const o=Re(t),r="col"===o||"colgroup"===o?ol(t):t;return Cn(r,e,n)},sl=rl("th,td,caption"),al=rl("th,td"),il=e=>qa(e.model.table.getSelectedCells()),ll=e=>U(il(e),(e=>et(e,Zi.selectedSelector))),cl=e=>ro(e[0]).map((e=>{const t=ya(e,Qi);return Qa(t),[t]})),dl=(e,t)=>L(t,(t=>e.selection.serializer.serialize(t.dom,{}))).join(""),ul=e=>L(e,(e=>e.dom.innerText)).join(""),ml=(e,t)=>{e.on("BeforeGetContent",(t=>{const n=n=>{t.preventDefault(),cl(n).each((n=>{t.content="text"===t.format?ul(n):dl(e,n)}))};if(!0===t.selection){const t=ll(e);t.length>=1&&n(t)}})),e.on("BeforeSetContent",(n=>{if(!0===n.selection&&!0===n.paste){const o=il(e);ee(o).each((o=>{ro(o).each((r=>{const s=U(Wa(n.content),(e=>"meta"!==Re(e))),a=ze("table");if(1===s.length&&a(s[0])){n.preventDefault();const a=Ze.fromDom(e.getDoc()),i=Va(a),l=tl(o,s[0],i);t.pasteCells(r,l).each((()=>{e.focus()}))}}))}))}}))},pl=(e,t)=>({element:e,offset:t}),fl=(e,t,n)=>e.property().isText(t)&&0===e.property().getText(t).trim().length||e.property().isComment(t)?n(t).bind((t=>fl(e,t,n).orThunk((()=>A.some(t))))):A.none(),gl=(e,t)=>{if(e.property().isText(t))return e.property().getText(t).length;const n=e.property().children(t);return n.length},hl=(e,t)=>{const n=fl(e,t,e.query().prevSibling).getOr(t);if(e.property().isText(n))return pl(n,gl(e,n));const o=e.property().children(n);return o.length>0?hl(e,o[o.length-1]):pl(n,gl(e,n))},vl=hl,bl=wi(),yl=e=>vl(bl,e),xl=(e,t)=>{if(!Gn(e)){const n=Fs(e);n.each((n=>{const o=n.value/2;zs(e,o,n.unit),zs(t,o,n.unit)}))}},wl=e=>L(e,x(0)),Cl=(e,t,n,o,r)=>r(e.slice(0,t)).concat(o).concat(r(e.slice(n))),Sl=e=>(t,n,o,r)=>{if(e(o)){const e=Math.max(r,t[n]-Math.abs(o)),s=Math.abs(e-t[n]);return o>=0?s:-s}return o},_l=Sl((e=>e<0)),kl=Sl(T),El=()=>{const e=(e,t,n,o,r)=>{const s=_l(e,t,o,r);return Cl(e,t,n+1,[s,0],wl)},t=(e,t,n,o)=>{const r=(100+n)/100,s=Math.max(o,(e[t]+n)/r);return L(e,((e,n)=>{const o=n===t?s:e/r;return o-e}))},n=(n,o,r,s,a,i)=>i?t(n,o,s,a):e(n,o,r,s,a),o=(e,t,o,r,s,a,i)=>n(e,o,r,s,a,i),r=(e,t)=>e(t),s=(e,n,o,r,s,a)=>{if(a)return t(e,o,r,s);{const t=_l(e,o,r,s);return wl(e.slice(0,o)).concat([t])}},a=(e,t,n,o)=>{if(o){const o=t+n,r=o/t,s=L(e,(e=>e/r));return{delta:100*r-100,newSizes:s}}return{delta:n,newSizes:e}};return{resizeTable:r,clampTableDelta:_l,calcLeftEdgeDeltas:n,calcMiddleDeltas:o,calcRightEdgeDeltas:s,calcRedestributedWidths:a}},Ol=()=>{const e=(e,t,n,o,r)=>{const s=o>=0?n:t,a=kl(e,s,o,r);return Cl(e,t,n+1,[a,-a],wl)},t=(t,n,o,r,s,a)=>e(t,o,r,s,a),n=(e,t,n)=>{n&&e(t)},o=(e,t,n,o,r,s)=>{if(s)return wl(e);{const t=o/e.length;return L(e,x(t))}},r=(e,t,n,o,r)=>{if(r){if(n>=0)return n;{const t=$(e,((e,t)=>e+t-o),0);return Math.max(-t,n)}}return _l(e,t,n,o)},s=(e,t,n,o)=>({delta:0,newSizes:e});return{resizeTable:n,clampTableDelta:r,calcLeftEdgeDeltas:e,calcMiddleDeltas:t,calcRightEdgeDeltas:o,calcRedestributedWidths:s}},Tl=e=>{const t=Lr.fromTable(e);return t.grid},Al=ze("th"),Rl=e=>Y(e,(e=>Al(e.element))),Nl=(e,t)=>e&&t?"sectionCells":e?"section":"cells",Dl=e=>{const t="thead"===e.section,n=Sn(Bl(e.cells),"th");return"tfoot"===e.section?{type:"footer"}:t||n?{type:"header",subType:Nl(t,n)}:{type:"body"}},Bl=e=>{const t=U(e,(e=>Al(e.element)));return 0===t.length?A.some("td"):t.length===e.length?A.some("th"):A.none()},Ml=e=>{const t=L(e,(e=>Dl(e).type)),n=M(t,"header"),o=M(t,"footer");if(n||o){const e=M(t,"body");return!n||e||o?n||e||!o?A.none():A.some("footer"):A.some("header")}return A.some("body")},Il=e=>ne(e.all,(e=>{const t=Dl(e);return"header"===t.type?A.from(t.subType):A.none()})),Pl=(e,t,n)=>Wt(n(e.element,t),!0,e.isLocked),Ll=(e,t)=>e.section!==t?qt(e.element,e.cells,t,e.isNew):e,Fl=()=>({transformRow:Ll,transformCell:(e,t,n)=>{const o=n(e.element,t),r="td"!==Re(o)?It(o,"td"):o;return Wt(r,e.isNew,e.isLocked)}}),zl=()=>({transformRow:Ll,transformCell:Pl}),jl=()=>({transformRow:(e,t)=>{const n="thead"===t?"tbody":t;return Ll(e,n)},transformCell:Pl}),Ul=()=>({transformRow:w,transformCell:Pl}),Hl=(e,t)=>{const n=Lr.fromTable(e),o=Il(n).getOr(t);switch(o){case"section":return Fl();case"sectionCells":return zl();case"cells":return jl()}},$l={getTableSectionType:Hl,section:Fl,sectionCells:zl,cells:jl,fallback:Ul},Vl=(e,t,n,o)=>{n===o?qe(e,t):Ue(e,t,n)},Wl=(e,t,n)=>{te(mn(e,t)).fold((()=>wt(e,n)),(e=>xt(e,n)))},ql=(e,t)=>{const n=xn(e,t).getOrThunk((()=>{const n=Ze.fromTag(t,it(e).dom);return"thead"===t?Wl(e,"caption,colgroup",n):"colgroup"===t?Wl(e,"caption",n):Ct(e,n),n}));return Ot(n),n},Gl=(e,t)=>{const n=[],o=[],r=e=>L(e,(e=>{e.isNew&&n.push(e.element);const t=e.element;return Ot(t),F(e.cells,(e=>{e.isNew&&o.push(e.element),Vl(e.element,"colspan",e.colspan,1),Vl(e.element,"rowspan",e.rowspan,1),Ct(t,e.element)})),t})),s=e=>K(e,(e=>L(e.cells,(e=>(Vl(e.element,"span",e.colspan,1),e.element))))),a=(t,n)=>{const o=ql(e,n),a="colgroup"===n?s:r,i=a(t);Et(o,i)},i=t=>{xn(e,t).each(Tt)},l=(e,t)=>{e.length>0?a(e,t):i(t)},c=[],d=[],u=[],m=[];return F(t,(e=>{switch(e.section){case"thead":c.push(e);break;case"tbody":d.push(e);break;case"tfoot":u.push(e);break;case"colgroup":m.push(e);break}})),l(m,"colgroup"),l(c,"thead"),l(d,"tbody"),l(u,"tfoot"),{newRows:n,newCells:o}},Kl=e=>L(e,(e=>{const t=Nt(e.element);return F(e.cells,(e=>{const n=Dt(e.element);Vl(n,"colspan",e.colspan,1),Vl(n,"rowspan",e.rowspan,1),Ct(t,n)})),t})),Yl=(e,t)=>L(e,(e=>br(e,t))),Xl=(e,t)=>e[t],Jl=(e,t)=>{if(0===e.length)return 0;const n=e[0],o=q(e,(e=>!t(n.element,e.element)));return o.getOr(e.length)},Ql=(e,t,n,o)=>{const r=Xl(e,t),s="colgroup"===r.section,a=Jl(r.cells.slice(n),o),i=s?1:Jl(Yl(e.slice(t),n),o);return{colspan:a,rowspan:i}},Zl=(e,t)=>{const n=L(e,(e=>L(e.cells,O))),o=(e,t,o,r)=>{for(let s=e;s<e+o;s++)for(let e=t;e<t+r;e++)n[s][e]=!0};return L(e,((r,s)=>{const a=K(r.cells,((r,a)=>{if(!1===n[s][a]){const n=Ql(e,s,a,t);return o(s,a,n.rowspan,n.colspan),[Ut(r.element,n.rowspan,n.colspan,r.isNew)]}return[]}));return Vt(r.element,a,r.section,r.isNew)}))},ec=(e,t,n)=>{const o=[];F(e.colgroups,(r=>{const s=[];for(let o=0;o<e.grid.columns;o++){const r=Lr.getColumnAt(e,o).map((e=>Wt(e.element,n,!1))).getOrThunk((()=>Wt(t.colGap(),!0,!1)));s.push(r)}o.push(qt(r.element,s,"colgroup",n))}));for(let r=0;r<e.grid.rows;r++){const s=[];for(let o=0;o<e.grid.columns;o++){const a=Lr.getAt(e,r,o).map((e=>Wt(e.element,n,e.isLocked))).getOrThunk((()=>Wt(t.gap(),!0,!1)));s.push(a)}const a=e.all[r],i=qt(a.element,s,a.section,n);o.push(i)}return o},tc=(e,t)=>ec(e,t,!1),nc=e=>Zl(e,rt),oc=(e,t)=>ne(e.all,(e=>W(e.cells,(e=>rt(t,e.element))))),rc=(e,t,n)=>{const o=L(t.selection,(t=>to(t).bind((t=>oc(e,t))).filter(n))),r=_n(o);return En(r.length>0,r)},sc=(e,t,n,o,r)=>(s,a,i,l)=>{const c=Lr.fromTable(s),d=A.from(null===l||void 0===l?void 0:l.section).getOrThunk($l.fallback),u=t(c,a).map((t=>{const n=tc(c,i),o=e(n,t,rt,r(i),d),s=kr(o.grid),a=nc(o.grid);return{info:t,grid:a,cursor:o.cursor,lockedColumns:s}}));return u.bind((e=>{const t=Gl(s,e.grid),r=A.from(null===l||void 0===l?void 0:l.sizing).getOrThunk((()=>ma.getTableSize(s))),a=A.from(null===l||void 0===l?void 0:l.resize).getOrThunk(Ol);return n(s,e.grid,e.info,{sizing:r,resize:a,section:d}),o(s),qe(s,Sr),e.lockedColumns.length>0&&Ue(s,Sr,e.lockedColumns.join(",")),A.some({cursor:e.cursor,newRows:t.newRows,newCells:t.newCells})}))},ac=(e,t)=>to(t.element).bind((n=>oc(e,n).map((e=>{const n=o(o({},e),{},{generators:t.generators,clipboard:t.clipboard});return n})))),ic=(e,t)=>rc(e,t,T).map((e=>({cells:e,generators:t.generators,clipboard:t.clipboard}))),lc=(e,t)=>t.mergable,cc=(e,t)=>t.unmergable,dc=(e,t)=>rc(e,t,T),uc=(e,t)=>rc(e,t,(e=>!e.isLocked)),mc=(e,t)=>oc(e,t).exists((e=>!e.isLocked)),pc=(e,t)=>Y(t,(t=>mc(e,t))),fc=(e,t)=>lc(e,t).filter((t=>pc(e,t.cells))),gc=(e,t)=>cc(e,t).filter((t=>pc(e,t))),hc=(e,t,n,o)=>{const r=wr(e).rows;if(0===r.length)return e;for(let s=t.startRow;s<=t.finishRow;s++)for(let e=t.startCol;e<=t.finishCol;e++){const t=r[s],n=br(t,e).isLocked;gr(t,e,Wt(o(),!1,n))}return e},vc=(e,t,n,o)=>{const r=wr(e).rows;let s=!0;for(let a=0;a<r.length;a++)for(let e=0;e<xr(r[0]);e++){const i=r[a],l=br(i,e),c=l.element,d=n(c,t);d&&!s?gr(i,e,Wt(o(),!0,l.isLocked)):d&&(s=!1)}return e},bc=(e,t)=>$(e,((e,n)=>I(e,(e=>t(e.element,n.element)))?e:e.concat([n])),[]),yc=(e,t,n,o)=>(t>0&&t<e[0].cells.length&&F(e,(e=>{const r=e.cells[t-1];let s=0;const a=o();while(e.cells.length>t+s&&n(r.element,e.cells[t+s].element))gr(e,t+s,Wt(a,!0,e.cells[t+s].isLocked)),s++})),e),xc=(e,t,n,o)=>{const r=wr(e).rows;if(t>0&&t<r.length){const e=r[t-1].cells,s=bc(e,n);F(s,(e=>{let s=A.none();for(let a=t;a<r.length;a++)for(let t=0;t<xr(r[0]);t++){const i=r[a],l=br(i,t),c=n(l.element,e.element);c&&(s.isNone()&&(s=A.some(o())),s.each((e=>{gr(i,t,Wt(e,!0,l.isLocked))})))}}))}return e},wc=e=>{const t=t=>t(e),n=x(e),o=()=>r,r={tag:!0,inner:e,fold:(t,n)=>n(e),isValue:T,isError:O,map:t=>_c.value(t(e)),mapError:o,bind:t,exists:t,forall:t,getOr:n,or:o,getOrThunk:n,orThunk:o,getOrDie:n,each:t=>{t(e)},toOptional:()=>A.some(e)};return r},Cc=e=>{const t=()=>n,n={tag:!1,inner:e,fold:(t,n)=>t(e),isValue:O,isError:T,map:t,mapError:t=>_c.error(t(e)),bind:t,exists:O,forall:T,getOr:w,or:w,getOrThunk:E,orThunk:E,getOrDie:k(String(e)),each:v,toOptional:A.none};return n},Sc=(e,t)=>e.fold((()=>Cc(t)),wc),_c={value:wc,error:Cc,fromOption:Sc},kc=(e,t,n)=>{if(e.row>=t.length||e.column>xr(t[0]))return _c.error("invalid start address out of table bounds, row: "+e.row+", column: "+e.column);const o=t.slice(e.row),r=o[0].cells.slice(e.column),s=xr(n[0]),a=n.length;return _c.value({rowDelta:o.length-a,colDelta:r.length-s})},Ec=(e,t)=>{const n=xr(e[0]),o=xr(t[0]);return{rowDelta:0,colDelta:n-o}},Oc=(e,t)=>{const n=e.length,o=t.length;return{rowDelta:n-o,colDelta:0}},Tc=(e,t,n,o)=>{const r="colgroup"===t.section?n.col:n.cell;return P(e,(e=>Wt(r(),!0,o(e))))},Ac=(e,t,n,o)=>{const r=e[e.length-1];return e.concat(P(t,(()=>{const e="colgroup"===r.section?n.colgroup:n.row,t=Cr(r,e,w),s=Tc(t.cells.length,t,n,(e=>fe(o,e.toString())));return hr(t,s)})))},Rc=(e,t,n,o)=>L(e,(e=>{const r=Tc(t,e,n,O);return pr(e,o,r)})),Nc=(e,t,n)=>L(e,(e=>$(n,((n,o)=>{const r=Tc(1,e,t,T)[0];return fr(n,o,r)}),e))),Dc=(e,t,n)=>{const o=t.colDelta<0?Rc:w,r=t.rowDelta<0?Ac:w,s=kr(e),a=xr(e[0]),i=I(s,(e=>e===a-1)),l=o(e,Math.abs(t.colDelta),n,i?a-1:a),c=kr(l);return r(l,Math.abs(t.rowDelta),n,J(c,T))},Bc=(e,t,n,o)=>{const r=br(e[t],n),s=S(o,r.element),a=e[t];return e.length>1&&xr(a)>1&&(n>0&&s(yr(a,n-1))||n<a.cells.length-1&&s(yr(a,n+1))||t>0&&s(yr(e[t-1],n))||t<e.length-1&&s(yr(e[t+1],n)))},Mc=(e,t,n,o,r,s)=>{const a=e.row,i=e.column,l=n.length,c=xr(n[0]),d=a+l,u=i+c+s.length,m=J(s,T);for(let p=a;p<d;p++){let e=0;for(let s=i;s<u;s++){if(m[s]){e++;continue}Bc(t,p,s,r)&&vc(t,yr(t[p],s),r,o.cell);const l=s-i-e,c=br(n[p-a],l),d=c.element,u=o.replace(d);gr(t[p],s,Wt(u,!0,c.isLocked))}}return t},Ic=(e,t,n)=>{const o=xr(t[0]),r=wr(t).cols.length+e.row,s=P(o-e.column,(t=>t+e.column)),a=W(s,(e=>Y(n,(t=>t!==e)))).getOr(o-1);return{row:r,column:a}},Pc=(e,t,n)=>U(n,(n=>n>=e.column&&n<=xr(t[0])+e.column)),Lc=(e,t,n,r,s)=>{const a=kr(t),i=Ic(e,t,a),l=wr(n).rows,c=Pc(i,l,a),d=kc(i,t,l);return d.map((e=>{const n=o(o({},e),{},{colDelta:e.colDelta-c.length}),a=Dc(t,n,r),d=kr(a),u=Pc(i,l,d);return Mc(i,a,l,r,s,u)}))},Fc=(e,t,n,o,r)=>{yc(t,e,r,o.cell);const s=Oc(n,t),a=Dc(n,s,o),i=Oc(t,a),l=Dc(t,i,o);return L(l,((t,n)=>pr(t,e,a[n].cells)))},zc=(e,t,n,r,s)=>{xc(t,e,s,r.cell);const a=kr(t),i=Ec(t,n),l=o(o({},i),{},{colDelta:i.colDelta-a.length}),c=Dc(t,l,r),{cols:d,rows:u}=wr(c),m=kr(c),p=Ec(n,t),f=o(o({},p),{},{colDelta:p.colDelta+m.length}),g=Nc(n,r,m),h=Dc(g,f,r);return[...d,...u.slice(0,e),...h,...u.slice(e,u.length)]},jc=(e,t,n,o)=>Cr(e,(e=>o(e,n)),t),Uc=(e,t,n,o,r)=>{const{rows:s,cols:a}=wr(e),i=s.slice(0,t),l=s.slice(t),c=jc(s[n],((e,n)=>{const a=t>0&&t<s.length&&o(yr(s[t-1],n),yr(s[t],n)),i=a?br(s[t],n):Wt(r(e.element,o),!0,e.isLocked);return i}),o,r);return[...a,...i,c,...l]},Hc=(e,t,n,o,r,s,a)=>{if("colgroup"!==n&&o)return br(e,t);{const t=br(e,r);return Wt(a(t.element,s),!0,!1)}},$c=(e,t,n,o,r)=>L(e,(e=>{const s=t>0&&t<xr(e)&&o(yr(e,t-1),yr(e,t)),a=Hc(e,t,e.section,s,n,o,r);return fr(e,t,a)})),Vc=(e,t)=>K(e,(e=>{const n=e.cells,o=H(t,((e,t)=>t>=0&&t<e.length?e.slice(0,t).concat(e.slice(t+1)):e),n);return o.length>0?[qt(e.element,o,e.section,e.isNew)]:[]})),Wc=(e,t,n)=>{const{rows:o,cols:r}=wr(e);return[...r,...o.slice(0,t),...o.slice(n+1)]},qc=(e,t,n,o)=>void 0!==yr(e[t],n)&&t>0&&o(yr(e[t-1],n),yr(e[t],n)),Gc=(e,t,n)=>t>0&&n(yr(e,t-1),yr(e,t)),Kc=(e,t,n,o)=>qc(e,t,n,o)||Gc(e[t],n,o),Yc=(e,t)=>{const n=Y(t,w)&&Rl(e.cells);return n?T:(e,n,o)=>{const r=Re(e.element);return!("th"===r&&t[o])}},Xc=(e,t)=>{const n=Y(t,w)&&Rl(e);return n?T:(e,n,o)=>{const r=Re(e.element);return!("th"===r&&t[n])}},Jc=(e,t,n,o)=>{const r=e=>"row"===e?Kn(t):Gn(t),s=e=>r(e)?`${e}group`:e;if(e)return Al(t)?s(n):null;if(o&&Al(t)){const e="row"===n?"col":"row";return s(e)}return null},Qc=(e,t)=>(n,o,r)=>A.some(Jc(e,n.element,"col",t[r])),Zc=(e,t)=>(n,o)=>A.some(Jc(e,n.element,"row",t[o])),ed=(e,t,n)=>Wt(n(e.element,t),!0,e.isLocked),td=(e,t,n,o,r,s,a)=>{const i=e=>I(t,(t=>n(e.element,t.element)));return L(e,((e,t)=>vr(e,((e,l)=>{if(i(e)){const i=a(e,t,l)?r(e,n,o):e;return s(i,t,l).each((e=>{$e(i.element,{scope:A.from(e)})})),i}return e}))))},nd=(e,t,n)=>K(e,((o,r)=>Kc(e,r,t,n)?[]:[br(o,t)])),od=(e,t,n)=>{const o=e[t];return K(o.cells,((o,r)=>Kc(e,t,r,n)?[]:[o]))},rd=(e,t,n,o,r)=>{const s=wr(e).rows,a=K(t,(e=>nd(s,e,o))),i=L(s,(e=>Rl(e.cells))),l=Xc(a,i),c=Zc(n,i);return td(e,a,o,r,ed,c,l)},sd=(e,t,n,o,r,s,a)=>{const{cols:i,rows:l}=wr(e),c=l[t[0]],d=K(t,(e=>od(l,e,r))),u=L(c.cells,((e,t)=>Rl(nd(l,t,r)))),m=[...l];F(t,(e=>{m[e]=a.transformRow(l[e],n)}));const p=[...i,...m],f=Yc(c,u),g=Qc(o,u);return td(p,d,r,s,a.transformCell,g,f)},ad=(e,t,n,o)=>{const r=wr(e).rows,s=L(t,(e=>br(r[e.row],e.column)));return td(e,s,n,o,ed,A.none,T)},id=e=>{if(!c(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");const t=[],n={};return F(e,((o,r)=>{const s=oe(o);if(1!==s.length)throw new Error("one and only one name per case");const a=s[0],i=o[a];if(void 0!==n[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!c(i))throw new Error("case arguments must be an array");t.push(a),n[a]=(...n)=>{const o=n.length;if(o!==i.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+i.length+" ("+i+"), got "+o);const s=e=>{const o=oe(e);if(t.length!==o.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+o.join(","));const r=Y(t,(e=>M(o,e)));if(!r)throw new Error("Not all branches were specified when using match. Specified: "+o.join(", ")+"\nRequired: "+t.join(", "));return e[a].apply(null,n)};return{fold:(...t)=>{if(t.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+t.length);const o=t[r];return o.apply(null,n)},match:s,log:e=>{console.log(e,{constructors:t,constructor:a,params:n})}}}})),n},ld={generate:id},cd=ld.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),dd=o({},cd),ud=(e,t)=>0===e.length?dd.none():1===e.length?dd.only(0):0===t?dd.left(0,1):t===e.length-1?dd.right(t-1,t):t>0&&t<e.length-1?dd.middle(t-1,t,t+1):dd.none(),md=(e,t,n,o,r)=>{const s=e.slice(0),a=ud(e,t),i=x(L(s,x(0))),l=e=>o.singleColumnWidth(s[e],n),c=(e,t)=>r.calcLeftEdgeDeltas(s,e,t,n,o.minCellWidth(),o.isRelative),d=(e,t,a)=>r.calcMiddleDeltas(s,e,t,a,n,o.minCellWidth(),o.isRelative),u=(e,t)=>r.calcRightEdgeDeltas(s,e,t,n,o.minCellWidth(),o.isRelative);return a.fold(i,l,c,d,u)},pd=(e,t,n)=>{let o=0;for(let r=e;r<t;r++)o+=void 0!==n[r]?n[r]:0;return o},fd=(e,t)=>{const n=Lr.justCells(e);return L(n,(e=>{const n=pd(e.column,e.column+e.colspan,t);return{element:e.element,width:n,colspan:e.colspan}}))},gd=(e,t)=>{const n=Lr.justColumns(e);return L(n,((e,n)=>({element:e.element,width:t[n],colspan:e.colspan})))},hd=(e,t)=>{const n=Lr.justCells(e);return L(n,(e=>{const n=pd(e.row,e.row+e.rowspan,t);return{element:e.element,height:n,rowspan:e.rowspan}}))},vd=(e,t)=>L(e.all,((e,n)=>({element:e.element,height:t[n]}))),bd=e=>H(e,((e,t)=>e+t),0),yd=(e,t)=>Lr.hasColumns(e)?gd(e,t):fd(e,t),xd=(e,t,n)=>{const o=yd(e,t);F(o,(e=>{n.setElementWidth(e.element,e.width)}))},wd=(e,t,n,o,r)=>{const s=Lr.fromTable(e),a=r.getCellDelta(t),i=r.getWidths(s,r),l=n===s.grid.columns-1,c=o.clampTableDelta(i,n,a,r.minCellWidth(),l),d=md(i,n,c,r,o),u=L(d,((e,t)=>e+i[t]));xd(s,u,r),o.resizeTable(r.adjustTableWidth,c,l)},Cd=(e,t,n,o)=>{const r=Lr.fromTable(e),s=ra(r,e,o),a=L(s,((e,o)=>n===o?Math.max(t+e,Jn()):e)),i=hd(r,a),l=vd(r,a);F(l,(e=>{Es(e.element,e.height)})),F(i,(e=>{Es(e.element,e.height)}));const c=bd(a);Es(e,c)},Sd=(e,t,n,o,r)=>{const s=Lr.generate(t),a=o.getWidths(s,o),i=o.pixelWidth(),{newSizes:l,delta:c}=r.calcRedestributedWidths(a,i,n.pixelDelta,o.isRelative);xd(s,l,o),o.adjustTableWidth(c)},_d=(e,t,n,o)=>{const r=Lr.generate(t),s=o.getWidths(r,o);xd(r,s,o)},kd=e=>{const t=(e,t)=>{const n=I(e,(e=>e.column===t.column));return n?e:e.concat([t])};return $(e,t,[]).sort(((e,t)=>e.column-t.column))},Ed=ze("col"),Od=ze("colgroup"),Td=e=>"tr"===Re(e)||Od(e),Ad=e=>{const t=Wn(e,"colspan",1),n=Wn(e,"rowspan",1);return{element:e,colspan:t,rowspan:n}},Rd=(e,t=Ad)=>{const n=t=>Ed(t.element)?e.col(t):e.cell(t),o=t=>Od(t.element)?e.colgroup(t):e.row(t),r=e=>{if(Td(e))return o({element:e});{const o=e,r=n(t(o));return s=A.some({item:o,replacement:r}),r}};let s=A.none();const a=(e,t)=>s.fold((()=>r(e)),(n=>t(e,n.item)?n.replacement:r(e)));return{getOrInit:a}},Nd=e=>t=>{const n=[],o=(e,t)=>W(n,(n=>t(n.item,e))),r=o=>{const r="td"===e?{scope:null}:{},s=t.replace(o,e,r);return n.push({item:o,sub:s}),s},s=(e,t)=>{if(Td(e)||Ed(e))return e;{const n=e;return o(n,t).fold((()=>r(n)),(o=>t(e,o.item)?o.sub:r(n)))}};return{replaceOrInit:s}},Dd=e=>We(e,"scope").map((e=>e.substr(0,3))),Bd=e=>{const t=t=>{const n=Dd(t);return n.each((e=>Ue(t,"scope",e))),()=>{const o=e.cell({element:t,colspan:1,rowspan:1});return $n(o,"width"),$n(t,"width"),n.each((e=>Ue(o,"scope",e))),o}},n=e=>{const t=()=>{const t=_n(L(e,Dd));if(0===t.length)return A.none();{const e=t[0],n=["row","col"],o=I(t,(t=>t!==e&&M(n,t)));return o?A.none():A.from(e)}};return $n(e[0],"width"),t().fold((()=>qe(e[0],"scope")),(t=>Ue(e[0],"scope",t+"group"))),x(e[0])};return{unmerge:t,merge:n}},Md={modification:Rd,transform:Nd,merging:Bd},Id=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Pd=(e,t)=>{const n=e.property().name(t);return M(["ol","ul"],n)},Ld=(e,t)=>{const n=e.property().name(t);return M(Id,n)},Fd=(e,t)=>M(["br","img","hr","input"],e.property().name(t)),zd=wi(),jd=e=>Ld(zd,e),Ud=e=>Pd(zd,e),Hd=e=>Fd(zd,e),$d=e=>{const t=ze("br"),n=e=>Y(e,(e=>t(e)||Pe(e)&&0===Sa(e).trim().length)),o=e=>"li"===Re(e)||gn(e,Ud).isSome(),r=e=>gt(e).map((e=>!!jd(e)||!!Hd(e)&&"img"!==Re(e))).getOr(!1),s=e=>Da(e).bind((n=>{const s=r(n);return ut(n).map((r=>!0===s||o(r)||t(n)||jd(r)&&!rt(e,r)?[]:[Ze.fromTag("br")]))})).getOr([]),a=()=>{const t=K(e,(e=>{const t=ht(e);return n(t)?[]:t.concat(s(e))}));return 0===t.length?[Ze.fromTag("br")]:t},i=a();Ot(e[0]),Et(e[0],i)},Vd=e=>Ka(e,!0),Wd=e=>{const t=no(e);0===t.length&&Tt(e)},qd=(e,t)=>({grid:e,cursor:t}),Gd=e=>ne(e,(e=>ne(e.cells,(e=>{const t=e.element;return En(Vd(t),t)})))),Kd=(e,t,n)=>{var o,r;const s=wr(e).rows;return A.from(null===(r=null===(o=s[t])||void 0===o?void 0:o.cells[n])||void 0===r?void 0:r.element).filter(Vd).orThunk((()=>Gd(s)))},Yd=(e,t,n)=>{const o=Kd(e,t,n);return qd(e,o)},Xd=e=>{const t=(e,t)=>{const n=I(e,(e=>e.row===t.row));return n?e:e.concat([t])};return $(e,t,[]).sort(((e,t)=>e.row-t.row))},Jd=(e,t,n,o)=>{const r=t[0].row,s=Xd(t),a=H(s,((e,t)=>{const s=Uc(e.grid,r,t.row+e.delta,n,o.getOrInit);return{grid:s,delta:e.delta+1}}),{grid:e,delta:0}).grid;return Yd(a,r,t[0].column)},Qd=(e,t,n,o)=>{const r=Xd(t),s=r[r.length-1],a=s.row+s.rowspan,i=H(r,((e,t)=>Uc(e,a,t.row,n,o.getOrInit)),e);return Yd(i,a,t[0].column)},Zd=(e,t,n,o)=>{const r=t.details,s=kd(r),a=s[0].column,i=H(s,((e,t)=>{const r=$c(e.grid,a,t.column+e.delta,n,o.getOrInit);return{grid:r,delta:e.delta+1}}),{grid:e,delta:0}).grid;return Yd(i,r[0].row,a)},eu=(e,t,n,o)=>{const r=t.details,s=r[r.length-1],a=s.column+s.colspan,i=kd(r),l=H(i,((e,t)=>$c(e,a,t.column,n,o.getOrInit)),e);return Yd(l,r[0].row,a)},tu=(e,t,n,o)=>{const r=kd(t),s=L(r,(e=>e.column)),a=rd(e,s,!0,n,o.replaceOrInit);return Yd(a,t[0].row,t[0].column)},nu=(e,t,n,o)=>{const r=ad(e,t,n,o.replaceOrInit);return Yd(r,t[0].row,t[0].column)},ou=(e,t,n,o)=>{const r=kd(t),s=L(r,(e=>e.column)),a=rd(e,s,!1,n,o.replaceOrInit);return Yd(a,t[0].row,t[0].column)},ru=(e,t,n,o)=>{const r=ad(e,t,n,o.replaceOrInit);return Yd(r,t[0].row,t[0].column)},su=(e,t)=>(n,o,r,s,a)=>{const i=Xd(o),l=L(i,(e=>e.row)),c=sd(n,l,e,t,r,s.replaceOrInit,a);return Yd(c,o[0].row,o[0].column)},au=su("thead",!0),iu=su("tbody",!1),lu=su("tfoot",!1),cu=(e,t,n,o)=>{const r=kd(t.details),s=Vc(e,L(r,(e=>e.column))),a=s.length>0?s[0].cells.length-1:0;return Yd(s,r[0].row,Math.min(r[0].column,a))},du=(e,t,n,o)=>{const r=Xd(t),s=Wc(e,r[0].row,r[r.length-1].row),a=s.length>0?s.length-1:0;return Yd(s,Math.min(t[0].row,a),t[0].column)},uu=(e,t,n,o)=>{const r=t.cells;$d(r);const s=hc(e,t.bounds,n,o.merge(r));return qd(s,A.from(r[0]))},mu=(e,t,n,o)=>{const r=(e,t)=>vc(e,t,n,o.unmerge(t)),s=H(t,r,e);return qd(s,A.from(t[0]))},pu=(e,t,n,o)=>{const r=(e,t)=>{const n=Lr.fromTable(e);return ec(n,t,!0)},s=r(t.clipboard,t.generators),a=zt(t.row,t.column),i=Lc(a,e,s,t.generators,n);return i.fold((()=>qd(e,A.some(t.element))),(e=>Yd(e,t.row,t.column)))},fu=(e,t,n)=>{const o=uo(e,n.section),r=Lr.generate(o);return ec(r,t,!0)},gu=(e,t,n,o)=>{const r=wr(e).rows,s=t.cells[0].column,a=r[t.cells[0].row],i=fu(t.clipboard,t.generators,a),l=Fc(s,e,i,t.generators,n);return Yd(l,t.cells[0].row,t.cells[0].column)},hu=(e,t,n,o)=>{const r=wr(e).rows,s=t.cells[t.cells.length-1].column+t.cells[t.cells.length-1].colspan,a=r[t.cells[0].row],i=fu(t.clipboard,t.generators,a),l=Fc(s,e,i,t.generators,n);return Yd(l,t.cells[0].row,t.cells[0].column)},vu=(e,t,n,o)=>{const r=wr(e).rows,s=t.cells[0].row,a=r[s],i=fu(t.clipboard,t.generators,a),l=zc(s,e,i,t.generators,n);return Yd(l,t.cells[0].row,t.cells[0].column)},bu=(e,t,n,o)=>{const r=wr(e).rows,s=t.cells[t.cells.length-1].row+t.cells[t.cells.length-1].rowspan,a=r[t.cells[0].row],i=fu(t.clipboard,t.generators,a),l=zc(s,e,i,t.generators,n);return Yd(l,t.cells[0].row,t.cells[0].column)},yu=(e,t)=>{const n=Lr.fromTable(e),o=dc(n,t);return o.bind((e=>{const t=e[e.length-1],o=e[0].column,r=t.column+t.colspan,s=G(L(n.all,(e=>U(e.cells,(e=>e.column>=o&&e.column<r)))));return Bl(s)})).getOr("")},xu=(e,t)=>{const n=Lr.fromTable(e),o=dc(n,t);return o.bind(Bl).getOr("")},wu=(e,t)=>{const n=Lr.fromTable(e),o=dc(n,t);return o.bind((e=>{const t=e[e.length-1],o=e[0].row,r=t.row+t.rowspan,s=n.all.slice(o,r);return Ml(s)})).getOr("")},Cu=(e,t,n,o)=>_d(e,t,n,o.sizing),Su=(e,t,n,o)=>Sd(e,t,n,o.sizing,o.resize),_u=(e,t)=>I(t,(e=>0===e.column&&e.isLocked)),ku=(e,t)=>I(t,(t=>t.column+t.colspan>=e.grid.columns&&t.isLocked)),Eu=(e,t)=>{const n=Fr(e),o=kd(t);return $(o,((e,t)=>{const o=n[t.column],r=o.map(dr).getOr(0);return e+r}),0)},Ou=e=>(t,n)=>dc(t,n).filter((n=>{const o=e?_u:ku;return!o(t,n)})).map((e=>({details:e,pixelDelta:Eu(t,e)}))),Tu=(e,t)=>uc(e,t).map((t=>({details:t,pixelDelta:-Eu(e,t)}))),Au=e=>(t,n)=>ic(t,n).filter((n=>{const o=e?_u:ku;return!o(t,n.cells)})),Ru=Md.transform("th"),Nu=Md.transform("td"),Du=sc(Jd,dc,v,v,Md.modification),Bu=sc(Qd,dc,v,v,Md.modification),Mu=sc(Zd,Ou(!0),Su,v,Md.modification),Iu=sc(eu,Ou(!1),Su,v,Md.modification),Pu=sc(cu,Tu,Su,Wd,Md.modification),Lu=sc(du,dc,v,Wd,Md.modification),Fu=sc(tu,uc,v,v,Ru),zu=sc(ou,uc,v,v,Nu),ju=sc(au,uc,v,v,Ru),Uu=sc(iu,uc,v,v,Nu),Hu=sc(lu,uc,v,v,Nu),$u=sc(nu,uc,v,v,Ru),Vu=sc(ru,uc,v,v,Nu),Wu=sc(uu,fc,Cu,v,Md.merging),qu=sc(mu,gc,Cu,v,Md.merging),Gu=sc(pu,ac,Cu,v,Md.modification),Ku=sc(gu,Au(!0),v,v,Md.modification),Yu=sc(hu,Au(!1),v,v,Md.modification),Xu=sc(vu,ic,v,v,Md.modification),Ju=sc(bu,ic,v,v,Md.modification),Qu=yu,Zu=xu,em=wu,tm=(e,t)=>e.dispatch("NewRow",{node:t}),nm=(e,t)=>e.dispatch("NewCell",{node:t}),om=(e,t,n)=>{e.dispatch("TableModified",o(o({},n),{},{table:t}))},rm=(e,t,n,o,r)=>{e.dispatch("TableSelectionChange",{cells:t,start:n,finish:o,otherCells:r})},sm=e=>{e.dispatch("TableSelectionClear")},am=(e,t,n,o,r)=>{e.dispatch("ObjectResizeStart",{target:t,width:n,height:o,origin:r})},im=(e,t,n,o,r)=>{e.dispatch("ObjectResized",{target:t,width:n,height:o,origin:r})},lm={structure:!1,style:!0},cm={structure:!0,style:!1},dm={structure:!0,style:!0},um=e=>t=>t.options.get(e),mm="100%",pm=e=>{var t;const n=e.dom,o=null!==(t=n.getParent(e.selection.getStart(),n.isBlock))&&void 0!==t?t:e.getBody();return ur(Ze.fromDom(o))+"px"},fm=(e,t)=>Em(e)||!Tm(e)?t:km(e)?o(o({},t),{},{width:pm(e)}):o(o({},t),{},{width:mm}),gm=(e,t)=>Em(e)||Tm(e)?t:km(e)?o(o({},t),{},{width:pm(e)}):o(o({},t),{},{width:mm}),hm=e=>{const t=e.options.register;t("table_clone_elements",{processor:"string[]"}),t("table_use_colgroups",{processor:"boolean",default:!0}),t("table_header_type",{processor:e=>{const t=M(["section","cells","sectionCells","auto"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),t("table_sizing_mode",{processor:"string",default:"auto"}),t("table_default_attributes",{processor:"object",default:{border:"1"}}),t("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),t("table_column_resizing",{processor:e=>{const t=M(["preservetable","resizetable"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),t("table_resize_bars",{processor:"boolean",default:!0}),t("table_style_by_css",{processor:"boolean",default:!0})},vm=e=>A.from(e.options.get("table_clone_elements")),bm=e=>{const t=e.options.get("object_resizing");return M(t.split(","),"table")},ym=um("table_header_type"),xm=um("table_column_resizing"),wm=e=>"preservetable"===xm(e),Cm=e=>"resizetable"===xm(e),Sm=um("table_sizing_mode"),_m=e=>"relative"===Sm(e),km=e=>"fixed"===Sm(e),Em=e=>"responsive"===Sm(e),Om=um("table_resize_bars"),Tm=um("table_style_by_css"),Am=e=>{const t=e.options,n=t.get("table_default_attributes");return t.isSet("table_default_attributes")?n:gm(e,n)},Rm=e=>{const t=e.options,n=t.get("table_default_styles");return t.isSet("table_default_styles")?n:fm(e,n)},Nm=um("table_use_colgroups"),Dm=(e,t)=>_m(e)?ma.percentageSize(t):km(e)?ma.pixelSize(t):ma.getTableSize(t),Bm=(e,t,n)=>{const o=e=>"table"===Re(Xa(e)),r=t=>!o(e)||Tl(t).rows>1,s=t=>!o(e)||Tl(t).columns>1,a=vm(e),i=Cm(e)?v:xl,l=t=>{switch(ym(e)){case"section":return $l.section();case"sectionCells":return $l.sectionCells();case"cells":return $l.cells();default:return $l.getTableSectionType(t,"section")}},c=(t,o)=>o.cursor.fold((()=>{const o=no(t);return ee(o).filter(rn).map((o=>{n.clearSelectedCells(t.dom);const r=e.dom.createRng();return r.selectNode(o.dom),e.selection.setRng(r),Ue(o,"data-mce-selected","1"),r}))}),(o=>{const r=yl(o),s=e.dom.createRng();return s.setStart(r.element.dom,r.offset),s.setEnd(r.element.dom,r.offset),e.selection.setRng(s),n.clearSelectedCells(t.dom),A.some(s)})),d=(n,o,r,s)=>(i,d,u=!1)=>{Qa(i);const m=Ze.fromDom(e.getDoc()),p=$a(r,m,a),f={sizing:Dm(e,i),resize:Cm(e)?El():Ol(),section:l(i)};return o(i)?n(i,d,p,f).bind((n=>{t.refresh(i.dom),F(n.newRows,(t=>{tm(e,t.dom)})),F(n.newCells,(t=>{nm(e,t.dom)}));const o=c(i,n);return rn(i)&&(Qa(i),u||om(e,i.dom,s)),o.map((e=>({rng:e,effect:s})))})):A.none()},u=d(Lu,r,v,cm),m=d(Pu,s,v,cm),p=d(Du,T,v,cm),f=d(Bu,T,v,cm),g=d(Mu,T,i,cm),h=d(Iu,T,i,cm),b=d(Wu,T,v,cm),y=d(qu,T,v,cm),x=d(Ku,T,v,cm),w=d(Yu,T,v,cm),C=d(Xu,T,v,cm),S=d(Ju,T,v,cm),_=d(Gu,T,v,dm),k=d($u,T,v,cm),E=d(Vu,T,v,cm),O=d(Fu,T,v,cm),R=d(zu,T,v,cm),N=d(ju,T,v,cm),D=d(Uu,T,v,cm),B=d(Hu,T,v,cm),M=Zu,I=Qu,P=em;return{deleteRow:u,deleteColumn:m,insertRowsBefore:p,insertRowsAfter:f,insertColumnsBefore:g,insertColumnsAfter:h,mergeCells:b,unmergeCells:y,pasteColsBefore:x,pasteColsAfter:w,pasteRowsBefore:C,pasteRowsAfter:S,pasteCells:_,makeCellsHeader:k,unmakeCellsHeader:E,makeColumnsHeader:O,unmakeColumnsHeader:R,makeRowsHeader:N,makeRowsBody:D,makeRowsFooter:B,getTableRowType:P,getTableCellType:M,getTableColType:I}},Mm=(e,t,n)=>{const o=Wn(e,t,1);1===n||o<=1?qe(e,t):Ue(e,t,Math.min(n,o))},Im=(e,t)=>n=>{const o=n.column+n.colspan-1,r=n.column;return o>=e&&r<t},Pm=(e,t,n)=>{if(Lr.hasColumns(e)){const o=U(Lr.justColumns(e),Im(t,n)),r=L(o,(e=>{const o=Dt(e.element);return Mm(o,"span",n-t),o})),s=Ze.fromTag("colgroup");return Et(s,r),[s]}return[]},Lm=(e,t,n)=>L(e.all,(e=>{const o=U(e.cells,Im(t,n)),r=L(o,(e=>{const o=Dt(e.element);return Mm(o,"colspan",n-t),o})),s=Ze.fromTag("tr");return Et(s,r),s})),Fm=(e,t)=>{const n=Lr.fromTable(e),o=uc(n,t);return o.map((e=>{const t=e[e.length-1],o=e[0].column,r=t.column+t.colspan,s=Pm(n,o,r),a=Lm(n,o,r);return[...s,...a]}))},zm=(e,t,n)=>{const r=Lr.fromTable(e),s=dc(r,t);return s.bind((e=>{const t=ec(r,n,!1),s=wr(t).rows,a=s.slice(e[0].row,e[e.length-1].row+e[e.length-1].rowspan),i=K(a,(e=>{const t=U(e.cells,(e=>!e.isLocked));return t.length>0?[o(o({},e),{},{cells:t})]:[]})),l=nc(i);return En(l.length>0,l)})).map((e=>Kl(e)))},jm=ld.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),Um=(e,t,n)=>{const o=n.substring(0,n.length-e.length),r=parseFloat(o);return o===r.toString()?t(r):jm.invalid(n)},Hm=e=>Rn(e,"%")?Um("%",jm.percent,e):Rn(e,"px")?Um("px",jm.pixels,e):jm.invalid(e),$m=o(o({},jm),{},{from:Hm}),Vm=(e,t)=>L(e,(e=>{const n=$m.from(e);return n.fold((()=>e),(e=>{const n=e/t*100;return n+"%"}),(e=>e+"%"))})),Wm=(e,t,n)=>{const o=n/t;return L(e,(e=>{const t=$m.from(e);return t.fold((()=>e),(e=>e*o+"px"),(e=>e/100*n+"px"))}))},qm=(e,t)=>{const n=e.fold((()=>x("")),(e=>{const n=e/t;return x(n+"px")}),(()=>{const e=100/t;return x(e+"%")}));return P(t,n)},Gm=(e,t,n)=>e.fold((()=>t),(e=>Wm(t,n,e)),(e=>Vm(t,n))),Km=(e,t,n)=>{const o=$m.from(n),r=Y(e,(e=>"0px"===e))?qm(o,e.length):Gm(o,e,t);return Qm(r)},Ym=(e,t)=>0===e.length?t:H(e,((e,t)=>$m.from(t).fold(x(0),w,w)+e),0),Xm=(e,t)=>{const n=Math.floor(e);return{value:n+t,remainder:e-n}},Jm=(e,t)=>$m.from(e).fold(x(e),(e=>e+t+"px"),(e=>e+t+"%")),Qm=e=>{if(0===e.length)return e;const t=H(e,((e,t)=>{const n=$m.from(t).fold((()=>({value:t,remainder:0})),(e=>Xm(e,"px")),(e=>({value:e+"%",remainder:0})));return{output:[n.value].concat(e.output),remainder:e.remainder+n.remainder}}),{output:[],remainder:0}),n=t.output;return n.slice(0,n.length-1).concat([Jm(n[n.length-1],Math.round(t.remainder))])},Zm=$m.from,ep=(e,t,n)=>{F(t,(t=>{const o=e.slice(t.column,t.colspan+t.column),r=Ym(o,Xn());Fn(t.element,"width",r+n)}))},tp=(e,t,n)=>{F(t,((t,o)=>{const r=Ym([e[o]],Xn());Fn(t.element,"width",r+n)}))},np=(e,t,n,o)=>{F(n,(t=>{const n=e.slice(t.row,t.rowspan+t.row),r=Ym(n,Jn());Fn(t.element,"height",r+o)})),F(t,((t,n)=>{Fn(t.element,"height",e[n])}))},op=e=>Zm(e).fold(x("px"),x("px"),x("%")),rp=(e,t,n)=>{const o=Lr.fromTable(e),r=o.all,s=Lr.justCells(o),a=Lr.justColumns(o);t.each((t=>{const n=op(t),r=cr(e),i=ea(o,e),l=Km(i,r,t);Lr.hasColumns(o)?tp(l,a,n):ep(l,s,n),Fn(e,"width",t)})),n.each((t=>{const n=op(t),a=Wr(e),i=sa(o,e,us),l=Km(i,a,t);np(l,r,s,n),Fn(e,"height",t)}))},sp=Hs,ap=$s,ip=Vs,lp=e=>{qe(e,"width")},cp=e=>{const t=Us(e);rp(e,A.some(t),A.none()),lp(e)},dp=e=>{const t=js(e);rp(e,A.some(t),A.none()),lp(e)},up=e=>{$n(e,"width");const t=oo(e),n=t.length>0?t:no(e);F(n,(e=>{$n(e,"width"),lp(e)})),lp(e)},mp={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},pp=()=>Ze.fromTag("th"),fp=()=>Ze.fromTag("td"),gp=()=>Ze.fromTag("col"),hp=(e,t,n,o)=>{const r=Ze.fromTag("tr");for(let s=0;s<e;s++){const e=o<t||s<n?pp():fp();s<n&&Ue(e,"scope","row"),o<t&&Ue(e,"scope","col"),Ct(e,Ze.fromTag("br")),Ct(r,e)}return r},vp=e=>{const t=Ze.fromTag("colgroup");return P(e,(()=>Ct(t,gp()))),t},bp=(e,t,n,o)=>P(e,(e=>hp(t,n,o,e))),yp=(e,t,n,o,r,s=mp)=>{const a=Ze.fromTag("table"),i="cells"!==r;zn(a,s.styles),He(a,s.attributes),s.colGroups&&Ct(a,vp(t));const l=Math.min(e,n);if(i&&n>0){const e=Ze.fromTag("thead");Ct(a,e);const s="sectionCells"===r?l:0,i=bp(n,t,s,o);Et(e,i)}const c=Ze.fromTag("tbody");Ct(a,c);const d=i?e-l:e,u=i?0:n,m=bp(d,t,u,o);return Et(c,m),a},xp=e=>e.dom.innerHTML,wp=e=>{const t=Ze.fromTag("div"),n=Ze.fromDom(e.dom.cloneNode(!0));return Ct(t,n),xp(t)},Cp=(e,t)=>{e.selection.select(t.dom,!0),e.selection.collapse(!0)},Sp=(e,t)=>{wn(t,"td,th").each(S(Cp,e))},_p=(e,t)=>{F(pn(t,"tr"),(t=>{tm(e,t.dom),F(pn(t,"th,td"),(t=>{nm(e,t.dom)}))}))},kp=e=>i(e)&&-1!==e.indexOf("%"),Ep=(e,t,n,o,r)=>{const s=Rm(e),a={styles:s,attributes:Am(e),colGroups:Nm(e)};return e.undoManager.ignore((()=>{const s=yp(n,t,r,o,ym(e),a);Ue(s,"data-mce-id","__mce");const i=wp(s);e.insertContent(i),e.addVisual()})),wn(Xa(e),'table[data-mce-id="__mce"]').map((t=>(km(e)?dp(t):Em(e)?up(t):(_m(e)||kp(s.width))&&cp(t),Qa(t),qe(t,"data-mce-id"),_p(e,t),Sp(e,t),t.dom))).getOrNull()},Op=(e,t,n,o={})=>{const r=e=>h(e)&&e>0;if(r(t)&&r(n)){const r=o.headerRows||0,s=o.headerColumns||0;return Ep(e,n,t,s,r)}return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null};var Tp=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const Ap="x-tinymce/dom-table-",Rp=Ap+"rows",Np=Ap+"columns",Dp=e=>{const t=Tp.FakeClipboardItem(e);Tp.write([t])},Bp=e=>{var t;const n=null!==(t=Tp.read())&&void 0!==t?t:[];return ne(n,(t=>A.from(t.getType(e))))},Mp=e=>{Bp(e).isSome()&&Tp.clear()},Ip=e=>{e.fold(Lp,(e=>Dp({[Rp]:e})))},Pp=()=>Bp(Rp),Lp=()=>Mp(Rp),Fp=e=>{e.fold(jp,(e=>Dp({[Np]:e})))},zp=()=>Bp(Np),jp=()=>Mp(Np),Up=e=>sl(Za(e),Ja(e)).filter(si),Hp=e=>al(Za(e),Ja(e)).filter(si),$p=(e,t)=>{const n=Ja(e),o=()=>Up(e).each((t=>{ro(t,n).filter(_(n)).each((t=>{const n=Ze.fromText("");if(xt(t,n),Tt(t),e.dom.isEmpty(e.getBody()))e.setContent(""),e.selection.setCursorLocation();else{const t=e.dom.createRng();t.setStart(n.dom,0),t.setEnd(n.dom,0),e.selection.setRng(t),e.nodeChanged()}}))})),r=t=>Up(e).each((o=>{const r=Em(e)||km(e)||_m(e);r||ro(o,n).each((n=>{"relative"!==t||sp(n)?"fixed"!==t||ap(n)?"responsive"!==t||ip(n)||up(n):dp(n):cp(n),Qa(n),om(e,n.dom,cm)}))})),s=e=>ro(e,n),a=t=>Hp(e).bind((e=>s(e).map((n=>t(n,e))))),c=(t,n)=>{a((t=>{e.formatter.toggle("tableclass",{value:n},t.dom),om(e,t.dom,lm)}))},d=(t,n)=>{a((t=>{const o=il(e),r=Y(o,(t=>e.formatter.match("tablecellclass",{value:n},t.dom))),s=r?e.formatter.remove:e.formatter.apply;F(o,(e=>s("tablecellclass",{value:n},e.dom))),om(e,t.dom,lm)}))},u=()=>{Up(e).each((t=>{ro(t,n).each((n=>{xn(n,"caption").fold((()=>{const t=Ze.fromTag("caption");Ct(t,Ze.fromText("Caption")),St(n,t,0),e.selection.setCursorLocation(t.dom,0)}),(o=>{ze("caption")(t)&&ot("td",n).each((t=>e.selection.setCursorLocation(t.dom,0))),Tt(o)})),om(e,n.dom,cm)}))}))},m=t=>{e.focus()},p=(t,n=!1)=>a(((o,r)=>{const s=el(il(e),o,r);t(o,s,n).each(m)})),f=()=>a(((t,n)=>{const o=el(il(e),t,n),r=$a(v,Ze.fromDom(e.getDoc()),A.none());return zm(t,o,r)})),g=()=>a(((t,n)=>{const o=el(il(e),t,n);return Fm(t,o)})),h=(t,n)=>n().each((n=>{const o=L(n,(e=>Dt(e)));a(((n,r)=>{const s=Va(Ze.fromDom(e.getDoc())),a=nl(il(e),r,o,s);t(n,a).each(m)}))})),b=e=>(t,n)=>pe(n,"type").each((t=>{p(e(t),n.no_events)}));se({mceTableSplitCells:()=>p(t.unmergeCells),mceTableMergeCells:()=>p(t.mergeCells),mceTableInsertRowBefore:()=>p(t.insertRowsBefore),mceTableInsertRowAfter:()=>p(t.insertRowsAfter),mceTableInsertColBefore:()=>p(t.insertColumnsBefore),mceTableInsertColAfter:()=>p(t.insertColumnsAfter),mceTableDeleteCol:()=>p(t.deleteColumn),mceTableDeleteRow:()=>p(t.deleteRow),mceTableCutCol:()=>g().each((e=>{Fp(e),p(t.deleteColumn)})),mceTableCutRow:()=>f().each((e=>{Ip(e),p(t.deleteRow)})),mceTableCopyCol:()=>g().each((e=>Fp(e))),mceTableCopyRow:()=>f().each((e=>Ip(e))),mceTablePasteColBefore:()=>h(t.pasteColsBefore,zp),mceTablePasteColAfter:()=>h(t.pasteColsAfter,zp),mceTablePasteRowBefore:()=>h(t.pasteRowsBefore,Pp),mceTablePasteRowAfter:()=>h(t.pasteRowsAfter,Pp),mceTableDelete:o,mceTableCellToggleClass:d,mceTableToggleClass:c,mceTableToggleCaption:u,mceTableSizingMode:(e,t)=>r(t),mceTableCellType:b((e=>"th"===e?t.makeCellsHeader:t.unmakeCellsHeader)),mceTableColType:b((e=>"th"===e?t.makeColumnsHeader:t.unmakeColumnsHeader)),mceTableRowType:b((e=>{switch(e){case"header":return t.makeRowsHeader;case"footer":return t.makeRowsFooter;default:return t.makeRowsBody}}))},((t,n)=>e.addCommand(n,t))),e.addCommand("mceInsertTable",((t,n)=>{Op(e,n.rows,n.columns,n.options)})),e.addCommand("mceTableApplyCellStyle",((t,n)=>{const o=e=>"tablecell"+e.toLowerCase().replace("-","");if(!l(n))return;const r=U(il(e),si);if(0===r.length)return;const a=de(n,((t,n)=>e.formatter.has(o(n))&&i(t)));he(a)||(se(a,((t,n)=>{const s=o(n);F(r,(n=>{""===t?e.formatter.remove(s,{value:null},n.dom,!0):e.formatter.apply(s,{value:t},n.dom)}))})),s(r[0]).each((t=>om(e,t.dom,lm))))}))},Vp=(e,t)=>{const n=Ja(e),o=t=>al(Za(e)).bind((o=>ro(o,n).map((n=>{const r=el(il(e),n,o);return t(n,r)})))).getOr("");se({mceTableRowType:()=>o(t.getTableRowType),mceTableCellType:()=>o(t.getTableCellType),mceTableColType:()=>o(t.getTableColType)},((t,n)=>e.addQueryValueHandler(n,t)))},Wp=ld.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),qp=(e,t,n,o)=>e.fold(t,n,o),Gp=e=>e.fold(w,w,w),Kp=Wp.before,Yp=Wp.on,Xp=Wp.after,Jp={before:Kp,on:Yp,after:Xp,cata:qp,getStart:Gp},Qp=(e,t)=>({selection:e,kill:t}),Zp={create:Qp},ef=(e,t)=>{const n=e.document.createRange();return n.selectNode(t.dom),n},tf=(e,t)=>{const n=e.document.createRange();return nf(n,t),n},nf=(e,t)=>e.selectNodeContents(t.dom),of=(e,t)=>{t.fold((t=>{e.setStartBefore(t.dom)}),((t,n)=>{e.setStart(t.dom,n)}),(t=>{e.setStartAfter(t.dom)}))},rf=(e,t)=>{t.fold((t=>{e.setEndBefore(t.dom)}),((t,n)=>{e.setEnd(t.dom,n)}),(t=>{e.setEndAfter(t.dom)}))},sf=(e,t,n)=>{const o=e.document.createRange();return of(o,t),rf(o,n),o},af=(e,t,n,o,r)=>{const s=e.document.createRange();return s.setStart(t.dom,n),s.setEnd(o.dom,r),s},lf=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}),cf=e=>{const t=e.getClientRects(),n=t.length>0?t[0]:e.getBoundingClientRect();return n.width>0||n.height>0?A.some(n).map(lf):A.none()},df=ld.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),uf=(e,t,n)=>t(Ze.fromDom(n.startContainer),n.startOffset,Ze.fromDom(n.endContainer),n.endOffset),mf=(e,t)=>t.match({domRange:e=>({ltr:x(e),rtl:A.none}),relative:(t,n)=>({ltr:mo((()=>sf(e,t,n))),rtl:mo((()=>A.some(sf(e,n,t))))}),exact:(t,n,o,r)=>({ltr:mo((()=>af(e,t,n,o,r))),rtl:mo((()=>A.some(af(e,o,r,t,n))))})}),pf=(e,t)=>{const n=t.ltr();if(n.collapsed){const o=t.rtl().filter((e=>!1===e.collapsed));return o.map((e=>df.rtl(Ze.fromDom(e.endContainer),e.endOffset,Ze.fromDom(e.startContainer),e.startOffset))).getOrThunk((()=>uf(e,df.ltr,n)))}return uf(e,df.ltr,n)},ff=(e,t)=>{const n=mf(e,t);return pf(e,n)},gf=(e,t)=>{const n=ff(e,t);return n.match({ltr:(t,n,o,r)=>{const s=e.document.createRange();return s.setStart(t.dom,n),s.setEnd(o.dom,r),s},rtl:(t,n,o,r)=>{const s=e.document.createRange();return s.setStart(o.dom,r),s.setEnd(t.dom,n),s}})};df.ltr,df.rtl;const hf=(e,t,n,o)=>({start:e,soffset:t,finish:n,foffset:o}),vf={create:hf},bf=(e,t,n,o)=>({start:Jp.on(e,t),finish:Jp.on(n,o)}),yf={create:bf},xf=(e,t)=>{const n=gf(e,t);return vf.create(Ze.fromDom(n.startContainer),n.startOffset,Ze.fromDom(n.endContainer),n.endOffset)},wf=yf.create,Cf=(e,t,n,o,r,s,a)=>rt(n,r)&&o===s?A.none():Cn(n,"td,th",t).bind((n=>Cn(r,"td,th",t).bind((o=>Sf(e,t,n,o,a))))),Sf=(e,t,n,o,r)=>rt(n,o)?A.none():Mi(n,o,t).bind((t=>{const o=t.boxes.getOr([]);return o.length>1?(r(e,o,t.start,t.finish),A.some(Zp.create(A.some(wf(n,0,n,Ea(n))),!0))):A.none()})),_f=(e,t,n,o,r)=>{const s=e=>(r.clearBeforeUpdate(n),r.selectRange(n,e.boxes,e.start,e.finish),e.boxes);return zi(o,e,t,r.firstSelectedSelector,r.lastSelectedSelector).map(s)},kf=(e,t)=>({item:e,mode:t}),Ef=(e,t,n,o=Of)=>e.property().parent(t).map((e=>kf(e,o))),Of=(e,t,n,o=Tf)=>n.sibling(e,t).map((e=>kf(e,o))),Tf=(e,t,n,o=Tf)=>{const r=e.property().children(t),s=n.first(r);return s.map((e=>kf(e,o)))},Af=[{current:Ef,next:Of,fallback:A.none()},{current:Of,next:Tf,fallback:A.some(Ef)},{current:Tf,next:Tf,fallback:A.some(Of)}],Rf=(e,t,n,o,r=Af)=>{const s=W(r,(e=>e.current===n));return s.bind((n=>n.current(e,t,o,n.next).orThunk((()=>n.fallback.bind((n=>Rf(e,t,n,o)))))))},Nf=()=>{const e=(e,t)=>e.query().prevSibling(t),t=e=>e.length>0?A.some(e[e.length-1]):A.none();return{sibling:e,first:t}},Df=()=>{const e=(e,t)=>e.query().nextSibling(t),t=e=>e.length>0?A.some(e[0]):A.none();return{sibling:e,first:t}},Bf={left:Nf,right:Df},Mf=(e,t,n,o,r,s)=>{const a=Rf(e,t,o,r);return a.bind((t=>s(t.item)?A.none():n(t.item)?A.some(t.item):Mf(e,t.item,n,t.mode,r,s)))},If=(e,t,n,o)=>Mf(e,t,n,Of,Bf.left(),o),Pf=(e,t,n,o)=>Mf(e,t,n,Of,Bf.right(),o),Lf=e=>t=>0===e.property().children(t).length,Ff=(e,t,n)=>jf(e,t,Lf(e),n),zf=(e,t,n)=>Uf(e,t,Lf(e),n),jf=If,Uf=Pf,Hf=wi(),$f=(e,t)=>Ff(Hf,e,t),Vf=(e,t)=>zf(Hf,e,t),Wf=(e,t,n)=>jf(Hf,e,t,n),qf=(e,t,n)=>Uf(Hf,e,t,n),Gf=(e,t,n)=>gn(e,t,n).isSome(),Kf=ld.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),Yf=(e,t,n)=>{const o=e.getRect(t),r=e.getRect(n);return r.right>o.left&&r.left<o.right},Xf=e=>Cn(e,"tr"),Jf=(e,t,n,o,r,s,a)=>Cn(o,"td,th",a).bind((n=>Cn(t,"td,th",a).map((t=>rt(n,t)?rt(o,n)&&Ea(n)===r?s(t):Kf.none("in same cell"):Ni(Xf,[n,t]).fold((()=>Yf(e,t,n)?Kf.success():s(t)),(e=>s(t))))))).getOr(Kf.none("default")),Qf=(e,t,n,o,r)=>e.fold(t,n,o,r),Zf=o(o({},Kf),{},{verify:Jf,cata:Qf}),eg=(e,t,n,o)=>({parent:e,children:t,element:n,index:o}),tg=e=>ut(e).bind((t=>{const n=ht(t);return ng(n,e).map((o=>eg(t,n,e,o)))})),ng=(e,t)=>q(e,S(rt,t)),og=ze("br"),rg=(e,t,n)=>t(e,n).bind((e=>Pe(e)&&0===Sa(e).trim().length?rg(e,t,n):A.some(e))),sg=(e,t,n)=>n.traverse(t).orThunk((()=>rg(t,n.gather,e))).map(n.relative),ag=(e,t)=>vt(e,t).filter(og).orThunk((()=>vt(e,t-1).filter(og))),ig=(e,t,n,o)=>ag(t,n).bind((t=>o.traverse(t).fold((()=>rg(t,o.gather,e).map(o.relative)),(e=>tg(e).map((e=>Jp.on(e.parent,e.index))))))),lg=(e,t,n,o)=>{const r=og(t)?sg(e,t,o):ig(e,t,n,o);return r.map((e=>({start:e,finish:e})))},cg=e=>Zf.cata(e,(e=>A.none()),(()=>A.none()),(e=>A.some(pl(e,0))),(e=>A.some(pl(e,Ea(e))))),dg=(e,t)=>({left:e.left,top:e.top+t,right:e.right,bottom:e.bottom+t}),ug=(e,t)=>({left:e.left,top:e.top-t,right:e.right,bottom:e.bottom-t}),mg=(e,t,n)=>({left:e.left+t,top:e.top+n,right:e.right+t,bottom:e.bottom+n}),pg=e=>e.top,fg=e=>e.bottom,gg=(e,t,n)=>n>=0&&n<Ea(t)?e.getRangedRect(t,n,t,n+1):n>0?e.getRangedRect(t,n-1,t,n):A.none(),hg=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom}),vg=(e,t)=>A.some(e.getRect(t)),bg=(e,t,n)=>Ie(t)?vg(e,t).map(hg):Pe(t)?gg(e,t,n).map(hg):A.none(),yg=(e,t)=>Ie(t)?vg(e,t).map(hg):Pe(t)?e.getRangedRect(t,0,t,Ea(t)).map(hg):A.none(),xg=5,wg=100,Cg=ld.generate([{none:[]},{retry:["caret"]}]),Sg=(e,t)=>e.left<t.left||Math.abs(t.right-e.left)<1||e.left>t.right,_g=(e,t,n)=>hn(t,jd).fold(O,(t=>yg(e,t).exists((e=>Sg(n,e))))),kg=(e,t,n,o,r)=>{const s=dg(r,xg);return Math.abs(n.bottom-o.bottom)<1||n.top>r.bottom?Cg.retry(s):n.top===r.bottom?Cg.retry(dg(r,1)):_g(e,t,r)?Cg.retry(mg(s,xg,0)):Cg.none()},Eg=(e,t,n,o,r)=>{const s=ug(r,xg);return Math.abs(n.top-o.top)<1||n.bottom<r.top?Cg.retry(s):n.bottom===r.top?Cg.retry(ug(r,1)):_g(e,t,r)?Cg.retry(mg(s,xg,0)):Cg.none()},Og={point:pg,adjuster:Eg,move:ug,gather:$f},Tg={point:fg,adjuster:kg,move:dg,gather:Vf},Ag=(e,t,n)=>e.elementFromPoint(t,n).filter((e=>"table"===Re(e))).isSome(),Rg=(e,t,n,o,r)=>Ng(e,t,n,t.move(o,xg),r),Ng=(e,t,n,o,r)=>0===r?A.some(o):Ag(e,o.left,t.point(o))?Rg(e,t,n,o,r-1):e.situsFromPoint(o.left,t.point(o)).bind((s=>s.start.fold(A.none,(s=>yg(e,s).bind((a=>t.adjuster(e,s,a,n,o).fold(A.none,(o=>Ng(e,t,n,o,r-1))))).orThunk((()=>A.some(o)))),A.none))),Dg=(e,t,n)=>e.point(t)>n.getInnerHeight()?A.some(e.point(t)-n.getInnerHeight()):e.point(t)<0?A.some(-e.point(t)):A.none(),Bg=(e,t,n)=>{const o=e.move(n,xg),r=Ng(t,e,n,o,wg).getOr(o);return Dg(e,r,t).fold((()=>t.situsFromPoint(r.left,e.point(r))),(n=>(t.scrollBy(0,n),t.situsFromPoint(r.left,e.point(r)-n))))},Mg={tryUp:S(Bg,Og),tryDown:S(Bg,Tg),getJumpSize:x(xg)},Ig=20,Pg=(e,t,n)=>e.getSelection().bind((o=>lg(t,o.finish,o.foffset,n).fold((()=>A.some(pl(o.finish,o.foffset))),(r=>{const s=e.fromSitus(r),a=Zf.verify(e,o.finish,o.foffset,s.finish,s.foffset,n.failure,t);return cg(a)})))),Lg=(e,t,n,o,r,s)=>0===s?A.none():jg(e,t,n,o,r).bind((a=>{const i=e.fromSitus(a),l=Zf.verify(e,n,o,i.finish,i.foffset,r.failure,t);return Zf.cata(l,(()=>A.none()),(()=>A.some(a)),(a=>rt(n,a)&&0===o?Fg(e,n,o,ug,r):Lg(e,t,a,0,r,s-1)),(a=>rt(n,a)&&o===Ea(a)?Fg(e,n,o,dg,r):Lg(e,t,a,Ea(a),r,s-1)))})),Fg=(e,t,n,o,r)=>bg(e,t,n).bind((t=>zg(e,r,o(t,Mg.getJumpSize())))),zg=(e,t,n)=>{const o=Zo().browser;return o.isChromium()||o.isSafari()||o.isFirefox()?t.retry(e,n):A.none()},jg=(e,t,n,o,r)=>bg(e,n,o).bind((t=>zg(e,r,t))),Ug=(e,t,n)=>Pg(e,t,n).bind((o=>Lg(e,t,o.element,o.offset,n,Ig).map(e.fromSitus))),Hg=(e,t)=>Gf(e,(e=>ut(e).exists((e=>rt(e,t))))),$g=(e,t,n,o,r)=>Cn(o,"td,th",t).bind((o=>Cn(o,"table",t).bind((s=>Hg(r,s)?Ug(e,t,n).bind((e=>Cn(e.finish,"td,th",t).map((t=>({start:o,finish:t,range:e}))))):A.none())))),Vg=(e,t,n,o,r,s)=>s(o,t).orThunk((()=>$g(e,t,n,o,r).map((e=>{const t=e.range;return Zp.create(A.some(wf(t.start,t.soffset,t.finish,t.foffset)),!0)})))),Wg=(e,t)=>Cn(e,"tr",t).bind((e=>Cn(e,"table",t).bind((n=>{const o=pn(n,"tr");return rt(e,o[0])?Wf(n,(e=>Da(e).isSome()),t).map((e=>{const t=Ea(e);return Zp.create(A.some(wf(e,t,e,t)),!0)})):A.none()})))),qg=(e,t)=>Cn(e,"tr",t).bind((e=>Cn(e,"table",t).bind((n=>{const o=pn(n,"tr");return rt(e,o[o.length-1])?qf(n,(e=>Na(e).isSome()),t).map((e=>Zp.create(A.some(wf(e,0,e,0)),!0))):A.none()})))),Gg=(e,t,n,o,r,s,a)=>$g(e,n,o,r,s).bind((e=>Sf(t,n,e.start,e.finish,a))),Kg=e=>{let t=e;const n=()=>t,o=e=>{t=e};return{get:n,set:o}},Yg=e=>{const t=Kg(A.none()),n=()=>t.get().each(e),o=()=>{n(),t.set(A.none())},r=()=>t.get().isSome(),s=()=>t.get(),a=e=>{n(),t.set(A.some(e))};return{clear:o,isSet:r,get:s,set:a}},Xg=()=>{const e=Yg(v),t=t=>e.get().each(t);return o(o({},e),{},{on:t})},Jg=(e,t)=>Cn(e,"td,th",t),Qg=e=>mt(e).exists(Ka),Zg=(e,t,n,o)=>{const r=Xg(),s=r.clear,a=s=>{r.on((r=>{o.clearBeforeUpdate(t),Jg(s.target,n).each((a=>{Mi(r,a,n).each((n=>{const r=n.boxes.getOr([]);if(1===r.length){const n=r[0],a="false"===Ya(n),i=Sn(Ga(s.target),n,rt);a&&i&&(o.selectRange(t,r,n,n),e.selectContents(n))}else r.length>1&&(o.selectRange(t,r,n.start,n.finish),e.selectContents(a))}))}))}))},i=e=>{o.clear(t),Jg(e.target,n).filter(Qg).each(r.set)},l=e=>{a(e)},c=e=>{a(e),s()};return{clearstate:s,mousedown:i,mouseover:l,mouseup:c}},eh={traverse:gt,gather:Vf,relative:Jp.before,retry:Mg.tryDown,failure:Zf.failedDown},th={traverse:ft,gather:$f,relative:Jp.before,retry:Mg.tryUp,failure:Zf.failedUp},nh=e=>t=>t===e,oh=nh(38),rh=nh(40),sh=e=>e>=37&&e<=40,ah={isBackward:nh(37),isForward:nh(39)},ih={isBackward:nh(39),isForward:nh(37)},lh=e=>{const t=void 0!==e?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,o=t.body.scrollTop||t.documentElement.scrollTop;return Yr(n,o)},ch=(e,t,n)=>{const o=void 0!==n?n.dom:document,r=o.defaultView;r&&r.scrollBy(e,t)},dh=ld.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),uh=e=>dh.exact(e.start,e.soffset,e.finish,e.foffset),mh=e=>e.match({domRange:e=>Ze.fromDom(e.startContainer),relative:(e,t)=>Jp.getStart(e),exact:(e,t,n,o)=>e}),ph=dh.domRange,fh=dh.relative,gh=dh.exact,hh=e=>{const t=mh(e);return dt(t)},vh=vf.create,bh={domRange:ph,relative:fh,exact:gh,exactFromRange:uh,getWin:hh,range:vh},yh=(e,t,n)=>{var o,r;return A.from(null===(r=(o=e.dom).caretPositionFromPoint)||void 0===r?void 0:r.call(o,t,n)).bind((t=>{if(null===t.offsetNode)return A.none();const n=e.dom.createRange();return n.setStart(t.offsetNode,t.offset),n.collapse(),A.some(n)}))},xh=(e,t,n)=>{var o,r;return A.from(null===(r=(o=e.dom).caretRangeFromPoint)||void 0===r?void 0:r.call(o,t,n))},wh=(()=>document.caretPositionFromPoint?yh:document.caretRangeFromPoint?xh:A.none)(),Ch=(e,t,n)=>{const o=Ze.fromDom(e.document);return wh(o,t,n).map((e=>vf.create(Ze.fromDom(e.startContainer),e.startOffset,Ze.fromDom(e.endContainer),e.endOffset)))},Sh=(e,t)=>{const n=Re(e);return"input"===n?Jp.after(e):M(["br","img"],n)?0===t?Jp.before(e):Jp.after(e):Jp.on(e,t)},_h=(e,t)=>{const n=e.fold(Jp.before,Sh,Jp.after),o=t.fold(Jp.before,Sh,Jp.after);return bh.relative(n,o)},kh=(e,t,n,o)=>{const r=Sh(e,t),s=Sh(n,o);return bh.relative(r,s)},Eh=(e,t,n,o)=>{const r=it(e),s=r.dom.createRange();return s.setStart(e.dom,t),s.setEnd(n.dom,o),s},Oh=(e,t,n,o)=>{const r=Eh(e,t,n,o),s=rt(e,n)&&t===o;return r.collapsed&&!s},Th=e=>A.from(e.getSelection()),Ah=(e,t)=>{Th(e).each((e=>{e.removeAllRanges(),e.addRange(t)}))},Rh=(e,t,n,o,r)=>{const s=af(e,t,n,o,r);Ah(e,s)},Nh=(e,t,n,o,r,s)=>{t.collapse(n.dom,o),t.extend(r.dom,s)},Dh=(e,t)=>ff(e,t).match({ltr:(t,n,o,r)=>{Rh(e,t,n,o,r)},rtl:(t,n,o,r)=>{Th(e).each((s=>{if(s.setBaseAndExtent)s.setBaseAndExtent(t.dom,n,o.dom,r);else if(s.extend)try{Nh(e,s,t,n,o,r)}catch(a){Rh(e,o,r,t,n)}else Rh(e,o,r,t,n)}))}}),Bh=(e,t,n,o,r)=>{const s=kh(t,n,o,r);Dh(e,s)},Mh=(e,t,n)=>{const o=_h(t,n);Dh(e,o)},Ih=e=>{if(e.rangeCount>0){const t=e.getRangeAt(0),n=e.getRangeAt(e.rangeCount-1);return A.some(vf.create(Ze.fromDom(t.startContainer),t.startOffset,Ze.fromDom(n.endContainer),n.endOffset))}return A.none()},Ph=e=>{if(null===e.anchorNode||null===e.focusNode)return Ih(e);{const t=Ze.fromDom(e.anchorNode),n=Ze.fromDom(e.focusNode);return Oh(t,e.anchorOffset,n,e.focusOffset)?A.some(vf.create(t,e.anchorOffset,n,e.focusOffset)):Ih(e)}},Lh=(e,t,n=!0)=>{const o=n?tf:ef,r=o(e,t);Ah(e,r)},Fh=e=>Th(e).filter((e=>e.rangeCount>0)).bind(Ph),zh=e=>Fh(e).map((e=>bh.exact(e.start,e.soffset,e.finish,e.foffset))),jh=(e,t)=>{const n=gf(e,t);return cf(n)},Uh=(e,t,n)=>Ch(e,t,n),Hh=e=>{Th(e).each((e=>e.removeAllRanges()))},$h=e=>{const t=(t,n)=>Ze.fromPoint(Ze.fromDom(e.document),t,n),n=e=>e.dom.getBoundingClientRect(),o=(t,n,o,r)=>{const s=bh.exact(t,n,o,r);return jh(e,s)},r=()=>zh(e).map((t=>xf(e,t))),s=t=>{const n=bh.relative(t.start,t.finish);return xf(e,n)},a=(t,n)=>Uh(e,t,n).map((e=>yf.create(e.start,e.soffset,e.finish,e.foffset))),i=()=>{Hh(e)},l=(t=!1)=>{zh(e).each((n=>n.fold((e=>e.collapse(t)),((n,o)=>{const r=t?n:o;Mh(e,r,r)}),((n,o,r,s)=>{const a=t?n:r,i=t?o:s;Bh(e,a,i,a,i)}))))},c=t=>{Lh(e,t,!1)},d=t=>{Lh(e,t)},u=t=>{Bh(e,t.start,t.soffset,t.finish,t.foffset)},m=(t,n)=>{Mh(e,t,n)},p=()=>e.innerHeight,f=()=>{const t=lh(Ze.fromDom(e.document));return t.top},g=(t,n)=>{ch(t,n,Ze.fromDom(e.document))};return{elementFromPoint:t,getRect:n,getRangedRect:o,getSelection:r,fromSitus:s,situsFromPoint:a,clearSelection:i,collapseSelection:l,setSelection:u,setRelativeSelection:m,selectNode:c,selectContents:d,getInnerHeight:p,getScrollY:f,scrollBy:g}},Vh=(e,t)=>({rows:e,cols:t}),Wh=(e,t,n,o)=>{const r=$h(e),s=Zg(r,t,n,o);return{clearstate:s.clearstate,mousedown:s.mousedown,mouseover:s.mouseover,mouseup:s.mouseup}},qh=e=>hn(e,Me).exists(Ka),Gh=(e,t)=>qh(e)||qh(t),Kh=(e,t,n,o)=>{const r=$h(e),s=()=>(o.clear(t),A.none()),a=(e,a,i,l,c,d)=>{const u=e.raw,m=u.which,p=!0===u.shiftKey,f=Ii(t,o.selectedSelector).fold((()=>(sh(m)&&!p&&o.clearBeforeUpdate(t),sh(m)&&p&&!Gh(a,l)?A.none:rh(m)&&p?S(Gg,r,t,n,eh,l,a,o.selectRange):oh(m)&&p?S(Gg,r,t,n,th,l,a,o.selectRange):rh(m)?S(Vg,r,n,eh,l,a,qg):oh(m)?S(Vg,r,n,th,l,a,Wg):A.none)),(e=>{const n=n=>()=>{const s=ne(n,(n=>_f(n.rows,n.cols,t,e,o)));return s.fold((()=>Li(t,o.firstSelectedSelector,o.lastSelectedSelector).map((e=>{const n=rh(m)||d.isForward(m)?Jp.after:Jp.before;return r.setRelativeSelection(Jp.on(e.first,0),n(e.table)),o.clear(t),Zp.create(A.none(),!0)}))),(e=>A.some(Zp.create(A.none(),!0))))};return sh(m)&&p&&!Gh(a,l)?A.none:rh(m)&&p?n([Vh(1,0)]):oh(m)&&p?n([Vh(-1,0)]):d.isBackward(m)&&p?n([Vh(0,-1),Vh(-1,0)]):d.isForward(m)&&p?n([Vh(0,1),Vh(1,0)]):sh(m)&&!p?s:A.none}));return f()},i=(e,r,s,a,i)=>Ii(t,o.selectedSelector).fold((()=>{const l=e.raw,c=l.which,d=!0===l.shiftKey;return d&&sh(c)&&Gh(r,a)?Cf(t,n,r,s,a,i,o.selectRange):A.none()}),A.none);return{keydown:a,keyup:i}},Yh=(e,t,n,o)=>{const r=$h(e);return(e,s)=>{o.clearBeforeUpdate(t),Mi(e,s,n).each((e=>{const n=e.boxes.getOr([]);o.selectRange(t,n,e.start,e.finish),r.selectContents(s),r.collapseSelection()}))}},Xh=(e,t)=>{const n=Ve(e,t);return void 0===n||""===n?[]:n.split(" ")},Jh=(e,t,n)=>{const o=Xh(e,t),r=o.concat([n]);return Ue(e,t,r.join(" ")),!0},Qh=(e,t,n)=>{const o=U(Xh(e,t),(e=>e!==n));return o.length>0?Ue(e,t,o.join(" ")):qe(e,t),!1},Zh=e=>void 0!==e.dom.classList,ev=e=>Xh(e,"class"),tv=(e,t)=>Jh(e,"class",t),nv=(e,t)=>Qh(e,"class",t),ov=(e,t)=>{Zh(e)?e.dom.classList.add(t):tv(e,t)},rv=e=>{const t=Zh(e)?e.dom.classList:ev(e);0===t.length&&qe(e,"class")},sv=(e,t)=>{if(Zh(e)){const n=e.dom.classList;n.remove(t)}else nv(e,t);rv(e)},av=(e,t)=>Zh(e)&&e.dom.classList.contains(t),iv=(e,t)=>{F(t,(t=>{sv(e,t)}))},lv=e=>t=>{ov(t,e)},cv=e=>t=>{iv(t,e)},dv=e=>{const t=lv(e.selected),n=cv([e.selected,e.lastSelected,e.firstSelected]),o=t=>{const o=pn(t,e.selectedSelector);F(o,n)},r=(n,r,s,a)=>{o(n),F(r,t),ov(s,e.firstSelected),ov(a,e.lastSelected)};return{clearBeforeUpdate:o,clear:o,selectRange:r,selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}},uv=(e,t,n)=>{const o=t=>{qe(t,e.selected),qe(t,e.firstSelected),qe(t,e.lastSelected)},r=t=>{Ue(t,e.selected,"1")},s=e=>{a(e),n()},a=t=>{const n=pn(t,`${e.selectedSelector},${e.firstSelectedSelector},${e.lastSelectedSelector}`);F(n,o)},i=(n,o,a,i)=>{s(n),F(o,r),Ue(a,e.firstSelected,"1"),Ue(i,e.lastSelected,"1"),t(o,a,i)};return{clearBeforeUpdate:a,clear:s,selectRange:i,selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}},mv={byClass:dv,byAttr:uv},pv=(e,t,n,o)=>{switch(e.tag){case"none":return t();case"single":return o(e.element);case"multiple":return n(e.elements)}},fv=()=>({tag:"none"}),gv=e=>({tag:"multiple",elements:e}),hv=e=>({tag:"single",element:e}),vv=(e,t,n)=>{const o=()=>ji(e(),n).fold((()=>t().fold(fv,hv)),gv);return{get:o}},bv=(e,t)=>{const n=e.slice(0,t[t.length-1].row+1),o=nc(n);return K(o,(e=>{const n=e.cells.slice(0,t[t.length-1].column+1);return L(n,(e=>e.element))}))},yv=(e,t)=>{const n=e.slice(t[0].row+t[0].rowspan-1,e.length),o=nc(n);return K(o,(e=>{const n=e.cells.slice(t[0].column+t[0].colspan-1,e.cells.length);return L(n,(e=>e.element))}))},xv=(e,t,n)=>{const o=Lr.fromTable(e),r=dc(o,t);return r.map((e=>{const t=ec(o,n,!1),{rows:r}=wr(t),s=bv(r,e),a=yv(r,e);return{upOrLeftCells:s,downOrRightCells:a}}))},wv=(e,t,n,o,r,s,a)=>({target:e,x:t,y:n,stop:o,prevent:r,kill:s,raw:a}),Cv=e=>{const t=Ze.fromDom(nn(e).getOr(e.target)),n=()=>e.stopPropagation(),o=()=>e.preventDefault(),r=b(o,n);return wv(t,e.clientX,e.clientY,n,o,r,e)},Sv=(e,t)=>n=>{e(n)&&t(Cv(n))},_v=(e,t,n,o,r)=>{const s=Sv(n,o);return e.dom.addEventListener(t,s,r),{unbind:S(Ev,e,t,s,r)}},kv=(e,t,n,o)=>_v(e,t,n,o,!1),Ev=(e,t,n,o)=>{e.dom.removeEventListener(t,n,o)},Ov=T,Tv=(e,t,n)=>kv(e,t,Ov,n),Av=Cv,Rv=e=>!av(Ze.fromDom(e.target),"ephox-snooker-resizer-bar"),Nv=(e,t)=>{const n=vv((()=>Ze.fromDom(e.getBody())),(()=>al(Za(e),Ja(e))),Zi.selectedSelector),o=(t,n,o)=>{const r=ro(n);r.each((r=>{const s=vm(e),a=$a(v,Ze.fromDom(e.getDoc()),s),i=il(e),l=xv(r,{selection:i},a);rm(e,t,n,o,l)}))},r=()=>sm(e),s=mv.byAttr(Zi,o,r);e.on("init",(n=>{const o=e.getWin(),r=Xa(e),a=Ja(e),i=()=>{const t=e.selection,n=Ze.fromDom(t.getStart()),o=Ze.fromDom(t.getEnd()),a=Ni(ro,[n,o]);a.fold((()=>s.clear(r)),v)},l=Wh(o,r,a,s),c=Kh(o,r,a,s),d=Yh(o,r,a,s),u=e=>!0===e.raw.shiftKey;e.on("TableSelectorChange",(e=>d(e.start,e.finish)));const m=(t,n)=>{u(t)&&(n.kill&&t.kill(),n.selection.each((t=>{const n=bh.relative(t.start,t.finish),r=gf(o,n);e.selection.setRng(r)})))},p=t=>{const n=Av(t);if(n.raw.shiftKey&&sh(n.raw.which)){const t=e.selection.getRng(),o=Ze.fromDom(t.startContainer),r=Ze.fromDom(t.endContainer);c.keyup(n,o,t.startOffset,r,t.endOffset).each((e=>{m(n,e)}))}},f=n=>{const o=Av(n);t.hide();const r=e.selection.getRng(),s=Ze.fromDom(r.startContainer),a=Ze.fromDom(r.endContainer),i=Hr(ah,ih)(Ze.fromDom(e.selection.getStart()));c.keydown(o,s,r.startOffset,a,r.endOffset,i).each((e=>{m(o,e)})),t.show()},g=e=>0===e.button,h=e=>void 0===e.buttons||0!==(1&e.buttons),b=e=>{l.clearstate()},y=e=>{g(e)&&Rv(e)&&l.mousedown(Av(e))},x=e=>{h(e)&&Rv(e)&&l.mouseover(Av(e))},w=e=>{g(e)&&Rv(e)&&l.mouseup(Av(e))},C=()=>{const e=Kg(Ze.fromDom(r)),t=Kg(0),n=n=>{const o=Ze.fromDom(n.target);if(ze("td")(o)||ze("th")(o)){const r=e.get(),s=t.get();rt(r,o)&&n.timeStamp-s<300&&(n.preventDefault(),d(o,o))}e.set(o),t.set(n.timeStamp)};return{touchEnd:n}},S=C();e.on("dragstart",b),e.on("mousedown",y),e.on("mouseover",x),e.on("mouseup",w),e.on("touchend",S.touchEnd),e.on("keyup",p),e.on("keydown",f),e.on("NodeChange",i)})),e.on("PreInit",(()=>{e.serializer.addTempAttr(Zi.firstSelected),e.serializer.addTempAttr(Zi.lastSelected)}));const a=e=>s.clear(Ze.fromDom(e)),i=()=>pv(n.get(),x([]),(e=>L(e,(e=>e.dom))),(e=>[e.dom]));return{getSelectedCells:i,clearSelectedCells:a}},Dv=e=>{let t=[];const n=e=>{if(void 0===e)throw new Error("Event bind error: undefined handler");t.push(e)},o=e=>{t=U(t,(t=>t!==e))},r=(...n)=>{const o={};F(e,((e,t)=>{o[e]=n[t]})),F(t,(e=>{e(o)}))};return{bind:n,unbind:o,trigger:r}},Bv=e=>{const t=ae(e,(e=>({bind:e.bind,unbind:e.unbind}))),n=ae(e,(e=>e.trigger));return{registry:t,trigger:n}},Mv=(e,t)=>{let n=null;const o=()=>{d(n)||(clearTimeout(n),n=null)},r=(...r)=>{o(),n=setTimeout((()=>{n=null,e.apply(null,r)}),t)};return{cancel:o,throttle:r}},Iv=e=>e.slice(0).sort(),Pv=(e,t)=>{throw new Error("All required keys ("+Iv(e).join(", ")+") were not specified. Specified keys were: "+Iv(t).join(", ")+".")},Lv=e=>{throw new Error("Unsupported keys for object: "+Iv(e).join(", "))},Fv=(e,t)=>{if(!c(t))throw new Error("The "+e+" fields must be an array. Was: "+t+".");F(t,(t=>{if(!i(t))throw new Error("The value "+t+" in the "+e+" fields was not a string.")}))},zv=(e,t)=>{throw new Error("All values need to be of type: "+t+". Keys ("+Iv(e).join(", ")+") were not.")},jv=e=>{const t=Iv(e),n=W(t,((e,n)=>n<t.length-1&&e===t[n+1]));n.each((e=>{throw new Error("The field: "+e+" occurs more than once in the combined fields: ["+t.join(", ")+"].")}))},Uv=(e,t)=>Hv(e,t,{validate:g,label:"function"}),Hv=(e,t,n)=>{if(0===t.length)throw new Error("You must specify at least one required field.");return Fv("required",t),jv(t),o=>{const r=oe(o),s=Y(t,(e=>M(r,e)));s||Pv(t,r),e(t,r);const a=U(t,(e=>!n.validate(o[e],e)));return a.length>0&&zv(a,n.label),o}},$v=(e,t)=>{const n=U(t,(t=>!M(e,t)));n.length>0&&Lv(n)},Vv=e=>Uv($v,e),Wv=Vv(["compare","extract","mutate","sink"]),qv=Vv(["element","start","stop","destroy"]),Gv=Vv(["forceDrop","drop","move","delayDrop"]),Kv=()=>{let e=A.none();const t=()=>{e=A.none()},n=(t,n)=>{const o=e.map((e=>t.compare(e,n)));return e=A.some(n),o},o=(e,t)=>{const o=t.extract(e);o.each((e=>{const o=n(t,e);o.each((e=>{r.trigger.move(e)}))}))},r=Bv({move:Dv(["info"])});return{onEvent:o,reset:t,events:r.registry}},Yv=()=>{const e=Bv({move:Dv(["info"])});return{onEvent:v,reset:v,events:e.registry}},Xv=()=>{const e=Yv(),t=Kv();let n=e;const o=()=>{n.reset(),n=t},r=()=>{n.reset(),n=e},s=(e,t)=>{n.onEvent(e,t)},a=()=>n===t;return{on:o,off:r,isOn:a,onEvent:s,events:t.events}},Jv=(e,t,n)=>{let o=!1;const r=Bv({start:Dv([]),stop:Dv([])}),s=Xv(),a=()=>{f.stop(),s.isOn()&&(s.off(),r.trigger.stop())},i=Mv(a,200),l=e=>{f.start(e),s.on(),r.trigger.start()},c=e=>{i.cancel(),s.onEvent(e,t)};s.events.move.bind((n=>{t.mutate(e,n.info)}));const d=()=>{o=!0},u=()=>{o=!1},m=()=>o,p=e=>(...t)=>{o&&e.apply(null,t)},f=t.sink(Gv({forceDrop:a,drop:p(a),move:p(c),delayDrop:p(i.throttle)}),n),g=()=>{f.destroy()};return{element:f.element,go:l,on:d,off:u,isActive:m,destroy:g,events:r.registry}},Qv=e=>{const t=e.replace(/\./g,"-"),n=e=>t+"-"+e;return{resolve:n}},Zv=Qv("ephox-dragster"),eb=Zv.resolve,tb=e=>{const t=o({layerClass:eb("blocker")},e),n=Ze.fromTag("div");Ue(n,"role","presentation"),zn(n,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),ov(n,eb("blocker")),ov(n,t.layerClass);const r=x(n),s=()=>{Tt(n)};return{element:r,destroy:s}},nb=(e,t)=>Yr(t.left-e.left,t.top-e.top),ob=e=>A.some(Yr(e.x,e.y)),rb=(e,t)=>{e.mutate(t.left,t.top)},sb=(e,t)=>{const n=tb(t),o=Tv(n.element(),"mousedown",e.forceDrop),r=Tv(n.element(),"mouseup",e.drop),s=Tv(n.element(),"mousemove",e.move),a=Tv(n.element(),"mouseout",e.delayDrop),i=()=>{n.destroy(),r.unbind(),s.unbind(),a.unbind(),o.unbind()},l=e=>{Ct(e,n.element())},c=()=>{Tt(n.element())};return qv({element:n.element,start:l,stop:c,destroy:i})};var ab=Wv({compare:nb,extract:ob,sink:sb,mutate:rb});const ib=(e,t={})=>{var n;const o=null!==(n=t.mode)&&void 0!==n?n:ab;return Jv(e,o,t)},lb=Qv("ephox-snooker"),cb=lb.resolve,db=()=>{const e=Bv({drag:Dv(["xDelta","yDelta"])}),t=(t,n)=>{e.trigger.drag(t,n)};return{mutate:t,events:e.registry}},ub=()=>{const e=Bv({drag:Dv(["xDelta","yDelta","target"])});let t=A.none();const n=db();n.events.drag.bind((n=>{t.each((t=>{e.trigger.drag(n.xDelta,n.yDelta,t)}))}));const o=e=>{t=A.some(e)},r=()=>t;return{assign:o,get:r,mutate:n.mutate,events:e.registry}},mb=(e,t,n,o,r)=>{const s=Ze.fromTag("div");return zn(s,{position:"absolute",left:t-o/2+"px",top:n+"px",height:r+"px",width:o+"px"}),He(s,{"data-column":e,role:"presentation"}),s},pb=(e,t,n,o,r)=>{const s=Ze.fromTag("div");return zn(s,{position:"absolute",left:t+"px",top:n-r/2+"px",height:r+"px",width:o+"px"}),He(s,{"data-row":e,role:"presentation"}),s},fb=cb("resizer-bar"),gb=cb("resizer-rows"),hb=cb("resizer-cols"),vb=7,bb=(e,t)=>K(e.all,((e,n)=>t(e.element)?[n]:[])),yb=(e,t)=>{const n=[];return P(e.grid.columns,(o=>{const r=Lr.getColumnAt(e,o).map((e=>e.element));r.forall(t)&&n.push(o)})),U(n,(n=>{const o=Lr.filterItems(e,(e=>e.column===n));return Y(o,(e=>t(e.element)))}))},xb=e=>{const t=pn(e.parent(),"."+fb);F(t,Tt)},wb=(e,t,n)=>{const o=e.origin();F(t,(t=>{t.each((t=>{const r=n(o,t);ov(r,fb),Ct(e.parent(),r)}))}))},Cb=(e,t,n,o)=>{wb(e,t,((e,t)=>{const r=mb(t.col,t.x-e.left,n.top-e.top,vb,o);return ov(r,hb),r}))},Sb=(e,t,n,o)=>{wb(e,t,((e,t)=>{const r=pb(t.row,n.left-e.left,t.y-e.top,o,vb);return ov(r,gb),r}))},_b=(e,t,n,o,r)=>{const s=Qr(n),a=t.isResizable,i=o.length>0?us.positions(o,n):[],l=i.length>0?bb(e,a):[],c=U(i,((e,t)=>I(l,(e=>t===e))));Sb(t,c,s,dr(n));const d=r.length>0?gs.positions(r,n):[],u=d.length>0?yb(e,a):[],m=U(d,((e,t)=>I(u,(e=>t===e))));Cb(t,m,s,qr(n))},kb=(e,t)=>{if(xb(e),e.isResizable(t)){const n=Lr.fromTable(t),o=jr(n),r=Fr(n);_b(n,e,t,o,r)}},Eb=(e,t)=>{const n=pn(e.parent(),"."+fb);F(n,t)},Ob=e=>{Eb(e,(e=>{Fn(e,"display","none")}))},Tb=e=>{Eb(e,(e=>{Fn(e,"display","block")}))},Ab=e=>av(e,gb),Rb=e=>av(e,hb),Nb=cb("resizer-bar-dragging"),Db=e=>{const t=ub(),n=ib(t,{});let o=A.none();const r=(e,t)=>A.from(Ve(e,t));t.events.drag.bind((e=>{r(e.target,"data-row").each((t=>{const n=Yn(e.target,"top");Fn(e.target,"top",n+e.yDelta+"px")})),r(e.target,"data-column").each((t=>{const n=Yn(e.target,"left");Fn(e.target,"left",n+e.xDelta+"px")}))}));const s=(e,t)=>{const n=Yn(e,t),o=Wn(e,"data-initial-"+t,0);return n-o};n.events.stop.bind((()=>{t.get().each((t=>{o.each((n=>{r(t,"data-row").each((e=>{const o=s(t,"top");qe(t,"data-initial-top"),p.trigger.adjustHeight(n,o,parseInt(e,10))})),r(t,"data-column").each((e=>{const o=s(t,"left");qe(t,"data-initial-left"),p.trigger.adjustWidth(n,o,parseInt(e,10))})),kb(e,n)}))}))}));const a=(o,r)=>{p.trigger.startAdjust(),t.assign(o),Ue(o,"data-initial-"+r,Yn(o,r)),ov(o,Nb),Fn(o,"opacity","0.2"),n.go(e.parent())},i=Tv(e.parent(),"mousedown",(e=>{Ab(e.target)&&a(e.target,"top"),Rb(e.target)&&a(e.target,"left")})),l=t=>rt(t,e.view()),c=e=>Cn(e,"table",l).filter(Ka),d=Tv(e.view(),"mouseover",(t=>{c(t.target).fold((()=>{rn(t.target)&&xb(e)}),(t=>{n.isActive()&&(o=A.some(t),kb(e,t))}))})),u=()=>{i.unbind(),d.unbind(),n.destroy(),xb(e)},m=t=>{kb(e,t)},p=Bv({adjustHeight:Dv(["table","delta","row"]),adjustWidth:Dv(["table","delta","column"]),startAdjust:Dv([])});return{destroy:u,refresh:m,on:n.on,off:n.off,hideBars:S(Ob,e),showBars:S(Tb,e),events:p.registry}},Bb=(e,t,n)=>{const o=us,r=gs,s=Db(e),a=Bv({beforeResize:Dv(["table","type"]),afterResize:Dv(["table","type"]),startDrag:Dv([])});return s.events.adjustHeight.bind((e=>{const t=e.table;a.trigger.beforeResize(t,"row");const n=o.delta(e.delta,t);Cd(t,n,e.row,o),a.trigger.afterResize(t,"row")})),s.events.startAdjust.bind((e=>{a.trigger.startDrag()})),s.events.adjustWidth.bind((e=>{const o=e.table;a.trigger.beforeResize(o,"col");const s=r.delta(e.delta,o),i=n(o);wd(o,s,e.column,t,i),a.trigger.afterResize(o,"col")})),{on:s.on,off:s.off,refreshBars:s.refresh,hideBars:s.hideBars,showBars:s.showBars,destroy:s.destroy,events:a.registry}},Mb={create:Bb},Ib=(e,t)=>{const n=Le(e)?ct(e):e;return{parent:x(n),view:x(e),origin:x(Yr(0,0)),isResizable:t}},Pb=(e,t,n)=>{const o=()=>Qr(t);return{parent:x(t),view:x(e),origin:o,isResizable:n}},Lb=(e,t,n)=>({parent:x(t),view:x(e),origin:x(Yr(0,0)),isResizable:n}),Fb={only:Ib,detached:Pb,body:Lb},zb=()=>{const e=Ze.fromTag("div");return zn(e,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),Ct(sn(),e),e},jb=(e,t)=>e.inline?Fb.body(Ze.fromDom(e.getBody()),zb(),t):Fb.only(Ze.fromDom(e.getDoc()),t),Ub=(e,t)=>{e.inline&&Tt(t.parent())},Hb=e=>f(e)&&"TABLE"===e.nodeName,$b="bar-",Vb=e=>"false"!==Ve(e,"data-mce-resize"),Wb=e=>{const t=Lr.fromTable(e);Lr.hasColumns(t)||F(no(e),(e=>{const t=jn(e,"width");Fn(e,"width",t),qe(e,"width")}))},qb=e=>{const t=Xg(),n=Xg(),o=Xg();let r,s;const a=t=>Dm(e,t),i=()=>wm(e)?Ol():El(),l=e=>Tl(e).columns,c=(t,n,o)=>{const c=Rn(n,"e");if(""===s&&cp(t),o!==r&&""!==s){Fn(t,"width",s);const n=i(),d=a(t),u=wm(e)||c?l(t)-1:0;wd(t,o-r,u,n,d)}else if(oi(s)){const e=parseFloat(s.replace("%","")),n=o*e/r;Fn(t,"width",n+"%")}ri(s)&&Wb(t)},d=()=>{n.on((e=>{e.destroy()})),o.on((t=>{Ub(e,t)}))};e.on("init",(()=>{const r=jb(e,Vb);if(o.set(r),bm(e)&&Om(e)){const o=i(),s=Mb.create(r,o,a);s.on(),s.events.startDrag.bind((n=>{t.set(e.selection.getRng())})),s.events.beforeResize.bind((t=>{const n=t.table.dom;am(e,n,ei(n),ti(n),$b+t.type)})),s.events.afterResize.bind((n=>{const o=n.table,r=o.dom;Qa(o),t.on((t=>{e.selection.setRng(t),e.focus()})),im(e,r,ei(r),ti(r),$b+n.type),e.undoManager.add()})),n.set(s)}})),e.on("ObjectResizeStart",(t=>{const n=t.target;if(Hb(n)){const o=Ze.fromDom(n);F(e.dom.select(".mce-clonedresizable"),(t=>{e.dom.addClass(t,"mce-"+xm(e)+"-columns")})),!ap(o)&&km(e)?dp(o):!sp(o)&&_m(e)&&cp(o),ip(o)&&An(t.origin,$b)&&cp(o),r=t.width,s=Em(e)?"":ni(e,n).getOr("")}})),e.on("ObjectResized",(t=>{const n=t.target;if(Hb(n)){const o=Ze.fromDom(n),r=t.origin;An(r,"corner-")&&c(o,r,t.width),Qa(o),om(e,o.dom,lm)}})),e.on("SwitchMode",(()=>{n.on((t=>{e.mode.isReadOnly()?t.hideBars():t.showBars()}))})),e.on("dragstart dragend",(e=>{n.on((t=>{"dragstart"===e.type?(t.hideBars(),t.off()):(t.on(),t.showBars())}))})),e.on("remove",(()=>{d()}));const u=e=>{n.on((t=>t.refreshBars(Ze.fromDom(e))))},m=()=>{n.on((e=>e.hideBars()))},p=()=>{n.on((e=>e.showBars()))};return{refresh:u,hide:m,show:p}},Gb=e=>{hm(e);const t=qb(e),n=Nv(e,t),o=Bm(e,t,n);return $p(e,o),Vp(e,o),ml(e,o),{getSelectedCells:n.getSelectedCells,clearSelectedCells:n.clearSelectedCells}},Kb=e=>{const t=Gb(e);return{table:t}};var Yb=()=>{e.add("dom",Kb)};Yb()}()},345:function(e,t,n){n(9097)},9097:function(e,t,n){var o=n(22)["default"],r=n(2214)["default"];const s=["class","style"],a=["events"],i=["attributes"],l=["primary"],c=["primary"];n(1703),n(7658),n(5069),n(2707),n(4916),n(5306),n(3948),n(8862),n(3210),n(4603),n(8450),n(541),n(1817),n(1299),function(){"use strict";const e=Object.getPrototypeOf,t=(e,t,n)=>{var o;return!!n(e,t.prototype)||(null===(o=e.constructor)||void 0===o?void 0:o.name)===t.name},n=e=>{const n=typeof e;return null===e?"null":"object"===n&&Array.isArray(e)?"array":"object"===n&&t(e,String,((e,t)=>t.isPrototypeOf(e)))?"string":n},d=e=>t=>n(t)===e,u=e=>t=>typeof t===e,m=e=>t=>e===t,p=(n,o)=>g(n)&&t(n,o,((t,n)=>e(t)===n)),f=d("string"),g=d("object"),h=e=>p(e,Object),v=d("array"),b=m(null),y=u("boolean"),x=m(void 0),w=e=>null===e||void 0===e,C=e=>!w(e),S=u("function"),_=u("number"),k=(e,t)=>{if(v(e)){for(let n=0,o=e.length;n<o;++n)if(!t(e[n]))return!1;return!0}return!1},E=()=>{},O=e=>()=>e(),T=(e,t)=>(...n)=>e(t.apply(null,n)),A=(e,t)=>n=>e(t(n)),R=e=>()=>e,N=e=>e,D=(e,t)=>e===t;function B(e,...t){return(...n)=>{const o=t.concat(n);return e.apply(null,o)}}const M=e=>t=>!e(t),I=e=>()=>{throw new Error(e)},P=e=>e(),L=R(!1),F=R(!0);class z{constructor(e,t){this.tag=e,this.value=t}static some(e){return new z(!0,e)}static none(){return z.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?z.some(e(this.value)):z.none()}bind(e){return this.tag?e(this.value):z.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:z.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!==e&&void 0!==e?e:"Called getOrDie on None")}static from(e){return C(e)?z.some(e):z.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}z.singletonNone=new z(!1);const j=Array.prototype.slice,U=Array.prototype.indexOf,H=Array.prototype.push,$=(e,t)=>U.call(e,t),V=(e,t)=>{const n=$(e,t);return-1===n?z.none():z.some(n)},W=(e,t)=>$(e,t)>-1,q=(e,t)=>{for(let n=0,o=e.length;n<o;n++){const o=e[n];if(t(o,n))return!0}return!1},G=(e,t)=>{const n=[];for(let o=0;o<e;o++)n.push(t(o));return n},K=(e,t)=>{const n=[];for(let o=0;o<e.length;o+=t){const r=j.call(e,o,o+t);n.push(r)}return n},Y=(e,t)=>{const n=e.length,o=new Array(n);for(let r=0;r<n;r++){const n=e[r];o[r]=t(n,r)}return o},X=(e,t)=>{for(let n=0,o=e.length;n<o;n++){const o=e[n];t(o,n)}},J=(e,t)=>{for(let n=e.length-1;n>=0;n--){const o=e[n];t(o,n)}},Q=(e,t)=>{const n=[],o=[];for(let r=0,s=e.length;r<s;r++){const s=e[r],a=t(s,r)?n:o;a.push(s)}return{pass:n,fail:o}},Z=(e,t)=>{const n=[];for(let o=0,r=e.length;o<r;o++){const r=e[o];t(r,o)&&n.push(r)}return n},ee=(e,t,n)=>(J(e,((e,o)=>{n=t(n,e,o)})),n),te=(e,t,n)=>(X(e,((e,o)=>{n=t(n,e,o)})),n),ne=(e,t,n)=>{for(let o=0,r=e.length;o<r;o++){const r=e[o];if(t(r,o))return z.some(r);if(n(r,o))break}return z.none()},oe=(e,t)=>ne(e,t,L),re=(e,t)=>{for(let n=0,o=e.length;n<o;n++){const o=e[n];if(t(o,n))return z.some(n)}return z.none()},se=e=>{const t=[];for(let n=0,o=e.length;n<o;++n){if(!v(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);H.apply(t,e[n])}return t},ae=(e,t)=>se(Y(e,t)),ie=(e,t)=>{for(let n=0,o=e.length;n<o;++n){const o=e[n];if(!0!==t(o,n))return!1}return!0},le=e=>{const t=j.call(e,0);return t.reverse(),t},ce=(e,t)=>Z(e,(e=>!W(t,e))),de=(e,t)=>{const n={};for(let o=0,r=e.length;o<r;o++){const r=e[o];n[String(r)]=t(r,o)}return n},ue=e=>[e],me=(e,t)=>{const n=j.call(e,0);return n.sort(t),n},pe=(e,t)=>t>=0&&t<e.length?z.some(e[t]):z.none(),fe=e=>pe(e,0),ge=e=>pe(e,e.length-1),he=S(Array.from)?Array.from:e=>j.call(e),ve=(e,t)=>{for(let n=0;n<e.length;n++){const o=t(e[n],n);if(o.isSome())return o}return z.none()},be=Object.keys,ye=Object.hasOwnProperty,xe=(e,t)=>{const n=be(e);for(let o=0,r=n.length;o<r;o++){const r=n[o],s=e[r];t(s,r)}},we=(e,t)=>Ce(e,((e,n)=>({k:n,v:t(e,n)}))),Ce=(e,t)=>{const n={};return xe(e,((e,o)=>{const r=t(e,o);n[r.k]=r.v})),n},Se=e=>(t,n)=>{e[n]=t},_e=(e,t,n,o)=>{xe(e,((e,r)=>{(t(e,r)?n:o)(e,r)}))},ke=(e,t)=>{const n={},o={};return _e(e,t,Se(n),Se(o)),{t:n,f:o}},Ee=(e,t)=>{const n={};return _e(e,t,Se(n),E),n},Oe=(e,t)=>{const n=[];return xe(e,((e,o)=>{n.push(t(e,o))})),n},Te=(e,t)=>{const n=be(e);for(let o=0,r=n.length;o<r;o++){const r=n[o],s=e[r];if(t(s,r,e))return z.some(s)}return z.none()},Ae=e=>Oe(e,N),Re=(e,t)=>Ne(e,t)?z.from(e[t]):z.none(),Ne=(e,t)=>ye.call(e,t),De=(e,t)=>Ne(e,t)&&void 0!==e[t]&&null!==e[t],Be=(e,t,n=D)=>e.exists((e=>n(e,t))),Me=(e,t,n=D)=>Le(e,t,n).getOr(e.isNone()&&t.isNone()),Ie=e=>{const t=[],n=e=>{t.push(e)};for(let o=0;o<e.length;o++)e[o].each(n);return t},Pe=e=>{const t=[];for(let n=0;n<e.length;n++){const o=e[n];if(!o.isSome())return z.none();t.push(o.getOrDie())}return z.some(t)},Le=(e,t,n)=>e.isSome()&&t.isSome()?z.some(n(e.getOrDie(),t.getOrDie())):z.none(),Fe=(e,t,n,o)=>e.isSome()&&t.isSome()&&n.isSome()?z.some(o(e.getOrDie(),t.getOrDie(),n.getOrDie())):z.none(),ze=(e,t)=>void 0!==e&&null!==e?z.some(t(e)):z.none(),je=(e,t)=>e?z.some(t):z.none(),Ue=(e,t)=>e+t,He=(e,t)=>e.substring(t),$e=(e,t,n)=>""===t||e.length>=t.length&&e.substr(n,n+t.length)===t,Ve=(e,t)=>Ge(e,t)?He(e,t.length):e,We=(e,t)=>Ke(e,t)?e:Ue(e,t),qe=(e,t,n=0,o)=>{const r=e.indexOf(t,n);return-1!==r&&(!!x(o)||r+t.length<=o)},Ge=(e,t)=>$e(e,t,0),Ke=(e,t)=>$e(e,t,e.length-t.length),Ye=e=>t=>t.replace(e,""),Xe=Ye(/^\s+|\s+$/g),Je=e=>e.length>0,Qe=e=>!Je(e),Ze=e=>void 0!==e.style&&S(e.style.getPropertyValue),et=(e,t)=>{const n=t||document,o=n.createElement("div");if(o.innerHTML=e,!o.hasChildNodes()||o.childNodes.length>1){const t="HTML does not have a single root node";throw console.error(t,e),new Error(t)}return ot(o.childNodes[0])},tt=(e,t)=>{const n=t||document,o=n.createElement(e);return ot(o)},nt=(e,t)=>{const n=t||document,o=n.createTextNode(e);return ot(o)},ot=e=>{if(null===e||void 0===e)throw new Error("Node cannot be null or undefined");return{dom:e}},rt=(e,t,n)=>z.from(e.dom.elementFromPoint(t,n)).map(ot),st={fromHtml:et,fromTag:tt,fromText:nt,fromDom:ot,fromPoint:rt},at="undefined"!==typeof window?window:Function("return this;")(),it=(e,t)=>{let n=void 0!==t&&null!==t?t:at;for(let o=0;o<e.length&&void 0!==n&&null!==n;++o)n=n[e[o]];return n},lt=(e,t)=>{const n=e.split(".");return it(n,t)},ct=(e,t)=>lt(e,t),dt=(e,t)=>{const n=ct(e,t);if(void 0===n||null===n)throw new Error(e+" not available on this browser");return n},ut=Object.getPrototypeOf,mt=e=>dt("HTMLElement",e),pt=e=>{const t=lt("ownerDocument.defaultView",e);return g(e)&&(mt(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(ut(e).constructor.name))},ft=9,gt=11,ht=1,vt=3,bt=e=>{const t=e.dom.nodeName;return t.toLowerCase()},yt=e=>e.dom.nodeType,xt=e=>t=>yt(t)===e,wt=e=>Ct(e)&&pt(e.dom),Ct=xt(ht),St=xt(vt),_t=xt(ft),kt=xt(gt),Et=e=>t=>Ct(t)&&bt(t)===e,Ot=(e,t)=>{const n=e.dom;if(n.nodeType!==ht)return!1;{const e=n;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},Tt=e=>e.nodeType!==ht&&e.nodeType!==ft&&e.nodeType!==gt||0===e.childElementCount,At=(e,t)=>{const n=void 0===t?document:t.dom;return Tt(n)?[]:Y(n.querySelectorAll(e),st.fromDom)},Rt=(e,t)=>{const n=void 0===t?document:t.dom;return Tt(n)?z.none():z.from(n.querySelector(e)).map(st.fromDom)},Nt=(e,t)=>e.dom===t.dom,Dt=(e,t)=>{const n=e.dom,o=t.dom;return n!==o&&n.contains(o)},Bt=e=>st.fromDom(e.dom.ownerDocument),Mt=e=>_t(e)?e:Bt(e),It=e=>st.fromDom(Mt(e).dom.documentElement),Pt=e=>st.fromDom(Mt(e).dom.defaultView),Lt=e=>z.from(e.dom.parentNode).map(st.fromDom),Ft=e=>z.from(e.dom.parentElement).map(st.fromDom),zt=(e,t)=>{const n=S(t)?t:L;let o=e.dom;const r=[];while(null!==o.parentNode&&void 0!==o.parentNode){const e=o.parentNode,t=st.fromDom(e);if(r.push(t),!0===n(t))break;o=e}return r},jt=e=>z.from(e.dom.offsetParent).map(st.fromDom),Ut=e=>z.from(e.dom.nextSibling).map(st.fromDom),Ht=e=>Y(e.dom.childNodes,st.fromDom),$t=(e,t)=>{const n=e.dom.childNodes;return z.from(n[t]).map(st.fromDom)},Vt=e=>$t(e,0),Wt=(e,t)=>({element:e,offset:t}),qt=(e,t)=>{const n=Ht(e);return n.length>0&&t<n.length?Wt(n[t],0):Wt(e,t)},Gt=e=>kt(e)&&C(e.dom.host),Kt=S(Element.prototype.attachShadow)&&S(Node.prototype.getRootNode),Yt=R(Kt),Xt=Kt?e=>st.fromDom(e.dom.getRootNode()):Mt,Jt=e=>Gt(e)?e:st.fromDom(Mt(e).dom.body),Qt=e=>Zt(e).isSome(),Zt=e=>{const t=Xt(e);return Gt(t)?z.some(t):z.none()},en=e=>st.fromDom(e.dom.host),tn=e=>{if(Yt()&&C(e.target)){const t=st.fromDom(e.target);if(Ct(t)&&nn(t)&&e.composed&&e.composedPath){const t=e.composedPath();if(t)return fe(t)}}return z.from(e.target)},nn=e=>C(e.dom.shadowRoot),on=e=>{const t=St(e)?e.dom.parentNode:e.dom;if(void 0===t||null===t||null===t.ownerDocument)return!1;const n=t.ownerDocument;return Zt(st.fromDom(t)).fold((()=>n.body.contains(t)),A(on,en))},rn=()=>sn(st.fromDom(document)),sn=e=>{const t=e.dom.body;if(null===t||void 0===t)throw new Error("Body is not available yet");return st.fromDom(t)},an=(e,t,n)=>{if(!(f(n)||y(n)||_(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},ln=(e,t,n)=>{an(e.dom,t,n)},cn=(e,t)=>{const n=e.dom;xe(t,((e,t)=>{an(n,t,e)}))},dn=(e,t)=>{const n=e.dom.getAttribute(t);return null===n?void 0:n},un=(e,t)=>z.from(dn(e,t)),mn=(e,t)=>{const n=e.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},pn=(e,t)=>{e.dom.removeAttribute(t)},fn=e=>te(e.dom.attributes,((e,t)=>(e[t.name]=t.value,e)),{}),gn=(e,t,n)=>{if(!f(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);Ze(e)&&e.style.setProperty(t,n)},hn=(e,t)=>{Ze(e)&&e.style.removeProperty(t)},vn=(e,t,n)=>{const o=e.dom;gn(o,t,n)},bn=(e,t)=>{const n=e.dom;xe(t,((e,t)=>{gn(n,t,e)}))},yn=(e,t)=>{const n=e.dom;xe(t,((e,t)=>{e.fold((()=>{hn(n,t)}),(e=>{gn(n,t,e)}))}))},xn=(e,t)=>{const n=e.dom,o=window.getComputedStyle(n),r=o.getPropertyValue(t);return""!==r||on(e)?r:wn(n,t)},wn=(e,t)=>Ze(e)?e.style.getPropertyValue(t):"",Cn=(e,t)=>{const n=e.dom,o=wn(n,t);return z.from(o).filter((e=>e.length>0))},Sn=e=>{const t={},n=e.dom;if(Ze(n))for(let o=0;o<n.style.length;o++){const e=n.style.item(o);t[e]=n.style[e]}return t},_n=(e,t,n)=>{const o=st.fromTag(e);vn(o,t,n);const r=Cn(o,t);return r.isSome()},kn=(e,t)=>{const n=e.dom;hn(n,t),Be(un(e,"style").map(Xe),"")&&pn(e,"style")},En=e=>e.dom.offsetWidth,On=(e,t)=>{const n=(t,n)=>{if(!_(n)&&!n.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+n);const o=t.dom;Ze(o)&&(o.style[e]=n+"px")},o=n=>{const o=t(n);if(o<=0||null===o){const t=xn(n,e);return parseFloat(t)||0}return o},r=o,s=(e,t)=>te(t,((t,n)=>{const o=xn(e,n),r=void 0===o?0:parseInt(o,10);return isNaN(r)?t:t+r}),0),a=(e,t,n)=>{const o=s(e,n),r=t>o?t-o:0;return r};return{set:n,get:o,getOuter:r,aggregate:s,max:a}},Tn=On("height",(e=>{const t=e.dom;return on(e)?t.getBoundingClientRect().height:t.offsetHeight})),An=e=>Tn.get(e),Rn=e=>Tn.getOuter(e),Nn=(e,t)=>{const n=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],o=Tn.max(e,t,n);vn(e,"max-height",o+"px")},Dn=(e,t)=>{const n=(n,o)=>Dn(e+n,t+o);return{left:e,top:t,translate:n}},Bn=Dn,Mn=e=>{const t=e.getBoundingClientRect();return Bn(t.left,t.top)},In=(e,t)=>void 0!==e?e:void 0!==t?t:0,Pn=e=>{const t=e.dom.ownerDocument,n=t.body,o=t.defaultView,r=t.documentElement;if(n===e.dom)return Bn(n.offsetLeft,n.offsetTop);const s=In(null===o||void 0===o?void 0:o.pageYOffset,r.scrollTop),a=In(null===o||void 0===o?void 0:o.pageXOffset,r.scrollLeft),i=In(r.clientTop,n.clientTop),l=In(r.clientLeft,n.clientLeft);return Ln(e).translate(a-l,s-i)},Ln=e=>{const t=e.dom,n=t.ownerDocument,o=n.body;return o===t?Bn(o.offsetLeft,o.offsetTop):on(e)?Mn(t):Bn(0,0)},Fn=On("width",(e=>e.dom.offsetWidth)),zn=(e,t)=>Fn.set(e,t),jn=e=>Fn.get(e),Un=e=>Fn.getOuter(e),Hn=(e,t)=>{const n=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],o=Fn.max(e,t,n);vn(e,"max-width",o+"px")},$n=e=>{let t,n=!1;return(...o)=>(n||(n=!0,t=e.apply(null,o)),t)},Vn=(e,t,n,o)=>{const r=e.isiOS()&&!0===/ipad/i.test(n),s=e.isiOS()&&!r,a=e.isiOS()||e.isAndroid(),i=a||o("(pointer:coarse)"),l=r||!s&&a&&o("(min-device-width:768px)"),c=s||a&&!l,d=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n),u=!c&&!l&&!d;return{isiPad:R(r),isiPhone:R(s),isTablet:R(l),isPhone:R(c),isTouch:R(i),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:R(d),isDesktop:R(u)}},Wn=(e,t)=>{for(let n=0;n<e.length;n++){const o=e[n];if(o.test(t))return o}},qn=(e,t)=>{const n=Wn(e,t);if(!n)return{major:0,minor:0};const o=e=>Number(t.replace(n,"$"+e));return Yn(o(1),o(2))},Gn=(e,t)=>{const n=String(t).toLowerCase();return 0===e.length?Kn():qn(e,n)},Kn=()=>Yn(0,0),Yn=(e,t)=>({major:e,minor:t}),Xn={nu:Yn,detect:Gn,unknown:Kn},Jn=(e,t)=>ve(t.brands,(t=>{const n=t.brand.toLowerCase();return oe(e,(e=>{var t;return n===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())})).map((e=>({current:e.name,version:Xn.nu(parseInt(t.version,10),0)})))})),Qn=(e,t)=>{const n=String(t).toLowerCase();return oe(e,(e=>e.search(n)))},Zn=(e,t)=>Qn(e,t).map((e=>{const n=Xn.detect(e.versionRegexes,t);return{current:e.name,version:n}})),eo=(e,t)=>Qn(e,t).map((e=>{const n=Xn.detect(e.versionRegexes,t);return{current:e.name,version:n}})),to=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,no=e=>t=>qe(t,e),oo=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>qe(e,"edge/")&&qe(e,"chrome")&&qe(e,"safari")&&qe(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,to],search:e=>qe(e,"chrome")&&!qe(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>qe(e,"msie")||qe(e,"trident")},{name:"Opera",versionRegexes:[to,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:no("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:no("firefox")},{name:"Safari",versionRegexes:[to,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(qe(e,"safari")||qe(e,"mobile/"))&&qe(e,"applewebkit")}],ro=[{name:"Windows",search:no("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>qe(e,"iphone")||qe(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:no("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:no("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:no("linux"),versionRegexes:[]},{name:"Solaris",search:no("sunos"),versionRegexes:[]},{name:"FreeBSD",search:no("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:no("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],so={browsers:R(oo),oses:R(ro)},ao="Edge",io="Chromium",lo="IE",co="Opera",uo="Firefox",mo="Safari",po=()=>fo({current:void 0,version:Xn.unknown()}),fo=e=>{const t=e.current,n=e.version,o=e=>()=>t===e;return{current:t,version:n,isEdge:o(ao),isChromium:o(io),isIE:o(lo),isOpera:o(co),isFirefox:o(uo),isSafari:o(mo)}},go={unknown:po,nu:fo,edge:R(ao),chromium:R(io),ie:R(lo),opera:R(co),firefox:R(uo),safari:R(mo)},ho="Windows",vo="iOS",bo="Android",yo="Linux",xo="macOS",wo="Solaris",Co="FreeBSD",So="ChromeOS",_o=()=>ko({current:void 0,version:Xn.unknown()}),ko=e=>{const t=e.current,n=e.version,o=e=>()=>t===e;return{current:t,version:n,isWindows:o(ho),isiOS:o(vo),isAndroid:o(bo),isMacOS:o(xo),isLinux:o(yo),isSolaris:o(wo),isFreeBSD:o(Co),isChromeOS:o(So)}},Eo={unknown:_o,nu:ko,windows:R(ho),ios:R(vo),android:R(bo),linux:R(yo),macos:R(xo),solaris:R(wo),freebsd:R(Co),chromeos:R(So)},Oo=(e,t,n)=>{const o=so.browsers(),r=so.oses(),s=t.bind((e=>Jn(o,e))).orThunk((()=>Zn(o,e))).fold(go.unknown,go.nu),a=eo(r,e).fold(Eo.unknown,Eo.nu),i=Vn(a,s,e,n);return{browser:s,os:a,deviceType:i}},To={detect:Oo},Ao=e=>window.matchMedia(e).matches;let Ro=$n((()=>To.detect(navigator.userAgent,z.from(navigator.userAgentData),Ao)));const No=()=>Ro(),Do=(e,t,n,o,r,s,a)=>({target:e,x:t,y:n,stop:o,prevent:r,kill:s,raw:a}),Bo=e=>{const t=st.fromDom(tn(e).getOr(e.target)),n=()=>e.stopPropagation(),o=()=>e.preventDefault(),r=T(o,n);return Do(t,e.clientX,e.clientY,n,o,r,e)},Mo=(e,t)=>n=>{e(n)&&t(Bo(n))},Io=(e,t,n,o,r)=>{const s=Mo(n,o);return e.dom.addEventListener(t,s,r),{unbind:B(Fo,e,t,s,r)}},Po=(e,t,n,o)=>Io(e,t,n,o,!1),Lo=(e,t,n,o)=>Io(e,t,n,o,!0),Fo=(e,t,n,o)=>{e.dom.removeEventListener(t,n,o)},zo=(e,t)=>{const n=Lt(e);n.each((n=>{n.dom.insertBefore(t.dom,e.dom)}))},jo=(e,t)=>{const n=Ut(e);n.fold((()=>{const n=Lt(e);n.each((e=>{Ho(e,t)}))}),(e=>{zo(e,t)}))},Uo=(e,t)=>{const n=Vt(e);n.fold((()=>{Ho(e,t)}),(n=>{e.dom.insertBefore(t.dom,n.dom)}))},Ho=(e,t)=>{e.dom.appendChild(t.dom)},$o=(e,t,n)=>{$t(e,n).fold((()=>{Ho(e,t)}),(e=>{zo(e,t)}))},Vo=(e,t)=>{X(t,(t=>{Ho(e,t)}))},Wo=e=>{e.dom.textContent="",X(Ht(e),(e=>{qo(e)}))},qo=e=>{const t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},Go=e=>{const t=void 0!==e?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,o=t.body.scrollTop||t.documentElement.scrollTop;return Bn(n,o)},Ko=(e,t,n)=>{const o=void 0!==n?n.dom:document,r=o.defaultView;r&&r.scrollTo(e,t)},Yo=e=>{const t=void 0===e?window:e;return No().browser.isFirefox()?z.none():z.from(t.visualViewport)},Xo=(e,t,n,o)=>({x:e,y:t,width:n,height:o,right:e+n,bottom:t+o}),Jo=e=>{const t=void 0===e?window:e,n=t.document,o=Go(st.fromDom(n));return Yo(t).fold((()=>{const e=t.document.documentElement,n=e.clientWidth,r=e.clientHeight;return Xo(o.left,o.top,n,r)}),(e=>Xo(Math.max(e.pageLeft,o.left),Math.max(e.pageTop,o.top),e.width,e.height)))},Qo=()=>st.fromDom(document),Zo=(e,t)=>{const n=e.view(t);return n.fold(R([]),(t=>{const n=e.owner(t),o=Zo(e,n);return[t].concat(o)}))},er=(e,t)=>{const n=t.owner(e),o=Zo(t,n);return z.some(o)},tr=e=>{var t;const n=e.dom===document?z.none():z.from(null===(t=e.dom.defaultView)||void 0===t?void 0:t.frameElement);return n.map(st.fromDom)},nr=e=>Bt(e);var or=Object.freeze({__proto__:null,view:tr,owner:nr});const rr=e=>{const t=Qo(),n=Go(t),o=er(e,or);return o.fold(B(Pn,e),(t=>{const o=Ln(e),r=ee(t,((e,t)=>{const n=Ln(t);return{left:e.left+n.left,top:e.top+n.top}}),{left:0,top:0});return Bn(r.left+o.left+n.left,r.top+o.top+n.top)}))},sr=(e,t,n)=>({point:e,width:t,height:n}),ar=(e,t,n,o)=>({x:e,y:t,width:n,height:o}),ir=(e,t,n,o)=>({x:e,y:t,width:n,height:o,right:e+n,bottom:t+o}),lr=e=>{const t=Pn(e),n=Un(e),o=Rn(e);return ir(t.left,t.top,n,o)},cr=e=>{const t=rr(e),n=Un(e),o=Rn(e);return ir(t.left,t.top,n,o)},dr=(e,t)=>{const n=Math.max(e.x,t.x),o=Math.max(e.y,t.y),r=Math.min(e.right,t.right),s=Math.min(e.bottom,t.bottom),a=r-n,i=s-o;return ir(n,o,a,i)},ur=(e,t)=>te(t,((e,t)=>dr(e,t)),e),mr=()=>Jo(window);var pr=tinymce.util.Tools.resolve("tinymce.ThemeManager");const fr=e=>{const t=t=>t(e),n=R(e),o=()=>r,r={tag:!0,inner:e,fold:(t,n)=>n(e),isValue:F,isError:L,map:t=>vr.value(t(e)),mapError:o,bind:t,exists:t,forall:t,getOr:n,or:o,getOrThunk:n,orThunk:o,getOrDie:n,each:t=>{t(e)},toOptional:()=>z.some(e)};return r},gr=e=>{const t=()=>n,n={tag:!1,inner:e,fold:(t,n)=>t(e),isValue:L,isError:F,map:t,mapError:t=>vr.error(t(e)),bind:t,exists:L,forall:F,getOr:N,or:N,getOrThunk:P,orThunk:P,getOrDie:I(String(e)),each:E,toOptional:z.none};return n},hr=(e,t)=>e.fold((()=>gr(t)),fr),vr={value:fr,error:gr,fromOption:hr};var br;(function(e){e[e["Error"]=0]="Error",e[e["Value"]=1]="Value"})(br||(br={}));const yr=(e,t,n)=>e.stype===br.Error?t(e.serror):n(e.svalue),xr=e=>{const t=[],n=[];return X(e,(e=>{yr(e,(e=>n.push(e)),(e=>t.push(e)))})),{values:t,errors:n}},wr=(e,t)=>e.stype===br.Error?{stype:br.Error,serror:t(e.serror)}:e,Cr=(e,t)=>e.stype===br.Value?{stype:br.Value,svalue:t(e.svalue)}:e,Sr=(e,t)=>e.stype===br.Value?t(e.svalue):e,_r=(e,t)=>e.stype===br.Error?t(e.serror):e,kr=e=>({stype:br.Value,svalue:e}),Er=e=>({stype:br.Error,serror:e}),Or=e=>yr(e,vr.error,vr.value),Tr=e=>e.fold(Er,kr),Ar={fromResult:Tr,toResult:Or,svalue:kr,partition:xr,serror:Er,bind:Sr,bindError:_r,map:Cr,mapError:wr,fold:yr},Rr=(e,t,n,o)=>({tag:"field",key:e,newKey:t,presence:n,prop:o}),Nr=(e,t)=>({tag:"custom",newKey:e,instantiator:t}),Dr=(e,t,n)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return n(e.newKey,e.instantiator)}},Br=(e,t)=>t,Mr=(e,t)=>{const n=h(e)&&h(t);return n?Pr(e,t):t},Ir=e=>(...t)=>{if(0===t.length)throw new Error("Can't merge zero objects");const n={};for(let o=0;o<t.length;o++){const r=t[o];for(const t in r)Ne(r,t)&&(n[t]=e(n[t],r[t]))}return n},Pr=Ir(Mr),Lr=Ir(Br),Fr=()=>({tag:"required",process:{}}),zr=e=>({tag:"defaultedThunk",process:e}),jr=e=>zr(R(e)),Ur=()=>({tag:"option",process:{}}),Hr=e=>({tag:"mergeWithThunk",process:e}),$r=e=>Hr(R(e)),Vr=(e,t)=>e.length>0?Ar.svalue(Pr(t,Lr.apply(void 0,e))):Ar.svalue(t),Wr=e=>T(Ar.serror,se)(e),qr=(e,t)=>{const n=Ar.partition(e);return n.errors.length>0?Wr(n.errors):Vr(n.values,t)},Gr=e=>{const t=Ar.partition(e);return t.errors.length>0?Wr(t.errors):Ar.svalue(t.values)},Kr={consolidateObj:qr,consolidateArr:Gr},Yr=e=>g(e)&&be(e).length>100?" removed due to size":JSON.stringify(e,null,2),Xr=e=>{const t=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:R("... (only showing first ten failures)")}]):e;return Y(t,(e=>"Failed path: ("+e.path.join(" > ")+")\n"+e.getErrorInfo()))},Jr=(e,t)=>Ar.serror([{path:e,getErrorInfo:t}]),Qr=(e,t,n)=>Jr(e,(()=>'Could not find valid *required* value for "'+t+'" in '+Yr(n))),Zr=(e,t)=>Jr(e,(()=>'Choice schema did not contain choice key: "'+t+'"')),es=(e,t,n)=>Jr(e,(()=>'The chosen schema: "'+n+'" did not exist in branches: '+Yr(t))),ts=(e,t)=>Jr(e,(()=>"There are unsupported fields: ["+t.join(", ")+"] specified")),ns=(e,t)=>Jr(e,R(t)),os=e=>{const t=(t,n)=>Ar.bindError(e(n),(e=>ns(t,e))),n=R("val");return{extract:t,toString:n}},rs=os(Ar.svalue),ss=(e,t,n,o)=>Re(t,n).fold((()=>Qr(e,n,t)),o),as=(e,t,n,o)=>{const r=Re(e,t).getOrThunk((()=>n(e)));return o(r)},is=(e,t,n)=>n(Re(e,t)),ls=(e,t,n,o)=>{const r=Re(e,t).map((t=>!0===t?n(e):t));return o(r)},cs=(e,t,n,o,r)=>{const s=e=>r.extract(t.concat([o]),e),a=e=>e.fold((()=>Ar.svalue(z.none())),(e=>{const n=r.extract(t.concat([o]),e);return Ar.map(n,z.some)}));switch(e.tag){case"required":return ss(t,n,o,s);case"defaultedThunk":return as(n,o,e.process,s);case"option":return is(n,o,a);case"defaultedOptionThunk":return ls(n,o,e.process,a);case"mergeWithThunk":return as(n,o,R({}),(t=>{const o=Pr(e.process(n),t);return s(o)}))}},ds=(e,t,n)=>{const o={},r=[];for(const s of n)Dr(s,((n,s,a,i)=>{const l=cs(a,e,t,n,i);Ar.fold(l,(e=>{r.push(...e)}),(e=>{o[s]=e}))}),((e,n)=>{o[e]=n(t)}));return r.length>0?Ar.serror(r):Ar.svalue(o)},us=e=>{const t=(t,n)=>e().extract(t,n),n=()=>e().toString();return{extract:t,toString:n}},ms=e=>be(Ee(e,C)),ps=e=>{const t=fs(e),n=ee(e,((e,t)=>Dr(t,(t=>Pr(e,{[t]:!0})),R(e))),{}),o=(e,o)=>{const r=y(o)?[]:ms(o),s=Z(r,(e=>!De(n,e)));return 0===s.length?t.extract(e,o):ts(e,s)};return{extract:o,toString:t.toString}},fs=e=>{const t=(t,n)=>ds(t,n,e),n=()=>{const t=Y(e,(e=>Dr(e,((e,t,n,o)=>e+" -> "+o.toString()),((e,t)=>"state("+e+")"))));return"obj{\n"+t.join("\n")+"}"};return{extract:t,toString:n}},gs=e=>{const t=(t,n)=>{const o=Y(n,((n,o)=>e.extract(t.concat(["["+o+"]"]),n)));return Kr.consolidateArr(o)},n=()=>"array("+e.toString()+")";return{extract:t,toString:n}},hs=(e,t)=>{const n=void 0!==t?t:N,o=(t,o)=>{const r=[];for(const s of e){const e=s.extract(t,o);if(e.stype===br.Value)return{stype:br.Value,svalue:n(e.svalue)};r.push(e)}return Kr.consolidateArr(r)},r=()=>"oneOf("+Y(e,(e=>e.toString())).join(", ")+")";return{extract:o,toString:r}},vs=(e,t)=>{const n=(t,n)=>gs(os(e)).extract(t,n),o=(e,o)=>{const r=be(o),s=n(e,r);return Ar.bind(s,(n=>{const r=Y(n,(e=>Rr(e,e,Fr(),t)));return fs(r).extract(e,o)}))},r=()=>"setOf("+t.toString()+")";return{extract:o,toString:r}},bs=(e,t)=>{const n=$n(t),o=(e,t)=>n().extract(e,t),r=()=>n().toString();return{extract:o,toString:r}},ys=T(gs,fs),xs=R(rs),ws=(e,t)=>os((n=>{const o=typeof n;return e(n)?Ar.svalue(n):Ar.serror(`Expected type: ${t} but got: ${o}`)})),Cs=ws(_,"number"),Ss=ws(f,"string"),_s=ws(y,"boolean"),ks=ws(S,"function"),Es=e=>{if(Object(e)!==e)return!0;switch({}.toString.call(e).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(e).every((t=>Es(e[t])));default:return!1}},Os=os((e=>Es(e)?Ar.svalue(e):Ar.serror("Expected value to be acceptable for sending via postMessage"))),Ts=(e,t,n,o)=>{const r=Re(n,o);return r.fold((()=>es(e,n,o)),(n=>n.extract(e.concat(["branch: "+o]),t)))},As=(e,t)=>{const n=(n,o)=>{const r=Re(o,e);return r.fold((()=>Zr(n,e)),(e=>Ts(n,o,t,e)))},o=()=>"chooseOn("+e+"). Possible values: "+be(t);return{extract:n,toString:o}},Rs=()=>gs(rs),Ns=e=>os((t=>e(t).fold(Ar.serror,Ar.svalue))),Ds=(e,t)=>vs((t=>Ar.fromResult(e(t))),t),Bs=(e,t,n)=>{const o=t.extract([e],n);return Ar.mapError(o,(e=>({input:n,errors:e})))},Ms=(e,t,n)=>Ar.toResult(Bs(e,t,n)),Is=e=>e.fold((e=>{throw new Error(Ls(e))}),N),Ps=(e,t,n)=>Is(Ms(e,t,n)),Ls=e=>"Errors: \n"+Xr(e.errors).join("\n")+"\n\nInput object: "+Yr(e.input),Fs=(e,t)=>As(e,we(t,fs)),zs=(e,t)=>bs(e,t),js=Rr,Us=Nr,Hs=e=>Ns((t=>W(e,t)?vr.value(t):vr.error(`Unsupported value: "${t}", choose one of "${e.join(", ")}".`))),$s=e=>js(e,e,Fr(),xs()),Vs=(e,t)=>js(e,e,Fr(),t),Ws=e=>Vs(e,Cs),qs=e=>Vs(e,Ss),Gs=(e,t)=>js(e,e,Fr(),Hs(t)),Ks=e=>Vs(e,_s),Ys=e=>Vs(e,ks),Xs=(e,t)=>js(e,e,Ur(),os((n=>Ar.serror("The field: "+e+" is forbidden. "+t)))),Js=(e,t)=>js(e,e,Fr(),fs(t)),Qs=(e,t)=>js(e,e,Fr(),ys(t)),Zs=(e,t)=>js(e,e,Fr(),gs(t)),ea=e=>js(e,e,Ur(),xs()),ta=(e,t)=>js(e,e,Ur(),t),na=e=>ta(e,Cs),oa=e=>ta(e,Ss),ra=(e,t)=>ta(e,Hs(t)),sa=e=>ta(e,ks),aa=(e,t)=>ta(e,gs(t)),ia=(e,t)=>ta(e,fs(t)),la=(e,t)=>ta(e,ps(t)),ca=(e,t)=>js(e,e,jr(t),xs()),da=(e,t,n)=>js(e,e,jr(t),n),ua=(e,t)=>da(e,t,Cs),ma=(e,t)=>da(e,t,Ss),pa=(e,t,n)=>da(e,t,Hs(n)),fa=(e,t)=>da(e,t,_s),ga=(e,t)=>da(e,t,ks),ha=(e,t)=>da(e,t,Os),va=(e,t,n)=>da(e,t,gs(n)),ba=(e,t,n)=>da(e,t,fs(n)),ya=e=>{let t=e;const n=()=>t,o=e=>{t=e};return{get:n,set:o}},xa=e=>{if(!v(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");const t=[],n={};return X(e,((o,r)=>{const s=be(o);if(1!==s.length)throw new Error("one and only one name per case");const a=s[0],i=o[a];if(void 0!==n[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!v(i))throw new Error("case arguments must be an array");t.push(a),n[a]=(...n)=>{const o=n.length;if(o!==i.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+i.length+" ("+i+"), got "+o);const s=e=>{const o=be(e);if(t.length!==o.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+o.join(","));const r=ie(t,(e=>W(o,e)));if(!r)throw new Error("Not all branches were specified when using match. Specified: "+o.join(", ")+"\nRequired: "+t.join(", "));return e[a].apply(null,n)};return{fold:(...t)=>{if(t.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+t.length);const o=t[r];return o.apply(null,n)},match:s,log:e=>{console.log(e,{constructors:t,constructor:a,params:n})}}}})),n},wa={generate:xa};wa.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Ca=e=>{const t=[],n=[];return X(e,(e=>{e.fold((e=>{t.push(e)}),(e=>{n.push(e)}))})),{errors:t,values:n}},Sa=(e,t)=>{const n={};return xe(e,((e,o)=>{W(t,o)||(n[o]=e)})),n},_a=(e,t)=>({[e]:t}),ka=e=>{const t={};return X(e,(e=>{t[e.key]=e.value})),t},Ea=(e,t)=>Sa(e,t),Oa=(e,t)=>_a(e,t),Ta=e=>ka(e),Aa=(e,t)=>0===e.length?vr.value(t):vr.value(Pr(t,Lr.apply(void 0,e))),Ra=e=>vr.error(se(e)),Na=(e,t)=>{const n=Ca(e);return n.errors.length>0?Ra(n.errors):Aa(n.values,t)},Da=e=>S(e)?e:L,Ba=(e,t,n)=>{let o=e.dom;const r=Da(n);while(o.parentNode){o=o.parentNode;const e=st.fromDom(o),n=t(e);if(n.isSome())return n;if(r(e))break}return z.none()},Ma=(e,t,n)=>{const o=t(e),r=Da(n);return o.orThunk((()=>r(e)?z.none():Ba(e,t,r)))},Ia=(e,t)=>Nt(e.element,t.event.target),Pa={can:F,abort:L,run:E},La=e=>{if(!De(e,"can")&&!De(e,"abort")&&!De(e,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(e,null,2)+" does not have can, abort, or run!");return r(r({},Pa),e)},Fa=(e,t)=>(...n)=>te(e,((e,o)=>e&&t(o).apply(void 0,n)),!0),za=(e,t)=>(...n)=>te(e,((e,o)=>e||t(o).apply(void 0,n)),!1),ja=e=>S(e)?{can:F,abort:L,run:e}:e,Ua=e=>{const t=Fa(e,(e=>e.can)),n=za(e,(e=>e.abort)),o=(...t)=>{X(e,(e=>{e.run.apply(void 0,t)}))};return{can:t,abort:n,run:o}},Ha=R,$a=Ha("touchstart"),Va=Ha("touchmove"),Wa=Ha("touchend"),qa=Ha("touchcancel"),Ga=Ha("mousedown"),Ka=Ha("mousemove"),Ya=Ha("mouseout"),Xa=Ha("mouseup"),Ja=Ha("mouseover"),Qa=Ha("focusin"),Za=Ha("focusout"),ei=Ha("keydown"),ti=Ha("keyup"),ni=Ha("input"),oi=Ha("change"),ri=Ha("click"),si=Ha("transitioncancel"),ai=Ha("transitionend"),ii=Ha("transitionstart"),li=Ha("selectstart"),ci=e=>R("alloy."+e),di={tap:ci("tap")},ui=ci("focus"),mi=ci("blur.post"),pi=ci("paste.post"),fi=ci("receive"),gi=ci("execute"),hi=ci("focus.item"),vi=di.tap,bi=ci("longpress"),yi=ci("sandbox.close"),xi=ci("typeahead.cancel"),wi=ci("system.init"),Ci=ci("system.touchmove"),Si=ci("system.touchend"),_i=ci("system.scroll"),ki=ci("system.resize"),Ei=ci("system.attached"),Oi=ci("system.detached"),Ti=ci("system.dismissRequested"),Ai=ci("system.repositionRequested"),Ri=ci("focusmanager.shifted"),Ni=ci("slotcontainer.visibility"),Di=ci("system.external.element.scroll"),Bi=ci("change.tab"),Mi=ci("dismiss.tab"),Ii=ci("highlight"),Pi=ci("dehighlight"),Li=(e,t)=>{Ui(e,e.element,t,{})},Fi=(e,t,n)=>{Ui(e,e.element,t,n)},zi=e=>{Li(e,gi())},ji=(e,t,n)=>{Ui(e,t,n,{})},Ui=(e,t,n,o)=>{const s=r({target:t},o);e.getSystem().triggerEvent(n,t,s)},Hi=(e,t,n,o)=>{const s=r(r({},o),{},{target:t});e.getSystem().triggerEvent(n,t,s)},$i=(e,t,n,o)=>{e.getSystem().triggerEvent(n,t,o.event)},Vi=e=>Ta(e),Wi=(e,t)=>({key:e,value:La({abort:t})}),qi=(e,t)=>({key:e,value:La({can:t})}),Gi=e=>({key:e,value:La({run:(e,t)=>{t.event.prevent()}})}),Ki=(e,t)=>({key:e,value:La({run:t})}),Yi=(e,t,n)=>({key:e,value:La({run:(e,o)=>{t.apply(void 0,[e,o].concat(n))}})}),Xi=e=>t=>Ki(e,t),Ji=e=>t=>({key:e,value:La({run:(e,n)=>{Ia(e,n)&&t(e,n)}})}),Qi=(e,t)=>Ki(e,((n,o)=>{n.getSystem().getByUid(t).each((t=>{$i(t,t.element,e,o)}))})),Zi=(e,t,n)=>{const o=t.partUids[n];return Qi(e,o)},el=(e,t)=>Ki(e,((e,n)=>{const o=n.event,r=e.getSystem().getByDom(o.target).getOrThunk((()=>{const t=Ma(o.target,(t=>e.getSystem().getByDom(t).toOptional()),L);return t.getOr(e)}));t(e,r,n)})),tl=e=>Ki(e,((e,t)=>{t.cut()})),nl=e=>Ki(e,((e,t)=>{t.stop()})),ol=(e,t)=>Ji(e)(t),rl=Ji(Ei()),sl=Ji(Oi()),al=Ji(wi()),il=Xi(gi()),ll=(e,t)=>{const n=t||document,o=n.createElement("div");return o.innerHTML=e,Ht(st.fromDom(o))},cl=e=>e.dom.innerHTML,dl=(e,t)=>{const n=Bt(e),o=n.dom,r=st.fromDom(o.createDocumentFragment()),s=ll(t,o);Vo(r,s),Wo(e),Ho(e,r)},ul=e=>{const t=st.fromTag("div"),n=st.fromDom(e.dom.cloneNode(!0));return Ho(t,n),cl(t)},ml=(e,t)=>st.fromDom(e.dom.cloneNode(t)),pl=e=>ml(e,!1),fl=e=>{if(Gt(e))return"#shadow-root";{const t=pl(e);return ul(t)}},gl=e=>fl(e),hl=(e,t,n)=>Nt(t,e.element)&&!Nt(t,n),vl=Vi([qi(ui(),((e,t)=>{const n=t.event,o=n.originator,r=n.target;return!hl(e,o,r)||(console.warn(ui()+" did not get interpreted by the desired target. \nOriginator: "+gl(o)+"\nTarget: "+gl(r)+"\nCheck the "+ui()+" event handlers"),!1)}))]);var bl=Object.freeze({__proto__:null,events:vl});let yl=0;const xl=e=>{const t=new Date,n=t.getTime(),o=Math.floor(1e9*Math.random());return yl++,e+"_"+o+yl+String(n)},wl=R("alloy-id-"),Cl=R("data-alloy-id"),Sl=wl(),_l=Cl(),kl=(e,t)=>{const n=xl(Sl+e);return El(t,n),n},El=(e,t)=>{Object.defineProperty(e.dom,_l,{value:t,writable:!0})},Ol=e=>{const t=Ct(e)?e.dom[_l]:null;return z.from(t)},Tl=e=>xl(e),Al=N,Rl=e=>{const t=t=>`The component must be in a context to execute: ${t}`+(e?"\n"+gl(e().element)+" is not in context.":""),n=e=>()=>{throw new Error(t(e))},o=e=>()=>{console.warn(t(e))};return{debugInfo:R("fake"),triggerEvent:o("triggerEvent"),triggerFocus:o("triggerFocus"),triggerEscape:o("triggerEscape"),broadcast:o("broadcast"),broadcastOn:o("broadcastOn"),broadcastEvent:o("broadcastEvent"),build:n("build"),buildOrPatch:n("buildOrPatch"),addToWorld:n("addToWorld"),removeFromWorld:n("removeFromWorld"),addToGui:n("addToGui"),removeFromGui:n("removeFromGui"),getByUid:n("getByUid"),getByDom:n("getByDom"),isConnected:L}},Nl=Rl(),Dl=(e,t,n)=>{const o=n.toString(),r=o.indexOf(")")+1,s=o.indexOf("("),a=o.substring(s+1,r-1).split(/,\s*/);return e.toFunctionAnnotation=()=>({name:t,parameters:Bl(a.slice(0,1).concat(a.slice(3)))}),e},Bl=e=>Y(e,(e=>Ke(e,"/*")?e.substring(0,e.length-2):e)),Ml=(e,t)=>{const n=e.toString(),o=n.indexOf(")")+1,r=n.indexOf("("),s=n.substring(r+1,o-1).split(/,\s*/);return e.toFunctionAnnotation=()=>({name:t,parameters:Bl(s)}),e},Il=(e,t)=>{const n=t.toString(),o=n.indexOf(")")+1,r=n.indexOf("("),s=n.substring(r+1,o-1).split(/,\s*/);return e.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:Bl(s.slice(1))}),e},Pl=xl("alloy-premade"),Ll=e=>(Object.defineProperty(e.element.dom,Pl,{value:e.uid,writable:!0}),Oa(Pl,e)),Fl=e=>Ne(e.dom,Pl),zl=e=>Re(e,Pl),jl=e=>Il(((t,...n)=>e(t.getApis(),t,...n)),e),Ul={init:()=>Hl({readState:R("No State required")})},Hl=e=>e,$l=(e,t)=>{const n=Y(t,(e=>ia(e.name(),[$s("config"),ca("state",Ul)]))),o=Ms("component.behaviours",fs(n),e.behaviours).fold((t=>{throw new Error(Ls(t)+"\nComplete spec:\n"+JSON.stringify(e,null,2))}),N);return{list:t,data:we(o,(e=>{const t=e.map((e=>({config:e.config,state:e.state.init(e.config)})));return R(t)}))}},Vl=e=>e.list,Wl=e=>e.data,ql=(e,t)=>{const n={};return xe(e,((e,o)=>{xe(e,((e,r)=>{const s=Re(n,r).getOr([]);n[r]=s.concat([t(o,e)])}))})),n},Gl=e=>({classes:x(e.classes)?[]:e.classes,attributes:x(e.attributes)?{}:e.attributes,styles:x(e.styles)?{}:e.styles}),Kl=(e,t)=>r(r({},e),{},{attributes:r(r({},e.attributes),t.attributes),styles:r(r({},e.styles),t.styles),classes:e.classes.concat(t.classes)}),Yl=(e,t,n,o)=>{const s=r({},t);X(n,(t=>{s[t.name()]=t.exhibit(e,o)}));const a=ql(s,((e,t)=>({name:e,modification:t}))),i=e=>ee(e,((e,t)=>r(r({},t.modification),e)),{}),l=ee(a.classes,((e,t)=>t.modification.concat(e)),[]),c=i(a.attributes),d=i(a.styles);return Gl({classes:l,attributes:c,styles:d})},Xl=(e,t,n,o)=>{try{const r=me(n,((n,r)=>{const s=n[t],a=r[t],i=o.indexOf(s),l=o.indexOf(a);if(-1===i)throw new Error("The ordering for "+e+" does not have an entry for "+s+".\nOrder specified: "+JSON.stringify(o,null,2));if(-1===l)throw new Error("The ordering for "+e+" does not have an entry for "+a+".\nOrder specified: "+JSON.stringify(o,null,2));return i<l?-1:l<i?1:0}));return vr.value(r)}catch(r){return vr.error([r])}},Jl=(e,t)=>({handler:e,purpose:t}),Ql=(e,t)=>({cHandler:e,purpose:t}),Zl=(e,t)=>Ql(B.apply(void 0,[e.handler].concat(t)),e.purpose),ec=e=>e.cHandler,tc=(e,t)=>({name:e,handler:t}),nc=(e,t)=>{const n={};return X(e,(e=>{n[e.name()]=e.handlers(t)})),n},oc=(e,t,n)=>{const o=r(r({},n),nc(t,e));return ql(o,tc)},rc=(e,t,n,o)=>{const r=oc(e,n,o);return lc(r,t)},sc=e=>{const t=ja(e);return(e,n,...o)=>{const r=[e,n].concat(o);t.abort.apply(void 0,r)?n.stop():t.can.apply(void 0,r)&&t.run.apply(void 0,r)}},ac=(e,t)=>vr.error(["The event ("+e+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+JSON.stringify(Y(t,(e=>e.name)),null,2)]),ic=(e,t,n)=>{const o=t[n];return o?Xl("Event: "+n,"name",e,o).map((e=>{const t=Y(e,(e=>e.handler));return Ua(t)})):ac(n,e)},lc=(e,t)=>{const n=Oe(e,((e,n)=>{const o=1===e.length?vr.value(e[0].handler):ic(e,t,n);return o.map((o=>{const r=sc(o),s=e.length>1?Z(t[n],(t=>q(e,(e=>e.name===t)))).join(" > "):e[0].name;return Oa(n,Jl(r,s))}))}));return Na(n,{})},cc="alloy.base.behaviour",dc=fs([js("dom","dom",Fr(),fs([$s("tag"),ca("styles",{}),ca("classes",[]),ca("attributes",{}),ea("value"),ea("innerHtml")])),$s("components"),$s("uid"),ca("events",{}),ca("apis",{}),js("eventOrder","eventOrder",$r({[gi()]:["disabling",cc,"toggling","typeaheadevents"],[ui()]:[cc,"focusing","keying"],[wi()]:[cc,"disabling","toggling","representing"],[ni()]:[cc,"representing","streaming","invalidating"],[Oi()]:[cc,"representing","item-events","tooltipping"],[Ga()]:["focusing",cc,"item-type-events"],[$a()]:["focusing",cc,"item-type-events"],[Ja()]:["item-type-events","tooltipping"],[fi()]:["receiving","reflecting","tooltipping"]}),xs()),ea("domModification")]),uc=e=>Ms("custom.definition",dc,e),mc=e=>r(r({},e.dom),{},{uid:e.uid,domChildren:Y(e.components,(e=>e.element))}),pc=e=>e.domModification.fold((()=>Gl({})),Gl),fc=e=>e.events,gc=(e,t)=>{const n=dn(e,t);return void 0===n||""===n?[]:n.split(" ")},hc=(e,t,n)=>{const o=gc(e,t),r=o.concat([n]);return ln(e,t,r.join(" ")),!0},vc=(e,t,n)=>{const o=Z(gc(e,t),(e=>e!==n));return o.length>0?ln(e,t,o.join(" ")):pn(e,t),!1},bc=e=>void 0!==e.dom.classList,yc=e=>gc(e,"class"),xc=(e,t)=>hc(e,"class",t),wc=(e,t)=>vc(e,"class",t),Cc=(e,t)=>{bc(e)?e.dom.classList.add(t):xc(e,t)},Sc=e=>{const t=bc(e)?e.dom.classList:yc(e);0===t.length&&pn(e,"class")},_c=(e,t)=>{if(bc(e)){const n=e.dom.classList;n.remove(t)}else wc(e,t);Sc(e)},kc=(e,t)=>bc(e)&&e.dom.classList.contains(t),Ec=(e,t)=>{X(t,(t=>{Cc(e,t)}))},Oc=(e,t)=>{X(t,(t=>{_c(e,t)}))},Tc=(e,t)=>ie(t,(t=>kc(e,t))),Ac=e=>{const t=e.dom.classList,n=new Array(t.length);for(let o=0;o<t.length;o++){const e=t.item(o);null!==e&&(n[o]=e)}return n},Rc=e=>bc(e)?Ac(e):yc(e),Nc=e=>e.dom.value,Dc=(e,t)=>{if(void 0===t)throw new Error("Value.set was undefined");e.dom.value=t},Bc=(e,t,n)=>{const o=$t(e,t);return o.map((e=>{const t=n.exists((t=>!Nt(t,e)));if(t){const t=n.map(bt).getOr("span"),o=st.fromTag(t);return zo(e,o),o}return e}))},Mc=(e,t,n)=>{n.fold((()=>Ho(e,t)),(e=>{Nt(e,t)||(zo(e,t),qo(e))}))},Ic=(e,t,n)=>{const o=Y(t,n),r=Ht(e);return X(r.slice(o.length),qo),o},Pc=(e,t,n,o)=>{const r=$t(e,t),s=o(n,r),a=Bc(e,t,r);return Mc(e,s.element,a),s},Lc=(e,t,n)=>Ic(e,t,((t,o)=>Pc(e,o,t,n))),Fc=(e,t)=>Ic(e,t,((t,n)=>{const o=$t(e,n);return Mc(e,t,o),t})),zc=(e,t)=>{const n=be(e),o=be(t),r=ce(o,n),s=ke(e,((e,n)=>!Ne(t,n)||e!==t[n])).t;return{toRemove:r,toSet:s}},jc=(e,t)=>{const n=fn(t),{class:r,style:a}=n,i=o(n,s),{toSet:l,toRemove:c}=zc(e.attributes,i),d=()=>{X(c,(e=>pn(t,e))),cn(t,l)},u=Sn(t),{toSet:m,toRemove:p}=zc(e.styles,u),f=()=>{X(p,(e=>kn(t,e))),bn(t,m)},g=Rc(t),h=ce(g,e.classes),v=ce(e.classes,g),b=()=>{Ec(t,v),Oc(t,h)},y=e=>{dl(t,e)},x=()=>{const n=e.domChildren;Fc(t,n)},w=()=>{const n=t,o=e.value.getOrUndefined();o!==Nc(n)&&Dc(n,null!==o&&void 0!==o?o:"")};return d(),b(),f(),e.innerHtml.fold(x,y),w(),t},Uc=e=>{const t=st.fromTag(e.tag);cn(t,e.attributes),Ec(t,e.classes),bn(t,e.styles),e.innerHtml.each((e=>dl(t,e)));const n=e.domChildren;return Vo(t,n),e.value.each((e=>{Dc(t,e)})),t},Hc=(e,t)=>{try{const n=jc(e,t);return z.some(n)}catch(n){return z.none()}},$c=e=>e.innerHtml.isSome()&&e.domChildren.length>0,Vc=(e,t)=>{const n=t=>bt(t)===e.tag&&!$c(e)&&!Fl(t),o=t.filter(n).bind((t=>Hc(e,t))).getOrThunk((()=>Uc(e)));return El(o,e.uid),o},Wc=e=>{const t=Re(e,"behaviours").getOr({});return ae(be(t),(e=>{const n=t[e];return C(n)?[n.me]:[]}))},qc=(e,t)=>$l(e,t),Gc=e=>{const t=Wc(e);return qc(e,t)},Kc=(e,t,n)=>{const o=mc(e),r=pc(e),s={"alloy.base.modification":r},a=t.length>0?Yl(n,s,t,o):r;return Kl(o,a)},Yc=(e,t,n)=>{const o={"alloy.base.behaviour":fc(e)};return rc(n,e.eventOrder,t,o).getOrDie()},Xc=(e,t)=>{const n=()=>y,o=ya(Nl),r=Is(uc(e)),s=Gc(e),a=Vl(s),i=Wl(s),l=Kc(r,a,i),c=Vc(l,t),d=Yc(r,a,i),u=ya(r.components),m=e=>{o.set(e)},p=()=>{o.set(Rl(n))},f=()=>{const e=Ht(c),t=ae(e,(e=>o.get().getByDom(e).fold((()=>[]),ue)));u.set(t)},g=t=>{const n=i,o=S(n[t.name()])?n[t.name()]:()=>{throw new Error("Could not find "+t.name()+" in "+JSON.stringify(e,null,2))};return o()},h=e=>S(i[e.name()]),v=()=>r.apis,b=e=>i[e]().map((e=>e.state.readState())).getOr("not enabled"),y={uid:e.uid,getSystem:o.get,config:g,hasConfigured:h,spec:e,readState:b,getApis:v,connect:m,disconnect:p,element:c,syncComponents:f,components:u.get,events:d};return y},Jc=(e,t)=>{const n=Re(e,"components").getOr([]);return t.fold((()=>Y(n,rd)),(e=>Y(n,((t,n)=>od(t,$t(e,n))))))},Qc=(e,t)=>{const n=Al(e),{events:s}=n,i=o(n,a),l=Jc(i,t),c=r(r({},i),{},{events:r(r({},bl),s),components:l});return vr.value(Xc(c,t))},Zc=e=>{const t=st.fromText(e);return ed({element:t})},ed=e=>{const t=Ps("external.component",ps([$s("element"),ea("uid")]),e),n=ya(Rl()),o=e=>{n.set(e)},r=()=>{n.set(Rl((()=>a)))},s=t.uid.getOrThunk((()=>Tl("external")));El(t.element,s);const a={uid:s,getSystem:n.get,config:z.none,hasConfigured:L,connect:o,disconnect:r,getApis:()=>({}),element:t.element,spec:e,readState:R("No state"),syncComponents:E,components:R([]),events:{}};return Ll(a)},td=Tl,nd=e=>Ne(e,"uid"),od=(e,t)=>zl(e).getOrThunk((()=>{const n=nd(e)?e:r({uid:td("")},e);return Qc(n,t).getOrDie()})),rd=e=>od(e,z.none()),sd=Ll;var ad=(e,t,n,o,r)=>e(n,o)?z.some(n):S(r)&&r(n)?z.none():t(n,o,r);const id=(e,t,n)=>{let o=e.dom;const r=S(n)?n:L;while(o.parentNode){o=o.parentNode;const e=st.fromDom(o);if(t(e))return z.some(e);if(r(e))break}return z.none()},ld=(e,t,n)=>{const o=(e,t)=>t(e);return ad(o,id,e,t,n)},cd=(e,t)=>{const n=e=>t(st.fromDom(e)),o=oe(e.dom.childNodes,n);return o.map(st.fromDom)},dd=(e,t)=>{const n=e=>{for(let o=0;o<e.childNodes.length;o++){const r=st.fromDom(e.childNodes[o]);if(t(r))return z.some(r);const s=n(e.childNodes[o]);if(s.isSome())return s}return z.none()};return n(e.dom)},ud=(e,t,n)=>ld(e,t,n).isSome(),md=(e,t,n)=>id(e,(e=>Ot(e,t)),n),pd=(e,t)=>cd(e,(e=>Ot(e,t))),fd=(e,t)=>Rt(t,e),gd=(e,t,n)=>{const o=(e,t)=>Ot(e,t);return ad(o,md,e,t,n)},hd="aria-controls",vd=e=>{const t=ld(e,(e=>{if(!Ct(e))return!1;const t=dn(e,"id");return void 0!==t&&t.indexOf(hd)>-1}));return t.bind((e=>{const t=dn(e,"id"),n=Xt(e);return fd(n,`[${hd}="${t}"]`)}))},bd=()=>{const e=xl(hd),t=t=>{ln(t,hd,e)},n=e=>{pn(e,hd)};return{id:e,link:t,unlink:n}},yd=(e,t)=>vd(t).exists((t=>xd(e,t))),xd=(e,t)=>ud(t,(t=>Nt(t,e.element)),L)||yd(e,t),wd="unknown";var Cd;(function(e){e[e["STOP"]=0]="STOP",e[e["NORMAL"]=1]="NORMAL",e[e["LOGGING"]=2]="LOGGING"})(Cd||(Cd={}));const Sd=ya({}),_d=(e,t)=>{const n=[],o=(new Date).getTime();return{logEventCut:(e,t,o)=>{n.push({outcome:"cut",target:t,purpose:o})},logEventStopped:(e,t,o)=>{n.push({outcome:"stopped",target:t,purpose:o})},logNoParent:(e,t,o)=>{n.push({outcome:"no-parent",target:t,purpose:o})},logEventNoHandlers:(e,t)=>{n.push({outcome:"no-handlers-left",target:t})},logEventResponse:(e,t,o)=>{n.push({outcome:"response",purpose:o,target:t})},write:()=>{const r=(new Date).getTime();W(["mousemove","mouseover","mouseout",wi()],e)||console.log(e,{event:e,time:r-o,target:t.dom,sequence:Y(n,(e=>W(["cut","stopped","response"],e.outcome)?"{"+e.purpose+"} "+e.outcome+" at ("+gl(e.target)+")":e.outcome))})}}},kd=(e,t,n)=>{const o=Re(Sd.get(),e).orThunk((()=>{const t=be(Sd.get());return ve(t,(t=>e.indexOf(t)>-1?z.some(Sd.get()[t]):z.none()))})).getOr(Cd.NORMAL);switch(o){case Cd.NORMAL:return n(Rd());case Cd.LOGGING:{const o=_d(e,t),r=n(o);return o.write(),r}case Cd.STOP:return!0}},Ed=["alloy/data/Fields","alloy/debugging/Debugging"],Od=()=>{const e=new Error;if(void 0!==e.stack){const t=e.stack.split("\n");return oe(t,(e=>e.indexOf("alloy")>0&&!q(Ed,(t=>e.indexOf(t)>-1)))).getOr(wd)}return wd},Td={logEventCut:E,logEventStopped:E,logNoParent:E,logEventNoHandlers:E,logEventResponse:E,write:E},Ad=(e,t,n)=>kd(e,t,n),Rd=R(Td),Nd=R([$s("menu"),$s("selectedMenu")]),Dd=R([$s("item"),$s("selectedItem")]);R(fs(Dd().concat(Nd())));const Bd=R(fs(Dd())),Md=Js("initSize",[$s("numColumns"),$s("numRows")]),Id=()=>Vs("markers",Bd()),Pd=()=>Js("markers",[$s("backgroundMenu")].concat(Nd()).concat(Dd())),Ld=e=>Js("markers",Y(e,$s)),Fd=(e,t,n)=>(Od(),js(t,t,n,Ns((e=>vr.value(((...t)=>e.apply(void 0,t))))))),zd=e=>Fd("onHandler",e,jr(E)),jd=e=>Fd("onKeyboardHandler",e,jr(z.none)),Ud=e=>Fd("onHandler",e,Fr()),Hd=e=>Fd("onKeyboardHandler",e,Fr()),$d=(e,t)=>Us(e,R(t)),Vd=e=>Us(e,N),Wd=R(Md),qd=(e,t,n,o,r,s,a,i=!1)=>({x:e,y:t,bubble:n,direction:o,placement:r,restriction:s,label:`${a}-${r}`,alwaysFit:i}),Gd=wa.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),Kd=(e,t,n,o,r,s,a,i,l)=>e.fold(t,n,o,r,s,a,i,l),Yd=(e,t,n,o)=>e.fold(t,t,o,o,t,o,n,n),Xd=(e,t,n,o)=>e.fold(t,o,t,o,n,n,t,o),Jd=Gd.southeast,Qd=Gd.southwest,Zd=Gd.northeast,eu=Gd.northwest,tu=Gd.south,nu=Gd.north,ou=Gd.east,ru=Gd.west,su=(e,t,n,o)=>{const r=e+t;return r>o?n:r<n?o:r},au=(e,t,n)=>Math.min(Math.max(e,t),n),iu=(e,t)=>{switch(t){case 1:return e.x;case 0:return e.x+e.width;case 2:return e.y;case 3:return e.y+e.height}},lu=(e,t)=>de(["left","right","top","bottom"],(n=>Re(t,n).map((t=>iu(e,t))))),cu=(e,t,n)=>{const o=(o,r)=>t[o].map((t=>{const s="top"===o||"bottom"===o,a=s?n.top:n.left,i="left"===o||"top"===o?Math.max:Math.min,l=i(t,r)+a;return s?au(l,e.y,e.bottom):au(l,e.x,e.right)})).getOr(r),r=o("left",e.x),s=o("top",e.y),a=o("right",e.right),i=o("bottom",e.bottom);return ir(r,s,a-r,i-s)},du="layout",uu=e=>e.x,mu=(e,t)=>e.x+e.width/2-t.width/2,pu=(e,t)=>e.x+e.width-t.width,fu=(e,t)=>e.y-t.height,gu=e=>e.y+e.height,hu=(e,t)=>e.y+e.height/2-t.height/2,vu=e=>e.x+e.width,bu=(e,t)=>e.x-t.width,yu=(e,t,n)=>qd(uu(e),gu(e),n.southeast(),Jd(),"southeast",lu(e,{left:1,top:3}),du),xu=(e,t,n)=>qd(pu(e,t),gu(e),n.southwest(),Qd(),"southwest",lu(e,{right:0,top:3}),du),wu=(e,t,n)=>qd(uu(e),fu(e,t),n.northeast(),Zd(),"northeast",lu(e,{left:1,bottom:2}),du),Cu=(e,t,n)=>qd(pu(e,t),fu(e,t),n.northwest(),eu(),"northwest",lu(e,{right:0,bottom:2}),du),Su=(e,t,n)=>qd(mu(e,t),fu(e,t),n.north(),nu(),"north",lu(e,{bottom:2}),du),_u=(e,t,n)=>qd(mu(e,t),gu(e),n.south(),tu(),"south",lu(e,{top:3}),du),ku=(e,t,n)=>qd(vu(e),hu(e,t),n.east(),ou(),"east",lu(e,{left:0}),du),Eu=(e,t,n)=>qd(bu(e,t),hu(e,t),n.west(),ru(),"west",lu(e,{right:1}),du),Ou=()=>[yu,xu,wu,Cu,_u,Su,ku,Eu],Tu=()=>[xu,yu,Cu,wu,_u,Su,ku,Eu],Au=()=>[wu,Cu,yu,xu,Su,_u],Ru=()=>[Cu,wu,xu,yu,Su,_u],Nu=()=>[yu,xu,wu,Cu,_u,Su],Du=()=>[xu,yu,Cu,wu,_u,Su],Bu=(e,t)=>t.universal?e:Z(e,(e=>W(t.channels,e))),Mu=e=>Vi([Ki(fi(),((t,n)=>{const o=e.channels,r=be(o),s=n,a=Bu(r,s);X(a,(e=>{const n=o[e],r=n.schema,a=Ps("channel["+e+"] data\nReceiver: "+gl(t.element),r,s.data);n.onReceive(t,a)}))}))]);var Iu=Object.freeze({__proto__:null,events:Mu}),Pu=[Vs("channels",Ds(vr.value,ps([Ud("onReceive"),ca("schema",xs())])))];const Lu=(e,t,n)=>il((o=>{n(o,e,t)})),Fu=(e,t,n)=>al(((o,r)=>{n(o,e,t)})),zu=(e,t,n,o,r,s)=>{const a=ps(e),i=ia(t,[la("config",e)]);return $u(a,i,t,n,o,r,s)},ju=(e,t,n,o,r,s)=>{const a=e,i=ia(t,[ta("config",e)]);return $u(a,i,t,n,o,r,s)},Uu=(e,t,n)=>{const o=(o,...r)=>{const s=[o].concat(r);return o.config({name:R(e)}).fold((()=>{throw new Error("We could not find any behaviour configuration for: "+e+". Using API: "+n)}),(e=>{const n=Array.prototype.slice.call(s,1);return t.apply(void 0,[o,e.config,e.state].concat(n))}))};return Dl(o,n,t)},Hu=e=>({key:e,value:void 0}),$u=(e,t,n,o,s,a,i)=>{const l=e=>De(e,n)?e[n]():z.none(),c=we(s,((e,t)=>Uu(n,e,t))),d=we(a,((e,t)=>Ml(e,t))),u=r(r(r({},d),c),{},{revoke:B(Hu,n),config:t=>{const o=Ps(n+"-config",e,t);return{key:n,value:{config:o,me:u,configAsRaw:$n((()=>Ps(n+"-config",e,t))),initialConfig:t,state:i}}},schema:R(t),exhibit:(e,t)=>Le(l(e),Re(o,"exhibit"),((e,n)=>n(t,e.config,e.state))).getOrThunk((()=>Gl({}))),name:R(n),handlers:e=>l(e).map((e=>{const t=Re(o,"events").getOr((()=>({})));return t(e.config,e.state)})).getOr({})});return u},Vu=e=>Ta(e),Wu=ps([$s("fields"),$s("name"),ca("active",{}),ca("apis",{}),ca("state",Ul),ca("extra",{})]),qu=e=>{const t=Ps("Creating behaviour: "+e.name,Wu,e);return zu(t.fields,t.name,t.active,t.apis,t.extra,t.state)},Gu=ps([$s("branchKey"),$s("branches"),$s("name"),ca("active",{}),ca("apis",{}),ca("state",Ul),ca("extra",{})]),Ku=e=>{const t=Ps("Creating behaviour: "+e.name,Gu,e);return ju(Fs(t.branchKey,t.branches),t.name,t.active,t.apis,t.extra,t.state)},Yu=R(void 0),Xu=qu({fields:Pu,name:"receiving",active:Iu}),Ju=(e,t)=>Gl({classes:[],styles:t.useFixed()?{}:{position:"relative"}});var Qu=Object.freeze({__proto__:null,exhibit:Ju});const Zu=e=>e.dom.focus(),em=e=>e.dom.blur(),tm=e=>{const t=Xt(e).dom;return e.dom===t.activeElement},nm=(e=Qo())=>z.from(e.dom.activeElement).map(st.fromDom),om=e=>nm(Xt(e)).filter((t=>e.dom.contains(t.dom))),rm=(e,t)=>{const n=Xt(t),o=nm(n).bind((e=>{const n=t=>Nt(e,t);return n(t)?z.some(t):dd(t,n)})),r=e(t);return o.each((e=>{nm(n).filter((t=>Nt(t,e))).fold((()=>{Zu(e)}),E)})),r},sm=(e,t,n,o,r)=>{const s=e=>e+"px";return{position:e,left:t.map(s),top:n.map(s),right:o.map(s),bottom:r.map(s)}},am=e=>r(r({},e),{},{position:z.some(e.position)}),im=(e,t)=>{yn(e,am(t))},lm=wa.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),cm=(e,t,n,o,r,s)=>{const a=t.rect,i=a.x-n,l=a.y-o,c=a.width,d=a.height,u=r-(i+c),m=s-(l+d),p=z.some(i),f=z.some(l),g=z.some(u),h=z.some(m),v=z.none();return Kd(t.direction,(()=>sm(e,p,f,v,v)),(()=>sm(e,v,f,g,v)),(()=>sm(e,p,v,v,h)),(()=>sm(e,v,v,g,h)),(()=>sm(e,p,f,v,v)),(()=>sm(e,p,v,v,h)),(()=>sm(e,p,f,v,v)),(()=>sm(e,v,f,g,v)))},dm=(e,t)=>e.fold((()=>{const e=t.rect;return sm("absolute",z.some(e.x),z.some(e.y),z.none(),z.none())}),((e,n,o,r)=>cm("absolute",t,e,n,o,r)),((e,n,o,r)=>cm("fixed",t,e,n,o,r))),um=(e,t)=>{const n=B(rr,t),o=e.fold(n,n,(()=>{const e=Go();return rr(t).translate(-e.left,-e.top)})),r=Un(t),s=Rn(t);return ir(o.left,o.top,r,s)},mm=(e,t)=>t.fold((()=>e.fold(mr,mr,ir)),(t=>e.fold(R(t),R(t),(()=>{const n=pm(e,t.x,t.y);return ir(n.left,n.top,t.width,t.height)})))),pm=(e,t,n)=>{const o=Bn(t,n),r=()=>{const e=Go();return o.translate(-e.left,-e.top)};return e.fold(R(o),R(o),r)},fm=(e,t,n,o)=>e.fold(t,n,o);lm.none;const gm=lm.relative,hm=lm.fixed,vm=(e,t)=>({anchorBox:e,origin:t}),bm=(e,t)=>vm(e,t),ym="data-alloy-placement",xm=(e,t)=>{ln(e,ym,t)},wm=e=>un(e,ym),Cm=e=>pn(e,ym),Sm=wa.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),_m=(e,t)=>{const{x:n,y:o,right:r,bottom:s}=t,{x:a,y:i,right:l,bottom:c,width:d,height:u}=e,m=a>=n&&a<=r,p=i>=o&&i<=s,f=m&&p,g=l<=r&&l>=n,h=c<=s&&c>=o,v=g&&h,b=Math.min(d,a>=n?r-a:l-n),y=Math.min(u,i>=o?s-i:c-o);return{originInBounds:f,sizeInBounds:v,visibleW:b,visibleH:y}},km=(e,t)=>{const{x:n,y:o,right:r,bottom:s}=t,{x:a,y:i,width:l,height:c}=e,d=Math.max(n,r-l),u=Math.max(o,s-c),m=au(a,n,d),p=au(i,o,u),f=Math.min(m+l,r)-m,g=Math.min(p+c,s)-p;return ir(m,p,f,g)},Em=(e,t,n)=>{const o=R(t.bottom-n.y),r=R(n.bottom-t.y),s=Yd(e,r,r,o),a=R(t.right-n.x),i=R(n.right-t.x),l=Xd(e,i,i,a);return{maxWidth:l,maxHeight:s}},Om=(e,t,n,o)=>{const r=e.bubble,s=r.offset,a=cu(o,e.restriction,s),i=e.x+s.left,l=e.y+s.top,c=ir(i,l,t,n),{originInBounds:d,sizeInBounds:u,visibleW:m,visibleH:p}=_m(c,a),f=d&&u,g=f?c:km(c,a),h=g.width>0&&g.height>0,{maxWidth:v,maxHeight:b}=Em(e.direction,g,o),y={rect:g,maxHeight:b,maxWidth:v,direction:e.direction,placement:e.placement,classes:{on:r.classesOn,off:r.classesOff},layout:e.label,testY:l};return f||e.alwaysFit?Sm.fit(y):Sm.nofit(y,m,p,h)},Tm=(e,t,n,o,r,s)=>{const a=o.width,i=o.height,l=(t,l,c,d,u)=>{const m=t(n,o,r,e,s),p=Om(m,a,i,s);return p.fold(R(p),((e,t,n,o)=>{const r=u===o?n>d||t>c:!u&&o;return r?p:Sm.nofit(l,c,d,u)}))},c=te(t,((e,t)=>{const n=B(l,t);return e.fold(R(e),n)}),Sm.nofit({rect:n,maxHeight:o.height,maxWidth:o.width,direction:Jd(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:n.y},-1,-1,!1));return c.fold(N,N)},Am=e=>{const t=ya(z.none()),n=()=>t.get().each(e),o=()=>{n(),t.set(z.none())},r=()=>t.get().isSome(),s=()=>t.get(),a=e=>{n(),t.set(z.some(e))};return{clear:o,isSet:r,get:s,set:a}},Rm=()=>Am((e=>e.destroy())),Nm=()=>Am((e=>e.unbind())),Dm=()=>{const e=Am(E),t=t=>e.get().each(t);return r(r({},e),{},{on:t})},Bm=F,Mm=(e,t,n)=>Po(e,t,Bm,n),Im=(e,t,n)=>Lo(e,t,Bm,n),Pm=Bo,Lm=["top","bottom","right","left"],Fm="data-alloy-transition-timer",zm=(e,t)=>Tc(e,t.classes),jm=(e,t,n)=>n.exists((n=>{const o=e.mode;return"all"===o||n[o]!==t[o]})),Um=(e,t)=>{const n=e=>parseFloat(e).toFixed(3);return Te(t,((t,o)=>{const r=e[o].map(n),s=t.map(n);return!Me(r,s)})).isSome()},Hm=e=>{const t=t=>{const n=xn(e,t),o=n.split(/\s*,\s*/);return Z(o,Je)},n=e=>{if(f(e)&&/^[\d.]+/.test(e)){const t=parseFloat(e);return Ke(e,"ms")?t:1e3*t}return 0},o=t("transition-delay"),r=t("transition-duration");return te(r,((e,t,r)=>{const s=n(o[r])+n(t);return Math.max(e,s)}),0)},$m=(e,t)=>{const n=Nm(),o=Nm();let r;const s=t=>{var n;const o=null!==(n=t.raw.pseudoElement)&&void 0!==n?n:"";return Nt(t.target,e)&&Qe(o)&&W(Lm,t.raw.propertyName)},a=a=>{if(w(a)||s(a)){n.clear(),o.clear();const s=null===a||void 0===a?void 0:a.raw.type;(w(s)||s===ai())&&(clearTimeout(r),pn(e,Fm),Oc(e,t.classes))}},i=Mm(e,ii(),(t=>{s(t)&&(i.unbind(),n.set(Mm(e,ai(),a)),o.set(Mm(e,si(),a)))})),l=Hm(e);requestAnimationFrame((()=>{r=setTimeout(a,l+17),ln(e,Fm,r)}))},Vm=(e,t)=>{Ec(e,t.classes),un(e,Fm).each((t=>{clearTimeout(parseInt(t,10)),pn(e,Fm)})),$m(e,t)},Wm=(e,t,n,o,s,a)=>{const i=jm(o,s,a);if(i||zm(e,o)){vn(e,"position",n.position);const a=um(t,e),l=dm(t,r(r({},s),{},{rect:a})),c=de(Lm,(e=>l[e]));Um(n,c)&&(yn(e,c),i&&Vm(e,o),En(e))}else Oc(e,o.classes)},qm=e=>({width:Un(e),height:Rn(e)}),Gm=(e,t,n,o)=>{kn(t,"max-height"),kn(t,"max-width");const r=qm(t);return Tm(t,o.preference,e,r,n,o.bounds)},Km=(e,t)=>{const n=t.classes;Oc(e,n.off),Ec(e,n.on)},Ym=(e,t,n)=>{const o=n.maxHeightFunction;o(e,t.maxHeight)},Xm=(e,t,n)=>{const o=n.maxWidthFunction;o(e,t.maxWidth)},Jm=(e,t,n)=>{const o=dm(n.origin,t);n.transition.each((r=>{Wm(e,n.origin,o,r,t,n.lastPlacement)})),im(e,o)},Qm=(e,t)=>{xm(e,t.placement)},Zm=(e,t)=>{Nn(e,Math.floor(t))},ep=R(((e,t)=>{Zm(e,t),bn(e,{"overflow-x":"hidden","overflow-y":"auto"})})),tp=R(((e,t)=>{Zm(e,t)})),np=(e,t,n)=>void 0===e[t]?n:e[t],op=(e,t,n,o,r,s,a,i)=>{const l=np(a,"maxHeightFunction",ep()),c=np(a,"maxWidthFunction",E),d=e.anchorBox,u=e.origin,m={bounds:mm(u,s),origin:u,preference:o,maxHeightFunction:l,maxWidthFunction:c,lastPlacement:r,transition:i};return rp(d,t,n,m)},rp=(e,t,n,o)=>{const r=Gm(e,t,n,o);return Jm(t,r,o),Qm(t,r),Km(t,r),Ym(t,r,o),Xm(t,r,o),{layout:r.layout,placement:r.placement}},sp=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],ap=(e,t,n,o=1)=>{const r=e*o,s=t*o,a=e=>Re(n,e).getOr([]),i=(e,t,n)=>{const o=ce(sp,n);return{offset:Bn(e,t),classesOn:ae(n,a),classesOff:ae(o,a)}};return{southeast:()=>i(-e,t,["top","alignLeft"]),southwest:()=>i(e,t,["top","alignRight"]),south:()=>i(-e/2,t,["top","alignCentre"]),northeast:()=>i(-e,-t,["bottom","alignLeft"]),northwest:()=>i(e,-t,["bottom","alignRight"]),north:()=>i(-e/2,-t,["bottom","alignCentre"]),east:()=>i(e,-t/2,["valignCentre","left"]),west:()=>i(-e,-t/2,["valignCentre","right"]),insetNortheast:()=>i(r,s,["top","alignLeft","inset"]),insetNorthwest:()=>i(-r,s,["top","alignRight","inset"]),insetNorth:()=>i(-r/2,s,["top","alignCentre","inset"]),insetSoutheast:()=>i(r,-s,["bottom","alignLeft","inset"]),insetSouthwest:()=>i(-r,-s,["bottom","alignRight","inset"]),insetSouth:()=>i(-r/2,-s,["bottom","alignCentre","inset"]),insetEast:()=>i(-r,-s/2,["valignCentre","right","inset"]),insetWest:()=>i(r,-s/2,["valignCentre","left","inset"])}},ip=()=>ap(0,0,{}),lp=N,cp=(e,t)=>n=>"rtl"===dp(n)?t:e,dp=e=>"rtl"===xn(e,"direction")?"rtl":"ltr";var up;(function(e){e["TopToBottom"]="toptobottom",e["BottomToTop"]="bottomtotop"})(up||(up={}));const mp="data-alloy-vertical-dir",pp=e=>ud(e,(e=>Ct(e)&&dn(e,"data-alloy-vertical-dir")===up.BottomToTop)),fp=()=>ia("layouts",[$s("onLtr"),$s("onRtl"),ea("onBottomLtr"),ea("onBottomRtl")]),gp=(e,t,n,o,r,s,a)=>{const i=a.map(pp).getOr(!1),l=t.layouts.map((t=>t.onLtr(e))),c=t.layouts.map((t=>t.onRtl(e))),d=i?t.layouts.bind((t=>t.onBottomLtr.map((t=>t(e))))).or(l).getOr(r):l.getOr(n),u=i?t.layouts.bind((t=>t.onBottomRtl.map((t=>t(e))))).or(c).getOr(s):c.getOr(o),m=cp(d,u);return m(e)},hp=(e,t,n)=>{const o=t.hotspot,r=um(n,o.element),s=gp(e.element,t,Nu(),Du(),Au(),Ru(),z.some(t.hotspot.element));return z.some(lp({anchorBox:r,bubble:t.bubble.getOr(ip()),overrides:t.overrides,layouts:s}))};var vp=[$s("hotspot"),ea("bubble"),ca("overrides",{}),fp(),$d("placement",hp)];const bp=(e,t,n)=>{const o=pm(n,t.x,t.y),r=ir(o.left,o.top,t.width,t.height),s=gp(e.element,t,Ou(),Tu(),Ou(),Tu(),z.none());return z.some(lp({anchorBox:r,bubble:t.bubble,overrides:t.overrides,layouts:s}))};var yp=[$s("x"),$s("y"),ca("height",0),ca("width",0),ca("bubble",ip()),ca("overrides",{}),fp(),$d("placement",bp)];const xp=wa.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),wp=e=>e.fold(N,((e,t,n)=>e.translate(-t,-n))),Cp=e=>e.fold(N,N),Sp=e=>te(e,((e,t)=>e.translate(t.left,t.top)),Bn(0,0)),_p=e=>{const t=Y(e,wp);return Sp(t)},kp=e=>{const t=Y(e,Cp);return Sp(t)},Ep=xp.screen,Op=xp.absolute,Tp=(e,t,n)=>{const o=Pt(n.root).dom,r=t=>{const n=Bt(t),o=Bt(e.element);return Nt(n,o)};return z.from(o.frameElement).map(st.fromDom).filter(r).map(Pn)},Ap=(e,t,n)=>{const o=Bt(e.element),r=Go(o),s=Tp(e,t,n).getOr(r);return Op(s,r.left,r.top)},Rp=(e,t,n,o)=>{const r=Ep(Bn(e,t));return z.some(sr(r,n,o))},Np=(e,t,n,o,r)=>e.map((e=>{const s=[t,e.point],a=fm(o,(()=>kp(s)),(()=>kp(s)),(()=>_p(s))),i=ar(a.left,a.top,e.width,e.height),l=n.showAbove?Au():Nu(),c=n.showAbove?Ru():Du(),d=gp(r,n,l,c,l,c,z.none());return lp({anchorBox:i,bubble:n.bubble.getOr(ip()),overrides:n.overrides,layouts:d})})),Dp=(e,t,n)=>{const o=Ap(e,n,t);return t.node.filter(on).bind((r=>{const s=r.dom.getBoundingClientRect(),a=Rp(s.left,s.top,s.width,s.height),i=t.node.getOr(e.element);return Np(a,o,t,n,i)}))};var Bp=[$s("node"),$s("root"),ea("bubble"),fp(),ca("overrides",{}),ca("showAbove",!1),$d("placement",Dp)];const Mp="\ufeff",Ip=" ",Pp=(e,t,n,o)=>({start:e,soffset:t,finish:n,foffset:o}),Lp={create:Pp},Fp=wa.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),zp=(e,t,n,o)=>e.fold(t,n,o),jp=e=>e.fold(N,N,N),Up=Fp.before,Hp=Fp.on,$p=Fp.after,Vp={before:Up,on:Hp,after:$p,cata:zp,getStart:jp},Wp=wa.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),qp=e=>Wp.exact(e.start,e.soffset,e.finish,e.foffset),Gp=e=>e.match({domRange:e=>st.fromDom(e.startContainer),relative:(e,t)=>Vp.getStart(e),exact:(e,t,n,o)=>e}),Kp=Wp.domRange,Yp=Wp.relative,Xp=Wp.exact,Jp=e=>{const t=Gp(e);return Pt(t)},Qp=Lp.create,Zp={domRange:Kp,relative:Yp,exact:Xp,exactFromRange:qp,getWin:Jp,range:Qp},ef=(e,t)=>{t.fold((t=>{e.setStartBefore(t.dom)}),((t,n)=>{e.setStart(t.dom,n)}),(t=>{e.setStartAfter(t.dom)}))},tf=(e,t)=>{t.fold((t=>{e.setEndBefore(t.dom)}),((t,n)=>{e.setEnd(t.dom,n)}),(t=>{e.setEndAfter(t.dom)}))},nf=(e,t,n)=>{const o=e.document.createRange();return ef(o,t),tf(o,n),o},of=(e,t,n,o,r)=>{const s=e.document.createRange();return s.setStart(t.dom,n),s.setEnd(o.dom,r),s},rf=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}),sf=e=>{const t=e.getClientRects(),n=t.length>0?t[0]:e.getBoundingClientRect();return n.width>0||n.height>0?z.some(n).map(rf):z.none()},af=e=>{const t=e.getBoundingClientRect();return t.width>0||t.height>0?z.some(t).map(rf):z.none()},lf=wa.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),cf=(e,t,n)=>t(st.fromDom(n.startContainer),n.startOffset,st.fromDom(n.endContainer),n.endOffset),df=(e,t)=>t.match({domRange:e=>({ltr:R(e),rtl:z.none}),relative:(t,n)=>({ltr:$n((()=>nf(e,t,n))),rtl:$n((()=>z.some(nf(e,n,t))))}),exact:(t,n,o,r)=>({ltr:$n((()=>of(e,t,n,o,r))),rtl:$n((()=>z.some(of(e,o,r,t,n))))})}),uf=(e,t)=>{const n=t.ltr();if(n.collapsed){const o=t.rtl().filter((e=>!1===e.collapsed));return o.map((e=>lf.rtl(st.fromDom(e.endContainer),e.endOffset,st.fromDom(e.startContainer),e.startOffset))).getOrThunk((()=>cf(e,lf.ltr,n)))}return cf(e,lf.ltr,n)},mf=(e,t)=>{const n=df(e,t);return uf(e,n)},pf=(e,t)=>{const n=mf(e,t);return n.match({ltr:(t,n,o,r)=>{const s=e.document.createRange();return s.setStart(t.dom,n),s.setEnd(o.dom,r),s},rtl:(t,n,o,r)=>{const s=e.document.createRange();return s.setStart(o.dom,r),s.setEnd(t.dom,n),s}})};lf.ltr,lf.rtl;const ff=(e,t,n)=>Z(zt(e,n),t),gf=(e,t)=>At(t,e),hf=(e,t,n,o)=>{const r=Bt(e),s=r.dom.createRange();return s.setStart(e.dom,t),s.setEnd(n.dom,o),s},vf=(e,t,n,o)=>{const r=hf(e,t,n,o),s=Nt(e,n)&&t===o;return r.collapsed&&!s},bf=e=>z.from(e.getSelection()),yf=e=>{if(e.rangeCount>0){const t=e.getRangeAt(0),n=e.getRangeAt(e.rangeCount-1);return z.some(Lp.create(st.fromDom(t.startContainer),t.startOffset,st.fromDom(n.endContainer),n.endOffset))}return z.none()},xf=e=>{if(null===e.anchorNode||null===e.focusNode)return yf(e);{const t=st.fromDom(e.anchorNode),n=st.fromDom(e.focusNode);return vf(t,e.anchorOffset,n,e.focusOffset)?z.some(Lp.create(t,e.anchorOffset,n,e.focusOffset)):yf(e)}},wf=e=>bf(e).filter((e=>e.rangeCount>0)).bind(xf),Cf=(e,t)=>{const n=pf(e,t);return sf(n)},Sf=(e,t)=>{const n=pf(e,t);return af(n)},_f=(e,t)=>{const n=n=>{if(!e(n))throw new Error("Can only get "+t+" value of a "+t+" node");return o(n).getOr("")},o=t=>e(t)?z.from(t.dom.nodeValue):z.none(),r=(n,o)=>{if(!e(n))throw new Error("Can only set raw "+t+" value of a "+t+" node");n.dom.nodeValue=o};return{get:n,getOption:o,set:r}},kf=_f(St,"text"),Ef=e=>kf.get(e),Of=(e,t)=>({element:e,offset:t}),Tf=(e,t)=>{const n=Ht(e);if(0===n.length)return Of(e,t);if(t<n.length)return Of(n[t],0);{const e=n[n.length-1],t=St(e)?Ef(e).length:Ht(e).length;return Of(e,t)}},Af=(e,t)=>St(e)?Of(e,t):Tf(e,t),Rf=(e,t)=>{const n=t.getSelection.getOrThunk((()=>()=>wf(e)));return n().map((e=>{const t=Af(e.start,e.soffset),n=Af(e.finish,e.foffset);return Zp.range(t.element,t.offset,n.element,n.offset)}))},Nf=(e,t,n)=>{const o=Pt(t.root).dom,r=Ap(e,n,t),s=Rf(o,t).bind((e=>{const t=Sf(o,Zp.exactFromRange(e)).orThunk((()=>{const t=st.fromText(Mp);zo(e.start,t);const n=Cf(o,Zp.exact(t,0,t,1));return qo(t),n}));return t.bind((e=>Rp(e.left,e.top,e.width,e.height)))})),a=Rf(o,t).bind((e=>Ct(e.start)?z.some(e.start):Ft(e.start))),i=a.getOr(e.element);return Np(s,r,t,n,i)};var Df=[ea("getSelection"),$s("root"),ea("bubble"),fp(),ca("overrides",{}),ca("showAbove",!1),$d("placement",Nf)];const Bf="link-layout",Mf=e=>e.x+e.width,If=(e,t)=>e.x-t.width,Pf=(e,t)=>e.y-t.height+e.height,Lf=e=>e.y,Ff=(e,t,n)=>qd(Mf(e),Lf(e),n.southeast(),Jd(),"southeast",lu(e,{left:0,top:2}),Bf),zf=(e,t,n)=>qd(If(e,t),Lf(e),n.southwest(),Qd(),"southwest",lu(e,{right:1,top:2}),Bf),jf=(e,t,n)=>qd(Mf(e),Pf(e,t),n.northeast(),Zd(),"northeast",lu(e,{left:0,bottom:3}),Bf),Uf=(e,t,n)=>qd(If(e,t),Pf(e,t),n.northwest(),eu(),"northwest",lu(e,{right:1,bottom:3}),Bf),Hf=()=>[Ff,zf,jf,Uf],$f=()=>[zf,Ff,Uf,jf],Vf=(e,t,n)=>{const o=um(n,t.item.element),r=gp(e.element,t,Hf(),$f(),Hf(),$f(),z.none());return z.some(lp({anchorBox:o,bubble:ip(),overrides:t.overrides,layouts:r}))};var Wf=[$s("item"),fp(),ca("overrides",{}),$d("placement",Vf)],qf=Fs("type",{selection:Df,node:Bp,hotspot:vp,submenu:Wf,makeshift:yp});const Gf=[Zs("classes",Ss),pa("mode","all",["all","layout","placement"])],Kf=[ca("useFixed",L),ea("getBounds")],Yf=[Vs("anchor",qf),ia("transition",Gf)],Xf=()=>{const e=document.documentElement;return hm(0,0,e.clientWidth,e.clientHeight)},Jf=e=>{const t=Pn(e.element),n=e.element.dom.getBoundingClientRect();return gm(t.left,t.top,n.width,n.height)},Qf=(e,t,n,o,r,s)=>{const a=bm(t.anchorBox,e);return op(a,o.element,t.bubble,t.layouts,r,n,t.overrides,s)},Zf=(e,t,n,o,r)=>{const s=z.none();eg(e,t,n,o,r,s)},eg=(e,t,n,o,r,s)=>{const a=Ps("placement.info",fs(Yf),r),i=a.anchor,l=o.element,c=n.get(o.uid);rm((()=>{vn(l,"position","fixed");const r=Cn(l,"visibility");vn(l,"visibility","hidden");const d=t.useFixed()?Xf():Jf(e);i.placement(e,i,d).each((e=>{const r=s.orThunk((()=>t.getBounds.map(P))),i=Qf(d,e,r,o,c,a.transition);n.set(o.uid,i)})),r.fold((()=>{kn(l,"visibility")}),(e=>{vn(l,"visibility",e)})),Cn(l,"left").isNone()&&Cn(l,"top").isNone()&&Cn(l,"right").isNone()&&Cn(l,"bottom").isNone()&&Be(Cn(l,"position"),"fixed")&&kn(l,"position")}),l)},tg=(e,t,n)=>t.useFixed()?"fixed":"absolute",ng=(e,t,n,o)=>{const r=o.element;X(["position","left","right","top","bottom"],(e=>kn(r,e))),Cm(r),n.clear(o.uid)};var og=Object.freeze({__proto__:null,position:Zf,positionWithinBounds:eg,getMode:tg,reset:ng});const rg=()=>{let e={};const t=(t,n)=>{e[t]=n},n=t=>Re(e,t),o=t=>{C(t)?delete e[t]:e={}};return Hl({readState:()=>e,clear:o,set:t,get:n})};var sg=Object.freeze({__proto__:null,init:rg});const ag=qu({fields:Kf,name:"positioning",active:Qu,apis:og,state:sg}),ig=e=>e.getSystem().isConnected(),lg=e=>{Li(e,Oi());const t=e.components();X(t,lg)},cg=e=>{const t=e.components();X(t,cg),Li(e,Ei())},dg=(e,t)=>{e.getSystem().addToWorld(t),on(e.element)&&cg(t)},ug=e=>{lg(e),e.getSystem().removeFromWorld(e)},mg=(e,t)=>{Ho(e.element,t.element)},pg=e=>{X(e.components(),(e=>qo(e.element))),Wo(e.element),e.syncComponents()},fg=(e,t,n)=>{const o=e.components();pg(e);const r=n(t),s=ce(o,r);X(s,(t=>{lg(t),e.getSystem().removeFromWorld(t)})),X(r,(t=>{ig(t)?mg(e,t):(e.getSystem().addToWorld(t),mg(e,t),on(e.element)&&cg(t))})),e.syncComponents()},gg=(e,t,n)=>{const o=e.components(),r=ae(t,(e=>zl(e).toArray()));X(o,(e=>{W(r,e)||ug(e)}));const s=n(t),a=ce(o,s);X(a,(e=>{ig(e)&&ug(e)})),X(s,(t=>{ig(t)||dg(e,t)})),e.syncComponents()},hg=(e,t)=>{vg(e,t,Ho)},vg=(e,t,n)=>{e.getSystem().addToWorld(t),n(e.element,t.element),on(e.element)&&cg(t),e.syncComponents()},bg=e=>{lg(e),qo(e.element),e.getSystem().removeFromWorld(e)},yg=e=>{const t=Lt(e.element).bind((t=>e.getSystem().getByDom(t).toOptional()));bg(e),t.each((e=>{e.syncComponents()}))},xg=e=>{const t=e.components();X(t,bg),Wo(e.element),e.syncComponents()},wg=(e,t)=>{Sg(e,t,Ho)},Cg=(e,t)=>{Sg(e,t,jo)},Sg=(e,t,n)=>{n(e,t.element);const o=Ht(t.element);X(o,(e=>{t.getByDom(e).each(cg)}))},_g=e=>{const t=Ht(e.element);X(t,(t=>{e.getByDom(t).each(lg)})),qo(e.element)},kg=(e,t,n,o)=>{n.get().each((t=>{xg(e)}));const r=t.getAttachPoint(e);hg(r,e);const s=e.getSystem().build(o);return hg(e,s),n.set(s),s},Eg=(e,t,n,o)=>{const r=kg(e,t,n,o);return t.onOpen(e,r),r},Og=(e,t,n,o)=>n.get().map((()=>kg(e,t,n,o))),Tg=(e,t,n,o,r)=>{Ig(e,t),Eg(e,t,n,o),r(),Lg(e,t)},Ag=(e,t,n)=>{n.get().each((o=>{xg(e),yg(e),t.onClose(e,o),n.clear()}))},Rg=(e,t,n)=>n.isOpen(),Ng=(e,t,n,o)=>Rg(e,t,n)&&n.get().exists((n=>t.isPartOf(e,n,o))),Dg=(e,t,n)=>n.get(),Bg=(e,t,n,o)=>{Cn(e.element,t).fold((()=>{pn(e.element,n)}),(t=>{ln(e.element,n,t)})),vn(e.element,t,o)},Mg=(e,t,n)=>{un(e.element,n).fold((()=>kn(e.element,t)),(n=>vn(e.element,t,n)))},Ig=(e,t,n)=>{const o=t.getAttachPoint(e);vn(e.element,"position",ag.getMode(o)),Bg(e,"visibility",t.cloakVisibilityAttr,"hidden")},Pg=e=>q(["top","left","right","bottom"],(t=>Cn(e,t).isSome())),Lg=(e,t,n)=>{Pg(e.element)||kn(e.element,"position"),Mg(e,"visibility",t.cloakVisibilityAttr)};var Fg=Object.freeze({__proto__:null,cloak:Ig,decloak:Lg,open:Eg,openWhileCloaked:Tg,close:Ag,isOpen:Rg,isPartOf:Ng,getState:Dg,setContent:Og});const zg=(e,t)=>Vi([Ki(yi(),((n,o)=>{Ag(n,e,t)}))]);var jg=Object.freeze({__proto__:null,events:zg}),Ug=[zd("onOpen"),zd("onClose"),$s("isPartOf"),$s("getAttachPoint"),ca("cloakVisibilityAttr","data-precloak-visibility")];const Hg=()=>{const e=Dm(),t=R("not-implemented");return Hl({readState:t,isOpen:e.isSet,clear:e.clear,set:e.set,get:e.get})};var $g=Object.freeze({__proto__:null,init:Hg});const Vg=qu({fields:Ug,name:"sandboxing",active:jg,apis:Fg,state:$g}),Wg=R("dismiss.popups"),qg=R("reposition.popups"),Gg=R("mouse.released"),Kg=ps([ca("isExtraPart",L),ia("fireEventInstead",[ca("event",Ti())])]),Yg=e=>{const t=Ps("Dismissal",Kg,e);return{[Wg()]:{schema:ps([$s("target")]),onReceive:(e,n)=>{if(Vg.isOpen(e)){const o=Vg.isPartOf(e,n.target)||t.isExtraPart(e,n.target);o||t.fireEventInstead.fold((()=>Vg.close(e)),(t=>Li(e,t.event)))}}}}},Xg=ps([ia("fireEventInstead",[ca("event",Ai())]),Ys("doReposition")]),Jg=e=>{const t=Ps("Reposition",Xg,e);return{[qg()]:{onReceive:e=>{Vg.isOpen(e)&&t.fireEventInstead.fold((()=>t.doReposition(e)),(t=>Li(e,t.event)))}}}},Qg=(e,t,n)=>{t.store.manager.onLoad(e,t,n)},Zg=(e,t,n)=>{t.store.manager.onUnload(e,t,n)},eh=(e,t,n,o)=>{t.store.manager.setValue(e,t,n,o)},th=(e,t,n)=>t.store.manager.getValue(e,t,n),nh=(e,t,n)=>n;var oh=Object.freeze({__proto__:null,onLoad:Qg,onUnload:Zg,setValue:eh,getValue:th,getState:nh});const rh=(e,t)=>{const n=e.resetOnDom?[rl(((n,o)=>{Qg(n,e,t)})),sl(((n,o)=>{Zg(n,e,t)}))]:[Fu(e,t,Qg)];return Vi(n)};var sh=Object.freeze({__proto__:null,events:rh});const ah=()=>{const e=ya(null),t=()=>({mode:"memory",value:e.get()}),n=()=>null===e.get(),o=()=>{e.set(null)};return Hl({set:e.set,get:e.get,isNotSet:n,clear:o,readState:t})},ih=()=>{const e=E;return Hl({readState:e})},lh=()=>{const e=ya({}),t=ya({}),n=()=>({mode:"dataset",dataByValue:e.get(),dataByText:t.get()}),o=()=>{e.set({}),t.set({})},s=n=>Re(e.get(),n).orThunk((()=>Re(t.get(),n))),a=n=>{const o=e.get(),s=t.get(),a={},i={};X(n,(e=>{a[e.value]=e,Re(e,"meta").each((t=>{Re(t,"text").each((t=>{i[t]=e}))}))})),e.set(r(r({},o),a)),t.set(r(r({},s),i))};return Hl({readState:n,lookup:s,update:a,clear:o})},ch=e=>e.store.manager.state(e);var dh=Object.freeze({__proto__:null,memory:ah,dataset:lh,manual:ih,init:ch});const uh=(e,t,n,o)=>{const r=t.store;n.update([o]),r.setValue(e,o),t.onSetValue(e,o)},mh=(e,t,n)=>{const o=t.store,r=o.getDataKey(e);return n.lookup(r).getOrThunk((()=>o.getFallbackEntry(r)))},ph=(e,t,n)=>{const o=t.store;o.initialValue.each((o=>{uh(e,t,n,o)}))},fh=(e,t,n)=>{n.clear()};var gh=[ea("initialValue"),$s("getFallbackEntry"),$s("getDataKey"),$s("setValue"),$d("manager",{setValue:uh,getValue:mh,onLoad:ph,onUnload:fh,state:lh})];const hh=(e,t,n)=>t.store.getValue(e),vh=(e,t,n,o)=>{t.store.setValue(e,o),t.onSetValue(e,o)},bh=(e,t,n)=>{t.store.initialValue.each((n=>{t.store.setValue(e,n)}))};var yh=[$s("getValue"),ca("setValue",E),ea("initialValue"),$d("manager",{setValue:vh,getValue:hh,onLoad:bh,onUnload:E,state:Ul.init})];const xh=(e,t,n,o)=>{n.set(o),t.onSetValue(e,o)},wh=(e,t,n)=>n.get(),Ch=(e,t,n)=>{t.store.initialValue.each((e=>{n.isNotSet()&&n.set(e)}))},Sh=(e,t,n)=>{n.clear()};var _h=[ea("initialValue"),$d("manager",{setValue:xh,getValue:wh,onLoad:Ch,onUnload:Sh,state:ah})],kh=[da("store",{mode:"memory"},Fs("mode",{memory:_h,manual:yh,dataset:gh})),zd("onSetValue"),ca("resetOnDom",!1)];const Eh=qu({fields:kh,name:"representing",active:sh,apis:oh,extra:{setValueFrom:(e,t)=>{const n=Eh.getValue(t);Eh.setValue(e,n)}},state:dh}),Oh=(e,t)=>ba(e,{},Y(t,(t=>Xs(t.name(),"Cannot configure "+t.name()+" for "+e))).concat([Us("dump",N)])),Th=e=>e.dump,Ah=(e,t)=>r(r({},Vu(t)),e.dump),Rh={field:Oh,augment:Ah,get:Th},Nh="placeholder",Dh=wa.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),Bh=e=>Ne(e,"uiType"),Mh=(e,t,n,o)=>e.exists((e=>e!==n.owner))?Dh.single(!0,R(n)):Re(o,n.name).fold((()=>{throw new Error("Unknown placeholder component: "+n.name+"\nKnown: ["+be(o)+"]\nNamespace: "+e.getOr("none")+"\nSpec: "+JSON.stringify(n,null,2))}),(e=>e.replace())),Ih=(e,t,n,o)=>Bh(n)&&n.uiType===Nh?Mh(e,t,n,o):Dh.single(!1,R(n)),Ph=(e,t,n,o)=>{const s=Ih(e,t,n,o);return s.fold(((s,a)=>{const i=Bh(n)?a(t,n.config,n.validated):a(t),l=Re(i,"components").getOr([]),c=ae(l,(n=>Ph(e,t,n,o)));return[r(r({},i),{},{components:c})]}),((e,o)=>{if(Bh(n)){const e=o(t,n.config,n.validated),r=n.validated.preprocess.getOr(N);return r(e)}return o(t)}))},Lh=(e,t,n,o)=>ae(n,(n=>Ph(e,t,n,o))),Fh=(e,t)=>{let n=!1;const o=()=>n,r=()=>{if(n)throw new Error("Trying to use the same placeholder more than once: "+e);return n=!0,t},s=()=>t.fold(((e,t)=>e),((e,t)=>e));return{name:R(e),required:s,used:o,replace:r}},zh=(e,t,n,o)=>{const r=we(o,((e,t)=>Fh(t,e))),s=Lh(e,t,n,r);return xe(r,(n=>{if(!1===n.used()&&n.required())throw new Error("Placeholder: "+n.name()+" was not found in components list\nNamespace: "+e.getOr("none")+"\nComponents: "+JSON.stringify(t.components,null,2))})),s},jh=Dh.single,Uh=Dh.multiple,Hh=R(Nh),$h=wa.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),Vh=ca("factory",{sketch:N}),Wh=ca("schema",[]),qh=$s("name"),Gh=js("pname","pname",zr((e=>"<alloy."+xl(e.name)+">")),xs()),Kh=Us("schema",(()=>[ea("preprocess")])),Yh=ca("defaults",R({})),Xh=ca("overrides",R({})),Jh=fs([Vh,Wh,qh,Gh,Yh,Xh]),Qh=fs([Vh,Wh,qh,Yh,Xh]),Zh=fs([Vh,Wh,qh,Gh,Yh,Xh]),ev=fs([Vh,Kh,qh,$s("unit"),Gh,Yh,Xh]),tv=e=>e.fold(z.some,z.none,z.some,z.some),nv=e=>{const t=e=>e.name;return e.fold(t,t,t,t)},ov=e=>e.fold(N,N,N,N),rv=(e,t)=>n=>{const o=Ps("Converting part type",t,n);return e(o)},sv=rv($h.required,Jh),av=rv($h.external,Qh),iv=rv($h.optional,Zh),lv=rv($h.group,ev),cv=R("entirety");var dv=Object.freeze({__proto__:null,required:sv,external:av,optional:iv,group:lv,asNamedPart:tv,name:nv,asCommon:ov,original:cv});const uv=(e,t,n,o)=>Pr(t.defaults(e,n,o),n,{uid:e.partUids[t.name]},t.overrides(e,n,o)),mv=(e,t,n)=>{const o={},r={};return X(n,(e=>{e.fold((e=>{o[e.pname]=jh(!0,((t,n,o)=>e.factory.sketch(uv(t,e,n,o))))}),(e=>{const n=t.parts[e.name];r[e.name]=R(e.factory.sketch(uv(t,e,n[cv()]),n))}),(e=>{o[e.pname]=jh(!1,((t,n,o)=>e.factory.sketch(uv(t,e,n,o))))}),(e=>{o[e.pname]=Uh(!0,((t,n,o)=>{const r=t[e.name];return Y(r,(n=>e.factory.sketch(Pr(e.defaults(t,n,o),n,e.overrides(t,n)))))}))}))})),{internals:R(o),externals:R(r)}},pv=(e,t)=>{const n={};return X(t,(t=>{tv(t).each((t=>{const o=fv(e,t.pname);n[t.name]=n=>{const s=Ps("Part: "+t.name+" in "+e,fs(t.schema),n);return r(r({},o),{},{config:n,validated:s})}}))})),n},fv=(e,t)=>({uiType:Hh(),owner:e,name:t}),gv=(e,t,n)=>({uiType:Hh(),owner:e,name:t,config:n,validated:{}}),hv=e=>ae(e,(e=>e.fold(z.none,z.some,z.none,z.none).map((e=>Js(e.name,e.schema.concat([Vd(cv())])))).toArray())),vv=e=>Y(e,nv),bv=(e,t,n)=>mv(e,t,n),yv=(e,t,n)=>zh(z.some(e),t,t.components,n),xv=(e,t,n)=>{const o=t.partUids[n];return e.getSystem().getByUid(o).toOptional()},wv=(e,t,n)=>xv(e,t,n).getOrDie("Could not find part: "+n),Cv=(e,t,n)=>{const o={},r=t.partUids,s=e.getSystem();return X(n,(e=>{o[e]=R(s.getByUid(r[e]))})),o},Sv=(e,t)=>{const n=e.getSystem();return we(t.partUids,((e,t)=>R(n.getByUid(e))))},_v=e=>be(e.partUids),kv=(e,t,n)=>{const o={},r=t.partUids,s=e.getSystem();return X(n,(e=>{o[e]=R(s.getByUid(r[e]).getOrDie())})),o},Ev=(e,t)=>{const n=vv(t);return Ta(Y(n,(t=>({key:t,value:e+"-"+t}))))},Ov=e=>js("partUids","partUids",Hr((t=>Ev(t.uid,e))),xs());var Tv=Object.freeze({__proto__:null,generate:pv,generateOne:gv,schemas:hv,names:vv,substitutes:bv,components:yv,defaultUids:Ev,defaultUidsSchema:Ov,getAllParts:Sv,getAllPartNames:_v,getPart:xv,getPartOrDie:wv,getParts:Cv,getPartsOrDie:kv});const Av=(e,t)=>{const n=e.length>0?[Js("parts",e)]:[];return n.concat([$s("uid"),ca("dom",{}),ca("components",[]),Vd("originalSpec"),ca("debug.sketcher",{})]).concat(t)},Rv=(e,t,n,o,r)=>{const s=Av(o,r);return Ps(e+" [SpecSchema]",ps(s.concat(t)),n)},Nv=(e,t,n,o)=>{const r=Mv(o),s=Rv(e,t,r,[],[]);return n(s,r)},Dv=(e,t,n,o,r)=>{const s=Mv(r),a=hv(n),i=Ov(n),l=Rv(e,t,s,a,[i]),c=bv(e,l,n),d=yv(e,l,c.internals());return o(l,d,s,c.externals())},Bv=e=>Ne(e,"uid"),Mv=e=>Bv(e)?e:r(r({},e),{},{uid:Tl("uid")}),Iv=e=>void 0!==e.uid,Pv=ps([$s("name"),$s("factory"),$s("configFields"),ca("apis",{}),ca("extraApis",{})]),Lv=ps([$s("name"),$s("factory"),$s("configFields"),$s("partFields"),ca("apis",{}),ca("extraApis",{})]),Fv=e=>{const t=Ps("Sketcher for "+e.name,Pv,e),n=e=>Nv(t.name,t.configFields,t.factory,e),o=we(t.apis,jl),s=we(t.extraApis,((e,t)=>Ml(e,t)));return r(r({name:t.name,configFields:t.configFields,sketch:n},o),s)},zv=e=>{const t=Ps("Sketcher for "+e.name,Lv,e),n=e=>Dv(t.name,t.configFields,t.partFields,t.factory,e),o=pv(t.name,t.partFields),s=we(t.apis,jl),a=we(t.extraApis,((e,t)=>Ml(e,t)));return r(r({name:t.name,partFields:t.partFields,configFields:t.configFields,sketch:n,parts:o},s),a)},jv=e=>Et("input")(e)&&"radio"!==dn(e,"type")||Et("textarea")(e),Uv=(e,t,n)=>t.find(e);var Hv=Object.freeze({__proto__:null,getCurrent:Uv});const $v=[$s("find")],Vv=qu({fields:$v,name:"composing",apis:Hv}),Wv=["input","button","textarea","select"],qv=(e,t,n)=>{const o=t.disabled()?eb:tb;o(e,t)},Gv=(e,t)=>!0===t.useNative&&W(Wv,bt(e.element)),Kv=e=>mn(e.element,"disabled"),Yv=e=>{ln(e.element,"disabled","disabled")},Xv=e=>{pn(e.element,"disabled")},Jv=e=>"true"===dn(e.element,"aria-disabled"),Qv=e=>{ln(e.element,"aria-disabled","true")},Zv=e=>{ln(e.element,"aria-disabled","false")},eb=(e,t,n)=>{t.disableClass.each((t=>{Cc(e.element,t)}));const o=Gv(e,t)?Yv:Qv;o(e),t.onDisabled(e)},tb=(e,t,n)=>{t.disableClass.each((t=>{_c(e.element,t)}));const o=Gv(e,t)?Xv:Zv;o(e),t.onEnabled(e)},nb=(e,t)=>Gv(e,t)?Kv(e):Jv(e),ob=(e,t,n,o)=>{const r=o?eb:tb;r(e,t)};var rb=Object.freeze({__proto__:null,enable:tb,disable:eb,isDisabled:nb,onLoad:qv,set:ob});const sb=(e,t)=>Gl({classes:t.disabled()?t.disableClass.toArray():[]}),ab=(e,t)=>Vi([Wi(gi(),((t,n)=>nb(t,e))),Fu(e,t,qv)]);var ib=Object.freeze({__proto__:null,exhibit:sb,events:ab}),lb=[ga("disabled",L),ca("useNative",!0),ea("disableClass"),zd("onDisabled"),zd("onEnabled")];const cb=qu({fields:lb,name:"disabling",active:ib,apis:rb}),db=(e,t,n,o)=>{const r=gf(e.element,"."+t.highlightClass);X(r,(n=>{const r=q(o,(e=>Nt(e.element,n)));r||(_c(n,t.highlightClass),e.getSystem().getByDom(n).each((n=>{t.onDehighlight(e,n),Li(n,Pi())})))}))},ub=(e,t,n)=>db(e,t,n,[]),mb=(e,t,n,o)=>{bb(e,t,n,o)&&(_c(o.element,t.highlightClass),t.onDehighlight(e,o),Li(o,Pi()))},pb=(e,t,n,o)=>{db(e,t,n,[o]),bb(e,t,n,o)||(Cc(o.element,t.highlightClass),t.onHighlight(e,o),Li(o,Ii()))},fb=(e,t,n)=>{wb(e,t).each((o=>{pb(e,t,n,o)}))},gb=(e,t,n)=>{Cb(e,t).each((o=>{pb(e,t,n,o)}))},hb=(e,t,n,o)=>{xb(e,t,n,o).fold((e=>{throw e}),(o=>{pb(e,t,n,o)}))},vb=(e,t,n,o)=>{const r=Eb(e,t),s=oe(r,o);s.each((o=>{pb(e,t,n,o)}))},bb=(e,t,n,o)=>kc(o.element,t.highlightClass),yb=(e,t,n)=>fd(e.element,"."+t.highlightClass).bind((t=>e.getSystem().getByDom(t).toOptional())),xb=(e,t,n,o)=>{const r=gf(e.element,"."+t.itemClass);return z.from(r[o]).fold((()=>vr.error(new Error("No element found with index "+o))),e.getSystem().getByDom)},wb=(e,t,n)=>fd(e.element,"."+t.itemClass).bind((t=>e.getSystem().getByDom(t).toOptional())),Cb=(e,t,n)=>{const o=gf(e.element,"."+t.itemClass),r=o.length>0?z.some(o[o.length-1]):z.none();return r.bind((t=>e.getSystem().getByDom(t).toOptional()))},Sb=(e,t,n,o)=>{const r=gf(e.element,"."+t.itemClass),s=re(r,(e=>kc(e,t.highlightClass)));return s.bind((t=>{const n=su(t,o,0,r.length-1);return e.getSystem().getByDom(r[n]).toOptional()}))},_b=(e,t,n)=>Sb(e,t,n,-1),kb=(e,t,n)=>Sb(e,t,n,1),Eb=(e,t,n)=>{const o=gf(e.element,"."+t.itemClass);return Ie(Y(o,(t=>e.getSystem().getByDom(t).toOptional())))};var Ob=Object.freeze({__proto__:null,dehighlightAll:ub,dehighlight:mb,highlight:pb,highlightFirst:fb,highlightLast:gb,highlightAt:hb,highlightBy:vb,isHighlighted:bb,getHighlighted:yb,getFirst:wb,getLast:Cb,getPrevious:_b,getNext:kb,getCandidates:Eb}),Tb=[$s("highlightClass"),$s("itemClass"),zd("onHighlight"),zd("onDehighlight")];const Ab=qu({fields:Tb,name:"highlighting",apis:Ob}),Rb=[8],Nb=[9],Db=[13],Bb=[27],Mb=[32],Ib=[37],Pb=[38],Lb=[39],Fb=[40],zb=(e,t,n)=>{const o=le(e.slice(0,t)),r=le(e.slice(t+1));return oe(o.concat(r),n)},jb=(e,t,n)=>{const o=le(e.slice(0,t));return oe(o,n)},Ub=(e,t,n)=>{const o=e.slice(0,t),r=e.slice(t+1);return oe(r.concat(o),n)},Hb=(e,t,n)=>{const o=e.slice(t+1);return oe(o,n)},$b=e=>t=>{const n=t.raw;return W(e,n.which)},Vb=e=>t=>ie(e,(e=>e(t))),Wb=e=>{const t=e.raw;return!0===t.shiftKey},qb=e=>{const t=e.raw;return!0===t.ctrlKey},Gb=M(Wb),Kb=(e,t)=>({matches:e,classification:t}),Yb=(e,t)=>{const n=oe(e,(e=>e.matches(t)));return n.map((e=>e.classification))},Xb=(e,t,n)=>{const o=t.exists((e=>n.exists((t=>Nt(t,e)))));o||Fi(e,Ri(),{prevFocus:t,newFocus:n})},Jb=()=>{const e=e=>om(e.element),t=(t,n)=>{const o=e(t);t.getSystem().triggerFocus(n,t.element);const r=e(t);Xb(t,o,r)};return{get:e,set:t}},Qb=()=>{const e=e=>Ab.getHighlighted(e).map((e=>e.element)),t=(t,n)=>{const o=e(t);t.getSystem().getByDom(n).fold(E,(e=>{Ab.highlight(t,e)}));const r=e(t);Xb(t,o,r)};return{get:e,set:t}};var Zb;(function(e){e["OnFocusMode"]="onFocus",e["OnEnterOrSpaceMode"]="onEnterOrSpace",e["OnApiMode"]="onApi"})(Zb||(Zb={}));const ey=(e,t,n,o,r)=>{const s=()=>e.concat([ca("focusManager",Jb()),da("focusInside","onFocus",Ns((e=>W(["onFocus","onEnterOrSpace","onApi"],e)?vr.value(e):vr.error("Invalid value for focusInside")))),$d("handler",l),$d("state",t),$d("sendFocusIn",r)]),a=(e,t,n,o,r)=>{const s=n(e,t,o,r);return Yb(s,t.event).bind((n=>n(e,t,o,r)))},i=(e,t)=>{const s=e.focusInside!==Zb.OnFocusMode?z.none():r(e).map((n=>Ki(ui(),((o,r)=>{n(o,e,t),r.stop()})))),i=(n,o)=>{const s=$b(Mb.concat(Db))(o.event);e.focusInside===Zb.OnEnterOrSpaceMode&&s&&Ia(n,o)&&r(e).each((r=>{r(n,e,t),o.stop()}))},l=[Ki(ei(),((o,r)=>{a(o,r,n,e,t).fold((()=>{i(o,r)}),(e=>{r.stop()}))})),Ki(ti(),((n,r)=>{a(n,r,o,e,t).each((e=>{r.stop()}))}))];return Vi(s.toArray().concat(l))},l={schema:s,processKey:a,toEvents:i};return l},ty=e=>{const t=[ea("onEscape"),ea("onEnter"),ca("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),ca("firstTabstop",0),ca("useTabstopAt",F),ea("visibilitySelector")].concat([e]),n=(e,t)=>{const n=e.visibilitySelector.bind((e=>gd(t,e))).getOr(t);return An(n)>0},o=(e,t)=>{const o=gf(e.element,t.selector),r=Z(o,(e=>n(t,e)));return z.from(r[t.firstTabstop])},r=(e,t)=>t.focusManager.get(e).bind((e=>gd(e,t.selector))),s=(e,t)=>n(e,t)&&e.useTabstopAt(t),a=(e,t,n)=>{o(e,t).each((n=>{t.focusManager.set(e,n)}))},i=(e,t,n,o,r)=>r(t,n,(e=>s(o,e))).fold((()=>o.cyclic?z.some(!0):z.none()),(t=>(o.focusManager.set(e,t),z.some(!0)))),l=(e,t,n,o)=>{const s=gf(e.element,n.selector);return r(e,n).bind((t=>{const r=re(s,B(Nt,t));return r.bind((t=>i(e,s,t,n,o)))}))},c=(e,t,n)=>{const o=n.cyclic?zb:jb;return l(e,t,n,o)},d=(e,t,n)=>{const o=n.cyclic?Ub:Hb;return l(e,t,n,o)},u=(e,t,n)=>n.onEnter.bind((n=>n(e,t))),m=(e,t,n)=>n.onEscape.bind((n=>n(e,t))),p=R([Kb(Vb([Wb,$b(Nb)]),c),Kb($b(Nb),d),Kb(Vb([Gb,$b(Db)]),u)]),f=R([Kb($b(Bb),m)]);return ey(t,Ul.init,p,f,(()=>z.some(a)))};var ny=ty(Us("cyclic",L)),oy=ty(Us("cyclic",F));const ry=(e,t,n)=>(ji(e,n,gi()),z.some(!0)),sy=(e,t,n)=>{const o=jv(n)&&$b(Mb)(t.event);return o?z.none():ry(e,t,n)},ay=(e,t)=>z.some(!0),iy=[ca("execute",sy),ca("useSpace",!1),ca("useEnter",!0),ca("useControlEnter",!1),ca("useDown",!1)],ly=(e,t,n)=>n.execute(e,t,e.element),cy=(e,t,n,o)=>{const r=n.useSpace&&!jv(e.element)?Mb:[],s=n.useEnter?Db:[],a=n.useDown?Fb:[],i=r.concat(s).concat(a);return[Kb($b(i),ly)].concat(n.useControlEnter?[Kb(Vb([qb,$b(Db)]),ly)]:[])},dy=(e,t,n,o)=>n.useSpace&&!jv(e.element)?[Kb($b(Mb),ay)]:[];var uy=ey(iy,Ul.init,cy,dy,(()=>z.none()));const my=()=>{const e=Dm(),t=(t,n)=>{e.set({numRows:t,numColumns:n})},n=()=>e.get().map((e=>e.numRows)),o=()=>e.get().map((e=>e.numColumns));return Hl({readState:()=>e.get().map((e=>({numRows:String(e.numRows),numColumns:String(e.numColumns)}))).getOr({numRows:"?",numColumns:"?"}),setGridSize:t,getNumRows:n,getNumColumns:o})},py=e=>e.state(e);var fy=Object.freeze({__proto__:null,flatgrid:my,init:py});const gy=e=>(t,n,o,r)=>{const s=e(t.element);return yy(s,t,n,o,r)},hy=(e,t)=>{const n=cp(e,t);return gy(n)},vy=(e,t)=>{const n=cp(t,e);return gy(n)},by=e=>(t,n,o,r)=>yy(e,t,n,o,r),yy=(e,t,n,o,r)=>{const s=o.focusManager.get(t).bind((n=>e(t.element,n,o,r)));return s.map((e=>(o.focusManager.set(t,e),!0)))},xy=by,wy=by,Cy=by,Sy=e=>e.offsetWidth<=0&&e.offsetHeight<=0,_y=e=>!Sy(e.dom),ky=(e,t)=>re(e,t).map((t=>({index:t,candidates:e}))),Ey=(e,t,n)=>{const o=e=>Nt(e,t),r=gf(e,n),s=Z(r,_y);return ky(s,o)},Oy=(e,t)=>re(e,(e=>Nt(t,e))),Ty=(e,t,n,o)=>{const r=Math.floor(t/n),s=t%n;return o(r,s).bind((t=>{const o=t.row*n+t.column;return o>=0&&o<e.length?z.some(e[o]):z.none()}))},Ay=(e,t,n,o,r)=>Ty(e,t,o,((t,s)=>{const a=t===n-1,i=a?e.length-t*o:o,l=su(s,r,0,i-1);return z.some({row:t,column:l})})),Ry=(e,t,n,o,r)=>Ty(e,t,o,((t,s)=>{const a=su(t,r,0,n-1),i=a===n-1,l=i?e.length-a*o:o,c=au(s,0,l-1);return z.some({row:a,column:c})})),Ny=(e,t,n,o)=>Ay(e,t,n,o,1),Dy=(e,t,n,o)=>Ay(e,t,n,o,-1),By=(e,t,n,o)=>Ry(e,t,n,o,-1),My=(e,t,n,o)=>Ry(e,t,n,o,1),Iy=[$s("selector"),ca("execute",sy),jd("onEscape"),ca("captureTab",!1),Wd()],Py=(e,t,n)=>{fd(e.element,t.selector).each((n=>{t.focusManager.set(e,n)}))},Ly=(e,t)=>t.focusManager.get(e).bind((e=>gd(e,t.selector))),Fy=(e,t,n,o)=>Ly(e,n).bind((o=>n.execute(e,t,o))),zy=e=>(t,n,o,r)=>Ey(t,n,o.selector).bind((t=>e(t.candidates,t.index,r.getNumRows().getOr(o.initSize.numRows),r.getNumColumns().getOr(o.initSize.numColumns)))),jy=(e,t,n)=>n.captureTab?z.some(!0):z.none(),Uy=(e,t,n)=>n.onEscape(e,t),Hy=zy(Dy),$y=zy(Ny),Vy=zy(By),Wy=zy(My),qy=R([Kb($b(Ib),hy(Hy,$y)),Kb($b(Lb),vy(Hy,$y)),Kb($b(Pb),xy(Vy)),Kb($b(Fb),wy(Wy)),Kb(Vb([Wb,$b(Nb)]),jy),Kb(Vb([Gb,$b(Nb)]),jy),Kb($b(Mb.concat(Db)),Fy)]),Gy=R([Kb($b(Bb),Uy),Kb($b(Mb),ay)]);var Ky=ey(Iy,my,qy,Gy,(()=>z.some(Py)));const Yy=(e,t,n,o,r)=>{const s=e=>"button"===bt(e)&&"disabled"===dn(e,"disabled"),a=(e,t,n)=>r(e,t,o,0,n.length-1,n[t],(t=>s(n[t])?a(e,t,n):z.from(n[t])));return Ey(e,n,t).bind((e=>{const t=e.index,n=e.candidates;return a(t,t,n)}))},Xy=(e,t,n,o)=>Yy(e,t,n,o,((e,t,n,o,r,s,a)=>{const i=au(t+n,o,r);return i===e?z.from(s):a(i)})),Jy=(e,t,n,o)=>Yy(e,t,n,o,((e,t,n,o,r,s,a)=>{const i=su(t,n,o,r);return i===e?z.none():a(i)})),Qy=[$s("selector"),ca("getInitial",z.none),ca("execute",sy),jd("onEscape"),ca("executeOnMove",!1),ca("allowVertical",!0),ca("allowHorizontal",!0),ca("cycles",!0)],Zy=(e,t)=>t.focusManager.get(e).bind((e=>gd(e,t.selector))),ex=(e,t,n)=>Zy(e,n).bind((o=>n.execute(e,t,o))),tx=(e,t,n)=>{t.getInitial(e).orThunk((()=>fd(e.element,t.selector))).each((n=>{t.focusManager.set(e,n)}))},nx=(e,t,n)=>(n.cycles?Jy:Xy)(e,n.selector,t,-1),ox=(e,t,n)=>(n.cycles?Jy:Xy)(e,n.selector,t,1),rx=e=>(t,n,o,r)=>e(t,n,o,r).bind((()=>o.executeOnMove?ex(t,n,o):z.some(!0))),sx=(e,t,n)=>n.onEscape(e,t),ax=(e,t,n,o)=>{const r=[...n.allowHorizontal?Ib:[]].concat(n.allowVertical?Pb:[]),s=[...n.allowHorizontal?Lb:[]].concat(n.allowVertical?Fb:[]);return[Kb($b(r),rx(hy(nx,ox))),Kb($b(s),rx(vy(nx,ox))),Kb($b(Db),ex),Kb($b(Mb),ex)]},ix=R([Kb($b(Mb),ay),Kb($b(Bb),sx)]);var lx=ey(Qy,Ul.init,ax,ix,(()=>z.some(tx)));const cx=(e,t,n)=>z.from(e[t]).bind((e=>z.from(e[n]).map((e=>({rowIndex:t,columnIndex:n,cell:e}))))),dx=(e,t,n,o)=>{const r=e[t],s=r.length,a=su(n,o,0,s-1);return cx(e,t,a)},ux=(e,t,n,o)=>{const r=su(n,o,0,e.length-1),s=e[r].length,a=au(t,0,s-1);return cx(e,r,a)},mx=(e,t,n,o)=>{const r=e[t],s=r.length,a=au(n+o,0,s-1);return cx(e,t,a)},px=(e,t,n,o)=>{const r=au(n+o,0,e.length-1),s=e[r].length,a=au(t,0,s-1);return cx(e,r,a)},fx=(e,t,n)=>dx(e,t,n,1),gx=(e,t,n)=>dx(e,t,n,-1),hx=(e,t,n)=>ux(e,n,t,-1),vx=(e,t,n)=>ux(e,n,t,1),bx=(e,t,n)=>mx(e,t,n,-1),yx=(e,t,n)=>mx(e,t,n,1),xx=(e,t,n)=>px(e,n,t,-1),wx=(e,t,n)=>px(e,n,t,1),Cx=[Js("selectors",[$s("row"),$s("cell")]),ca("cycles",!0),ca("previousSelector",z.none),ca("execute",sy)],Sx=(e,t,n)=>{const o=t.previousSelector(e).orThunk((()=>{const n=t.selectors;return fd(e.element,n.cell)}));o.each((n=>{t.focusManager.set(e,n)}))},_x=(e,t,n)=>om(e.element).bind((o=>n.execute(e,t,o))),kx=(e,t)=>Y(e,(e=>gf(e,t.selectors.cell))),Ex=(e,t)=>(n,o,r)=>{const s=r.cycles?e:t;return gd(o,r.selectors.row).bind((e=>{const t=gf(e,r.selectors.cell);return Oy(t,o).bind((t=>{const o=gf(n,r.selectors.row);return Oy(o,e).bind((e=>{const n=kx(o,r);return s(n,e,t).map((e=>e.cell))}))}))}))},Ox=Ex(gx,bx),Tx=Ex(fx,yx),Ax=Ex(hx,xx),Rx=Ex(vx,wx),Nx=R([Kb($b(Ib),hy(Ox,Tx)),Kb($b(Lb),vy(Ox,Tx)),Kb($b(Pb),xy(Ax)),Kb($b(Fb),wy(Rx)),Kb($b(Mb.concat(Db)),_x)]),Dx=R([Kb($b(Mb),ay)]);var Bx=ey(Cx,Ul.init,Nx,Dx,(()=>z.some(Sx)));const Mx=[$s("selector"),ca("execute",sy),ca("moveOnTab",!1)],Ix=(e,t,n)=>n.focusManager.get(e).bind((o=>n.execute(e,t,o))),Px=(e,t,n)=>{fd(e.element,t.selector).each((n=>{t.focusManager.set(e,n)}))},Lx=(e,t,n)=>Jy(e,n.selector,t,-1),Fx=(e,t,n)=>Jy(e,n.selector,t,1),zx=(e,t,n,o)=>n.moveOnTab?Cy(Lx)(e,t,n,o):z.none(),jx=(e,t,n,o)=>n.moveOnTab?Cy(Fx)(e,t,n,o):z.none(),Ux=R([Kb($b(Pb),Cy(Lx)),Kb($b(Fb),Cy(Fx)),Kb(Vb([Wb,$b(Nb)]),zx),Kb(Vb([Gb,$b(Nb)]),jx),Kb($b(Db),Ix),Kb($b(Mb),Ix)]),Hx=R([Kb($b(Mb),ay)]);var $x=ey(Mx,Ul.init,Ux,Hx,(()=>z.some(Px)));const Vx=[jd("onSpace"),jd("onEnter"),jd("onShiftEnter"),jd("onLeft"),jd("onRight"),jd("onTab"),jd("onShiftTab"),jd("onUp"),jd("onDown"),jd("onEscape"),ca("stopSpaceKeyup",!1),ea("focusIn")],Wx=(e,t,n)=>[Kb($b(Mb),n.onSpace),Kb(Vb([Gb,$b(Db)]),n.onEnter),Kb(Vb([Wb,$b(Db)]),n.onShiftEnter),Kb(Vb([Wb,$b(Nb)]),n.onShiftTab),Kb(Vb([Gb,$b(Nb)]),n.onTab),Kb($b(Pb),n.onUp),Kb($b(Fb),n.onDown),Kb($b(Ib),n.onLeft),Kb($b(Lb),n.onRight),Kb($b(Mb),n.onSpace)],qx=(e,t,n)=>[...n.stopSpaceKeyup?[Kb($b(Mb),ay)]:[],Kb($b(Bb),n.onEscape)];var Gx=ey(Vx,Ul.init,Wx,qx,(e=>e.focusIn));const Kx=ny.schema(),Yx=oy.schema(),Xx=lx.schema(),Jx=Ky.schema(),Qx=Bx.schema(),Zx=uy.schema(),ew=$x.schema(),tw=Gx.schema();var nw=Object.freeze({__proto__:null,acyclic:Kx,cyclic:Yx,flow:Xx,flatgrid:Jx,matrix:Qx,execution:Zx,menu:ew,special:tw});const ow=e=>De(e,"setGridSize"),rw=Ku({branchKey:"mode",branches:nw,name:"keying",active:{events:(e,t)=>{const n=e.handler;return n.toEvents(e,t)}},apis:{focusIn:(e,t,n)=>{t.sendFocusIn(t).fold((()=>{e.getSystem().triggerFocus(e.element,e.element)}),(o=>{o(e,t,n)}))},setGridSize:(e,t,n,o,r)=>{ow(n)?n.setGridSize(o,r):console.error("Layout does not support setGridSize")}},state:fy}),sw=(e,t)=>{rm((()=>{fg(e,t,(()=>Y(t,e.getSystem().build)))}),e.element)},aw=(e,t)=>{rm((()=>{gg(e,t,(()=>Lc(e.element,t,e.getSystem().buildOrPatch)))}),e.element)},iw=(e,t,n,o)=>{ug(t);const r=Pc(e.element,n,o,e.getSystem().buildOrPatch);dg(e,r),e.syncComponents()},lw=(e,t,n)=>{const o=e.getSystem().build(n);vg(e,o,t)},cw=(e,t,n,o)=>{yg(t),lw(e,((e,t)=>$o(e,t,n)),o)},dw=(e,t,n,o)=>{const r=t.reuseDom?aw:sw;return r(e,o)},uw=(e,t,n,o)=>{lw(e,Ho,o)},mw=(e,t,n,o)=>{lw(e,Uo,o)},pw=(e,t,n,o)=>{const r=fw(e),s=oe(r,(e=>Nt(o.element,e.element)));s.each(yg)},fw=(e,t)=>e.components(),gw=(e,t,n,o,r)=>{const s=fw(e);return z.from(s[o]).map((n=>(r.fold((()=>yg(n)),(r=>{const s=t.reuseDom?iw:cw;s(e,n,o,r)})),n)))},hw=(e,t,n,o,r)=>{const s=fw(e);return re(s,o).bind((o=>gw(e,t,n,o,r)))};var vw=Object.freeze({__proto__:null,append:uw,prepend:mw,remove:pw,replaceAt:gw,replaceBy:hw,set:dw,contents:fw});const bw=qu({fields:[fa("reuseDom",!0)],name:"replacing",apis:vw}),yw=(e,t)=>{const n=Vi(t);return qu({fields:[$s("enabled")],name:e,active:{events:R(n)}})},xw=(e,t)=>{const n=yw(e,t);return{key:e,value:{config:{},me:n,configAsRaw:R({}),initialConfig:{},state:Ul}}},ww=(e,t)=>{t.ignore||(Zu(e.element),t.onFocus(e))},Cw=(e,t)=>{t.ignore||em(e.element)},Sw=e=>tm(e.element);var _w=Object.freeze({__proto__:null,focus:ww,blur:Cw,isFocused:Sw});const kw=(e,t)=>{const n=t.ignore?{}:{attributes:{tabindex:"-1"}};return Gl(n)},Ew=e=>Vi([Ki(ui(),((t,n)=>{ww(t,e),n.stop()}))].concat(e.stopMousedown?[Ki(Ga(),((e,t)=>{t.event.prevent()}))]:[]));var Ow=Object.freeze({__proto__:null,exhibit:kw,events:Ew}),Tw=[zd("onFocus"),ca("stopMousedown",!1),ca("ignore",!1)];const Aw=qu({fields:Tw,name:"focusing",active:Ow,apis:_w}),Rw=e=>{const t=()=>{const t=ya(e),n=()=>t.get(),o=e=>t.set(e),r=()=>t.set(e),s=()=>t.get();return{get:n,set:o,clear:r,readState:s}};return{init:t}},Nw=(e,t,n)=>{const o=t.aria;o.update(e,o,n.get())},Dw=(e,t,n)=>{t.toggleClass.each((t=>{n.get()?Cc(e.element,t):_c(e.element,t)}))},Bw=(e,t,n,o)=>{const r=n.get();n.set(o),Dw(e,t,n),Nw(e,t,n),r!==o&&t.onToggled(e,o)},Mw=(e,t,n)=>{Bw(e,t,n,!n.get())},Iw=(e,t,n)=>{Bw(e,t,n,!0)},Pw=(e,t,n)=>{Bw(e,t,n,!1)},Lw=(e,t,n)=>n.get(),Fw=(e,t,n)=>{Bw(e,t,n,t.selected)};var zw=Object.freeze({__proto__:null,onLoad:Fw,toggle:Mw,isOn:Lw,on:Iw,off:Pw,set:Bw});const jw=()=>Gl({}),Uw=(e,t)=>{const n=Lu(e,t,Mw),o=Fu(e,t,Fw);return Vi(se([e.toggleOnExecute?[n]:[],[o]]))};var Hw=Object.freeze({__proto__:null,exhibit:jw,events:Uw});const $w=(e,t,n)=>{ln(e.element,"aria-pressed",n),t.syncWithExpanded&&qw(e,t,n)},Vw=(e,t,n)=>{ln(e.element,"aria-selected",n)},Ww=(e,t,n)=>{ln(e.element,"aria-checked",n)},qw=(e,t,n)=>{ln(e.element,"aria-expanded",n)};var Gw=[ca("selected",!1),ea("toggleClass"),ca("toggleOnExecute",!0),zd("onToggled"),da("aria",{mode:"none"},Fs("mode",{pressed:[ca("syncWithExpanded",!1),$d("update",$w)],checked:[$d("update",Ww)],expanded:[$d("update",qw)],selected:[$d("update",Vw)],none:[$d("update",E)]}))];const Kw=qu({fields:Gw,name:"toggling",active:Hw,apis:zw,state:Rw(!1)}),Yw=()=>{const e=(e,t)=>{t.stop(),zi(e)};return[Ki(ri(),e),Ki(vi(),e),tl($a()),tl(Ga())]},Xw=e=>{const t=e=>il(((t,n)=>{e(t),n.stop()}));return Vi(se([e.map(t).toArray(),Yw()]))},Jw="alloy.item-hover",Qw="alloy.item-focus",Zw="alloy.item-toggled",eC=e=>{(om(e.element).isNone()||Aw.isFocused(e))&&(Aw.isFocused(e)||Aw.focus(e),Fi(e,Jw,{item:e}))},tC=e=>{Fi(e,Qw,{item:e})},nC=(e,t)=>{Fi(e,Zw,{item:e,state:t})},oC=R(Jw),rC=R(Qw),sC=R(Zw),aC=e=>e.toggling.map((e=>e.exclusive?"menuitemradio":"menuitemcheckbox")).getOr("menuitem"),iC=e=>r(r({aria:{mode:"checked"}},Ee(e,((e,t)=>"exclusive"!==t))),{},{onToggled:(t,n)=>{S(e.onToggled)&&e.onToggled(t,n),nC(t,n)}}),lC=e=>({dom:e.dom,domModification:r(r({},e.domModification),{},{attributes:r(r({role:aC(e)},e.domModification.attributes),{},{"aria-haspopup":e.hasSubmenu},e.hasSubmenu?{"aria-expanded":!1}:{})}),behaviours:Rh.augment(e.itemBehaviours,[e.toggling.fold(Kw.revoke,(e=>Kw.config(iC(e)))),Aw.config({ignore:e.ignoreFocus,stopMousedown:e.ignoreFocus,onFocus:e=>{tC(e)}}),rw.config({mode:"execution"}),Eh.config({store:{mode:"memory",initialValue:e.data}}),xw("item-type-events",[...Yw(),Ki(Ja(),eC),Ki(hi(),Aw.focus)])]),components:e.components,eventOrder:e.eventOrder}),cC=[$s("data"),$s("components"),$s("dom"),ca("hasSubmenu",!1),ea("toggling"),Rh.field("itemBehaviours",[Kw,Aw,rw,Eh]),ca("ignoreFocus",!1),ca("domModification",{}),$d("builder",lC),ca("eventOrder",{})],dC=e=>({dom:e.dom,components:e.components,events:Vi([nl(hi())])}),uC=[$s("dom"),$s("components"),$d("builder",dC)],mC=R("item-widget"),pC=R([sv({name:"widget",overrides:e=>({behaviours:Vu([Eh.config({store:{mode:"manual",getValue:t=>e.data,setValue:E}})])})})]),fC=e=>{const t=bv(mC(),e,pC()),n=yv(mC(),e,t.internals()),o=t=>xv(t,e,"widget").map((e=>(rw.focusIn(e),e))),r=(t,n)=>jv(n.event.target)?z.none():(()=>e.autofocus?(n.setSource(t.element),z.none()):z.none())();return{dom:e.dom,components:n,domModification:e.domModification,events:Vi([il(((e,t)=>{o(e).each((e=>{t.stop()}))})),Ki(Ja(),eC),Ki(hi(),((t,n)=>{e.autofocus?o(t):Aw.focus(t)}))]),behaviours:Rh.augment(e.widgetBehaviours,[Eh.config({store:{mode:"memory",initialValue:e.data}}),Aw.config({ignore:e.ignoreFocus,onFocus:e=>{tC(e)}}),rw.config({mode:"special",focusIn:e.autofocus?e=>{o(e)}:Yu(),onLeft:r,onRight:r,onEscape:(t,n)=>Aw.isFocused(t)||e.autofocus?e.autofocus?(n.setSource(t.element),z.none()):z.none():(Aw.focus(t),z.some(!0))})])}},gC=[$s("uid"),$s("data"),$s("components"),$s("dom"),ca("autofocus",!1),ca("ignoreFocus",!1),Rh.field("widgetBehaviours",[Eh,Aw,rw]),ca("domModification",{}),Ov(pC()),$d("builder",fC)],hC=Fs("type",{widget:gC,item:cC,separator:uC}),vC=(e,t)=>({mode:"flatgrid",selector:"."+e.markers.item,initSize:{numColumns:t.initSize.numColumns,numRows:t.initSize.numRows},focusManager:e.focusManager}),bC=(e,t)=>({mode:"matrix",selectors:{row:t.rowSelector,cell:"."+e.markers.item},previousSelector:t.previousSelector,focusManager:e.focusManager}),yC=(e,t)=>({mode:"menu",selector:"."+e.markers.item,moveOnTab:t.moveOnTab,focusManager:e.focusManager}),xC=R([lv({factory:{sketch:e=>{const t=Ps("menu.spec item",hC,e);return t.builder(t)}},name:"items",unit:"item",defaults:(e,t)=>Ne(t,"uid")?t:r(r({},t),{},{uid:Tl("item")}),overrides:(e,t)=>({type:t.type,ignoreFocus:e.fakeFocus,domModification:{classes:[e.markers.item]}})})]),wC=R([$s("value"),$s("items"),$s("dom"),$s("components"),ca("eventOrder",{}),Oh("menuBehaviours",[Ab,Eh,Vv,rw]),da("movement",{mode:"menu",moveOnTab:!0},Fs("mode",{grid:[Wd(),$d("config",vC)],matrix:[$d("config",bC),$s("rowSelector"),ca("previousSelector",z.none)],menu:[ca("moveOnTab",!0),$d("config",yC)]})),Id(),ca("fakeFocus",!1),ca("focusManager",Jb()),zd("onHighlight"),zd("onDehighlight")]),CC=R("alloy.menu-focus"),SC=(e,t)=>{const n=gf(e.element,'[role="menuitemradio"][aria-checked="true"]');X(n,(n=>{Nt(n,t.element)||e.getSystem().getByDom(n).each((e=>{Kw.off(e)}))}))},_C=(e,t,n,o)=>({uid:e.uid,dom:e.dom,markers:e.markers,behaviours:Ah(e.menuBehaviours,[Ab.config({highlightClass:e.markers.selectedItem,itemClass:e.markers.item,onHighlight:e.onHighlight,onDehighlight:e.onDehighlight}),Eh.config({store:{mode:"memory",initialValue:e.value}}),Vv.config({find:z.some}),rw.config(e.movement.config(e,e.movement))]),events:Vi([Ki(rC(),((e,t)=>{const n=t.event;e.getSystem().getByDom(n.target).each((n=>{Ab.highlight(e,n),t.stop(),Fi(e,CC(),{menu:e,item:n})}))})),Ki(oC(),((e,t)=>{const n=t.event.item;Ab.highlight(e,n)})),Ki(sC(),((e,t)=>{const{item:n,state:o}=t.event;o&&"menuitemradio"===dn(n.element,"role")&&SC(e,n)}))]),components:t,eventOrder:e.eventOrder,domModification:{attributes:{role:"menu"}}}),kC=zv({name:"Menu",configFields:wC(),partFields:xC(),factory:_C}),EC=e=>Ce(e,((e,t)=>({k:e,v:t}))),OC=(e,t,n,o)=>Re(n,o).bind((o=>Re(e,o).bind((o=>{const r=OC(e,t,n,o);return z.some([o].concat(r))})))).getOr([]),TC=(e,t)=>{const n={};xe(e,((e,t)=>{X(e,(e=>{n[e]=t}))}));const o=t,r=EC(t),s=we(r,((e,t)=>[t].concat(OC(n,o,r,t))));return we(n,(e=>Re(s,e).getOr([e])))},AC=()=>{const e=ya({}),t=ya({}),n=ya({}),o=Dm(),s=ya({}),a=()=>{e.set({}),t.set({}),n.set({}),o.clear()},i=()=>o.get().isNone(),l=(e,n)=>{t.set(r(r({},t.get()),{},{[e]:{type:"prepared",menu:n}}))},c=(r,a,i,l)=>{o.set(r),e.set(i),t.set(a),s.set(l);const c=TC(l,i);n.set(c)},d=t=>Te(e.get(),((e,n)=>e===t)),u=(e,t,n)=>h(e).bind((o=>d(e).bind((e=>t(e).map((e=>({triggeredMenu:o,triggeringItem:e,triggeringPath:n}))))))),m=(e,t)=>{const r=Z(b(e).toArray(),(e=>h(e).isSome()));return Re(n.get(),e).bind((e=>{const n=le(r.concat(e)),s=ae(n,((e,r)=>u(e,t,n.slice(0,r+1)).fold((()=>Be(o.get(),e)?[]:[z.none()]),(e=>[z.some(e)]))));return Pe(s)}))},p=t=>Re(e.get(),t).map((e=>{const o=Re(n.get(),t).getOr([]);return[e].concat(o)})),f=e=>Re(n.get(),e).bind((e=>e.length>1?z.some(e.slice(1)):z.none())),g=e=>Re(n.get(),e),h=e=>v(e).bind(RC),v=e=>Re(t.get(),e),b=t=>Re(e.get(),t),y=e=>{const t=s.get();return ce(be(t),e)},x=()=>o.get().bind(h),w=()=>t.get();return{setMenuBuilt:l,setContents:c,expand:p,refresh:g,collapse:f,lookupMenu:v,lookupItem:b,otherMenus:y,getPrimary:x,getMenus:w,clear:a,isClear:i,getTriggeringPath:m}},RC=e=>"prepared"===e.type?z.some(e.menu):z.none(),NC={init:AC,extractPreparedMenu:RC},DC=xl("tiered-menu-item-highlight"),BC=xl("tiered-menu-item-dehighlight");var MC;(function(e){e[e["HighlightMenuAndItem"]=0]="HighlightMenuAndItem",e[e["HighlightJustMenu"]=1]="HighlightJustMenu",e[e["HighlightNone"]=2]="HighlightNone"})(MC||(MC={}));const IC=(e,t)=>{const n=Dm(),o=(t,n,o)=>we(o,((o,s)=>{const a=()=>kC.sketch(r(r({},o),{},{value:s,markers:e.markers,fakeFocus:e.fakeFocus,onHighlight:(e,t)=>{const n={menuComp:e,itemComp:t};Fi(e,DC,n)},onDehighlight:(e,t)=>{const n={menuComp:e,itemComp:t};Fi(e,BC,n)},focusManager:e.fakeFocus?Qb():Jb()}));return s===n?{type:"prepared",menu:t.getSystem().build(a())}:{type:"notbuilt",nbMenu:a}})),s=NC.init(),a=t=>{const n=o(t,e.data.primary,e.data.menus),r=c();return s.setContents(e.data.primary,n,e.data.expansions,r),s.getPrimary()},i=e=>Eh.getValue(e).value,l=(e,t,n)=>ve(t,(e=>{if(!e.getSystem().isConnected())return z.none();const t=Ab.getCandidates(e);return oe(t,(e=>i(e)===n))})),c=t=>we(e.data.menus,((e,t)=>ae(e.items,(e=>"separator"===e.type?[]:[e.data.value])))),d=Ab.highlight,u=(t,n)=>{d(t,n),Ab.getHighlighted(n).orThunk((()=>Ab.getFirst(n))).each((o=>{e.fakeFocus?Ab.highlight(n,o):ji(t,o.element,hi())}))},m=(e,t)=>Ie(Y(t,(t=>e.lookupMenu(t).bind((e=>"prepared"===e.type?z.some(e.menu):z.none()))))),p=(t,n,o)=>{const r=m(n,n.otherMenus(o));X(r,(n=>{Oc(n.element,[e.markers.backgroundMenu]),e.stayInDom||bw.remove(t,n)}))},f=t=>n.get().getOrThunk((()=>{const o={},r=gf(t.element,`.${e.markers.item}`),s=Z(r,(e=>"true"===dn(e,"aria-haspopup")));return X(s,(e=>{t.getSystem().getByDom(e).each((e=>{const t=i(e);o[t]=e}))})),n.set(o),o})),g=(e,t)=>{const n=f(e);xe(n,((e,n)=>{const o=W(t,n);ln(e.element,"aria-expanded",o)}))},h=(t,n,o)=>z.from(o[0]).bind((r=>n.lookupMenu(r).bind((r=>{if("notbuilt"===r.type)return z.none();{const s=r.menu,a=m(n,o.slice(1));return X(a,(t=>{Cc(t.element,e.markers.backgroundMenu)})),on(s.element)||bw.append(t,sd(s)),Oc(s.element,[e.markers.backgroundMenu]),u(t,s),p(t,n,o),z.some(s)}}))));let v;(function(e){e[e["HighlightSubmenu"]=0]="HighlightSubmenu",e[e["HighlightParent"]=1]="HighlightParent"})(v||(v={}));const b=(e,t,n)=>{if("notbuilt"===n.type){const o=e.getSystem().build(n.nbMenu());return s.setMenuBuilt(t,o),o}return n.menu},y=(t,n,o=v.HighlightSubmenu)=>{if(n.hasConfigured(cb)&&cb.isDisabled(n))return z.some(n);{const r=i(n);return s.expand(r).bind((r=>(g(t,r),z.from(r[0]).bind((a=>s.lookupMenu(a).bind((i=>{const l=b(t,a,i);return on(l.element)||bw.append(t,sd(l)),e.onOpenSubmenu(t,n,l,le(r)),o===v.HighlightSubmenu?(Ab.highlightFirst(l),h(t,s,r)):(Ab.dehighlightAll(l),z.some(n))})))))))}},x=(t,n)=>{const o=i(n);return s.collapse(o).bind((o=>(g(t,o),h(t,s,o).map((o=>(e.onCollapseMenu(t,n,o),o))))))},w=(e,t)=>{const n=i(t);return s.refresh(n).bind((t=>(g(e,t),h(e,s,t))))},C=(e,t)=>jv(t.element)?z.none():y(e,t,v.HighlightSubmenu),S=(e,t)=>jv(t.element)?z.none():x(e,t),_=(t,n)=>x(t,n).orThunk((()=>e.onEscape(t,n).map((()=>t)))),k=t=>(n,o)=>gd(o.getSource(),`.${e.markers.item}`).bind((e=>n.getSystem().getByDom(e).toOptional().bind((e=>t(n,e).map(F))))),O=Vi([Ki(CC(),((e,t)=>{const n=t.event.item;s.lookupItem(i(n)).each((()=>{const n=t.event.menu;Ab.highlight(e,n);const o=i(t.event.item);s.refresh(o).each((t=>p(e,s,t)))}))})),il(((t,n)=>{const o=n.event.target;t.getSystem().getByDom(o).each((n=>{const o=i(n);0===o.indexOf("collapse-item")&&x(t,n),y(t,n,v.HighlightSubmenu).fold((()=>{e.onExecute(t,n)}),E)}))})),rl(((t,n)=>{a(t).each((n=>{bw.append(t,sd(n)),e.onOpenMenu(t,n),e.highlightOnOpen===MC.HighlightMenuAndItem?u(t,n):e.highlightOnOpen===MC.HighlightJustMenu&&d(t,n)}))})),Ki(DC,((t,n)=>{e.onHighlightItem(t,n.event.menuComp,n.event.itemComp)})),Ki(BC,((t,n)=>{e.onDehighlightItem(t,n.event.menuComp,n.event.itemComp)})),...e.navigateOnHover?[Ki(oC(),((t,n)=>{const o=n.event.item;w(t,o),y(t,o,v.HighlightParent),e.onHover(t,o)}))]:[]]),T=e=>Ab.getHighlighted(e).bind(Ab.getHighlighted),A=e=>{T(e).each((t=>{x(e,t)}))},R=e=>{s.getPrimary().each((t=>{u(e,t)}))},N=e=>z.from(e.components()[0]).filter((e=>"menu"===dn(e.element,"role"))),D=t=>{const n=s.getPrimary().bind((e=>T(t).bind((e=>{const n=i(e),o=Ae(s.getMenus()),r=Ie(Y(o,NC.extractPreparedMenu));return s.getTriggeringPath(n,(e=>l(t,r,e)))})).map((t=>({primary:e,triggeringPath:t})))));n.fold((()=>{N(t).each((n=>{e.onRepositionMenu(t,n,[])}))}),(({primary:n,triggeringPath:o})=>{e.onRepositionMenu(t,n,o)}))},B={collapseMenu:A,highlightPrimary:R,repositionMenus:D};return{uid:e.uid,dom:e.dom,markers:e.markers,behaviours:Ah(e.tmenuBehaviours,[rw.config({mode:"special",onRight:k(C),onLeft:k(S),onEscape:k(_),focusIn:(e,t)=>{s.getPrimary().each((t=>{ji(e,t.element,hi())}))}}),Ab.config({highlightClass:e.markers.selectedMenu,itemClass:e.markers.menu}),Vv.config({find:e=>Ab.getHighlighted(e)}),bw.config({})]),eventOrder:e.eventOrder,apis:B,events:O}},PC=R("collapse-item"),LC=(e,t,n)=>({primary:e,menus:t,expansions:n}),FC=(e,t)=>({primary:e,menus:Oa(e,t),expansions:{}}),zC=e=>({value:xl(PC()),meta:{text:e}}),jC=Fv({name:"TieredMenu",configFields:[Hd("onExecute"),Hd("onEscape"),Ud("onOpenMenu"),Ud("onOpenSubmenu"),zd("onRepositionMenu"),zd("onCollapseMenu"),ca("highlightOnOpen",MC.HighlightMenuAndItem),Js("data",[$s("primary"),$s("menus"),$s("expansions")]),ca("fakeFocus",!1),zd("onHighlightItem"),zd("onDehighlightItem"),zd("onHover"),Pd(),$s("dom"),ca("navigateOnHover",!0),ca("stayInDom",!1),Oh("tmenuBehaviours",[rw,Ab,Vv,bw]),ca("eventOrder",{})],apis:{collapseMenu:(e,t)=>{e.collapseMenu(t)},highlightPrimary:(e,t)=>{e.highlightPrimary(t)},repositionMenus:(e,t)=>{e.repositionMenus(t)}},factory:IC,extraApis:{tieredData:LC,singleData:FC,collapseItem:zC}}),UC=(e,t,n,o,s)=>{const a=()=>e.lazySink(t),i="horizontal"===o.type?{layouts:{onLtr:()=>Nu(),onRtl:()=>Du()}}:{},l=e=>2===e.length,c=e=>l(e)?i:{};return jC.sketch({dom:{tag:"div"},data:o.data,markers:o.menu.markers,highlightOnOpen:o.menu.highlightOnOpen,fakeFocus:o.menu.fakeFocus,onEscape:()=>(Vg.close(t),e.onEscape.map((e=>e(t))),z.some(!0)),onExecute:()=>z.some(!0),onOpenMenu:(e,t)=>{ag.positionWithinBounds(a().getOrDie(),t,n,s())},onOpenSubmenu:(e,t,n,o)=>{const s=a().getOrDie();ag.position(s,n,{anchor:r({type:"submenu",item:t},c(o))})},onRepositionMenu:(e,t,o)=>{const i=a().getOrDie();ag.positionWithinBounds(i,t,n,s()),X(o,(e=>{const t=c(e.triggeringPath);ag.position(i,e.triggeredMenu,{anchor:r({type:"submenu",item:e.triggeringItem},t)})}))}})},HC=(e,t)=>{const n=(t,n)=>{const o=e.getRelated(t);return o.exists((e=>xd(e,n)))},o=(e,t)=>{Vg.setContent(e,t)},s=(e,t,n)=>{const o=z.none;a(e,t,n,o)},a=(t,n,o,r)=>{const s=e.lazySink(t).getOrDie();Vg.openWhileCloaked(t,n,(()=>ag.positionWithinBounds(s,t,o,r()))),Eh.setValue(t,z.some({mode:"position",config:o,getBounds:r}))},i=(e,t,n)=>{l(e,t,n,z.none)},l=(t,n,o,r)=>{const s=UC(e,t,n,o,r);Vg.open(t,s),Eh.setValue(t,z.some({mode:"menu",menu:s}))},c=e=>{Vg.isOpen(e)&&(Eh.setValue(e,z.none()),Vg.close(e))},d=e=>Vg.getState(e),u=t=>{Vg.isOpen(t)&&Eh.getValue(t).each((n=>{switch(n.mode){case"menu":Vg.getState(t).each(jC.repositionMenus);break;case"position":const o=e.lazySink(t).getOrDie();ag.positionWithinBounds(o,t,n.config,n.getBounds());break}}))},m={setContent:o,showAt:s,showWithinBounds:a,showMenuAt:i,showMenuWithinBounds:l,hide:c,getContent:d,reposition:u,isOpen:Vg.isOpen};return{uid:e.uid,dom:e.dom,behaviours:Ah(e.inlineBehaviours,[Vg.config({isPartOf:(e,t,o)=>xd(t,o)||n(e,o),getAttachPoint:t=>e.lazySink(t).getOrDie(),onOpen:t=>{e.onShow(t)},onClose:t=>{e.onHide(t)}}),Eh.config({store:{mode:"memory",initialValue:z.none()}}),Xu.config({channels:r(r({},Yg(r({isExtraPart:t.isExtraPart},e.fireDismissalEventInstead.map((e=>({fireEventInstead:{event:e.event}}))).getOr({})))),Jg(r(r({},e.fireRepositionEventInstead.map((e=>({fireEventInstead:{event:e.event}}))).getOr({})),{},{doReposition:u})))})]),eventOrder:e.eventOrder,apis:m}},$C=Fv({name:"InlineView",configFields:[$s("lazySink"),zd("onShow"),zd("onHide"),sa("onEscape"),Oh("inlineBehaviours",[Vg,Eh,Xu]),ia("fireDismissalEventInstead",[ca("event",Ti())]),ia("fireRepositionEventInstead",[ca("event",Ai())]),ca("getRelated",z.none),ca("isExtraPart",L),ca("eventOrder",z.none)],factory:HC,apis:{showAt:(e,t,n,o)=>{e.showAt(t,n,o)},showWithinBounds:(e,t,n,o,r)=>{e.showWithinBounds(t,n,o,r)},showMenuAt:(e,t,n,o)=>{e.showMenuAt(t,n,o)},showMenuWithinBounds:(e,t,n,o,r)=>{e.showMenuWithinBounds(t,n,o,r)},hide:(e,t)=>{e.hide(t)},isOpen:(e,t)=>e.isOpen(t),getContent:(e,t)=>e.getContent(t),setContent:(e,t,n)=>{e.setContent(t,n)},reposition:(e,t)=>{e.reposition(t)}}});var VC=tinymce.util.Tools.resolve("tinymce.util.Delay");const WC=e=>{const t=Xw(e.action),n=e.dom.tag,o=t=>Re(e.dom,"attributes").bind((e=>Re(e,t))),s=()=>{if("button"===n){const e=o("type").getOr("button"),t=o("role").map((e=>({role:e}))).getOr({});return r({type:e},t)}{const t=e.role.getOr(o("role").getOr("button"));return{role:t}}};return{uid:e.uid,dom:e.dom,components:e.components,events:t,behaviours:Rh.augment(e.buttonBehaviours,[Aw.config({}),rw.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:s()},eventOrder:e.eventOrder}},qC=Fv({name:"Button",factory:WC,configFields:[ca("uid",void 0),$s("dom"),ca("components",[]),Rh.field("buttonBehaviours",[Aw,rw]),ea("action"),ea("role"),ca("eventOrder",{})]}),GC=e=>{const t=Iv(e)&&De(e,"uid")?e.uid:Tl("memento"),n=e=>e.getSystem().getByUid(t).getOrDie(),o=e=>e.getSystem().getByUid(t).toOptional(),s=()=>r(r({},e),{},{uid:t});return{get:n,getOpt:o,asSpec:s}};var KC=tinymce.util.Tools.resolve("tinymce.util.I18n");const YC={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},XC="temporary-placeholder",JC=e=>()=>Re(e,XC).getOr("!not found!"),QC=(e,t)=>{const n=e.toLowerCase();if(KC.isRtl()){const e=We(n,"-rtl");return Ne(t,e)?e:n}return n},ZC=(e,t)=>Re(t,QC(e,t)),eS=(e,t)=>{const n=t();return ZC(e,n).getOrThunk(JC(n))},tS=(e,t,n)=>{const o=t();return ZC(e,o).or(n).getOrThunk(JC(o))},nS=e=>!!KC.isRtl()&&Ne(YC,e),oS=()=>xw("add-focusable",[rl((e=>{pd(e.element,"svg").each((e=>ln(e,"focusable","false")))}))]),rS=(e,t,n,o)=>{var r,s;const a=nS(t)?["tox-icon--flip"]:[],i=Re(n,QC(t,n)).or(o).getOrThunk(JC(n));return{dom:{tag:e.tag,attributes:null!==(r=e.attributes)&&void 0!==r?r:{},classes:e.classes.concat(a),innerHtml:i},behaviours:Vu([...null!==(s=e.behaviours)&&void 0!==s?s:[],oS()])}},sS=(e,t,n,o=z.none())=>rS(t,e,n(),o),aS=(e,t,n)=>{const o=n(),r=oe(e,(e=>Ne(o,QC(e,o))));return rS(t,r.getOr(XC),o,z.none())},iS={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},lS=e=>{const t=GC({dom:{tag:"p",innerHtml:e.translationProvider(e.text)},behaviours:Vu([bw.config({})])}),n=e=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${e}%`}}}),o=e=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${e}%`}}),r=GC({dom:{tag:"div",classes:e.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[n(0)]},o(0)],behaviours:Vu([bw.config({})])}),s=(e,t)=>{e.getSystem().isConnected()&&r.getOpt(e).each((e=>{bw.set(e,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[n(t)]},o(t)])}))},a=(e,n)=>{if(e.getSystem().isConnected()){const o=t.get(e);bw.set(o,[Zc(n)])}},i={updateProgress:s,updateText:a},l=se([e.icon.toArray(),e.level.toArray(),e.level.bind((e=>z.from(iS[e]))).toArray()]),c=GC(qC.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[sS("close",{tag:"div",classes:["tox-icon"],attributes:{"aria-label":e.translationProvider("Close")}},e.iconProvider)],action:t=>{e.onAction(t)}})),d=aS(l,{tag:"div",classes:["tox-notification__icon"]},e.iconProvider),u={dom:{tag:"div",classes:["tox-notification__body"]},components:[t.asSpec()],behaviours:Vu([bw.config({})])},m=[d,u];return{uid:e.uid,dom:{tag:"div",attributes:{role:"alert"},classes:e.level.map((e=>["tox-notification","tox-notification--in",`tox-notification--${e}`])).getOr(["tox-notification","tox-notification--in"])},behaviours:Vu([Aw.config({}),xw("notification-events",[Ki(Qa(),(e=>{c.getOpt(e).each(Aw.focus)}))])]),components:m.concat(e.progress?[r.asSpec()]:[]).concat(e.closeButton?[c.asSpec()]:[]),apis:i}},cS=Fv({name:"Notification",factory:lS,configFields:[ea("level"),$s("progress"),ea("icon"),$s("onAction"),$s("text"),$s("iconProvider"),$s("translationProvider"),fa("closeButton",!0)],apis:{updateProgress:(e,t,n)=>{e.updateProgress(t,n)},updateText:(e,t,n)=>{e.updateText(t,n)}}});var dS,uS,mS=(e,t,n)=>{const o=t.backstage.shared,s=()=>{const t=lr(st.fromDom(e.getContentAreaContainer())),n=mr(),o=au(n.x,t.x,t.right),r=au(n.y,t.y,t.bottom),s=Math.max(t.right,n.right),a=Math.max(t.bottom,n.bottom);return z.some(ir(o,r,s-o,a-r))},a=(t,a)=>{const i=()=>{a(),$C.hide(c)},l=rd(cS.sketch({text:t.text,level:W(["success","error","warning","warn","info"],t.type)?t.type:void 0,progress:!0===t.progressBar,icon:t.icon,closeButton:t.closeButton,onAction:i,iconProvider:o.providers.icons,translationProvider:o.providers.translate})),c=rd($C.sketch(r({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:o.getSink,fireDismissalEventInstead:{}},o.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}})));n.add(c),_(t.timeout)&&t.timeout>0&&VC.setEditorTimeout(e,(()=>{i()}),t.timeout);const d=()=>{const t=sd(l),n={maxHeightFunction:tp()},a=e.notificationManager.getNotifications();if(a[0]===u){const e=r(r({},o.anchors.banner()),{},{overrides:n});$C.showWithinBounds(c,t,{anchor:e},s)}else V(a,u).each((e=>{const o=a[e-1].getEl(),r={type:"node",root:rn(),node:z.some(st.fromDom(o)),overrides:n,layouts:{onRtl:()=>[_u],onLtr:()=>[_u]}};$C.showWithinBounds(c,t,{anchor:r},s)}))},u={close:i,reposition:d,text:e=>{cS.updateText(l,e)},settings:t,getEl:()=>l.element.dom,progressBar:{value:e=>{cS.updateProgress(l,e)}}};return u},i=e=>{e.close()},l=e=>e.settings;return{open:a,close:i,getArgs:l}},pS=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),fS=tinymce.util.Tools.resolve("tinymce.EditorManager"),gS=tinymce.util.Tools.resolve("tinymce.Env");(function(e){e["default"]="wrap",e["floating"]="floating",e["sliding"]="sliding",e["scrolling"]="scrolling"})(dS||(dS={})),function(e){e["auto"]="auto",e["top"]="top",e["bottom"]="bottom"}(uS||(uS={}));const hS=e=>t=>t.options.get(e),vS=e=>t=>z.from(e(t)),bS=e=>{const t=gS.deviceType.isPhone(),n=gS.deviceType.isTablet()||t,o=e.options.register,r=e=>f(e)||!1===e,s=e=>f(e)||_(e);o("skin",{processor:e=>f(e)||!1===e,default:"oxide"}),o("skin_url",{processor:"string"}),o("height",{processor:s,default:Math.max(e.getElement().offsetHeight,400)}),o("width",{processor:s,default:pS.DOM.getStyle(e.getElement(),"width")}),o("min_height",{processor:"number",default:100}),o("min_width",{processor:"number"}),o("max_height",{processor:"number"}),o("max_width",{processor:"number"}),o("style_formats",{processor:"object[]"}),o("style_formats_merge",{processor:"boolean",default:!1}),o("style_formats_autohide",{processor:"boolean",default:!1}),o("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),o("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),o("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),o("font_size_input_default_unit",{processor:"string",default:"pt"}),o("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),o("content_langs",{processor:"object[]"}),o("removed_menuitems",{processor:"string",default:""}),o("menubar",{processor:e=>f(e)||y(e),default:!t}),o("menu",{processor:"object",default:{}}),o("toolbar",{processor:e=>y(e)||f(e)||v(e)?{value:e,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),G(9,(e=>{o("toolbar"+(e+1),{processor:"string"})})),o("toolbar_mode",{processor:"string",default:n?"scrolling":"floating"}),o("toolbar_groups",{processor:"object",default:{}}),o("toolbar_location",{processor:"string",default:uS.auto}),o("toolbar_persist",{processor:"boolean",default:!1}),o("toolbar_sticky",{processor:"boolean",default:e.inline}),o("toolbar_sticky_offset",{processor:"number",default:0}),o("fixed_toolbar_container",{processor:"string",default:""}),o("fixed_toolbar_container_target",{processor:"object"}),o("ui_mode",{processor:"string",default:"combined"}),o("file_picker_callback",{processor:"function"}),o("file_picker_validator_handler",{processor:"function"}),o("file_picker_types",{processor:"string"}),o("typeahead_urls",{processor:"boolean",default:!0}),o("anchor_top",{processor:r,default:"#top"}),o("anchor_bottom",{processor:r,default:"#bottom"}),o("draggable_modal",{processor:"boolean",default:!1}),o("statusbar",{processor:"boolean",default:!0}),o("elementpath",{processor:"boolean",default:!0}),o("branding",{processor:"boolean",default:!0}),o("promotion",{processor:"boolean",default:!0}),o("resize",{processor:e=>"both"===e||y(e),default:!gS.deviceType.isTouch()}),o("sidebar_show",{processor:"string"})},yS=hS("readonly"),xS=hS("height"),wS=hS("width"),CS=vS(hS("min_width")),SS=vS(hS("min_height")),_S=vS(hS("max_width")),kS=vS(hS("max_height")),ES=vS(hS("style_formats")),OS=hS("style_formats_merge"),TS=hS("style_formats_autohide"),AS=hS("content_langs"),RS=hS("removed_menuitems"),NS=hS("toolbar_mode"),DS=hS("toolbar_groups"),BS=hS("toolbar_location"),MS=hS("fixed_toolbar_container"),IS=hS("fixed_toolbar_container_target"),PS=hS("toolbar_persist"),LS=hS("toolbar_sticky_offset"),FS=hS("menubar"),zS=hS("toolbar"),jS=hS("file_picker_callback"),US=hS("file_picker_validator_handler"),HS=hS("font_size_input_default_unit"),$S=hS("file_picker_types"),VS=hS("typeahead_urls"),WS=hS("anchor_top"),qS=hS("anchor_bottom"),GS=hS("draggable_modal"),KS=hS("statusbar"),YS=hS("elementpath"),XS=hS("branding"),JS=hS("resize"),QS=hS("paste_as_text"),ZS=hS("sidebar_show"),e_=hS("promotion"),t_=e=>!1===e.options.get("skin"),n_=e=>!1!==e.options.get("menubar"),o_=e=>{const t=e.options.get("skin_url");if(t_(e))return t;if(t)return e.documentBaseURI.toAbsolute(t);{const t=e.options.get("skin");return fS.baseURL+"/skins/ui/"+t}},r_=e=>e.options.get("line_height_formats").split(" "),s_=e=>{const t=zS(e),n=f(t),o=v(t)&&t.length>0;return!i_(e)&&(o||n||!0===t)},a_=e=>{const t=G(9,(t=>e.options.get("toolbar"+(t+1)))),n=Z(t,f);return je(n.length>0,n)},i_=e=>a_(e).fold((()=>{const t=zS(e);return k(t,f)&&t.length>0}),F),l_=e=>BS(e)===uS.bottom,c_=e=>{var t;if(!e.inline)return z.none();const n=null!==(t=MS(e))&&void 0!==t?t:"";if(n.length>0)return fd(rn(),n);const o=IS(e);return C(o)?z.some(st.fromDom(o)):z.none()},d_=e=>e.inline&&c_(e).isSome(),u_=e=>{const t=c_(e);return t.getOrThunk((()=>Jt(Xt(st.fromDom(e.getElement())))))},m_=e=>e.inline&&!n_(e)&&!s_(e)&&!i_(e),p_=e=>{const t=e.options.get("toolbar_sticky");return(t||e.inline)&&!d_(e)&&!m_(e)},f_=e=>!d_(e)&&"split"===e.options.get("ui_mode"),g_=e=>{const t=e.options.get("menu");return we(t,(e=>r(r({},e),{},{items:e.items})))};var h_=Object.freeze({__proto__:null,get ToolbarMode(){return dS},get ToolbarLocation(){return uS},register:bS,getSkinUrl:o_,isReadOnly:yS,isSkinDisabled:t_,getHeightOption:xS,getWidthOption:wS,getMinWidthOption:CS,getMinHeightOption:SS,getMaxWidthOption:_S,getMaxHeightOption:kS,getUserStyleFormats:ES,shouldMergeStyleFormats:OS,shouldAutoHideStyleFormats:TS,getLineHeightFormats:r_,getContentLanguages:AS,getRemovedMenuItems:RS,isMenubarEnabled:n_,isMultipleToolbars:i_,isToolbarEnabled:s_,isToolbarPersist:PS,getMultipleToolbarsOption:a_,getUiContainer:u_,useFixedContainer:d_,isSplitUiMode:f_,getToolbarMode:NS,isDraggableModal:GS,isDistractionFree:m_,isStickyToolbar:p_,getStickyToolbarOffset:LS,getToolbarLocation:BS,isToolbarLocationBottom:l_,getToolbarGroups:DS,getMenus:g_,getMenubar:FS,getToolbar:zS,getFilePickerCallback:jS,getFilePickerTypes:$S,useTypeaheadUrls:VS,getAnchorTop:WS,getAnchorBottom:qS,getFilePickerValidatorHandler:US,getFontSizeInputDefaultUnit:HS,useStatusBar:KS,useElementPath:YS,promotionEnabled:e_,useBranding:XS,getResize:JS,getPasteAsText:QS,getSidebarShow:ZS});const v_="[data-mce-autocompleter]",b_=e=>gd(e,v_),y_=e=>fd(e,v_),x_=(e,t)=>{const n=(e,t)=>{Fi(e,ei(),{raw:t})},o=()=>e.getMenu().bind(Ab.getHighlighted);t.on("keydown",(t=>{const r=t.which;e.isActive()&&(e.isMenuOpen()?13===r?(o().each(zi),t.preventDefault()):40===r?(o().fold((()=>{e.getMenu().each(Ab.highlightFirst)}),(e=>{n(e,t)})),t.preventDefault(),t.stopImmediatePropagation()):37!==r&&38!==r&&39!==r||o().each((e=>{n(e,t),t.preventDefault(),t.stopImmediatePropagation()})):13!==r&&38!==r&&40!==r||e.cancelIfNecessary())})),t.on("NodeChange",(t=>{e.isActive()&&!e.isProcessingAction()&&b_(st.fromDom(t.element)).isNone()&&e.cancelIfNecessary()}))},w_={setup:x_};var C_;(function(e){e[e["CLOSE_ON_EXECUTE"]=0]="CLOSE_ON_EXECUTE",e[e["BUBBLE_TO_SANDBOX"]=1]="BUBBLE_TO_SANDBOX"})(C_||(C_={}));var S_=C_;const __="tox-menu-nav__js",k_="tox-collection__item",E_="tox-swatch",O_={normal:__,color:E_},T_="tox-collection__item--enabled",A_="tox-collection__group-heading",R_="tox-collection__item-icon",N_="tox-collection__item-label",D_="tox-collection__item-accessory",B_="tox-collection__item-caret",M_="tox-collection__item-checkmark",I_="tox-collection__item--active",P_="tox-collection__item-container",L_="tox-collection__item-container--column",F_="tox-collection__item-container--row",z_="tox-collection__item-container--align-right",j_="tox-collection__item-container--align-left",U_="tox-collection__item-container--valign-top",H_="tox-collection__item-container--valign-middle",$_="tox-collection__item-container--valign-bottom",V_=e=>Re(O_,e).getOr(__),W_=e=>"color"===e?"tox-swatches":"tox-menu",q_=e=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:W_(e),tieredMenu:"tox-tiered-menu"}),G_=e=>{const t=q_(e);return{backgroundMenu:t.backgroundMenu,selectedMenu:t.selectedMenu,menu:t.menu,selectedItem:t.selectedItem,item:V_(e)}},K_=(e,t,n)=>{const o=q_(n);return{tag:"div",classes:se([[o.menu,`tox-menu-${t}-column`],e?[o.hasIcons]:[]])}},Y_=[kC.parts.items({})],X_=(e,t,n)=>{const o=q_(n),r={tag:"div",classes:se([[o.tieredMenu]])};return{dom:r,markers:G_(n)}},J_=R([ea("data"),ca("inputAttributes",{}),ca("inputStyles",{}),ca("tag","input"),ca("inputClasses",[]),zd("onSetValue"),ca("styles",{}),ca("eventOrder",{}),Oh("inputBehaviours",[Eh,Aw]),ca("selectOnFocus",!0)]),Q_=e=>Vu([Aw.config({onFocus:e.selectOnFocus?e=>{const t=e.element,n=Nc(t);t.dom.setSelectionRange(0,n.length)}:E})]),Z_=e=>r(r({},Q_(e)),Ah(e.inputBehaviours,[Eh.config({store:r(r({mode:"manual"},e.data.map((e=>({initialValue:e}))).getOr({})),{},{getValue:e=>Nc(e.element),setValue:(e,t)=>{const n=Nc(e.element);n!==t&&Dc(e.element,t)}}),onSetValue:e.onSetValue})])),ek=e=>({tag:e.tag,attributes:r({type:"text"},e.inputAttributes),styles:e.inputStyles,classes:e.inputClasses}),tk=(e,t)=>({uid:e.uid,dom:ek(e),components:[],behaviours:Z_(e),eventOrder:e.eventOrder}),nk=Fv({name:"Input",configFields:J_(),factory:tk}),ok=xl("refetch-trigger-event"),rk=xl("redirect-menu-item-interaction"),sk="tox-menu__searcher",ak=e=>fd(e.element,`.${sk}`).bind((t=>e.getSystem().getByDom(t).toOptional())),ik=ak,lk=(e,t)=>{Eh.setValue(e,t.fetchPattern),e.element.dom.selectionStart=t.selectionStart,e.element.dom.selectionEnd=t.selectionEnd},ck=e=>{const t=Eh.getValue(e),n=e.element.dom.selectionStart,o=e.element.dom.selectionEnd;return{fetchPattern:t,selectionStart:n,selectionEnd:o}},dk=(e,t)=>{un(t.element,"id").each((t=>ln(e.element,"aria-activedescendant",t)))},uk=e=>{const t=(e,t)=>(t.cut(),z.none()),n=(e,t)=>{const n={interactionEvent:t.event,eventType:t.event.raw.type};return Fi(e,rk,n),z.some(!0)},o="searcher-events";return{dom:{tag:"div",classes:[k_]},components:[nk.sketch({inputClasses:[sk,"tox-textfield"],inputAttributes:r(r({},e.placeholder.map((t=>({placeholder:e.i18n(t)}))).getOr({})),{},{type:"search","aria-autocomplete":"list"}),inputBehaviours:Vu([xw(o,[Ki(ni(),(e=>{Li(e,ok)})),Ki(ei(),((e,t)=>{"Escape"===t.event.raw.key&&t.stop()}))]),rw.config({mode:"special",onLeft:t,onRight:t,onSpace:t,onEnter:n,onEscape:n,onUp:n,onDown:n})]),eventOrder:{keydown:[o,rw.name()]}})]}},mk="tox-collection--results__js",pk=e=>{var t;return e.dom?r(r({},e),{},{dom:r(r({},e.dom),{},{attributes:r(r({},null!==(t=e.dom.attributes)&&void 0!==t?t:{}),{},{id:xl("aria-item-search-result-id"),"aria-selected":"false"})})}):e},fk=(e,t)=>n=>{const o=K(n,t);return Y(o,(t=>({dom:e,components:t})))},gk=e=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[kC.parts.items({preprocess:"auto"!==e?fk({tag:"div",classes:["tox-swatches__row"]},e):N})]}]}),hk=e=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[kC.parts.items({preprocess:fk({tag:"div",classes:["tox-collection__group"]},e)})]}),vk=(e,t)=>{const n=[];let o=[];return X(e,((e,r)=>{t(e,r)?(o.length>0&&n.push(o),o=[],(Ne(e.dom,"innerHtml")||e.components&&e.components.length>0)&&o.push(e)):o.push(e)})),o.length>0&&n.push(o),Y(n,(e=>({dom:{tag:"div",classes:["tox-collection__group"]},components:e})))},bk=(e,t,n)=>kC.parts.items({preprocess:o=>{const r=Y(o,n);return"auto"!==e&&e>1?fk({tag:"div",classes:["tox-collection__group"]},e)(r):vk(r,((e,n)=>"separator"===t[n].type))}}),yk=(e,t,n=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===e?["tox-collection--list"]:["tox-collection--grid"])},components:[bk(e,t,N)]}),xk=(e,t,n=!0)=>{const o=xl("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",mk].concat(1===e?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:o}},components:[bk(e,t,pk)]}},wk=(e,t,n)=>{const o=xl("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===e?["tox-collection--list"]:["tox-collection--grid"])},components:[uk({i18n:KC.translate,placeholder:n.placeholder}),{dom:{tag:"div",classes:[...1===e?["tox-collection--list"]:["tox-collection--grid"],mk],attributes:{id:o}},components:[bk(e,t,pk)]}]}},Ck=(e,t=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[kC.parts.items({preprocess:t=>vk(t,((t,n)=>"separator"===e[n].type))})]}),Sk=e=>q(e,(e=>"icon"in e&&void 0!==e.icon)),_k=e=>(console.error(Ls(e)),console.log(e),z.none()),kk=(e,t,n,o,r)=>{const s=Ck(n);return{value:e,dom:s.dom,components:s.components,items:n}},Ek=(e,t,n,o,r)=>{const s=()=>"searchable"!==r.menuType?yk(o,n):"search-with-field"===r.searchMode.searchMode?wk(o,n,r.searchMode):xk(o,n);if("color"===r.menuType){const t=gk(o);return{value:e,dom:t.dom,components:t.components,items:n}}if("normal"===r.menuType&&"auto"===o){const t=yk(o,n);return{value:e,dom:t.dom,components:t.components,items:n}}if("normal"===r.menuType||"searchable"===r.menuType){const t=s();return{value:e,dom:t.dom,components:t.components,items:n}}if("listpreview"===r.menuType&&"auto"!==o){const t=hk(o);return{value:e,dom:t.dom,components:t.components,items:n}}return{value:e,dom:K_(t,o,r.menuType),components:Y_,items:n}},Ok=qs("type"),Tk=qs("name"),Ak=qs("label"),Rk=qs("text"),Nk=qs("title"),Dk=qs("icon"),Bk=qs("value"),Mk=Ys("fetch"),Ik=Ys("getSubmenuItems"),Pk=Ys("onAction"),Lk=Ys("onItemAction"),Fk=ga("onSetup",(()=>E)),zk=oa("name"),jk=oa("text"),Uk=oa("icon"),Hk=oa("tooltip"),$k=oa("label"),Vk=oa("shortcut"),Wk=sa("select"),qk=fa("active",!1),Gk=fa("borderless",!1),Kk=fa("enabled",!0),Yk=fa("primary",!1),Xk=e=>ca("columns",e),Jk=ca("meta",{}),Qk=ga("onAction",E),Zk=e=>ma("type",e),eE=e=>js("name","name",zr((()=>xl(`${e}-name`))),Ss),tE=e=>js("value","value",zr((()=>xl(`${e}-value`))),xs()),nE=fs([Ok,jk]),oE=e=>Ms("separatormenuitem",nE,e),rE=fs([Zk("autocompleteitem"),qk,Kk,Jk,Bk,jk,Uk]),sE=e=>Ms("Autocompleter.Separator",nE,e),aE=e=>Ms("Autocompleter.Item",rE,e),iE=[Kk,Hk,Uk,jk,Fk],lE=fs([Ok,Pk].concat(iE)),cE=e=>Ms("toolbarbutton",lE,e),dE=[qk].concat(iE),uE=fs(dE.concat([Ok,Pk])),mE=e=>Ms("ToggleButton",uE,e),pE=[ga("predicate",L),pa("scope","node",["node","editor"]),pa("position","selection",["node","selection","line"])],fE=iE.concat([Zk("contextformbutton"),Yk,Pk,Us("original",N)]),gE=dE.concat([Zk("contextformbutton"),Yk,Pk,Us("original",N)]),hE=iE.concat([Zk("contextformbutton")]),vE=dE.concat([Zk("contextformtogglebutton")]),bE=Fs("type",{contextformbutton:fE,contextformtogglebutton:gE}),yE=fs([Zk("contextform"),ga("initValue",R("")),$k,Zs("commands",bE),ta("launch",Fs("type",{contextformbutton:hE,contextformtogglebutton:vE}))].concat(pE)),xE=e=>Ms("ContextForm",yE,e),wE=fs([Zk("contexttoolbar"),qs("items")].concat(pE)),CE=e=>Ms("ContextToolbar",wE,e),SE=[Ok,qs("src"),oa("alt"),va("classes",[],Ss)],_E=fs(SE),kE=[Ok,Rk,zk,va("classes",["tox-collection__item-label"],Ss)],EE=fs(kE),OE=us((()=>As("type",{cardimage:_E,cardtext:EE,cardcontainer:TE}))),TE=fs([Ok,ma("direction","horizontal"),ma("align","left"),ma("valign","middle"),Zs("items",OE)]),AE=[Kk,jk,Vk,tE("menuitem"),Jk],RE=fs([Ok,$k,Zs("items",OE),Fk,Qk].concat(AE)),NE=e=>Ms("cardmenuitem",RE,e),DE=fs([Ok,qk,Uk].concat(AE)),BE=e=>Ms("choicemenuitem",DE,e),ME=[Ok,qs("fancytype"),Qk],IE=[ca("initData",{})].concat(ME),PE=[sa("select"),ba("initData",{},[fa("allowCustomColors",!0),ma("storageKey","default"),aa("colors",xs())])].concat(ME),LE=Fs("fancytype",{inserttable:IE,colorswatch:PE}),FE=e=>Ms("fancymenuitem",LE,e),zE=fs([Ok,Fk,Qk,Uk].concat(AE)),jE=e=>Ms("menuitem",zE,e),UE=fs([Ok,Ik,Fk,Uk].concat(AE)),HE=e=>Ms("nestedmenuitem",UE,e),$E=fs([Ok,Uk,qk,Fk,Pk].concat(AE)),VE=e=>Ms("togglemenuitem",$E,e),WE=(e,t,n)=>{const o=gf(e.element,"."+n);if(o.length>0){const e=re(o,(e=>{const n=e.dom.getBoundingClientRect().top,r=o[0].dom.getBoundingClientRect().top;return Math.abs(n-r)>t})).getOr(o.length);return z.some({numColumns:e,numRows:Math.ceil(o.length/e)})}return z.none()},qE=(e,t)=>Vu([xw(e,t)]),GE=e=>qE(xl("unnamed-events"),e),KE={namedEvents:qE,unnamedEvents:GE},YE=xl("tooltip.exclusive"),XE=xl("tooltip.show"),JE=xl("tooltip.hide"),QE=(e,t,n)=>{e.getSystem().broadcastOn([YE],{})},ZE=(e,t,n,o)=>{n.getTooltip().each((e=>{e.getSystem().isConnected()&&bw.set(e,o)}))};var eO=Object.freeze({__proto__:null,hideAllExclusive:QE,setComponents:ZE});const tO=(e,t)=>{const n=n=>{t.getTooltip().each((o=>{yg(o),e.onHide(n,o),t.clearTooltip()})),t.clearTimer()},o=n=>{if(!t.isShowing()){QE(n);const o=e.lazySink(n).getOrDie(),r=n.getSystem().build({dom:e.tooltipDom,components:e.tooltipComponents,events:Vi("normal"===e.mode?[Ki(Ja(),(e=>{Li(n,XE)})),Ki(Ya(),(e=>{Li(n,JE)}))]:[]),behaviours:Vu([bw.config({})])});t.setTooltip(r),hg(o,r),e.onShow(n,r),ag.position(o,r,{anchor:e.anchor(n)})}};return Vi(se([[Ki(XE,(n=>{t.resetTimer((()=>{o(n)}),e.delay)})),Ki(JE,(o=>{t.resetTimer((()=>{n(o)}),e.delay)})),Ki(fi(),((e,t)=>{const o=t;o.universal||W(o.channels,YE)&&n(e)})),sl((e=>{n(e)}))],"normal"===e.mode?[Ki(Qa(),(e=>{Li(e,XE)})),Ki(mi(),(e=>{Li(e,JE)})),Ki(Ja(),(e=>{Li(e,XE)})),Ki(Ya(),(e=>{Li(e,JE)}))]:[Ki(Ii(),((e,t)=>{Li(e,XE)})),Ki(Pi(),(e=>{Li(e,JE)}))]]))};var nO=Object.freeze({__proto__:null,events:tO}),oO=[$s("lazySink"),$s("tooltipDom"),ca("exclusive",!0),ca("tooltipComponents",[]),ca("delay",300),pa("mode","normal",["normal","follow-highlight"]),ca("anchor",(e=>({type:"hotspot",hotspot:e,layouts:{onLtr:R([_u,Su,yu,wu,xu,Cu]),onRtl:R([_u,Su,yu,wu,xu,Cu])}}))),zd("onHide"),zd("onShow")];const rO=()=>{const e=Dm(),t=Dm(),n=()=>{e.on(clearTimeout)},o=(t,o)=>{n(),e.set(setTimeout(t,o))},r=R("not-implemented");return Hl({getTooltip:t.get,isShowing:t.isSet,setTooltip:t.set,clearTooltip:t.clear,clearTimer:n,resetTimer:o,readState:r})};var sO=Object.freeze({__proto__:null,init:rO});const aO=qu({fields:oO,name:"tooltipping",active:nO,state:sO,apis:eO}),iO=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),lO="silver.readonly",cO=fs([Ks("readonly")]),dO=(e,t)=>{const n=e.mainUi.outerContainer,o=n.element,r=[e.mainUi.mothership,...e.uiMotherships];t&&X(r,(e=>{e.broadcastOn([Wg()],{target:o})})),X(r,(e=>{e.broadcastOn([lO],{readonly:t})}))},uO=(e,t)=>{e.on("init",(()=>{e.mode.isReadOnly()&&dO(t,!0)})),e.on("SwitchMode",(()=>dO(t,e.mode.isReadOnly()))),yS(e)&&e.mode.set("readonly")},mO=()=>Xu.config({channels:{[lO]:{schema:cO,onReceive:(e,t)=>{cb.set(e,t.readonly)}}}}),pO=e=>cb.config({disabled:e,disableClass:"tox-collection__item--state-disabled"}),fO=e=>cb.config({disabled:e}),gO=e=>cb.config({disabled:e,disableClass:"tox-tbtn--disabled"}),hO=e=>cb.config({disabled:e,disableClass:"tox-tbtn--disabled",useNative:!1}),vO={item:pO,button:fO,splitButton:gO,toolbarButton:hO},bO=(e,t)=>{const n=e.getApi(t);return e=>{e(n)}},yO=(e,t)=>rl((n=>{const o=bO(e,n);o((n=>{const o=e.onSetup(n);S(o)&&t.set(o)}))})),xO=(e,t)=>sl((n=>bO(e,n)(t.get()))),wO=(e,t)=>il(((n,o)=>{bO(e,n)(e.onAction),e.triggersSubmenu||t!==S_.CLOSE_ON_EXECUTE||(n.getSystem().isConnected()&&Li(n,yi()),o.stop())})),CO={[gi()]:["disabling","alloy.base.behaviour","toggling","item-events"]},SO=Ie,_O=(e,t,n,o)=>{const r=ya(E);return{type:"item",dom:t.dom,components:SO(t.optComponents),data:e.data,eventOrder:CO,hasSubmenu:e.triggersSubmenu,itemBehaviours:Vu([xw("item-events",[wO(e,n),yO(e,r),xO(e,r)]),vO.item((()=>!e.enabled||o.isDisabled())),mO(),bw.config({})].concat(e.itemBehaviours))}},kO=e=>({value:e.value,meta:r({text:e.text.getOr("")},e.meta)}),EO=e=>{const t=gS.os.isMacOS()||gS.os.isiOS(),n={alt:"⌥",ctrl:"⌃",shift:"⇧",meta:"⌘",access:"⌃⌥"},o={meta:"Ctrl",access:"Shift+Alt"},r=t?n:o,s=e.split("+"),a=Y(s,(e=>{const t=e.toLowerCase().trim();return Ne(r,t)?r[t]:e}));return t?a.join(""):a.join("+")},OO=(e,t,n=[R_])=>sS(e,{tag:"div",classes:n},t),TO=e=>({dom:{tag:"div",classes:[N_]},components:[Zc(KC.translate(e))]}),AO=(e,t)=>({dom:{tag:"div",classes:t,innerHtml:e}}),RO=(e,t)=>({dom:{tag:"div",classes:[N_]},components:[{dom:{tag:e.tag,styles:e.styles},components:[Zc(KC.translate(t))]}]}),NO=e=>({dom:{tag:"div",classes:[D_]},components:[Zc(EO(e))]}),DO=e=>OO("checkmark",e,[M_]),BO=e=>OO("chevron-right",e,[B_]),MO=e=>OO("chevron-down",e,[B_]),IO=(e,t)=>{const n="vertical"===e.direction?L_:F_,o="left"===e.align?j_:z_,r=()=>{switch(e.valign){case"top":return U_;case"middle":return H_;case"bottom":return $_}};return{dom:{tag:"div",classes:[P_,n,o,r()]},components:t}},PO=(e,t,n)=>({dom:{tag:"img",classes:t,attributes:{src:e,alt:n.getOr("")}}}),LO=(e,t,n)=>{const o="custom",s="remove",a=e.ariaLabel,i=e.value,l=e.iconContent.map((e=>tS(e,t.icons,n))),c=()=>{const e=E_,n=l.getOr(""),c=a.map((e=>({title:t.translate(e)}))).getOr({}),d={tag:"div",attributes:c,classes:[e]};return i===o?r(r({},d),{},{tag:"button",classes:[...d.classes,"tox-swatches__picker-btn"],innerHtml:n}):i===s?r(r({},d),{},{classes:[...d.classes,"tox-swatch--remove"],innerHtml:n}):C(i)?r(r({},d),{},{attributes:r(r({},d.attributes),{},{"data-mce-color":i}),styles:{"background-color":i},innerHtml:n}):d};return{dom:c(),optComponents:[]}},FO=e=>{const t=e.map((e=>({attributes:{title:KC.translate(e)}}))).getOr({});return r({tag:"div",classes:[__,k_]},t)},zO=(e,t,n,o)=>{const r={tag:"div",classes:[R_]},s=e=>sS(e,r,t.icons,o),a=()=>z.some({dom:r}),i=n?e.iconContent.map(s).orThunk(a):z.none(),l=e.checkMark,c=z.from(e.meta).fold((()=>TO),(e=>Ne(e,"style")?B(RO,e.style):TO)),d=e.htmlContent.fold((()=>e.textContent.map(c)),(e=>z.some(AO(e,[N_])))),u={dom:FO(e.ariaLabel),optComponents:[i,d,e.shortcutContent.map(NO),l,e.caret]};return u},jO=(e,t,n,o=z.none())=>"color"===e.presets?LO(e,t,o):zO(e,t,n,o),UO=(e,t)=>Re(e,"tooltipWorker").map((e=>[aO.config({lazySink:t.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:e=>({type:"submenu",item:e,overrides:{maxHeightFunction:tp}}),mode:"follow-highlight",onShow:(t,n)=>{e((e=>{aO.setComponents(t,[ed({element:st.fromDom(e)})])}))}})])).getOr([]),HO=e=>pS.DOM.encode(e),$O=(e,t)=>{const n=KC.translate(e),o=HO(n);if(t.length>0){const e=new RegExp(iO(t),"gi");return o.replace(e,(e=>`<span class="tox-autocompleter-highlight">${e}</span>`))}return o},VO=(e,t,n,o,r,s,a,i=!0)=>{const l=jO({presets:o,textContent:z.none(),htmlContent:n?e.text.map((e=>$O(e,t))):z.none(),ariaLabel:e.text,iconContent:e.icon,shortcutContent:z.none(),checkMark:z.none(),caret:z.none(),value:e.value},a.providers,i,e.icon);return _O({data:kO(e),enabled:e.enabled,getApi:R({}),onAction:t=>r(e.value,e.meta),onSetup:R(E),triggersSubmenu:!1,itemBehaviours:UO(e.meta,a)},l,s,a.providers)},WO=(e,t)=>Y(e,(e=>{switch(e.type){case"cardcontainer":return IO(e,WO(e.items,t));case"cardimage":return PO(e.src,e.classes,e.alt);case"cardtext":const n=e.name.exists((e=>W(t.cardText.highlightOn,e))),o=n?z.from(t.cardText.matchText).getOr(""):"";return AO($O(e.text,o),e.classes)}})),qO=(e,t,n,o)=>{const s=e=>({isEnabled:()=>!cb.isDisabled(e),setEnabled:t=>{cb.set(e,!t),X(gf(e.element,"*"),(n=>{e.getSystem().getByDom(n).each((e=>{e.hasConfigured(cb)&&cb.set(e,!t)}))}))}}),a={dom:FO(e.label),optComponents:[z.some({dom:{tag:"div",classes:[P_,F_]},components:WO(e.items,o)})]};return _O({data:kO(r({text:z.none()},e)),enabled:e.enabled,getApi:s,onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:z.from(o.itemBehaviours).getOr([])},a,t,n.providers)},GO=(e,t,n,o,r,s,a,i=!0)=>{const l=e=>({setActive:t=>{Kw.set(e,t)},isActive:()=>Kw.isOn(e),isEnabled:()=>!cb.isDisabled(e),setEnabled:t=>cb.set(e,!t)}),c=jO({presets:n,textContent:t?e.text:z.none(),htmlContent:z.none(),ariaLabel:e.text,iconContent:e.icon,shortcutContent:t?e.shortcut:z.none(),checkMark:t?z.some(DO(a.icons)):z.none(),caret:z.none(),value:e.value},a,i);return Pr(_O({data:kO(e),enabled:e.enabled,getApi:l,onAction:t=>o(e.value),onSetup:e=>(e.setActive(r),E),triggersSubmenu:!1,itemBehaviours:[]},c,s,a),{toggling:{toggleClass:T_,toggleOnExecute:!1,selected:e.active,exclusive:!0}})},KO=pv(mC(),pC()),YO=e=>({value:ZO(e)}),XO=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,JO=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,QO=e=>XO.test(e)||JO.test(e),ZO=e=>Ve(e,"#").toUpperCase(),eT=e=>QO(e)?z.some({value:ZO(e)}):z.none(),tT=e=>{const t=e.value.replace(XO,((e,t,n,o)=>t+t+n+n+o+o));return{value:t}},nT=e=>{const t=tT(e),n=JO.exec(t.value);return null===n?["FFFFFF","FF","FF","FF"]:n},oT=e=>{const t=e.toString(16);return(1===t.length?"0"+t:t).toUpperCase()},rT=e=>{const t=oT(e.red)+oT(e.green)+oT(e.blue);return YO(t)},sT=Math.min,aT=Math.max,iT=Math.round,lT=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,cT=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,dT=(e,t,n,o)=>({red:e,green:t,blue:n,alpha:o}),uT=e=>{const t=parseInt(e,10);return t.toString()===e&&t>=0&&t<=255},mT=e=>{let t,n,o;const r=(e.hue||0)%360;let s=e.saturation/100,a=e.value/100;if(s=aT(0,sT(s,1)),a=aT(0,sT(a,1)),0===s)return t=n=o=iT(255*a),dT(t,n,o,1);const i=r/60,l=a*s,c=l*(1-Math.abs(i%2-1)),d=a-l;switch(Math.floor(i)){case 0:t=l,n=c,o=0;break;case 1:t=c,n=l,o=0;break;case 2:t=0,n=l,o=c;break;case 3:t=0,n=c,o=l;break;case 4:t=c,n=0,o=l;break;case 5:t=l,n=0,o=c;break;default:t=n=o=0}return t=iT(255*(t+d)),n=iT(255*(n+d)),o=iT(255*(o+d)),dT(t,n,o,1)},pT=e=>{const t=nT(e),n=parseInt(t[1],16),o=parseInt(t[2],16),r=parseInt(t[3],16);return dT(n,o,r,1)},fT=(e,t,n,o)=>{const r=parseInt(e,10),s=parseInt(t,10),a=parseInt(n,10),i=parseFloat(o);return dT(r,s,a,i)},gT=e=>{if("transparent"===e)return z.some(dT(0,0,0,0));const t=lT.exec(e);if(null!==t)return z.some(fT(t[1],t[2],t[3],"1"));const n=cT.exec(e);return null!==n?z.some(fT(n[1],n[2],n[3],n[4])):z.none()},hT=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,vT=dT(255,0,0,1),bT=e=>{e.dispatch("SkinLoaded")},yT=(e,t)=>{e.dispatch("SkinLoadError",t)},xT=e=>{e.dispatch("ResizeEditor")},wT=(e,t)=>{e.dispatch("ResizeContent",t)},CT=(e,t)=>{e.dispatch("ScrollContent",t)},ST=(e,t)=>{e.dispatch("TextColorChange",t)},_T=(e,t)=>{e.dispatch("AfterProgressState",{state:t})},kT=(e,t)=>e.dispatch("ResolveName",{name:t.nodeName.toLowerCase(),target:t}),ET=(e,t)=>{e.dispatch("ToggleToolbarDrawer",{state:t})};var OT=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const TT={},AT=(e,t=10)=>{const n=OT.getItem(e),o=f(n)?JSON.parse(n):[],r=e=>{const n=t-e.length;return n<0?e.slice(0,t):e},s=r(o),a=n=>{V(s,n).each(i),s.unshift(n),s.length>t&&s.pop(),OT.setItem(e,JSON.stringify(s))},i=e=>{s.splice(e,1)},l=()=>s.slice(0);return{add:a,state:l}},RT=e=>Re(TT,e).getOrThunk((()=>{const t=`tinymce-custom-colors-${e}`,n=OT.getItem(t);if(w(n)){const e=OT.getItem("tinymce-custom-colors");OT.setItem(t,C(e)?e:"[]")}const o=AT(t,10);return TT[e]=o,o})),NT=e=>Y(RT(e).state(),(e=>({type:"choiceitem",text:e,icon:"checkmark",value:e}))),DT=(e,t)=>{RT(e).add(t)},BT=(e,t,n)=>({hue:e,saturation:t,value:n}),MT=e=>{let t=0,n=0,o=0;const r=e.red/255,s=e.green/255,a=e.blue/255,i=Math.min(r,Math.min(s,a)),l=Math.max(r,Math.max(s,a));if(i===l)return o=i,BT(0,0,100*o);const c=r===i?s-a:a===i?r-s:a-r;return t=r===i?3:a===i?1:5,t=60*(t-c/(l-i)),n=(l-i)/l,o=l,BT(Math.round(t),Math.round(100*n),Math.round(100*o))},IT=e=>MT(pT(e)),PT=e=>rT(mT(e)),LT=e=>eT(e).orThunk((()=>gT(e).map(rT))).getOrThunk((()=>{const t=document.createElement("canvas");t.height=1,t.width=1;const n=t.getContext("2d");n.clearRect(0,0,t.width,t.height),n.fillStyle="#FFFFFF",n.fillStyle=e,n.fillRect(0,0,1,1);const o=n.getImageData(0,0,1,1).data,r=o[0],s=o[1],a=o[2],i=o[3];return rT(dT(r,s,a,i))})),FT="forecolor",zT="hilitecolor",jT=5,UT=e=>Math.max(jT,Math.ceil(Math.sqrt(e))),HT=(e,t)=>{const n=UT(t),o=VT("color_cols")(e);return jT===n?o:n},$T=e=>{const t=[];for(let n=0;n<e.length;n+=2)t.push({text:e[n+1],value:"#"+LT(e[n]).value,icon:"checkmark",type:"choiceitem"});return t},VT=e=>t=>t.options.get(e),WT="#000000",qT=e=>{const t=e.options.register,n=e=>k(e,f)?{value:$T(e),valid:!0}:{valid:!1,message:"Must be an array of strings."};t("color_map",{processor:n,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),t("color_map_background",{processor:n}),t("color_map_foreground",{processor:n}),t("color_cols",{processor:"number",default:UT(XT(e,"default").length)}),t("color_cols_foreground",{processor:"number",default:HT(e,XT(e,FT).length)}),t("color_cols_background",{processor:"number",default:HT(e,XT(e,zT).length)}),t("custom_colors",{processor:"boolean",default:!0}),t("color_default_foreground",{processor:"string",default:WT}),t("color_default_background",{processor:"string",default:WT})},GT=(e,t)=>t===FT?VT("color_cols_foreground")(e):t===zT?VT("color_cols_background")(e):VT("color_cols")(e),KT=(e,t)=>{const n=GT(e,t);return n>0?n:jT},YT=VT("custom_colors"),XT=(e,t)=>t===FT&&e.options.isSet("color_map_foreground")?VT("color_map_foreground")(e):t===zT&&e.options.isSet("color_map_background")?VT("color_map_background")(e):VT("color_map")(e),JT=VT("color_default_foreground"),QT=VT("color_default_background"),ZT="rgba(0, 0, 0, 0)",eA=e=>gT(e).exists((e=>0!==e.alpha)),tA=e=>Ma(e,(e=>{if(Ct(e)){const t=xn(e,"background-color");return je(eA(t),t)}return z.none()})).getOr(ZT),nA=(e,t)=>{const n=st.fromDom(e.selection.getStart()),o="hilitecolor"===t?tA(n):xn(n,"color");return gT(o).map((e=>"#"+rT(e).value))},oA=(e,t,n)=>{e.undoManager.transact((()=>{e.focus(),e.formatter.apply(t,{value:n}),e.nodeChanged()}))},rA=(e,t)=>{e.undoManager.transact((()=>{e.focus(),e.formatter.remove(t,{value:null},void 0,!0),e.nodeChanged()}))},sA=e=>{e.addCommand("mceApplyTextcolor",((t,n)=>{oA(e,t,n)})),e.addCommand("mceRemoveTextcolor",(t=>{rA(e,t)}))},aA=e=>{const t="choiceitem",n={type:t,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"},o={type:t,text:"Custom color",icon:"color-picker",value:"custom"};return e?[n,o]:[n]},iA=(e,t,n,o)=>{if("custom"===n){const n=fA(e);n((n=>{n.each((n=>{DT(t,n),e.execCommand("mceApplyTextcolor",t,n),o(n)}))}),nA(e,t).getOr(WT))}else"remove"===n?(o(""),e.execCommand("mceRemoveTextcolor",t)):(o(n),e.execCommand("mceApplyTextcolor",t,n))},lA=(e,t,n)=>e.concat(NT(t).concat(aA(n))),cA=(e,t,n)=>o=>{o(lA(e,t,n))},dA=(e,t,n)=>{const o="forecolor"===t?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";e.setIconFill(o,n)},uA=(e,t)=>n=>{const o=nA(e,t);return Be(o,n.toUpperCase())},mA=(e,t,n,o,r)=>{e.ui.registry.addSplitButton(t,{tooltip:o,presets:"color",icon:"forecolor"===t?"text-color":"highlight-bg-color",select:uA(e,n),columns:KT(e,n),fetch:cA(XT(e,n),n,YT(e)),onAction:t=>{iA(e,n,r.get(),E)},onItemAction:(o,s)=>{iA(e,n,s,(n=>{r.set(n),ST(e,{name:t,color:n})}))},onSetup:n=>{dA(n,t,r.get());const o=e=>{e.name===t&&dA(n,e.name,e.color)};return e.on("TextColorChange",o),()=>{e.off("TextColorChange",o)}}})},pA=(e,t,n,o,r)=>{e.ui.registry.addNestedMenuItem(t,{text:o,icon:"forecolor"===t?"text-color":"highlight-bg-color",onSetup:e=>(dA(e,t,r.get()),E),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:uA(e,n),initData:{storageKey:n},onAction:o=>{iA(e,n,o.value,(n=>{r.set(n),ST(e,{name:t,color:n})}))}}]})},fA=e=>(t,n)=>{let o=!1;const r=n=>{const r=n.getData(),s=r.colorpicker;o?(t(z.from(s)),n.close()):e.windowManager.alert(e.translate(["Invalid hex color code: {0}",s]))},s=(e,t)=>{"hex-valid"===t.name&&(o=t.value)},a={colorpicker:n};e.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:a,onAction:s,onSubmit:r,onClose:E,onCancel:()=>{t(z.none())}})},gA=e=>{sA(e);const t=JT(e),n=QT(e),o=ya(t),r=ya(n);mA(e,"forecolor","forecolor","Text color",o),mA(e,"backcolor","hilitecolor","Background color",r),pA(e,"forecolor","forecolor","Text color",o),pA(e,"backcolor","hilitecolor","Background color",r)},hA=(e,t,n,o,r,s,a,i)=>{const l=Sk(t),c="color"!==r?"normal":"color",d=vA(t,n,o,c,s,a,i),u={menuType:r};return Ek(e,l,d,o,u)},vA=(e,t,n,o,r,s,a)=>Ie(Y(e,(i=>"choiceitem"===i.type?BE(i).fold(_k,(i=>z.some(GO(i,1===n,o,t,s(i.value),r,a,Sk(e))))):z.none()))),bA=(e,t)=>{const n=G_(t);if(1===e)return{mode:"menu",moveOnTab:!0};if("auto"===e)return{mode:"grid",selector:"."+n.item,initSize:{numColumns:1,numRows:1}};{const e="color"===t?"tox-swatches__row":"tox-collection__group";return{mode:"matrix",rowSelector:"."+e,previousSelector:e=>"color"===t?fd(e.element,"[aria-checked=true]"):z.none()}}},yA=(e,t)=>1===e?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:"auto"===e?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:"color"===t?".tox-swatches__row":".tox-collection__group",cell:"color"===t?`.${E_}`:`.${k_}`}},xA=(e,t)=>{const n=wA(e,t),o=t.colorinput.getColorCols(e.initData.storageKey),s="color",a=hA(xl("menu-value"),n,(t=>{e.onAction({value:t})}),o,s,S_.CLOSE_ON_EXECUTE,e.select.getOr(L),t.shared.providers),i=r(r({},a),{},{markers:G_(s),movement:bA(o,s)});return{type:"widget",data:{value:xl("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[KO.widget(kC.sketch(i))]}},wA=(e,t)=>{const n=e.initData.allowCustomColors&&t.colorinput.hasCustomColors();return e.initData.colors.fold((()=>lA(t.colorinput.getColors(e.initData.storageKey),e.initData.storageKey,n)),(e=>e.concat(aA(n))))},CA=xl("cell-over"),SA=xl("cell-execute"),_A=(e,t,n)=>{const o=n=>Fi(n,CA,{row:e,col:t}),r=n=>Fi(n,SA,{row:e,col:t}),s=(e,t)=>{t.stop(),r(e)};return rd({dom:{tag:"div",attributes:{role:"button",["aria-labelledby"]:n}},behaviours:Vu([xw("insert-table-picker-cell",[Ki(Ja(),Aw.focus),Ki(gi(),r),Ki(ri(),s),Ki(vi(),s)]),Kw.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),Aw.config({onFocus:o})])})},kA=(e,t,n)=>{const o=[];for(let r=0;r<t;r++){const t=[];for(let o=0;o<n;o++)t.push(_A(r,o,e));o.push(t)}return o},EA=(e,t,n,o,r)=>{for(let s=0;s<o;s++)for(let o=0;o<r;o++)Kw.set(e[s][o],s<=t&&o<=n)},OA=e=>ae(e,(e=>Y(e,sd))),TA=(e,t)=>Zc(`${t}x${e}`),AA=e=>{const t=10,n=10,o=xl("size-label"),r=kA(o,t,n),s=TA(0,0),a=GC({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:o}},components:[s],behaviours:Vu([bw.config({})])});return{type:"widget",data:{value:xl("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[KO.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:OA(r).concat(a.asSpec()),behaviours:Vu([xw("insert-table-picker",[rl((e=>{bw.set(a.get(e),[s])})),el(CA,((e,o,s)=>{const{row:i,col:l}=s.event;EA(r,i,l,t,n),bw.set(a.get(e),[TA(i+1,l+1)])})),el(SA,((t,n,o)=>{const{row:r,col:s}=o.event;e.onAction({numRows:r+1,numColumns:s+1}),Li(t,yi())}))]),rw.config({initSize:{numRows:t,numColumns:n},mode:"flatgrid",selector:'[role="button"]'})])})]}},RA={inserttable:AA,colorswatch:xA},NA=(e,t)=>Re(RA,e.fancytype).map((n=>n(e,t))),DA=(e,t,n,o=!0,r=!1)=>{const s=r?MO(n.icons):BO(n.icons),a=e=>({isEnabled:()=>!cb.isDisabled(e),setEnabled:t=>cb.set(e,!t),setIconFill:(t,n)=>{fd(e.element,`svg path[id="${t}"], rect[id="${t}"]`).each((e=>{ln(e,"fill",n)}))}}),i=jO({presets:"normal",iconContent:e.icon,textContent:e.text,htmlContent:z.none(),ariaLabel:e.text,caret:z.some(s),checkMark:z.none(),shortcutContent:e.shortcut},n,o);return _O({data:kO(e),getApi:a,enabled:e.enabled,onAction:E,onSetup:e.onSetup,triggersSubmenu:!0,itemBehaviours:[]},i,t,n)},BA=(e,t,n,o=!0)=>{const r=e=>({isEnabled:()=>!cb.isDisabled(e),setEnabled:t=>cb.set(e,!t)}),s=jO({presets:"normal",iconContent:e.icon,textContent:e.text,htmlContent:z.none(),ariaLabel:e.text,caret:z.none(),checkMark:z.none(),shortcutContent:e.shortcut},n,o);return _O({data:kO(e),getApi:r,enabled:e.enabled,onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:[]},s,t,n)},MA=e=>({type:"separator",dom:{tag:"div",classes:[k_,A_]},components:e.text.map(Zc).toArray()}),IA=(e,t,n,o=!0)=>{const r=e=>({setActive:t=>{Kw.set(e,t)},isActive:()=>Kw.isOn(e),isEnabled:()=>!cb.isDisabled(e),setEnabled:t=>cb.set(e,!t)}),s=jO({iconContent:e.icon,textContent:e.text,htmlContent:z.none(),ariaLabel:e.text,checkMark:z.some(DO(n.icons)),caret:z.none(),shortcutContent:e.shortcut,presets:"normal",meta:e.meta},n,o);return Pr(_O({data:kO(e),enabled:e.enabled,getApi:r,onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:[]},s,t,n),{toggling:{toggleClass:T_,toggleOnExecute:!1,selected:e.active}})},PA=VO,LA=MA,FA=BA,zA=DA,jA=IA,UA=NA,HA=qO,$A=(e,t,n,o)=>n.getOrCreate(e,t,o),VA=(e,t,n,o)=>n.getExisting(e,t,o);var WA=Object.freeze({__proto__:null,getCoupled:$A,getExistingCoupled:VA}),qA=[Vs("others",Ds(vr.value,xs()))];const GA=()=>{const e={},t=(t,n)=>{const o=be(t.others);if(0===o.length)throw new Error("Cannot find any known coupled components");return Re(e,n)},n=(n,o,r)=>t(o,r).getOrThunk((()=>{const t=Re(o.others,r).getOrDie("No information found for coupled component: "+r),s=t(n),a=n.getSystem().build(s);return e[r]=a,a})),o=(e,n,o)=>t(n,o).orThunk((()=>(Re(n.others,o).getOrDie("No information found for coupled component: "+o),z.none()))),r=R({});return Hl({readState:r,getExisting:o,getOrCreate:n})};var KA=Object.freeze({__proto__:null,init:GA});const YA=qu({fields:qA,name:"coupling",apis:WA,state:KA}),XA=e=>{let t=z.none(),n=[];const o=e=>XA((t=>{r((n=>{t(e(n))}))})),r=e=>{a()?l(e):n.push(e)},s=e=>{a()||(t=z.some(e),i(n),n=[])},a=()=>t.isSome(),i=e=>{X(e,l)},l=e=>{t.each((t=>{setTimeout((()=>{e(t)}),0)}))};return e(s),{get:r,map:o,isReady:a}},JA=e=>XA((t=>{t(e)})),QA={nu:XA,pure:JA},ZA=e=>{setTimeout((()=>{throw e}),0)},eR=e=>{const t=t=>{e().then(t,ZA)},n=t=>eR((()=>e().then(t))),o=t=>eR((()=>e().then((e=>t(e).toPromise())))),r=t=>eR((()=>e().then((()=>t.toPromise())))),s=()=>QA.nu(t),a=()=>{let t=null;return eR((()=>(null===t&&(t=e()),t)))},i=e;return{map:n,bind:o,anonBind:r,toLazy:s,toCached:a,toPromise:i,get:t}},tR=e=>eR((()=>new Promise(e))),nR=e=>eR((()=>Promise.resolve(e))),oR={nu:tR,pure:nR},rR=R("sink"),sR=R(iv({name:rR(),overrides:R({dom:{tag:"div"},behaviours:Vu([ag.config({useFixed:F})]),events:Vi([tl(ei()),tl(Ga()),tl(ri())])})})),aR=(e,t)=>{const n=e.getHotspot(t).getOr(t),o="hotspot",r=e.getAnchorOverrides();return e.layouts.fold((()=>({type:o,hotspot:n,overrides:r})),(e=>({type:o,hotspot:n,overrides:r,layouts:e})))},iR=(e,t,n)=>{const o=e.fetch;return o(n).map(t)},lR=(e,t,n,o,s,a,i)=>{const l=iR(e,t,o),c=pR(o,e);return l.map((e=>e.bind((e=>z.from(jC.sketch(r(r({},a.menu()),{},{uid:Tl(""),data:e,highlightOnOpen:i,onOpenMenu:(e,t)=>{const o=c().getOrDie();ag.position(o,t,{anchor:n}),Vg.decloak(s)},onOpenSubmenu:(e,t,n)=>{const o=c().getOrDie();ag.position(o,n,{anchor:{type:"submenu",item:t}}),Vg.decloak(s)},onRepositionMenu:(e,t,o)=>{const r=c().getOrDie();ag.position(r,t,{anchor:n}),X(o,(e=>{ag.position(r,e.triggeredMenu,{anchor:{type:"submenu",item:e.triggeringItem}})}))},onEscape:()=>(Aw.focus(o),Vg.close(s),z.some(!0))})))))))},cR=(e,t,n,o,r,s,a)=>{const i=aR(e,n),l=lR(e,t,i,n,o,r,a);return l.map((e=>(e.fold((()=>{Vg.isOpen(o)&&Vg.close(o)}),(e=>{Vg.cloak(o),Vg.open(o,e),s(o)})),o)))},dR=(e,t,n,o,r,s,a)=>(Vg.close(o),oR.pure(o)),uR=(e,t,n,o,r,s)=>{const a=YA.getCoupled(n,"sandbox"),i=Vg.isOpen(a),l=i?dR:cR;return l(e,t,n,a,o,r,s)},mR=(e,t,n)=>{const o=Vv.getCurrent(t).getOr(t),r=jn(e.element);n?vn(o.element,"min-width",r+"px"):zn(o.element,r)},pR=(e,t)=>e.getSystem().getByUid(t.uid+"-"+rR()).map((e=>()=>vr.value(e))).getOrThunk((()=>t.lazySink.fold((()=>()=>vr.error(new Error("No internal sink is specified, nor could an external sink be found"))),(t=>()=>t(e))))),fR=e=>{Vg.getState(e).each((e=>{jC.repositionMenus(e)}))},gR=(e,t,n)=>{const o=bd(),s=(r,s)=>{const a=aR(e,t);o.link(t.element),e.matchWidth&&mR(a.hotspot,s,e.useMinWidth),e.onOpen(a,r,s),void 0!==n&&void 0!==n.onOpen&&n.onOpen(r,s)},a=(e,r)=>{o.unlink(t.element),void 0!==n&&void 0!==n.onClose&&n.onClose(e,r)},i=pR(t,e);return{dom:{tag:"div",classes:e.sandboxClasses,attributes:{id:o.id,role:"listbox"}},behaviours:Rh.augment(e.sandboxBehaviours,[Eh.config({store:{mode:"memory",initialValue:t}}),Vg.config({onOpen:s,onClose:a,isPartOf:(e,n,o)=>xd(n,o)||xd(t,o),getAttachPoint:()=>i().getOrDie()}),Vv.config({find:e=>Vg.getState(e).bind((e=>Vv.getCurrent(e)))}),Xu.config({channels:r(r({},Yg({isExtraPart:L})),Jg({doReposition:fR}))})])}},hR=e=>{const t=YA.getCoupled(e,"sandbox");fR(t)},vR=()=>[ca("sandboxClasses",[]),Rh.field("sandboxBehaviours",[Vv,Xu,Vg,Eh])],bR=R([$s("dom"),$s("fetch"),zd("onOpen"),jd("onExecute"),ca("getHotspot",z.some),ca("getAnchorOverrides",R({})),fp(),Oh("dropdownBehaviours",[Kw,YA,rw,Aw]),$s("toggleClass"),ca("eventOrder",{}),ea("lazySink"),ca("matchWidth",!1),ca("useMinWidth",!1),ea("role")].concat(vR())),yR=R([av({schema:[Pd(),ca("fakeFocus",!1)],name:"menu",defaults:e=>({onExecute:e.onExecute})}),sR()]),xR=(e,t,n,o)=>{const s=t=>Re(e.dom,"attributes").bind((e=>Re(e,t))),a=e=>{Vg.getState(e).each((e=>{jC.highlightPrimary(e)}))},i=(t,n,r)=>uR(e,N,t,o,n,r),l=e=>{const t=a;i(e,t,MC.HighlightMenuAndItem).get(E)},c={expand:e=>{Kw.isOn(e)||i(e,E,MC.HighlightNone).get(E)},open:e=>{Kw.isOn(e)||i(e,E,MC.HighlightMenuAndItem).get(E)},refetch:t=>{const n=YA.getExistingCoupled(t,"sandbox");return n.fold((()=>i(t,E,MC.HighlightMenuAndItem).map(E)),(n=>cR(e,N,t,n,o,E,MC.HighlightMenuAndItem).map(E)))},isOpen:Kw.isOn,close:e=>{Kw.isOn(e)&&i(e,E,MC.HighlightMenuAndItem).get(E)},repositionMenus:e=>{Kw.isOn(e)&&hR(e)}},d=(e,t)=>(zi(e),z.some(!0));return{uid:e.uid,dom:e.dom,components:t,behaviours:Ah(e.dropdownBehaviours,[Kw.config({toggleClass:e.toggleClass,aria:{mode:"expanded"}}),YA.config({others:{sandbox:t=>gR(e,t,{onOpen:()=>Kw.on(t),onClose:()=>Kw.off(t)})}}),rw.config({mode:"special",onSpace:d,onEnter:d,onDown:(e,t)=>{if(wR.isOpen(e)){const t=YA.getCoupled(e,"sandbox");a(t)}else wR.open(e);return z.some(!0)},onEscape:(e,t)=>wR.isOpen(e)?(wR.close(e),z.some(!0)):z.none()}),Aw.config({})]),events:Xw(z.some(l)),eventOrder:r(r({},e.eventOrder),{},{[gi()]:["disabling","toggling","alloy.base.behaviour"]}),apis:c,domModification:{attributes:r(r({"aria-haspopup":"true"},e.role.fold((()=>({})),(e=>({role:e})))),"button"===e.dom.tag?{type:s("type").getOr("button")}:{})}}},wR=zv({name:"Dropdown",configFields:bR(),partFields:yR(),factory:xR,apis:{open:(e,t)=>e.open(t),refetch:(e,t)=>e.refetch(t),expand:(e,t)=>e.expand(t),close:(e,t)=>e.close(t),isOpen:(e,t)=>e.isOpen(t),repositionMenus:(e,t)=>e.repositionMenus(t)}}),CR=e=>{switch(e.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:e}}},SR=e=>{const t=Eh.getValue(e),n=ak(e).map(ck);wR.refetch(t).get((()=>{const e=YA.getCoupled(t,"sandbox");n.each((t=>ak(e).each((e=>lk(e,t)))))}))},_R=(e,t)=>{kR(e).each((n=>{Hi(e,n.element,t.event.eventType,t.event.interactionEvent)}))},kR=e=>Vg.getState(e).bind(Ab.getHighlighted).bind(Ab.getHighlighted),ER=e=>kc(e.element,mk)?z.some(e.element):fd(e.element,"."+mk),OR=(e,t,n)=>{ik(e).each((e=>{dk(e,n);const o=ER(t);o.each((t=>{un(t,"id").each((t=>ln(e.element,"aria-controls",t)))}))})),ln(n.element,"aria-selected","true")},TR=(e,t,n)=>{ln(n.element,"aria-selected","false")},AR=e=>{ik(e).each((e=>Aw.focus(e)))},RR=e=>{const t=YA.getExistingCoupled(e,"sandbox");return t.bind(ak).map(ck).map((e=>e.fetchPattern)).getOr("")};var NR;(function(e){e[e["ContentFocus"]=0]="ContentFocus",e[e["UiFocus"]=1]="UiFocus"})(NR||(NR={}));const DR=(e,t,n,o,s)=>{const a=n.shared.providers,i=e=>s?r(r({},e),{},{shortcut:z.none(),icon:e.text.isSome()?z.none():e.icon}):e;switch(e.type){case"menuitem":return jE(e).fold(_k,(e=>z.some(FA(i(e),t,a,o))));case"nestedmenuitem":return HE(e).fold(_k,(e=>z.some(zA(i(e),t,a,o,s))));case"togglemenuitem":return VE(e).fold(_k,(e=>z.some(jA(i(e),t,a,o))));case"separator":return oE(e).fold(_k,(e=>z.some(LA(e))));case"fancymenuitem":return FE(e).fold(_k,(e=>UA(e,n)));default:return console.error("Unknown item in general menu",e),z.none()}},BR=(e,t,n,o,s,a,i)=>{const l=1===o,c=!l||Sk(e);return Ie(Y(e,(e=>{switch(e.type){case"separator":return sE(e).fold(_k,(e=>z.some(LA(e))));case"cardmenuitem":return NE(e).fold(_k,(e=>z.some(HA(r(r({},e),{},{onAction:t=>{e.onAction(t),n(e.value,e.meta)}}),s,a,{itemBehaviours:UO(e.meta,a),cardText:{matchText:t,highlightOn:i}}))));case"autocompleteitem":default:return aE(e).fold(_k,(e=>z.some(PA(e,t,l,"normal",n,s,a,c))))}})))},MR=(e,t,n,o,s,a)=>{const i=Sk(t),l=Ie(Y(t,(e=>{const t=e=>s?!Ne(e,"text"):i,a=e=>DR(e,n,o,t(e),s);return"nestedmenuitem"===e.type&&e.getSubmenuItems().length<=0?a(r(r({},e),{},{enabled:!1})):a(e)}))),c=CR(a),d=s?kk:Ek;return d(e,i,l,1,c)},IR=e=>jC.singleData(e.value,e),PR=(e,t,n,o)=>{const s=bA(t,o),a=G_(o);return{data:IR(r(r({},e),{},{movement:s,menuBehaviours:KE.unnamedEvents("auto"!==t?[]:[rl(((e,t)=>{WE(e,4,a.item).each((({numColumns:t,numRows:n})=>{rw.setGridSize(e,n,t)}))}))])})),menu:{markers:G_(o),fakeFocus:n===NR.ContentFocus}}},LR=(e,t)=>b_(st.fromDom(t.startContainer)).map((t=>{const n=e.createRng();return n.selectNode(t.dom),n})),FR=(e,t)=>{const n=ya(!1),o=ya(!1),r=rd($C.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],fireDismissalEventInstead:{},inlineBehaviours:Vu([xw("dismissAutocompleter",[Ki(Ti(),(()=>c()))])]),lazySink:t.getSink})),s=()=>$C.isOpen(r),a=o.get,i=()=>{s()&&$C.hide(r)},l=()=>$C.getContent(r).bind((e=>pe(e.components(),0))),c=()=>e.execCommand("mceAutocompleterClose"),d=o=>{const r=ve(o,(e=>z.from(e.columns))).getOr(1);return ae(o,(o=>{const s=o.items;return BR(s,o.matchText,((t,r)=>{const s=e.selection.getRng();LR(e.dom,s).each((s=>{const a={hide:()=>c(),reload:t=>{i(),e.execCommand("mceAutocompleterReload",!1,{fetchOptions:t})}};n.set(!0),o.onAction(a,s,t,r),n.set(!1)}))}),r,S_.BUBBLE_TO_SANDBOX,t,o.highlightOn)}))},u=(t,n)=>{y_(st.fromDom(e.getBody())).each((o=>{const s=ve(t,(e=>z.from(e.columns))).getOr(1);$C.showMenuAt(r,{anchor:{type:"node",root:st.fromDom(e.getBody()),node:z.from(o)}},PR(Ek("autocompleter-value",!0,n,s,{menuType:"normal"}),s,NR.ContentFocus,"normal"))})),l().each(Ab.highlightFirst)},m=e=>{const t=d(e);t.length>0?u(e,t):i()};e.on("AutocompleterStart",(({lookupData:e})=>{o.set(!0),n.set(!1),m(e)})),e.on("AutocompleterUpdate",(({lookupData:e})=>m(e))),e.on("AutocompleterEnd",(()=>{i(),o.set(!1),n.set(!1)}));const p={cancelIfNecessary:c,isMenuOpen:s,isActive:a,isProcessingAction:n.get,getMenu:l};w_.setup(p,e)},zR={register:FR},jR=["visible","hidden"],UR=e=>{if(wt(e)){const t=xn(e,"overflow");return Xe(t).length>0&&!W(jR,t)}return!1},HR=e=>{const t=ff(e,UR);return fe(t).map((e=>({element:e,others:t.slice(1)})))},$R=(e,t)=>f_(e)?HR(t):z.none(),VR=e=>{const t=[...Y(e.others,lr),mr()];return ur(lr(e.element),t)},WR=(e,t,n)=>gd(e,t,n).isSome(),qR=(e,t)=>{let n=null;const o=(...o)=>{n=setTimeout((()=>{e.apply(null,o),n=null}),t)},r=()=>{null!==n&&(clearTimeout(n),n=null)};return{cancel:r,schedule:o}},GR=5,KR=400,YR=e=>{const t=e.raw;return void 0===t.touches||1!==t.touches.length?z.none():z.some(t.touches[0])},XR=(e,t)=>{const n=Math.abs(e.clientX-t.x),o=Math.abs(e.clientY-t.y);return n>GR||o>GR},JR=e=>{const t=Dm(),n=ya(!1),o=qR((t=>{e.triggerEvent(bi(),t),n.set(!0)}),KR),r=e=>(YR(e).each((r=>{o.cancel();const s={x:r.clientX,y:r.clientY,target:e.target};o.schedule(e),n.set(!1),t.set(s)})),z.none()),s=e=>(o.cancel(),YR(e).each((e=>{t.on((n=>{XR(e,n)&&t.clear()}))})),z.none()),a=r=>{o.cancel();const s=e=>Nt(e.target,r.target);return t.get().filter(s).map((t=>n.get()?(r.prevent(),!1):e.triggerEvent(vi(),r)))},i=Ta([{key:$a(),value:r},{key:Va(),value:s},{key:Wa(),value:a}]),l=(e,t)=>Re(i,t).bind((t=>t(e)));return{fireIfReady:l}},QR=e=>{const t=e.raw;return t.which===Rb[0]&&!W(["input","textarea"],bt(e.target))&&!WR(e.target,'[contenteditable="true"]')},ZR=(e,t)=>{const n=r({stopBackspace:!0},t),o=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],s=JR(n),a=Y(o.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),(t=>Mm(e,t,(e=>{s.fireIfReady(e,t).each((t=>{t&&e.kill()}));const o=n.triggerEvent(t,e);o&&e.kill()})))),i=Dm(),l=Mm(e,"paste",(e=>{s.fireIfReady(e,"paste").each((t=>{t&&e.kill()}));const t=n.triggerEvent("paste",e);t&&e.kill(),i.set(setTimeout((()=>{n.triggerEvent(pi(),e)}),0))})),c=Mm(e,"keydown",(e=>{const t=n.triggerEvent("keydown",e);t?e.kill():n.stopBackspace&&QR(e)&&e.prevent()})),d=Mm(e,"focusin",(e=>{const t=n.triggerEvent("focusin",e);t&&e.kill()})),u=Dm(),m=Mm(e,"focusout",(e=>{const t=n.triggerEvent("focusout",e);t&&e.kill(),u.set(setTimeout((()=>{n.triggerEvent(mi(),e)}),0))})),p=()=>{X(a,(e=>{e.unbind()})),c.unbind(),d.unbind(),m.unbind(),l.unbind(),i.on(clearTimeout),u.on(clearTimeout)};return{unbind:p}},eN=(e,t)=>{const n=Re(e,"target").getOr(t);return ya(n)},tN=(e,t)=>{const n=ya(!1),o=ya(!1),r=()=>{n.set(!0)},s=()=>{o.set(!0)};return{stop:r,cut:s,isStopped:n.get,isCut:o.get,event:e,setSource:t.set,getSource:t.get}},nN=e=>{const t=ya(!1),n=()=>{t.set(!0)};return{stop:n,cut:E,isStopped:t.get,isCut:L,event:e,setSource:I("Cannot set source of a broadcasted event"),getSource:I("Cannot get source of a broadcasted event")}},oN=wa.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),rN=(e,t,n,o,r,s)=>{const a=e(t,o),i=tN(n,r);return a.fold((()=>(s.logEventNoHandlers(t,o),oN.complete())),(e=>{const n=e.descHandler,o=ec(n);return o(i),i.isStopped()?(s.logEventStopped(t,e.element,n.purpose),oN.stopped()):i.isCut()?(s.logEventCut(t,e.element,n.purpose),oN.complete()):Lt(e.element).fold((()=>(s.logNoParent(t,e.element,n.purpose),oN.complete())),(o=>(s.logEventResponse(t,e.element,n.purpose),oN.resume(o))))}))},sN=(e,t,n,o,r,s)=>rN(e,t,n,o,r,s).fold(F,(o=>sN(e,t,n,o,r,s)),L),aN=(e,t,n,o,r)=>{const s=eN(n,o);return rN(e,t,n,o,s,r)},iN=(e,t,n)=>{const o=nN(t);return X(e,(e=>{const t=e.descHandler,n=ec(t);n(o)})),o.isStopped()},lN=(e,t,n,o)=>cN(e,t,n,n.target,o),cN=(e,t,n,o,r)=>{const s=eN(n,o);return sN(e,t,n,o,s,r)},dN=(e,t)=>({element:e,descHandler:t}),uN=(e,t)=>({id:e,descHandler:t}),mN=()=>{const e={},t=(t,n,o)=>{xe(o,((o,r)=>{const s=void 0!==e[r]?e[r]:{};s[n]=Zl(o,t),e[r]=s}))},n=(e,t)=>Ol(t).bind((t=>Re(e,t))).map((e=>dN(t,e))),o=t=>Re(e,t).map((e=>Oe(e,((e,t)=>uN(t,e))))).getOr([]),r=(t,o,r)=>Re(e,o).bind((e=>Ma(r,(t=>n(e,t)),t))),s=t=>{xe(e,((e,n)=>{Ne(e,t)&&delete e[t]}))};return{registerId:t,unregisterId:s,filterByType:o,find:r}},pN=()=>{const e=mN(),t={},n=e=>{const t=e.element;return Ol(t).getOrThunk((()=>kl("uid-",e.element)))},o=(e,n)=>{const o=t[n];if(o!==e)throw new Error('The tagId "'+n+'" is already used by: '+gl(o.element)+"\nCannot use it for: "+gl(e.element)+"\nThe conflicting element is"+(on(o.element)?" ":" not ")+"already in the DOM");s(e)},r=r=>{const s=n(r);De(t,s)&&o(r,s);const a=[r];e.registerId(a,s,r.events),t[s]=r},s=n=>{Ol(n.element).each((n=>{delete t[n],e.unregisterId(n)}))},a=t=>e.filterByType(t),i=(t,n,o)=>e.find(t,n,o),l=e=>Re(t,e);return{find:i,filter:a,register:r,unregister:s,getById:l}},fN=e=>{const t=e.dom,{attributes:n}=t,s=o(t,i);return{uid:e.uid,dom:r({tag:"div",attributes:r({role:"presentation"},n)},s),components:e.components,behaviours:Th(e.containerBehaviours),events:e.events,domModification:e.domModification,eventOrder:e.eventOrder}},gN=Fv({name:"Container",factory:fN,configFields:[ca("components",[]),Oh("containerBehaviours",[]),ca("events",{}),ca("domModification",{}),ca("eventOrder",{})]}),hN=e=>{const t=t=>Lt(e.element).fold(F,(e=>Nt(t,e))),n=pN(),o=(e,o)=>n.find(t,e,o),r=ZR(e.element,{triggerEvent:(e,t)=>Ad(e,t.target,(n=>lN(o,e,t,n)))}),s={debugInfo:R("real"),triggerEvent:(e,t,n)=>{Ad(e,t,(r=>cN(o,e,n,t,r)))},triggerFocus:(e,t)=>{Ol(e).fold((()=>{Zu(e)}),(n=>{Ad(ui(),e,(n=>(aN(o,ui(),{originator:t,kill:E,prevent:E,target:e},e,n),!1)))}))},triggerEscape:(e,t)=>{s.triggerEvent("keydown",e.element,t.event)},getByUid:e=>g(e),getByDom:e=>h(e),build:rd,buildOrPatch:od,addToGui:e=>{l(e)},removeFromGui:e=>{c(e)},addToWorld:e=>{a(e)},removeFromWorld:e=>{i(e)},broadcast:e=>{m(e)},broadcastOn:(e,t)=>{p(e,t)},broadcastEvent:(e,t)=>{f(e,t)},isConnected:F},a=e=>{e.connect(s),St(e.element)||(n.register(e),X(e.components(),a),s.triggerEvent(wi(),e.element,{target:e.element}))},i=e=>{St(e.element)||(X(e.components(),i),n.unregister(e)),e.disconnect()},l=t=>{hg(e,t)},c=e=>{yg(e)},d=()=>{r.unbind(),qo(e.element)},u=e=>{const t=n.filter(fi());X(t,(t=>{const n=t.descHandler,o=ec(n);o(e)}))},m=e=>{u({universal:!0,data:e})},p=(e,t)=>{u({universal:!1,channels:e,data:t})},f=(e,t)=>{const o=n.filter(e);return iN(o,t)},g=e=>n.getById(e).fold((()=>vr.error(new Error('Could not find component with uid: "'+e+'" in system.'))),vr.value),h=e=>{const t=Ol(e).getOr("not found");return g(t)};return a(e),{root:e,element:e.element,destroy:d,add:l,remove:c,getByUid:g,getByDom:h,addToWorld:a,removeFromWorld:i,broadcast:m,broadcastOn:p,broadcastEvent:f}},vN=(e,t)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:Y(e.items,t.interpreter)}),bN=R([ca("prefix","form-field"),Oh("fieldBehaviours",[Vv,Eh])]),yN=R([iv({schema:[$s("dom")],name:"label"}),iv({factory:{sketch:e=>({uid:e.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:e.text}})},schema:[$s("text")],name:"aria-descriptor"}),sv({factory:{sketch:e=>{const t=Ea(e,["factory"]);return e.factory.sketch(t)}},schema:[$s("factory")],name:"field"})]),xN=(e,t,n,o)=>{const r=Ah(e.fieldBehaviours,[Vv.config({find:t=>xv(t,e,"field")}),Eh.config({store:{mode:"manual",getValue:e=>Vv.getCurrent(e).bind(Eh.getValue),setValue:(e,t)=>{Vv.getCurrent(e).each((e=>{Eh.setValue(e,t)}))}}})]),s=Vi([rl(((t,n)=>{const o=Cv(t,e,["label","field","aria-descriptor"]);o.field().each((t=>{const n=xl(e.prefix);o.label().each((e=>{ln(e.element,"for",n),ln(t.element,"id",n)})),o["aria-descriptor"]().each((n=>{const o=xl(e.prefix);ln(n.element,"id",o),ln(t.element,"aria-describedby",o)}))}))}))]),a={getField:t=>xv(t,e,"field"),getLabel:t=>xv(t,e,"label")};return{uid:e.uid,dom:e.dom,components:t,behaviours:r,events:s,apis:a}},wN=zv({name:"FormField",configFields:bN(),partFields:yN(),factory:xN,apis:{getField:(e,t)=>e.getField(t),getLabel:(e,t)=>e.getLabel(t)}}),CN=(e,t)=>Gl({attributes:Ta([{key:t.tabAttr,value:"true"}])});var SN=Object.freeze({__proto__:null,exhibit:CN}),_N=[ca("tabAttr","data-alloy-tabstop")];const kN=qu({fields:_N,name:"tabstopping",active:SN});var EN=tinymce.util.Tools.resolve("tinymce.html.Entities");const ON=(e,t,n,o)=>{const r=AN(e,t,n,o);return wN.sketch(r)},TN=(e,t)=>ON(e,t,[],[]),AN=(e,t,n,o)=>({dom:NN(n),components:e.toArray().concat([t]),fieldBehaviours:Vu(o)}),RN=()=>NN([]),NN=e=>({tag:"div",classes:["tox-form__group"].concat(e)}),DN=(e,t)=>wN.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Zc(t.translate(e))]}),BN=xl("form-component-change"),MN=xl("form-close"),IN=xl("form-cancel"),PN=xl("form-action"),LN=xl("form-submit"),FN=xl("form-block"),zN=xl("form-unblock"),jN=xl("form-tabchange"),UN=xl("form-resize"),HN=(e,t,n)=>{const o=e.label.map((e=>DN(e,t))),r=e=>(t,n)=>{gd(n.event.target,"[data-collection-item-value]").each((o=>{e(t,n,o,dn(o,"data-collection-item-value"))}))},s=(n,o)=>{const r=Y(o,(n=>{const o=KC.translate(n.text),r=1===e.columns?`<div class="tox-collection__item-label">${o}</div>`:"",s=`<div class="tox-collection__item-icon">${n.icon}</div>`,a={_:" "," - ":" ","-":" "},i=o.replace(/\_| \- |\-/g,(e=>a[e])),l=t.isDisabled()?" tox-collection__item--state-disabled":"";return`<div class="tox-collection__item${l}" tabindex="-1" data-collection-item-value="${EN.encodeAllRaw(n.value)}" title="${i}" aria-label="${i}">${s}${r}</div>`})),s="auto"!==e.columns&&e.columns>1?K(r,e.columns):[r],a=Y(s,(e=>`<div class="tox-collection__group">${e.join("")}</div>`));dl(n.element,a.join(""))},a=r(((n,o,r,s)=>{o.stop(),t.isDisabled()||Fi(n,PN,{name:e.name,value:s})})),i=[Ki(Ja(),r(((e,t,n)=>{Zu(n)}))),Ki(ri(),a),Ki(vi(),a),Ki(Qa(),r(((e,t,n)=>{fd(e.element,"."+I_).each((e=>{_c(e,I_)})),Cc(n,I_)}))),Ki(Za(),r((e=>{fd(e.element,"."+I_).each((e=>{_c(e,I_)}))}))),il(r(((t,n,o,r)=>{Fi(t,PN,{name:e.name,value:r})})))],l=(e,t)=>Y(gf(e.element,".tox-collection__item"),t),c=wN.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(1!==e.columns?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:N},behaviours:Vu([cb.config({disabled:t.isDisabled,onDisabled:e=>{l(e,(e=>{Cc(e,"tox-collection__item--state-disabled"),ln(e,"aria-disabled",!0)}))},onEnabled:e=>{l(e,(e=>{_c(e,"tox-collection__item--state-disabled"),pn(e,"aria-disabled")}))}}),mO(),bw.config({}),Eh.config({store:{mode:"memory",initialValue:n.getOr([])},onSetValue:(t,n)=>{s(t,n),"auto"===e.columns&&WE(t,5,"tox-collection__item").each((({numRows:e,numColumns:n})=>{rw.setGridSize(t,e,n)})),Li(t,UN)}}),kN.config({}),rw.config(yA(e.columns,"normal")),xw("collection-events",i)]),eventOrder:{[gi()]:["disabling","alloy.base.behaviour","collection-events"]}}),d=["tox-form__group--collection"];return ON(o,c,d,[])},$N=["input","textarea"],VN=e=>{const t=bt(e);return W($N,t)},WN=(e,t)=>{const n=t.getRoot(e).getOr(e.element);_c(n,t.invalidClass),t.notify.each((t=>{VN(e.element)&&ln(e.element,"aria-invalid",!1),t.getContainer(e).each((e=>{dl(e,t.validHtml)})),t.onValid(e)}))},qN=(e,t,n,o)=>{const r=t.getRoot(e).getOr(e.element);Cc(r,t.invalidClass),t.notify.each((t=>{VN(e.element)&&ln(e.element,"aria-invalid",!0),t.getContainer(e).each((e=>{dl(e,o)})),t.onInvalid(e,o)}))},GN=(e,t,n)=>t.validator.fold((()=>oR.pure(vr.value(!0))),(t=>t.validate(e))),KN=(e,t,n)=>(t.notify.each((t=>{t.onValidate(e)})),GN(e,t).map((o=>e.getSystem().isConnected()?o.fold((o=>(qN(e,t,n,o),vr.error(o))),(n=>(WN(e,t),vr.value(n)))):vr.error("No longer in system")))),YN=(e,t)=>{const n=t.getRoot(e).getOr(e.element);return kc(n,t.invalidClass)};var XN=Object.freeze({__proto__:null,markValid:WN,markInvalid:qN,query:GN,run:KN,isInvalid:YN});const JN=(e,t)=>e.validator.map((n=>Vi([Ki(n.onEvent,(n=>{KN(n,e,t).get(N)}))].concat(n.validateOnLoad?[rl((n=>{KN(n,e,t).get(E)}))]:[])))).getOr({});var QN=Object.freeze({__proto__:null,events:JN}),ZN=[$s("invalidClass"),ca("getRoot",z.none),ia("notify",[ca("aria","alert"),ca("getContainer",z.none),ca("validHtml",""),zd("onValid"),zd("onInvalid"),zd("onValidate")]),ia("validator",[$s("validate"),ca("onEvent","input"),ca("validateOnLoad",!0)])];const eD=qu({fields:ZN,name:"invalidating",active:QN,apis:XN,extra:{validation:e=>t=>{const n=Eh.getValue(t);return oR.pure(e(n))}}}),tD=()=>Gl({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}}),nD=()=>Vi([Wi(li(),F)]);var oD=Object.freeze({__proto__:null,events:nD,exhibit:tD});const rD=qu({fields:[],name:"unselecting",active:oD}),sD=(e,t)=>wR.sketch({dom:e.dom,components:e.components,toggleClass:"mce-active",dropdownBehaviours:Vu([vO.button(t.providers.isDisabled),mO(),rD.config({}),kN.config({})]),layouts:e.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:t.getSink,fetch:n=>oR.nu((t=>e.fetch(t))).map((o=>z.from(IR(Pr(hA(xl("menu-value"),o,(t=>{e.onItemAction(n,t)}),e.columns,e.presets,S_.CLOSE_ON_EXECUTE,L,t.providers),{movement:bA(e.columns,e.presets)}))))),parts:{menu:X_(!1,1,e.presets)}}),aD=xl("color-input-change"),iD=xl("color-swatch-change"),lD=xl("color-picker-cancel"),cD=(e,t,n,o)=>{const r=wN.parts.field({factory:nk,inputClasses:["tox-textfield"],data:o,onSetValue:e=>eD.run(e).get(E),inputBehaviours:Vu([cb.config({disabled:t.providers.isDisabled}),mO(),kN.config({}),eD.config({invalidClass:"tox-textbox-field-invalid",getRoot:e=>Ft(e.element),notify:{onValid:e=>{const t=Eh.getValue(e);Fi(e,aD,{color:t})}},validator:{validateOnLoad:!1,validate:e=>{const t=Eh.getValue(e);if(0===t.length)return oR.pure(vr.value(!0));{const e=st.fromTag("span");vn(e,"background-color",t);const n=Cn(e,"background-color").fold((()=>vr.error("blah")),(e=>vr.value(t)));return oR.pure(n)}}}})]),selectOnFocus:!1}),s=e.label.map((e=>DN(e,t.providers))),a=(e,t)=>{Fi(e,iD,{value:t})},i=(t,o)=>{l.getOpt(t).each((t=>{"custom"===o?n.colorPicker((n=>{n.fold((()=>Li(t,lD)),(n=>{a(t,n),DT(e.storageKey,n)}))}),"#ffffff"):a(t,"remove"===o?"":o)}))},l=GC(sD({dom:{tag:"span",attributes:{"aria-label":t.providers.translate("Color swatch")}},layouts:{onRtl:()=>[xu,yu,_u],onLtr:()=>[yu,xu,_u]},components:[],fetch:cA(n.getColors(e.storageKey),e.storageKey,n.hasCustomColors()),columns:n.getColorCols(e.storageKey),presets:"color",onItemAction:i},t));return wN.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:s.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[r,l.asSpec()]}]),fieldBehaviours:Vu([xw("form-field-events",[Ki(aD,((t,n)=>{l.getOpt(t).each((e=>{vn(e.element,"background-color",n.event.color)})),Fi(t,BN,{name:e.name})})),Ki(iD,((e,t)=>{wN.getField(e).each((n=>{Eh.setValue(n,t.event.value),Vv.getCurrent(e).each(Aw.focus)}))})),Ki(lD,((e,t)=>{wN.getField(e).each((t=>{Vv.getCurrent(e).each(Aw.focus)}))}))])])})},dD=iv({schema:[$s("dom")],name:"label"}),uD=e=>iv({name:e+"-edge",overrides:t=>{const n=t.model.manager.edgeActions[e];return n.fold((()=>({})),(e=>({events:Vi([Yi($a(),((t,n,o)=>e(t,o)),[t]),Yi(Ga(),((t,n,o)=>e(t,o)),[t]),Yi(Ka(),((t,n,o)=>{o.mouseIsDown.get()&&e(t,o)}),[t])])})))}}),mD=uD("top-left"),pD=uD("top"),fD=uD("top-right"),gD=uD("right"),hD=uD("bottom-right"),vD=uD("bottom"),bD=uD("bottom-left"),yD=uD("left"),xD=sv({name:"thumb",defaults:R({dom:{styles:{position:"absolute"}}}),overrides:e=>({events:Vi([Zi($a(),e,"spectrum"),Zi(Va(),e,"spectrum"),Zi(Wa(),e,"spectrum"),Zi(Ga(),e,"spectrum"),Zi(Ka(),e,"spectrum"),Zi(Xa(),e,"spectrum")])})}),wD=sv({schema:[Us("mouseIsDown",(()=>ya(!1)))],name:"spectrum",overrides:e=>{const t=e.model,n=t.manager,o=(t,o)=>n.getValueFromEvent(o).map((o=>n.setValueFrom(t,e,o)));return{behaviours:Vu([rw.config({mode:"special",onLeft:t=>n.onLeft(t,e),onRight:t=>n.onRight(t,e),onUp:t=>n.onUp(t,e),onDown:t=>n.onDown(t,e)}),Aw.config({})]),events:Vi([Ki($a(),o),Ki(Va(),o),Ki(Ga(),o),Ki(Ka(),((t,n)=>{e.mouseIsDown.get()&&o(t,n)}))])}}});var CD=[dD,yD,gD,pD,vD,mD,fD,bD,hD,xD,wD];const SD="slider.change.value",_D=R(SD),kD=e=>-1!==e.type.indexOf("touch"),ED=e=>{const t=e.event.raw;if(kD(t)){const e=t;return void 0!==e.touches&&1===e.touches.length?z.some(e.touches[0]).map((e=>Bn(e.clientX,e.clientY))):z.none()}{const e=t;return void 0!==e.clientX?z.some(e).map((e=>Bn(e.clientX,e.clientY))):z.none()}},OD="top",TD="right",AD="bottom",RD="left",ND=e=>e.model.minX,DD=e=>e.model.minY,BD=e=>e.model.minX-1,MD=e=>e.model.minY-1,ID=e=>e.model.maxX,PD=e=>e.model.maxY,LD=e=>e.model.maxX+1,FD=e=>e.model.maxY+1,zD=(e,t,n)=>t(e)-n(e),jD=e=>zD(e,ID,ND),UD=e=>zD(e,PD,DD),HD=e=>jD(e)/2,$D=e=>UD(e)/2,VD=e=>e.stepSize,WD=e=>e.snapToGrid,qD=e=>e.snapStart,GD=e=>e.rounded,KD=(e,t)=>void 0!==e[t+"-edge"],YD=e=>KD(e,RD),XD=e=>KD(e,TD),JD=e=>KD(e,OD),QD=e=>KD(e,AD),ZD=e=>e.model.value.get(),eB=(e,t)=>({x:e,y:t}),tB=(e,t)=>{Fi(e,_D(),{value:t})},nB=(e,t)=>{tB(e,eB(BD(t),MD(t)))},oB=(e,t)=>{tB(e,MD(t))},rB=(e,t)=>{tB(e,eB(HD(t),MD(t)))},sB=(e,t)=>{tB(e,eB(LD(t),MD(t)))},aB=(e,t)=>{tB(e,LD(t))},iB=(e,t)=>{tB(e,eB(LD(t),$D(t)))},lB=(e,t)=>{tB(e,eB(LD(t),FD(t)))},cB=(e,t)=>{tB(e,FD(t))},dB=(e,t)=>{tB(e,eB(HD(t),FD(t)))},uB=(e,t)=>{tB(e,eB(BD(t),FD(t)))},mB=(e,t)=>{tB(e,BD(t))},pB=(e,t)=>{tB(e,eB(BD(t),$D(t)))},fB=(e,t,n,o)=>e<t?e:e>n?n:e===t?t-1:Math.max(t,e-o),gB=(e,t,n,o)=>e>n?e:e<t?t:e===n?n+1:Math.min(n,e+o),hB=(e,t,n)=>Math.max(t,Math.min(n,e)),vB=(e,t,n,o,r)=>r.fold((()=>{const r=e-t,s=Math.round(r/o)*o;return hB(t+s,t-1,n+1)}),(t=>{const r=(e-t)%o,s=Math.round(r/o),a=Math.floor((e-t)/o),i=Math.floor((n-t)/o),l=Math.min(i,a+s),c=t+l*o;return Math.max(t,c)})),bB=(e,t,n)=>Math.min(n,Math.max(e,t))-t,yB=e=>{const{min:t,max:n,range:o,value:r,step:s,snap:a,snapStart:i,rounded:l,hasMinEdge:c,hasMaxEdge:d,minBound:u,maxBound:m,screenRange:p}=e,f=c?t-1:t,g=d?n+1:n;if(r<u)return f;if(r>m)return g;{const e=bB(r,u,m),c=hB(e/p*o+t,f,g);return a&&c>=t&&c<=n?vB(c,t,n,s,i):l?Math.round(c):c}},xB=e=>{const{min:t,max:n,range:o,value:r,hasMinEdge:s,hasMaxEdge:a,maxBound:i,maxOffset:l,centerMinEdge:c,centerMaxEdge:d}=e;return r<t?s?0:c:r>n?a?i:d:(r-t)/o*l},wB="top",CB="right",SB="bottom",_B="left",kB="width",EB="height",OB=e=>e.element.dom.getBoundingClientRect(),TB=(e,t)=>e[t],AB=e=>{const t=OB(e);return TB(t,_B)},RB=e=>{const t=OB(e);return TB(t,CB)},NB=e=>{const t=OB(e);return TB(t,wB)},DB=e=>{const t=OB(e);return TB(t,SB)},BB=e=>{const t=OB(e);return TB(t,kB)},MB=e=>{const t=OB(e);return TB(t,EB)},IB=(e,t,n)=>(e+t)/2-n,PB=(e,t)=>{const n=OB(e),o=OB(t),r=TB(n,_B),s=TB(n,CB),a=TB(o,_B);return IB(r,s,a)},LB=(e,t)=>{const n=OB(e),o=OB(t),r=TB(n,wB),s=TB(n,SB),a=TB(o,wB);return IB(r,s,a)},FB=(e,t)=>{Fi(e,_D(),{value:t})},zB=(e,t,n)=>{const o={min:ND(t),max:ID(t),range:jD(t),value:n,step:VD(t),snap:WD(t),snapStart:qD(t),rounded:GD(t),hasMinEdge:YD(t),hasMaxEdge:XD(t),minBound:AB(e),maxBound:RB(e),screenRange:BB(e)};return yB(o)},jB=(e,t,n)=>{const o=zB(e,t,n),r=o;return FB(e,r),o},UB=(e,t)=>{const n=ND(t);FB(e,n)},HB=(e,t)=>{const n=ID(t);FB(e,n)},$B=(e,t,n)=>{const o=e>0?gB:fB,r=o(ZD(n),ND(n),ID(n),VD(n));return FB(t,r),z.some(r)},VB=e=>(t,n)=>$B(e,t,n).map(F),WB=e=>{const t=ED(e);return t.map((e=>e.left))},qB=(e,t,n,o,r)=>{const s=0,a=BB(e),i=o.bind((t=>z.some(PB(t,e)))).getOr(s),l=r.bind((t=>z.some(PB(t,e)))).getOr(a),c={min:ND(t),max:ID(t),range:jD(t),value:n,hasMinEdge:YD(t),hasMaxEdge:XD(t),minBound:AB(e),minOffset:s,maxBound:RB(e),maxOffset:a,centerMinEdge:i,centerMaxEdge:l};return xB(c)},GB=(e,t,n,o,r,s)=>{const a=qB(t,s,n,o,r);return AB(t)-AB(e)+a},KB=(e,t,n,o)=>{const r=ZD(n),s=GB(e,o.getSpectrum(e),r,o.getLeftEdge(e),o.getRightEdge(e),n),a=jn(t.element)/2;vn(t.element,"left",s-a+"px")},YB=VB(-1),XB=VB(1),JB=z.none,QB=z.none,ZB={"top-left":z.none(),top:z.none(),"top-right":z.none(),right:z.some(aB),"bottom-right":z.none(),bottom:z.none(),"bottom-left":z.none(),left:z.some(mB)};var eM=Object.freeze({__proto__:null,setValueFrom:jB,setToMin:UB,setToMax:HB,findValueOfOffset:zB,getValueFromEvent:WB,findPositionOfValue:GB,setPositionFromValue:KB,onLeft:YB,onRight:XB,onUp:JB,onDown:QB,edgeActions:ZB});const tM=(e,t)=>{Fi(e,_D(),{value:t})},nM=(e,t,n)=>{const o={min:DD(t),max:PD(t),range:UD(t),value:n,step:VD(t),snap:WD(t),snapStart:qD(t),rounded:GD(t),hasMinEdge:JD(t),hasMaxEdge:QD(t),minBound:NB(e),maxBound:DB(e),screenRange:MB(e)};return yB(o)},oM=(e,t,n)=>{const o=nM(e,t,n),r=o;return tM(e,r),o},rM=(e,t)=>{const n=DD(t);tM(e,n)},sM=(e,t)=>{const n=PD(t);tM(e,n)},aM=(e,t,n)=>{const o=e>0?gB:fB,r=o(ZD(n),DD(n),PD(n),VD(n));return tM(t,r),z.some(r)},iM=e=>(t,n)=>aM(e,t,n).map(F),lM=e=>{const t=ED(e);return t.map((e=>e.top))},cM=(e,t,n,o,r)=>{const s=0,a=MB(e),i=o.bind((t=>z.some(LB(t,e)))).getOr(s),l=r.bind((t=>z.some(LB(t,e)))).getOr(a),c={min:DD(t),max:PD(t),range:UD(t),value:n,hasMinEdge:JD(t),hasMaxEdge:QD(t),minBound:NB(e),minOffset:s,maxBound:DB(e),maxOffset:a,centerMinEdge:i,centerMaxEdge:l};return xB(c)},dM=(e,t,n,o,r,s)=>{const a=cM(t,s,n,o,r);return NB(t)-NB(e)+a},uM=(e,t,n,o)=>{const r=ZD(n),s=dM(e,o.getSpectrum(e),r,o.getTopEdge(e),o.getBottomEdge(e),n),a=An(t.element)/2;vn(t.element,"top",s-a+"px")},mM=z.none,pM=z.none,fM=iM(-1),gM=iM(1),hM={"top-left":z.none(),top:z.some(oB),"top-right":z.none(),right:z.none(),"bottom-right":z.none(),bottom:z.some(cB),"bottom-left":z.none(),left:z.none()};var vM=Object.freeze({__proto__:null,setValueFrom:oM,setToMin:rM,setToMax:sM,findValueOfOffset:nM,getValueFromEvent:lM,findPositionOfValue:dM,setPositionFromValue:uM,onLeft:mM,onRight:pM,onUp:fM,onDown:gM,edgeActions:hM});const bM=(e,t)=>{Fi(e,_D(),{value:t})},yM=(e,t)=>({x:e,y:t}),xM=(e,t,n)=>{const o=zB(e,t,n.left),r=nM(e,t,n.top),s=yM(o,r);return bM(e,s),s},wM=(e,t,n,o)=>{const r=e>0?gB:fB,s=t?ZD(o).x:r(ZD(o).x,ND(o),ID(o),VD(o)),a=t?r(ZD(o).y,DD(o),PD(o),VD(o)):ZD(o).y;return bM(n,yM(s,a)),z.some(s)},CM=(e,t)=>(n,o)=>wM(e,t,n,o).map(F),SM=(e,t)=>{const n=ND(t),o=DD(t);bM(e,yM(n,o))},_M=(e,t)=>{const n=ID(t),o=PD(t);bM(e,yM(n,o))},kM=e=>ED(e),EM=(e,t,n,o)=>{const r=ZD(n),s=GB(e,o.getSpectrum(e),r.x,o.getLeftEdge(e),o.getRightEdge(e),n),a=dM(e,o.getSpectrum(e),r.y,o.getTopEdge(e),o.getBottomEdge(e),n),i=jn(t.element)/2,l=An(t.element)/2;vn(t.element,"left",s-i+"px"),vn(t.element,"top",a-l+"px")},OM=CM(-1,!1),TM=CM(1,!1),AM=CM(-1,!0),RM=CM(1,!0),NM={"top-left":z.some(nB),top:z.some(rB),"top-right":z.some(sB),right:z.some(iB),"bottom-right":z.some(lB),bottom:z.some(dB),"bottom-left":z.some(uB),left:z.some(pB)};var DM=Object.freeze({__proto__:null,setValueFrom:xM,setToMin:SM,setToMax:_M,getValueFromEvent:kM,setPositionFromValue:EM,onLeft:OM,onRight:TM,onUp:AM,onDown:RM,edgeActions:NM});const BM=[ca("stepSize",1),ca("onChange",E),ca("onChoose",E),ca("onInit",E),ca("onDragStart",E),ca("onDragEnd",E),ca("snapToGrid",!1),ca("rounded",!0),ea("snapStart"),Vs("model",Fs("mode",{x:[ca("minX",0),ca("maxX",100),Us("value",(e=>ya(e.mode.minX))),$s("getInitialValue"),$d("manager",eM)],y:[ca("minY",0),ca("maxY",100),Us("value",(e=>ya(e.mode.minY))),$s("getInitialValue"),$d("manager",vM)],xy:[ca("minX",0),ca("maxX",100),ca("minY",0),ca("maxY",100),Us("value",(e=>ya({x:e.mode.minX,y:e.mode.minY}))),$s("getInitialValue"),$d("manager",DM)]})),Oh("sliderBehaviours",[rw,Eh]),Us("mouseIsDown",(()=>ya(!1)))],MM=(e,t,n,o)=>{const r=t=>wv(t,e,"thumb"),s=t=>wv(t,e,"spectrum"),a=t=>xv(t,e,"left-edge"),i=t=>xv(t,e,"right-edge"),l=t=>xv(t,e,"top-edge"),c=t=>xv(t,e,"bottom-edge"),d=e.model,u=d.manager,m=(t,n)=>{u.setPositionFromValue(t,n,e,{getLeftEdge:a,getRightEdge:i,getTopEdge:l,getBottomEdge:c,getSpectrum:s})},p=(e,t)=>{d.value.set(t);const n=r(e);m(e,n)},f=(t,n)=>{p(t,n);const o=r(t);return e.onChange(t,o,n),z.some(!0)},g=t=>{u.setToMin(t,e)},h=t=>{u.setToMax(t,e)},v=t=>{const n=()=>{xv(t,e,"thumb").each((n=>{const o=d.value.get();e.onChoose(t,n,o)}))},o=e.mouseIsDown.get();e.mouseIsDown.set(!1),o&&n()},b=(t,n)=>{n.stop(),e.mouseIsDown.set(!0),e.onDragStart(t,r(t))},y=(t,n)=>{n.stop(),e.onDragEnd(t,r(t)),v(t)};return{uid:e.uid,dom:e.dom,components:t,behaviours:Ah(e.sliderBehaviours,[rw.config({mode:"special",focusIn:t=>xv(t,e,"spectrum").map(rw.focusIn).map(F)}),Eh.config({store:{mode:"manual",getValue:e=>d.value.get(),setValue:p}}),Xu.config({channels:{[Gg()]:{onReceive:v}}})]),events:Vi([Ki(_D(),((e,t)=>{f(e,t.event.value)})),rl(((t,n)=>{const o=d.getInitialValue();d.value.set(o);const a=r(t);m(t,a);const i=s(t);e.onInit(t,a,i,d.value.get())})),Ki($a(),b),Ki(Wa(),y),Ki(Ga(),b),Ki(Xa(),y)]),apis:{resetToMin:g,resetToMax:h,setValue:p,refresh:m},domModification:{styles:{position:"relative"}}}},IM=zv({name:"Slider",configFields:BM,partFields:CD,factory:MM,apis:{setValue:(e,t,n)=>{e.setValue(t,n)},resetToMin:(e,t)=>{e.resetToMin(t)},resetToMax:(e,t)=>{e.resetToMax(t)},refresh:(e,t)=>{e.refresh(t)}}}),PM=xl("rgb-hex-update"),LM=xl("slider-update"),FM=xl("palette-update"),zM=(e,t)=>{const n=IM.parts.spectrum({dom:{tag:"div",classes:[t("hue-slider-spectrum")],attributes:{role:"presentation"}}}),o=IM.parts.thumb({dom:{tag:"div",classes:[t("hue-slider-thumb")],attributes:{role:"presentation"}}});return IM.sketch({dom:{tag:"div",classes:[t("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:R(0)},components:[n,o],sliderBehaviours:Vu([Aw.config({})]),onChange:(e,t,n)=>{Fi(e,LM,{value:n})}})},jM="form",UM=[Oh("formBehaviours",[Eh])],HM=e=>"<alloy.field."+e+">",$M=e=>{const t=(()=>{const e=[],t=(t,n)=>(e.push(t),gv(jM,HM(t),n));return{field:t,record:R(e)}})(),n=e(t),o=t.record(),r=Y(o,(e=>sv({name:e,pname:HM(e)})));return Dv(jM,UM,r,WM,n)},VM=(e,t)=>e.fold((()=>vr.error(t)),vr.value),WM=(e,t)=>({uid:e.uid,dom:e.dom,components:t,behaviours:Ah(e.formBehaviours,[Eh.config({store:{mode:"manual",getValue:t=>{const n=Sv(t,e);return we(n,((e,t)=>e().bind((e=>{const n=Vv.getCurrent(e);return VM(n,new Error(`Cannot find a current component to extract the value from for form part '${t}': `+gl(e.element)))})).map(Eh.getValue)))},setValue:(t,n)=>{xe(n,((n,o)=>{xv(t,e,o).each((e=>{Vv.getCurrent(e).each((e=>{Eh.setValue(e,n)}))}))}))}}})]),apis:{getField:(t,n)=>xv(t,e,n).bind(Vv.getCurrent)}}),qM={getField:jl(((e,t,n)=>e.getField(t,n))),sketch:$M},GM=xl("valid-input"),KM=xl("invalid-input"),YM=xl("validating-input"),XM="colorcustom.rgb.",JM=(e,t,n,o)=>{const s=(n,o)=>eD.config({invalidClass:t("invalid"),notify:{onValidate:e=>{Fi(e,YM,{type:n})},onValid:e=>{Fi(e,GM,{type:n,value:Eh.getValue(e)})},onInvalid:e=>{Fi(e,KM,{type:n,value:Eh.getValue(e)})}},validator:{validate:t=>{const n=Eh.getValue(t),r=o(n)?vr.value(!0):vr.error(e("aria.input.invalid"));return oR.pure(r)},validateOnLoad:!1}}),a=(n,o,a,i,l)=>{const c=e(XM+"range"),d=wN.parts.label({dom:{tag:"label",attributes:{"aria-label":i}},components:[Zc(a)]}),u=wN.parts.field({data:l,factory:nk,inputAttributes:r({type:"text"},"hex"===o?{"aria-live":"polite"}:{}),inputClasses:[t("textfield")],inputBehaviours:Vu([s(o,n),kN.config({})]),onSetValue:e=>{if(eD.isInvalid(e)){const t=eD.run(e);t.get(E)}}}),m=[d,u],p="hex"!==o?[wN.parts["aria-descriptor"]({text:c})]:[],f=m.concat(p);return{dom:{tag:"div",attributes:{role:"presentation"}},components:f}},i=(e,t)=>{const n=rT(t);return qM.getField(e,"hex").each((t=>{Aw.isFocused(t)||Eh.setValue(e,{hex:n.value})})),n},l=(e,t)=>{const n=t.red,o=t.green,r=t.blue;Eh.setValue(e,{red:n,green:o,blue:r})},c=GC({dom:{tag:"div",classes:[t("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),d=(e,t)=>{c.getOpt(e).each((e=>{vn(e.element,"background-color","#"+t.value)}))},u=()=>{const r={red:ya(z.some(255)),green:ya(z.some(255)),blue:ya(z.some(255)),hex:ya(z.some("ffffff"))},s=(e,t)=>{const n=pT(t);l(e,n),f(n)},u=e=>r[e].get(),m=(e,t)=>{r[e].set(t)},p=()=>u("red").bind((e=>u("green").bind((t=>u("blue").map((n=>dT(e,t,n,1))))))),f=e=>{const t=e.red,n=e.green,o=e.blue;m("red",z.some(t)),m("green",z.some(n)),m("blue",z.some(o))},g=(e,t)=>{const n=t.event;"hex"!==n.type?m(n.type,z.none()):o(e)},h=(e,t)=>{n(e);const o=YO(t);m("hex",z.some(o.value));const r=pT(o);l(e,r),f(r),Fi(e,PM,{hex:o}),d(e,o)},v=(e,t,n)=>{const o=parseInt(n,10);m(t,z.some(o)),p().each((t=>{const n=i(e,t);Fi(e,PM,{hex:n}),d(e,n)}))},b=e=>"hex"===e.type,y=(e,t)=>{const n=t.event;b(n)?h(e,n.value):v(e,n.type,n.value)},x=t=>({label:e(XM+t+".label"),description:e(XM+t+".description")}),w=x("red"),C=x("green"),S=x("blue"),_=x("hex");return Pr(qM.sketch((n=>({dom:{tag:"form",classes:[t("rgb-form")],attributes:{"aria-label":e("aria.color.picker")}},components:[n.field("red",wN.sketch(a(uT,"red",w.label,w.description,255))),n.field("green",wN.sketch(a(uT,"green",C.label,C.description,255))),n.field("blue",wN.sketch(a(uT,"blue",S.label,S.description,255))),n.field("hex",wN.sketch(a(QO,"hex",_.label,_.description,"ffffff"))),c.asSpec()],formBehaviours:Vu([eD.config({invalidClass:t("form-invalid")}),xw("rgb-form-events",[Ki(GM,y),Ki(KM,g),Ki(YM,g)])])}))),{apis:{updateHex:(e,t)=>{Eh.setValue(e,{hex:t.value}),s(e,t),d(e,t)}}})},m=Fv({factory:u,name:"RgbForm",configFields:[],apis:{updateHex:(e,t,n)=>{e.updateHex(t,n)}},extraApis:{}});return m},QM=(e,t)=>{const n=IM.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[t("sv-palette-spectrum")]}}),o=IM.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[t("sv-palette-thumb")],innerHtml:`<div class=${t("sv-palette-inner-thumb")} role="presentation"></div>`}}),r=(e,t)=>{const{width:n,height:o}=e,r=e.getContext("2d");if(null===r)return;r.fillStyle=t,r.fillRect(0,0,n,o);const s=r.createLinearGradient(0,0,n,0);s.addColorStop(0,"rgba(255,255,255,1)"),s.addColorStop(1,"rgba(255,255,255,0)"),r.fillStyle=s,r.fillRect(0,0,n,o);const a=r.createLinearGradient(0,0,0,o);a.addColorStop(0,"rgba(0,0,0,0)"),a.addColorStop(1,"rgba(0,0,0,1)"),r.fillStyle=a,r.fillRect(0,0,n,o)},s=(e,t)=>{const n=e.components()[0].element.dom,o=BT(t,100,100),s=mT(o);r(n,hT(s))},a=(e,t)=>{const n=MT(pT(t));IM.setValue(e,{x:n.saturation,y:100-n.value})},i=e=>{const s=R({x:0,y:0}),a=(e,t,n)=>{Fi(e,FM,{value:n})},i=(e,t,n,o)=>{r(n.element.dom,hT(vT))},l=Vu([Vv.config({find:z.some}),Aw.config({})]);return IM.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[t("sv-palette")]},model:{mode:"xy",getInitialValue:s},rounded:!1,components:[n,o],onChange:a,onInit:i,sliderBehaviours:l})},l=Fv({factory:i,name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(e,t,n)=>{s(t,n)},setThumb:(e,t,n)=>{a(t,n)}},extraApis:{}});return l},ZM=(e,t)=>{const n=n=>{const o=JM(e,t,n.onValidHex,n.onInvalidHex),r=QM(e,t),s=e=>(100-e)/100*360,a=e=>100-e/360*100,i={paletteRgba:ya(vT),paletteHue:ya(0)},l=GC(zM(e,t)),c=GC(r.sketch({})),d=GC(o.sketch({})),u=(e,t,n)=>{c.getOpt(e).each((e=>{r.setHue(e,n)}))},m=(e,t)=>{d.getOpt(e).each((e=>{o.updateHex(e,t)}))},p=(e,t,n)=>{l.getOpt(e).each((e=>{IM.setValue(e,a(n))}))},f=(e,t)=>{c.getOpt(e).each((e=>{r.setThumb(e,t)}))},g=(e,t)=>{const n=pT(e);i.paletteRgba.set(n),i.paletteHue.set(t)},h=(e,t,n,o)=>{g(t,n),X(o,(o=>{o(e,t,n)}))},v=()=>{const e=[m];return(t,n)=>{const o=n.event.value,r=i.paletteHue.get(),s=BT(r,o.x,100-o.y),a=PT(s);h(t,a,r,e)}},b=()=>{const e=[u,m];return(t,n)=>{const o=s(n.event.value),r=i.paletteRgba.get(),a=MT(r),l=BT(o,a.saturation,a.value),c=PT(l);h(t,c,o,e)}},y=()=>{const e=[u,p,f];return(t,n)=>{const o=n.event.hex,r=IT(o);h(t,o,r.hue,e)}};return{uid:n.uid,dom:n.dom,components:[c.asSpec(),l.asSpec(),d.asSpec()],behaviours:Vu([xw("colour-picker-events",[Ki(PM,y()),Ki(FM,v()),Ki(LM,b())]),Vv.config({find:e=>d.getOpt(e)}),rw.config({mode:"acyclic"})])}},o=Fv({name:"ColourPicker",configFields:[$s("dom"),ca("onValidHex",E),ca("onInvalidHex",E)],factory:n});return o},eI=()=>Vv.config({find:z.some}),tI=e=>Vv.config({find:e.getOpt}),nI=e=>Vv.config({find:t=>$t(t.element,e).bind((e=>t.getSystem().getByDom(e).toOptional()))}),oI={self:eI,memento:tI,childAt:nI},rI=fs([ca("preprocess",N),ca("postprocess",N)]),sI=(e,t)=>{const n=Ps("RepresentingConfigs.memento processors",rI,t);return Eh.config({store:{mode:"manual",getValue:t=>{const o=e.get(t),r=Eh.getValue(o);return n.postprocess(r)},setValue:(t,o)=>{const r=n.preprocess(o),s=e.get(t);Eh.setValue(s,r)}}})},aI=(e,t,n)=>Eh.config({store:r(r({mode:"manual"},e.map((e=>({initialValue:e}))).getOr({})),{},{getValue:t,setValue:n})}),iI=(e,t,n)=>aI(e,(e=>t(e.element)),((e,t)=>n(e.element,t))),lI=e=>iI(e,Nc,Dc),cI=e=>iI(e,cl,dl),dI=e=>Eh.config({store:{mode:"memory",initialValue:e}}),uI={memento:sI,withElement:iI,withComp:aI,domValue:lI,domHtml:cI,memory:dI},mI={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},pI=e=>t=>e.translate(mI[t]),fI=(e,t,n)=>{const o=e=>"tox-"+e,r=ZM(pI(t),o),s=e=>{Fi(e,PN,{name:"hex-valid",value:!0})},a=e=>{Fi(e,PN,{name:"hex-valid",value:!1})},i=GC(r.sketch({dom:{tag:"div",classes:[o("color-picker-container")],attributes:{role:"presentation"}},onValidHex:s,onInvalidHex:a}));return{dom:{tag:"div"},components:[i.asSpec()],behaviours:Vu([uI.withComp(n,(e=>{const t=i.get(e),n=Vv.getCurrent(t),o=n.bind((e=>{const t=Eh.getValue(e);return t.hex}));return o.map((e=>"#"+Ve(e,"#"))).getOr("")}),((e,t)=>{const n=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,o=z.from(n.exec(t)).bind((e=>pe(e,1))),r=i.get(e),s=Vv.getCurrent(r);s.fold((()=>{console.log("Can not find form")}),(e=>{Eh.setValue(e,{hex:o.getOr("")}),qM.getField(e,"hex").each((e=>{Li(e,ni())}))}))})),oI.self()])}};var gI=tinymce.util.Tools.resolve("tinymce.Resource");const hI=e=>Ne(e,"init"),vI=e=>{const t=Dm(),n=GC({dom:{tag:e.tag}}),o=Dm();return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:Vu([xw("custom-editor-events",[rl((r=>{n.getOpt(r).each((n=>{(hI(e)?e.init(n.element.dom):gI.load(e.scriptId,e.scriptUrl).then((t=>t(n.element.dom,e.settings)))).then((e=>{o.on((t=>{e.setValue(t)})),o.clear(),t.set(e)}))}))}))]),uI.withComp(z.none(),(()=>t.get().fold((()=>o.get().getOr("")),(e=>e.getValue()))),((e,n)=>{t.get().fold((()=>o.set(n)),(e=>e.setValue(n)))})),oI.self()]),components:[n.asSpec()]}};var bI=tinymce.util.Tools.resolve("tinymce.util.Tools");const yI=(e,t)=>{const n=bI.explode(t.getOption("images_file_types")),o=e=>q(n,(t=>Ke(e.name.toLowerCase(),`.${t.toLowerCase()}`)));return Z(he(e),o)},xI=(e,t,n)=>{const o=(e,t)=>{t.stop()},r=e=>(t,n)=>{X(e,(e=>{e(t,n)}))},s=(e,t)=>{var n;if(!cb.isDisabled(e)){const o=t.event.raw;i(e,null===(n=o.dataTransfer)||void 0===n?void 0:n.files)}},a=(e,t)=>{const n=t.event.raw.target;i(e,n.files)},i=(n,o)=>{o&&(Eh.setValue(n,yI(o,t)),Fi(n,BN,{name:e.name}))},l=GC({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:Vu([xw("input-file-events",[tl(ri()),tl(vi())])])}),c=e=>({uid:e.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:Vu([uI.memory(n.getOr([])),oI.self(),cb.config({}),Kw.config({toggleClass:"dragenter",toggleOnExecute:!1}),xw("dropzone-events",[Ki("dragenter",r([o,Kw.toggle])),Ki("dragleave",r([o,Kw.toggle])),Ki("dragover",o),Ki("drop",r([o,s])),Ki(oi(),a)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[Zc(t.translate("Drop an image here"))]},qC.sketch({dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[Zc(t.translate("Browse for an image")),l.asSpec()],action:e=>{const t=l.get(e);t.element.dom.click()},buttonBehaviours:Vu([kN.config({}),vO.button(t.isDisabled),mO()])})]}]}),d=e.label.map((e=>DN(e,t))),u=wN.parts.field({factory:{sketch:c}});return ON(d,u,["tox-form__group--stretched"],[])},wI=(e,t)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${e.columns}col`]},components:Y(e.items,t.interpreter)}),CI=xl("alloy-fake-before-tabstop"),SI=xl("alloy-fake-after-tabstop"),_I=e=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:e},behaviours:Vu([Aw.config({ignore:!0}),kN.config({})])}),kI=e=>({dom:{tag:"div",classes:["tox-navobj"]},components:[_I([CI]),e,_I([SI])],behaviours:Vu([oI.childAt(1)])}),EI=(e,t)=>{Fi(e,ei(),{raw:{which:9,shiftKey:t}})},OI=(e,t)=>{const n=t.element;kc(n,CI)?EI(e,!0):kc(n,SI)&&EI(e,!1)},TI=e=>WR(e,["."+CI,"."+SI].join(","),L),AI=e=>{const t=ya(e.getOr(""));return{getValue:e=>t.get(),setValue:(e,n)=>{t.get()!==n&&ln(e.element,"srcdoc",n),t.set(n)}}},RI=(e,t,n)=>{const o=e.sandboxed,s=e.transparent,a="tox-dialog__iframe",i=r(r(r({},e.label.map((e=>({title:e}))).getOr({})),n.map((e=>({srcdoc:e}))).getOr({})),o?{sandbox:"allow-scripts allow-same-origin"}:{}),l=AI(n),c=e.label.map((e=>DN(e,t))),d=e=>kI({uid:e.uid,dom:{tag:"iframe",attributes:i,classes:s?[a]:[a,`${a}--opaque`]},behaviours:Vu([kN.config({}),Aw.config({}),uI.withComp(n,l.getValue,l.setValue)])}),u=wN.parts.field({factory:{sketch:d}});return ON(c,u,["tox-form__group--stretched"],[])},NI=e=>new Promise(((t,n)=>{const o=()=>{s(),t(e)},r=[Mm(e,"load",o),Mm(e,"error",(()=>{s(),n("Unable to load data from image: "+e.dom.src)}))],s=()=>X(r,(e=>e.unbind()));e.dom.complete&&o()})),DI=(e,t,n,o,r)=>{const s=n*r,a=o*r,i=Math.max(0,e/2-s/2),l=Math.max(0,t/2-a/2);return{left:i.toString()+"px",top:l.toString()+"px",width:s.toString()+"px",height:a.toString()+"px"}},BI=(e,t,n)=>{const o=jn(e),r=An(e);return Math.min(o/t,r/n,1)},MI=(e,t)=>{const n=ya(t.getOr({url:""})),o=GC({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:t.map((e=>({src:e.url}))).getOr({})}}),r=GC({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[o.asSpec()]}),s=(e,t)=>{const s={url:t.url};t.zoom.each((e=>s.zoom=e)),t.cachedWidth.each((e=>s.cachedWidth=e)),t.cachedHeight.each((e=>s.cachedHeight=e)),n.set(s);const a=()=>{const{cachedWidth:t,cachedHeight:n,zoom:o}=s;if(!x(t)&&!x(n)){if(x(o)){const o=BI(e.element,t,n);s.zoom=o}const a=DI(jn(e.element),An(e.element),t,n,s.zoom);r.getOpt(e).each((e=>{bn(e.element,a)}))}};o.getOpt(e).each((n=>{const o=n.element;t.url!==dn(o,"src")&&(ln(o,"src",t.url),_c(e.element,"tox-imagepreview__loaded")),a(),NI(o).then((t=>{e.getSystem().isConnected()&&(Cc(e.element,"tox-imagepreview__loaded"),s.cachedWidth=t.dom.naturalWidth,s.cachedHeight=t.dom.naturalHeight,a())}))}))},a={};e.height.each((e=>a.height=e));const i=t.map((e=>({url:e.url,zoom:z.from(e.zoom),cachedWidth:z.from(e.cachedWidth),cachedHeight:z.from(e.cachedHeight)})));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:a,attributes:{role:"presentation"}},components:[r.asSpec()],behaviours:Vu([oI.self(),uI.withComp(i,(()=>n.get()),s)])}},II=(e,t)=>{const n={dom:{tag:"label",classes:["tox-label"]},components:[Zc(t.providers.translate(e.label))]},o=Y(e.items,t.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[n,...o],behaviours:Vu([oI.self(),bw.config({}),uI.domHtml(z.none()),rw.config({mode:"acyclic"})])}},PI=xl("toolbar.button.execute"),LI=e=>il(((t,n)=>{bO(e,t)((n=>{Fi(t,PI,{buttonApi:n}),e.onAction(n)}))})),FI=xl("common-button-display-events"),zI={[gi()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events"],[Ei()]:["toolbar-button-events",FI],[Ga()]:["focusing","alloy.base.behaviour",FI]},jI=e=>vn(e.element,"width",xn(e.element,"width")),UI=(e,t,n)=>sS(e,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:n},t),HI=(e,t)=>UI(e,t,[]),$I=(e,t)=>UI(e,t,[bw.config({})]),VI=(e,t,n)=>({dom:{tag:"span",classes:[`${t}__select-label`]},components:[Zc(n.translate(e))],behaviours:Vu([bw.config({})])}),WI=xl("update-menu-text"),qI=xl("update-menu-icon"),GI=(e,t,n)=>{const o=ya(E),s=e.text.map((e=>GC(VI(e,t,n.providers)))),a=e.icon.map((e=>GC($I(e,n.providers.icons)))),i=(e,t)=>{const n=Eh.getValue(e);return Aw.focus(n),Fi(n,"keydown",{raw:t.event.raw}),wR.close(n),z.some(!0)},l=e.role.fold((()=>({})),(e=>({role:e}))),c=e.tooltip.fold((()=>({})),(e=>{const t=n.providers.translate(e);return{title:t,"aria-label":t}})),d=sS("chevron-down",{tag:"div",classes:[`${t}__select-chevron`]},n.providers.icons),u=xl("common-button-display-events"),m=GC(wR.sketch(r(r(r({},e.uid?{uid:e.uid}:{}),l),{},{dom:{tag:"button",classes:[t,`${t}--select`].concat(Y(e.classes,(e=>`${t}--${e}`))),attributes:r({},c)},components:SO([a.map((e=>e.asSpec())),s.map((e=>e.asSpec())),z.some(d)]),matchWidth:!0,useMinWidth:!0,onOpen:(t,n,o)=>{e.searchable&&AR(o)},dropdownBehaviours:Vu([...e.dropdownBehaviours,vO.button((()=>e.disabled||n.providers.isDisabled())),mO(),rD.config({}),bw.config({}),xw("dropdown-events",[yO(e,o),xO(e,o)]),xw(u,[rl(((e,t)=>jI(e)))]),xw("menubutton-update-display-text",[Ki(WI,((e,t)=>{s.bind((t=>t.getOpt(e))).each((e=>{bw.set(e,[Zc(n.providers.translate(t.event.text))])}))})),Ki(qI,((e,t)=>{a.bind((t=>t.getOpt(e))).each((e=>{bw.set(e,[$I(t.event.icon,n.providers.icons)])}))}))])]),eventOrder:Pr(zI,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[Ei()]:["toolbar-button-events","dropdown-events",u]}),sandboxBehaviours:Vu([rw.config({mode:"special",onLeft:i,onRight:i}),xw("dropdown-sandbox-events",[Ki(ok,((e,t)=>{SR(e),t.stop()})),Ki(rk,((e,t)=>{_R(e,t),t.stop()}))])]),lazySink:n.getSink,toggleClass:`${t}--active`,parts:{menu:r(r({},X_(!1,e.columns,e.presets)),{},{fakeFocus:e.searchable,onHighlightItem:OR,onCollapseMenu:(e,t,n)=>{Ab.getHighlighted(n).each((t=>{OR(e,n,t)}))},onDehighlightItem:TR})},fetch:t=>oR.nu(B(e.fetch,t))})));return m.asSpec()},KI=e=>f(e),YI=e=>"separator"===e.type,XI=e=>Ne(e,"getSubmenuItems"),JI={type:"separator"},QI=(e,t)=>{const n=te(e,((e,n)=>KI(n)?""===n?e:"|"===n?e.length>0&&!YI(e[e.length-1])?e.concat([JI]):e:Ne(t,n.toLowerCase())?e.concat([t[n.toLowerCase()]]):e:e.concat([n])),[]);return n.length>0&&YI(n[n.length-1])&&n.pop(),n},ZI=(e,t)=>{const n=e.getSubmenuItems(),o=tP(n,t),r=Pr(o.menus,{[e.value]:o.items}),s=Pr(o.expansions,{[e.value]:e.value});return{item:e,menus:r,expansions:s}},eP=e=>{const t=Re(e,"value").getOrThunk((()=>xl("generated-menu-item")));return Pr({value:t},e)},tP=(e,t)=>{const n=QI(f(e)?e.split(" "):e,t);return ee(n,((e,n)=>{if(XI(n)){const o=eP(n),r=ZI(o,t);return{menus:Pr(e.menus,r.menus),items:[r.item,...e.items],expansions:Pr(e.expansions,r.expansions)}}return r(r({},e),{},{items:[n,...e.items]})}),{menus:{},expansions:{},items:[]})},nP=e=>e.search.fold((()=>({searchMode:"no-search"})),(e=>({searchMode:"search-with-field",placeholder:e.placeholder}))),oP=e=>e.search.fold((()=>({searchMode:"no-search"})),(e=>({searchMode:"search-with-results"}))),rP=(e,t,n,o)=>{const r=xl("primary-menu"),s=tP(e,n.shared.providers.menuItems());if(0===s.items.length)return z.none();const a=nP(o),i=MR(r,s.items,t,n,o.isHorizontalMenu,a),l=oP(o),c=we(s.menus,((e,o)=>MR(o,e,t,n,!1,l))),d=Pr(c,Oa(r,i));return z.from(jC.tieredData(r,d,s.expansions))},sP=e=>!Ne(e,"items"),aP="data-value",iP=(e,t,n,o)=>Y(n,(n=>sP(n)?{type:"togglemenuitem",text:n.text,value:n.value,active:n.value===o,onAction:()=>{Eh.setValue(e,n.value),Fi(e,BN,{name:t}),Aw.focus(e)}}:{type:"nestedmenuitem",text:n.text,getSubmenuItems:()=>iP(e,t,n.items,o)})),lP=(e,t)=>ve(e,(e=>sP(e)?je(e.value===t,e):lP(e.items,t))),cP=(e,t,n)=>{const o=t.shared.providers,r=n.bind((t=>lP(e.items,t))).orThunk((()=>fe(e.items).filter(sP))),s=e.label.map((e=>DN(e,o))),a=wN.parts.field({dom:{},factory:{sketch:n=>GI({uid:n.uid,text:r.map((e=>e.text)),icon:z.none(),tooltip:e.label,role:z.none(),fetch:(n,o)=>{const r=iP(n,e.name,e.items,Eh.getValue(n));o(rP(r,S_.CLOSE_ON_EXECUTE,t,{isHorizontalMenu:!1,search:z.none()}))},onSetup:R(E),getApi:R({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[kN.config({}),uI.withComp(r.map((e=>e.value)),(e=>dn(e.element,aP)),((t,n)=>{lP(e.items,n).each((e=>{ln(t.element,aP,e.value),Fi(t,WI,{text:e.text})}))}))]},"tox-listbox",t.shared)}}),i={dom:{tag:"div",classes:["tox-listboxfield"]},components:[a]};return wN.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:se([s.toArray(),[i]]),fieldBehaviours:Vu([cb.config({disabled:R(!e.enabled),onDisabled:e=>{wN.getField(e).each(cb.disable)},onEnabled:e=>{wN.getField(e).each(cb.enable)}})])})},dP=(e,t)=>({dom:{tag:"div",classes:e.classes},components:Y(e.items,t.shared.interpreter)}),uP=(e,t)=>{const n=Y(e.options,(e=>({dom:{tag:"option",value:e.value,innerHtml:e.text}}))),o=e.data.map((e=>Oa("initialValue",e))).getOr({});return{uid:e.uid,dom:{tag:"select",classes:e.selectClasses,attributes:e.selectAttributes},components:n,behaviours:Ah(e.selectBehaviours,[Aw.config({}),Eh.config({store:r({mode:"manual",getValue:e=>Nc(e.element),setValue:(t,n)=>{const o=fe(e.options),r=oe(e.options,(e=>e.value===n));r.isSome()?Dc(t.element,n):-1===t.element.dom.selectedIndex&&""===n&&o.each((e=>Dc(t.element,e.value)))}},o)})])}},mP=Fv({name:"HtmlSelect",configFields:[$s("options"),Oh("selectBehaviours",[Aw,Eh]),ca("selectClasses",[]),ca("selectAttributes",{}),ea("data")],factory:uP}),pP=(e,t,n)=>{const o=Y(e.items,(e=>({text:t.translate(e.text),value:e.value}))),s=e.label.map((e=>DN(e,t))),a=wN.parts.field(r(r({dom:{}},n.map((e=>({data:e}))).getOr({})),{},{selectAttributes:{size:e.size},options:o,factory:mP,selectBehaviours:Vu([cb.config({disabled:()=>!e.enabled||t.isDisabled()}),kN.config({}),xw("selectbox-change",[Ki(oi(),((t,n)=>{Fi(t,BN,{name:e.name})}))])])})),i=e.size>1?z.none():z.some(sS("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},t.icons)),l={dom:{tag:"div",classes:["tox-selectfield"]},components:se([[a],i.toArray()])};return wN.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:se([s.toArray(),[l]]),fieldBehaviours:Vu([cb.config({disabled:()=>!e.enabled||t.isDisabled(),onDisabled:e=>{wN.getField(e).each(cb.disable)},onEnabled:e=>{wN.getField(e).each(cb.enable)}}),mO()])})},fP=R([ca("field1Name","field1"),ca("field2Name","field2"),Ud("onLockedChange"),Ld(["lockClass"]),ca("locked",!1),Rh.field("coupledFieldBehaviours",[Vv,Eh])]),gP=(e,t,n)=>xv(e,t,n).bind(Vv.getCurrent),hP=(e,t)=>sv({factory:wN,name:e,overrides:e=>({fieldBehaviours:Vu([xw("coupled-input-behaviour",[Ki(ni(),(n=>{gP(n,e,t).each((t=>{xv(n,e,"lock").each((o=>{Kw.isOn(o)&&e.onLockedChange(n,t,o)}))}))}))])])})}),vP=R([hP("field1","field2"),hP("field2","field1"),sv({factory:qC,schema:[$s("dom")],name:"lock",overrides:e=>({buttonBehaviours:Vu([Kw.config({selected:e.locked,toggleClass:e.markers.lockClass,aria:{mode:"pressed"}})])})})]),bP=(e,t,n,o)=>({uid:e.uid,dom:e.dom,components:t,behaviours:Rh.augment(e.coupledFieldBehaviours,[Vv.config({find:z.some}),Eh.config({store:{mode:"manual",getValue:t=>{const n=kv(t,e,["field1","field2"]);return{[e.field1Name]:Eh.getValue(n.field1()),[e.field2Name]:Eh.getValue(n.field2())}},setValue:(t,n)=>{const o=kv(t,e,["field1","field2"]);De(n,e.field1Name)&&Eh.setValue(o.field1(),n[e.field1Name]),De(n,e.field2Name)&&Eh.setValue(o.field2(),n[e.field2Name])}}})]),apis:{getField1:t=>xv(t,e,"field1"),getField2:t=>xv(t,e,"field2"),getLock:t=>xv(t,e,"lock")}}),yP=zv({name:"FormCoupledInputs",configFields:fP(),partFields:vP(),factory:bP,apis:{getField1:(e,t)=>e.getField1(t),getField2:(e,t)=>e.getField2(t),getLock:(e,t)=>e.getLock(t)}}),xP=e=>{const t={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},n=e=>e in t?t[e]:1;let o=e.value.toFixed(n(e.unit));return-1!==o.indexOf(".")&&(o=o.replace(/\.?0*$/,"")),o+e.unit},wP=e=>{const t=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/,n=t.exec(e);if(null!==n){const e=parseFloat(n[1]),t=n[2];return vr.value({value:e,unit:t})}return vr.error(e)},CP=(e,t)=>{const n={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},o=e=>Ne(n,e);return e.unit===t?z.some(e.value):o(e.unit)&&o(t)?n[e.unit]===n[t]?z.some(e.value):z.some(e.value/n[e.unit]*n[t]):z.none()},SP=e=>z.none(),_P=(e,t)=>n=>CP(n,t).map((n=>({value:n*e,unit:t}))),kP=(e,t)=>{const n=wP(e).toOptional(),o=wP(t).toOptional();return Le(n,o,((e,t)=>CP(e,t.unit).map((e=>t.value/e)).map((e=>_P(e,t.unit))).getOr(SP))).getOr(SP)},EP=(e,t)=>{let n=SP;const o=xl("ratio-event"),r=e=>sS(e,{tag:"span",classes:["tox-icon","tox-lock-icon__"+e]},t.icons),s=yP.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:t.translate(e.label.getOr("Constrain proportions"))}},components:[r("lock"),r("unlock")],buttonBehaviours:Vu([cb.config({disabled:()=>!e.enabled||t.isDisabled()}),mO(),kN.config({})])}),a=e=>({dom:{tag:"div",classes:["tox-form__group"]},components:e}),i=n=>wN.parts.field({factory:nk,inputClasses:["tox-textfield"],inputBehaviours:Vu([cb.config({disabled:()=>!e.enabled||t.isDisabled()}),mO(),kN.config({}),xw("size-input-events",[Ki(Qa(),((e,t)=>{Fi(e,o,{isField1:n})})),Ki(oi(),((t,n)=>{Fi(t,BN,{name:e.name})}))])]),selectOnFocus:!1}),l=e=>({dom:{tag:"label",classes:["tox-label"]},components:[Zc(t.translate(e))]}),c=yP.parts.field1(a([wN.parts.label(l("Width")),i(!0)])),d=yP.parts.field2(a([wN.parts.label(l("Height")),i(!1)]));return yP.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[c,d,a([l(Ip),s])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(e,t,o)=>{wP(Eh.getValue(e)).each((e=>{n(e).each((e=>{Eh.setValue(t,xP(e))}))}))},coupledFieldBehaviours:Vu([cb.config({disabled:()=>!e.enabled||t.isDisabled(),onDisabled:e=>{yP.getField1(e).bind(wN.getField).each(cb.disable),yP.getField2(e).bind(wN.getField).each(cb.disable),yP.getLock(e).each(cb.disable)},onEnabled:e=>{yP.getField1(e).bind(wN.getField).each(cb.enable),yP.getField2(e).bind(wN.getField).each(cb.enable),yP.getLock(e).each(cb.enable)}}),mO(),xw("size-input-events2",[Ki(o,((e,t)=>{const o=t.event.isField1,r=o?yP.getField1(e):yP.getField2(e),s=o?yP.getField2(e):yP.getField1(e),a=r.map(Eh.getValue).getOr(""),i=s.map(Eh.getValue).getOr("");n=kP(a,i)}))])])})},OP=(e,t,n)=>{const o=IM.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Zc(t.translate(e.label))]}),r=IM.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),s=IM.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return IM.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:e.min,maxX:e.max,getInitialValue:R(n.getOrThunk((()=>(Math.abs(e.max)-Math.abs(e.min))/2)))},components:[o,r,s],sliderBehaviours:Vu([oI.self(),Aw.config({})]),onChoose:(t,n,o)=>{Fi(t,BN,{name:e.name,value:o})}})},TP=(e,t)=>{const n=e=>({dom:{tag:"th",innerHtml:t.translate(e)}}),o=e=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:Y(e,n)}]}),r=e=>({dom:{tag:"td",innerHtml:t.translate(e)}}),s=e=>({dom:{tag:"tr"},components:Y(e,r)}),a=e=>({dom:{tag:"tbody"},components:Y(e,s)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[o(e.header),a(e.cells)],behaviours:Vu([kN.config({}),Aw.config({})])}},AP=(e,t)=>{const n=e.label.map((e=>DN(e,t))),o=[cb.config({disabled:()=>e.disabled||t.isDisabled()}),mO(),rw.config({mode:"execution",useEnter:!0!==e.multiline,useControlEnter:!0===e.multiline,execute:e=>(Li(e,LN),z.some(!0))}),xw("textfield-change",[Ki(ni(),((t,n)=>{Fi(t,BN,{name:e.name})})),Ki(pi(),((t,n)=>{Fi(t,BN,{name:e.name})}))]),kN.config({})],s=e.validation.map((e=>eD.config({getRoot:e=>Ft(e.element),invalidClass:"tox-invalid",validator:{validate:t=>{const n=Eh.getValue(t),o=e.validator(n);return oR.pure(!0===o?vr.value(n):vr.error(o))},validateOnLoad:e.validateOnLoad}}))).toArray(),a=e.placeholder.fold(R({}),(e=>({placeholder:t.translate(e)}))),i=e.inputMode.fold(R({}),(e=>({inputmode:e}))),l=r(r({},a),i),c=wN.parts.field(r(r({tag:!0===e.multiline?"textarea":"input"},e.data.map((e=>({data:e}))).getOr({})),{},{inputAttributes:l,inputClasses:[e.classname],inputBehaviours:Vu(se([o,s])),selectOnFocus:!1,factory:nk})),d=e.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[c]}:c,u=e.flex?["tox-form__group--stretched"]:[],m=u.concat(e.maximized?["tox-form-group--maximize"]:[]),p=[cb.config({disabled:()=>e.disabled||t.isDisabled(),onDisabled:e=>{wN.getField(e).each(cb.disable)},onEnabled:e=>{wN.getField(e).each(cb.enable)}}),mO()];return ON(n,d,m,p)},RP=(e,t,n)=>AP({name:e.name,multiline:!1,label:e.label,inputMode:e.inputMode,placeholder:e.placeholder,flex:!1,disabled:!e.enabled,classname:"tox-textfield",validation:z.none(),maximized:e.maximized,data:n},t),NP=(e,t,n)=>AP({name:e.name,multiline:!0,label:e.label,inputMode:z.none(),placeholder:e.placeholder,flex:!0,disabled:!e.enabled,classname:"tox-textarea",validation:z.none(),maximized:e.maximized,data:n},t),DP=(e,t)=>t.getAnimationRoot.fold((()=>e.element),(t=>t(e))),BP=e=>e.dimension.property,MP=(e,t)=>e.dimension.getDimension(t),IP=(e,t)=>{const n=DP(e,t);Oc(n,[t.shrinkingClass,t.growingClass])},PP=(e,t)=>{_c(e.element,t.openClass),Cc(e.element,t.closedClass),vn(e.element,BP(t),"0px"),En(e.element)},LP=(e,t)=>{_c(e.element,t.closedClass),Cc(e.element,t.openClass),kn(e.element,BP(t))},FP=(e,t,n,o)=>{n.setCollapsed(),vn(e.element,BP(t),MP(t,e.element)),IP(e,t),PP(e,t),t.onStartShrink(e),t.onShrunk(e)},zP=(e,t,n,o)=>{const r=o.getOrThunk((()=>MP(t,e.element)));n.setCollapsed(),vn(e.element,BP(t),r),En(e.element);const s=DP(e,t);_c(s,t.growingClass),Cc(s,t.shrinkingClass),PP(e,t),t.onStartShrink(e)},jP=(e,t,n)=>{const o=MP(t,e.element),r="0px"===o?FP:zP;r(e,t,n,z.some(o))},UP=(e,t,n)=>{const o=DP(e,t),r=kc(o,t.shrinkingClass),s=MP(t,e.element);LP(e,t);const a=MP(t,e.element),i=()=>{vn(e.element,BP(t),s),En(e.element)},l=()=>{PP(e,t)},c=r?i:l;c(),_c(o,t.shrinkingClass),Cc(o,t.growingClass),LP(e,t),vn(e.element,BP(t),a),n.setExpanded(),t.onStartGrow(e)},HP=(e,t,n)=>{if(n.isExpanded()){kn(e.element,BP(t));const n=MP(t,e.element);vn(e.element,BP(t),n)}},$P=(e,t,n)=>{n.isExpanded()||UP(e,t,n)},VP=(e,t,n)=>{n.isExpanded()&&jP(e,t,n)},WP=(e,t,n)=>{n.isExpanded()&&FP(e,t,n)},qP=(e,t,n)=>n.isExpanded(),GP=(e,t,n)=>n.isCollapsed(),KP=(e,t,n)=>{const o=DP(e,t);return!0===kc(o,t.growingClass)},YP=(e,t,n)=>{const o=DP(e,t);return!0===kc(o,t.shrinkingClass)},XP=(e,t,n)=>KP(e,t)||YP(e,t),JP=(e,t,n)=>{const o=n.isExpanded()?jP:UP;o(e,t,n)},QP=(e,t,n)=>{n.isExpanded()||(LP(e,t),vn(e.element,BP(t),MP(t,e.element)),IP(e,t),n.setExpanded(),t.onStartGrow(e),t.onGrown(e))};var ZP=Object.freeze({__proto__:null,refresh:HP,grow:$P,shrink:VP,immediateShrink:WP,hasGrown:qP,hasShrunk:GP,isGrowing:KP,isShrinking:YP,isTransitioning:XP,toggleGrow:JP,disableTransitions:IP,immediateGrow:QP});const eL=(e,t,n)=>{const o=t.expanded;return Gl(o?{classes:[t.openClass],styles:{}}:{classes:[t.closedClass],styles:Oa(t.dimension.property,"0px")})},tL=(e,t)=>Vi([ol(ai(),((n,o)=>{const r=o.event.raw;if(r.propertyName===e.dimension.property){IP(n,e),t.isExpanded()&&kn(n.element,e.dimension.property);const o=t.isExpanded()?e.onGrown:e.onShrunk;o(n)}}))]);var nL=Object.freeze({__proto__:null,exhibit:eL,events:tL}),oL=[$s("closedClass"),$s("openClass"),$s("shrinkingClass"),$s("growingClass"),ea("getAnimationRoot"),zd("onShrunk"),zd("onStartShrink"),zd("onGrown"),zd("onStartGrow"),ca("expanded",!1),Vs("dimension",Fs("property",{width:[$d("property","width"),$d("getDimension",(e=>jn(e)+"px"))],height:[$d("property","height"),$d("getDimension",(e=>An(e)+"px"))]}))];const rL=e=>{const t=ya(e.expanded),n=()=>"expanded: "+t.get();return Hl({isExpanded:()=>!0===t.get(),isCollapsed:()=>!1===t.get(),setCollapsed:B(t.set,!1),setExpanded:B(t.set,!0),readState:n})};var sL=Object.freeze({__proto__:null,init:rL});const aL=qu({fields:oL,name:"sliding",active:nL,apis:ZP,state:sL}),iL=e=>({isEnabled:()=>!cb.isDisabled(e),setEnabled:t=>cb.set(e,!t),setActive:t=>{const n=e.element;t?(Cc(n,"tox-tbtn--enabled"),ln(n,"aria-pressed",!0)):(_c(n,"tox-tbtn--enabled"),pn(n,"aria-pressed"))},isActive:()=>kc(e.element,"tox-tbtn--enabled"),setText:t=>{Fi(e,WI,{text:t})},setIcon:t=>Fi(e,qI,{icon:t})}),lL=(e,t,n,o,r=!0)=>GI({text:e.text,icon:e.icon,tooltip:e.tooltip,searchable:e.search.isSome(),role:o,fetch:(t,o)=>{const r={pattern:e.search.isSome()?RR(t):""};e.fetch((t=>{o(rP(t,S_.CLOSE_ON_EXECUTE,n,{isHorizontalMenu:!1,search:e.search}))}),r,iL(t))},onSetup:e.onSetup,getApi:iL,columns:1,presets:"normal",classes:[],dropdownBehaviours:[...r?[kN.config({})]:[]]},t,n.shared),cL=(e,t,n)=>{const o=e=>o=>{const r=!o.isActive();o.setActive(r),e.storage.set(r),n.shared.getSink().each((n=>{t().getOpt(n).each((t=>{Zu(t.element),Fi(t,PN,{name:e.name,value:e.storage.get()})}))}))},s=e=>t=>{t.setActive(e.storage.get())};return t=>{t(Y(e,(e=>{const t=e.text.fold((()=>({})),(e=>({text:e})));return r(r({type:e.type,active:!1},t),{},{onAction:o(e),onSetup:s(e)})})))}},dL=e=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{title:e,"aria-label":e}},components:[Zc(e)]}),uL=xl("leaf-label-event-id"),mL=({leaf:e,onLeafAction:t,visible:n,treeId:o,backstage:r})=>{const s=e.menu.map((e=>lL(e,"tox-mbtn",r,z.none(),n))),a=[dL(e.title)];return s.each((e=>a.push(e))),qC.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(n?["tox-tree--leaf__label--visible"]:[])},components:a,role:"treeitem",action:n=>{t(e.id),n.getSystem().broadcastOn([`update-active-item-${o}`],{value:e.id})},eventOrder:{[ei()]:[uL,"keying"]},buttonBehaviours:Vu([...n?[kN.config({})]:[],Kw.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),Xu.config({channels:{[`update-active-item-${o}`]:{onReceive:(t,n)=>{(n.value===e.id?Kw.on:Kw.off)(t)}}}}),xw(uL,[Ki(ei(),((e,t)=>{const n="ArrowLeft"===t.event.raw.code,o="ArrowRight"===t.event.raw.code;n?(md(e.element,".tox-tree--directory").each((t=>{e.getSystem().getByDom(t).each((e=>{pd(t,".tox-tree--directory__label").each((t=>{e.getSystem().getByDom(t).each(Aw.focus)}))}))})),t.stop()):o&&t.stop()}))])])})},pL=(e,t,n)=>sS(e,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"],behaviours:n},t),fL=(e,t)=>pL(e,t,[]),gL=xl("directory-label-event-id"),hL=({directory:e,visible:t,noChildren:n,backstage:o})=>{const r=e.menu.map((e=>lL(e,"tox-mbtn",o,z.none()))),s=[{dom:{tag:"div",classes:["tox-chevron"]},components:[fL("chevron-right",o.shared.providers.icons)]},dL(e.title)];r.each((e=>{s.push(e)}));const a=e=>{md(e.element,".tox-tree--directory").each((t=>{e.getSystem().getByDom(t).each((e=>Kw.toggle(e)))}))};return qC.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(t?["tox-tree--directory__label--visible"]:[])},components:s,action:a,eventOrder:{[ei()]:[gL,"keying"]},buttonBehaviours:Vu([...t?[kN.config({})]:[],xw(gL,[Ki(ei(),((e,t)=>{const o="ArrowRight"===t.event.raw.code,r="ArrowLeft"===t.event.raw.code;o&&n&&t.stop(),(o||r)&&md(e.element,".tox-tree--directory").each((n=>{e.getSystem().getByDom(n).each((n=>{!Kw.isOn(n)&&o||Kw.isOn(n)&&r?(a(e),t.stop()):r&&!Kw.isOn(n)&&(md(n.element,".tox-tree--directory").each((e=>{pd(e,".tox-tree--directory__label").each((e=>{n.getSystem().getByDom(e).each(Aw.focus)}))})),t.stop())}))}))}))])])})},vL=({children:e,onLeafAction:t,visible:n,treeId:o,backstage:r})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:e.map((e=>"leaf"===e.type?mL({leaf:e,onLeafAction:t,visible:n,treeId:o,backstage:r}):bL({directory:e,onLeafAction:t,labelTabstopping:n,treeId:o,backstage:r}))),behaviours:Vu([aL.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking"}),bw.config({})])}),bL=({directory:e,onLeafAction:t,labelTabstopping:n,treeId:o,backstage:s})=>{const{children:a}=e,i=e=>a.map((n=>"leaf"===n.type?mL({leaf:n,onLeafAction:t,visible:e,treeId:o,backstage:s}):bL({directory:n,onLeafAction:t,labelTabstopping:e,treeId:o,backstage:s})));return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[hL({directory:e,visible:n,noChildren:0===e.children.length,backstage:s}),vL({children:a,onLeafAction:t,visible:!1,treeId:o,backstage:s})],behaviours:Vu([Kw.config(r(r({},e.children.length>0?{aria:{mode:"expanded"}}:{}),{},{toggleClass:"tox-tree--directory--expanded",onToggled:(e,t)=>{const n=e.components()[1],o=i(t);t?aL.grow(n):aL.shrink(n),bw.set(n,o)}}))])}},yL=(e,t)=>{const n=e.onLeafAction.getOr(E),o=xl("tree-id"),r=e.items.map((e=>"leaf"===e.type?mL({leaf:e,onLeafAction:n,visible:!0,treeId:o,backstage:t}):bL({directory:e,onLeafAction:n,labelTabstopping:!0,treeId:o,backstage:t})));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:r,behaviours:Vu([rw.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1})])}},xL=(e,t)=>{const n=e.stream.streams,o=n.setup(e,t);return Vi([Ki(e.event,o),sl((()=>t.cancel()))].concat(e.cancelEvent.map((e=>[Ki(e,(()=>t.cancel()))])).getOr([])))};var wL=Object.freeze({__proto__:null,events:xL});const CL=(e,t)=>{let n=null;const o=()=>{b(n)||(clearTimeout(n),n=null)},r=(...o)=>{b(n)&&(n=setTimeout((()=>{n=null,e.apply(null,o)}),t))};return{cancel:o,throttle:r}},SL=(e,t)=>{let n=null;const o=()=>{b(n)||(clearTimeout(n),n=null)},r=(...r)=>{o(),n=setTimeout((()=>{n=null,e.apply(null,r)}),t)};return{cancel:o,throttle:r}},_L=e=>{const t=ya(null),n=()=>({timer:null!==t.get()?"set":"unset"}),o=e=>{t.set(e)},r=()=>{const e=t.get();null!==e&&e.cancel()};return Hl({readState:n,setTimer:o,cancel:r})},kL=e=>e.stream.streams.state(e);var EL=Object.freeze({__proto__:null,throttle:_L,init:kL});const OL=(e,t)=>{const n=e.stream,o=SL(e.onStream,n.delay);return t.setTimer(o),(e,t)=>{o.throttle(e,t),n.stopEvent&&t.stop()}};var TL=[Vs("stream",Fs("mode",{throttle:[$s("delay"),ca("stopEvent",!0),$d("streams",{setup:OL,state:_L})]})),ca("event","input"),ea("cancelEvent"),Ud("onStream")];const AL=qu({fields:TL,name:"streaming",active:wL,state:EL}),RL=(e,t,n)=>{const o=Eh.getValue(n);Eh.setValue(t,o),DL(t)},NL=(e,t)=>{const n=e.element,o=Nc(n),r=n.dom;"number"!==dn(n,"type")&&t(r,o)},DL=e=>{NL(e,((e,t)=>e.setSelectionRange(t.length,t.length)))},BL=(e,t)=>{NL(e,((e,n)=>e.setSelectionRange(t,n.length)))},ML=(e,t,n)=>{if(e.selectsOver){const o=Eh.getValue(t),r=e.getDisplayText(o),s=Eh.getValue(n),a=e.getDisplayText(s);return 0===a.indexOf(r)?z.some((()=>{RL(e,t,n),BL(t,r.length)})):z.none()}return z.none()},IL=R("alloy.typeahead.itemexecute"),PL=(e,t,n,o)=>{const s=(t,n,r)=>{e.previewing.set(!1);const s=YA.getCoupled(t,"sandbox");if(Vg.isOpen(s))Vv.getCurrent(s).each((e=>{Ab.getHighlighted(e).fold((()=>{r(e)}),(()=>{$i(s,e.element,"keydown",n)}))}));else{const n=e=>{Vv.getCurrent(e).each(r)};cR(e,i(t),t,s,o,n,MC.HighlightMenuAndItem).get(E)}},a=Q_(e),i=e=>t=>t.map((t=>{const n=Ae(t.menus),o=ae(n,(e=>Z(e.items,(e=>"item"===e.type)))),r=Eh.getState(e);return r.update(Y(o,(e=>e.data))),t})),l=e=>Vv.getCurrent(e),c="typeaheadevents",d=[Aw.config({}),Eh.config({onSetValue:e.onSetValue,store:r({mode:"dataset",getDataKey:e=>Nc(e.element),getFallbackEntry:e=>({value:e,meta:{}}),setValue:(t,n)=>{Dc(t.element,e.model.getDisplayText(n))}},e.initialData.map((e=>Oa("initialValue",e))).getOr({}))}),AL.config({stream:{mode:"throttle",delay:e.responseTime,stopEvent:!1},onStream:(t,n)=>{const r=YA.getCoupled(t,"sandbox"),s=Aw.isFocused(t);if(s&&Nc(t.element).length>=e.minChars){const n=l(r).bind((e=>Ab.getHighlighted(e).map(Eh.getValue)));e.previewing.set(!0);const s=t=>{l(r).each((t=>{n.fold((()=>{e.model.selectsOver&&Ab.highlightFirst(t)}),(e=>{Ab.highlightBy(t,(t=>{const n=Eh.getValue(t);return n.value===e.value})),Ab.getHighlighted(t).orThunk((()=>(Ab.highlightFirst(t),z.none())))}))}))};cR(e,i(t),t,r,o,s,MC.HighlightJustMenu).get(E)}},cancelEvent:xi()}),rw.config({mode:"special",onDown:(e,t)=>(s(e,t,Ab.highlightFirst),z.some(!0)),onEscape:e=>{const t=YA.getCoupled(e,"sandbox");return Vg.isOpen(t)?(Vg.close(t),z.some(!0)):z.none()},onUp:(e,t)=>(s(e,t,Ab.highlightLast),z.some(!0)),onEnter:t=>{const n=YA.getCoupled(t,"sandbox"),o=Vg.isOpen(n);if(o&&!e.previewing.get())return l(n).bind((e=>Ab.getHighlighted(e))).map((e=>(Fi(t,IL(),{item:e}),!0)));{const r=Eh.getValue(t);return Li(t,xi()),e.onExecute(n,t,r),o&&Vg.close(n),z.some(!0)}}}),Kw.config({toggleClass:e.markers.openClass,aria:{mode:"expanded"}}),YA.config({others:{sandbox:t=>gR(e,t,{onOpen:()=>Kw.on(t),onClose:()=>Kw.off(t)})}}),xw(c,[rl((t=>{e.lazyTypeaheadComp.set(z.some(t))})),sl((t=>{e.lazyTypeaheadComp.set(z.none())})),il((t=>{const n=E;uR(e,i(t),t,o,n,MC.HighlightMenuAndItem).get(E)})),Ki(IL(),((t,n)=>{const o=YA.getCoupled(t,"sandbox");RL(e.model,t,n.event.item),Li(t,xi()),e.onItemExecute(t,o,n.event.item,Eh.getValue(t)),Vg.close(o),DL(t)}))].concat(e.dismissOnBlur?[Ki(mi(),(e=>{const t=YA.getCoupled(e,"sandbox");om(t.element).isNone()&&Vg.close(t)}))]:[]))],u=r({[Oi()]:[Eh.name(),AL.name(),c]},e.eventOrder);return{uid:e.uid,dom:ek(Pr(e,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:r(r({},a),Ah(e.typeaheadBehaviours,d)),eventOrder:u}},LL=R([ea("lazySink"),$s("fetch"),ca("minChars",5),ca("responseTime",1e3),zd("onOpen"),ca("getHotspot",z.some),ca("getAnchorOverrides",R({})),ca("layouts",z.none()),ca("eventOrder",{}),ba("model",{},[ca("getDisplayText",(e=>void 0!==e.meta&&void 0!==e.meta.text?e.meta.text:e.value)),ca("selectsOver",!0),ca("populateFromBrowse",!0)]),zd("onSetValue"),jd("onExecute"),zd("onItemExecute"),ca("inputClasses",[]),ca("inputAttributes",{}),ca("inputStyles",{}),ca("matchWidth",!0),ca("useMinWidth",!1),ca("dismissOnBlur",!0),Ld(["openClass"]),ea("initialData"),Oh("typeaheadBehaviours",[Aw,Eh,AL,rw,Kw,YA]),Us("lazyTypeaheadComp",(()=>ya(z.none))),Us("previewing",(()=>ya(!0)))].concat(J_()).concat(vR())),FL=R([av({schema:[Pd()],name:"menu",overrides:e=>({fakeFocus:!0,onHighlightItem:(t,n,o)=>{e.previewing.get()?e.lazyTypeaheadComp.get().each((t=>{ML(e.model,t,o).fold((()=>{e.model.selectsOver?(Ab.dehighlight(n,o),e.previewing.set(!0)):e.previewing.set(!1)}),(t=>{t(),e.previewing.set(!1)}))})):e.lazyTypeaheadComp.get().each((t=>{e.model.populateFromBrowse&&RL(e.model,t,o)}))},onExecute:(t,n)=>e.lazyTypeaheadComp.get().map((e=>(Fi(e,IL(),{item:n}),!0))),onHover:(t,n)=>{e.previewing.set(!1),e.lazyTypeaheadComp.get().each((t=>{e.model.populateFromBrowse&&RL(e.model,t,n)}))}})})]),zL=zv({name:"Typeahead",configFields:LL(),partFields:FL(),factory:PL}),jL=e=>{const t=()=>jL(e.toCached()),n=t=>jL(e.bind((e=>e.fold((e=>oR.pure(vr.error(e))),(e=>t(e)))))),o=t=>jL(e.map((e=>e.bind(t)))),s=t=>jL(e.map((e=>e.map(t)))),a=t=>jL(e.map((e=>e.mapError(t)))),i=(t,n)=>e.map((e=>e.fold(t,n))),l=(t,n)=>jL(oR.nu((o=>{let r=!1;const s=setTimeout((()=>{r=!0,o(vr.error(n()))}),t);e.get((e=>{r||(clearTimeout(s),o(e))}))})));return r(r({},e),{},{toCached:t,bindFuture:n,bindResult:o,mapResult:s,mapError:a,foldResult:i,withTimeout:l})},UL=e=>jL(oR.nu(e)),HL=e=>jL(oR.pure(vr.value(e))),$L=e=>jL(oR.pure(vr.error(e))),VL=e=>jL(oR.pure(e)),WL=e=>jL(e.map(vr.value)),qL=e=>UL((t=>{e.then((e=>{t(vr.value(e))}),(e=>{t(vr.error(e))}))})),GL={nu:UL,wrap:jL,pure:HL,value:HL,error:$L,fromResult:VL,fromFuture:WL,fromPromise:qL},KL=(e,t,n=[],o,s,a)=>{const i=t.fold((()=>({})),(e=>({action:e}))),l=r({buttonBehaviours:Vu([vO.button((()=>!e.enabled||a.isDisabled())),mO(),kN.config({}),xw("button press",[Gi("click"),Gi("mousedown")])].concat(n)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]}},i),c=Pr(l,{dom:o});return Pr(c,{components:s})},YL=(e,t,n,o=[])=>{const r=e.tooltip.map((e=>({"aria-label":n.translate(e),title:n.translate(e)}))).getOr({}),s={tag:"button",classes:["tox-tbtn"],attributes:r},a=e.icon.map((e=>HI(e,n.icons))),i=SO([a]);return KL(e,t,o,s,i,n)},XL=e=>{switch(e){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},JL=(e,t,n,o=[],r=[])=>{const s=n.translate(e.text),a=e.icon.map((e=>HI(e,n.icons))),i=[a.getOrThunk((()=>Zc(s)))],l=e.buttonType.getOr(e.primary||e.borderless?"primary":"secondary"),c=XL(l),d=[...c,...a.isSome()?["tox-button--icon"]:[],...e.borderless?["tox-button--naked"]:[],...r],u={tag:"button",classes:d,attributes:{title:s}};return KL(e,t,o,u,i,n)},QL=(e,t,n,o=[],r=[])=>{const s=JL(e,z.some(t),n,o,r);return qC.sketch(s)},ZL=(e,t)=>n=>{"custom"===t?Fi(n,PN,{name:e,value:{}}):"submit"===t?Li(n,LN):"cancel"===t?Li(n,IN):console.error("Unknown button type: ",t)},eF=(e,t)=>"menu"===t,tF=(e,t)=>"custom"===t||"cancel"===t||"submit"===t,nF=(e,t)=>"togglebutton"===t,oF=(e,t)=>{var n,o,s;const a=z.from(e.icon).map((e=>$I(e,t.icons))).map(GC),i=n=>{Fi(n,PN,{name:e.name,value:{setIcon:e=>{a.map((o=>o.getOpt(n).each((n=>{bw.set(n,[$I(e,t.icons)])}))))}}})},l=r(r({},e),{},{name:null!==(n=e.name)&&void 0!==n?n:"",primary:"primary"===e.buttonType,buttonType:z.from(e.buttonType),tooltip:z.from(e.tooltip),icon:z.from(e.name),enabled:null!==(o=e.enabled)&&void 0!==o&&o,borderless:!1}),c=l.tooltip.map((e=>({"aria-label":t.translate(e),title:t.translate(e)}))).getOr({}),d=XL(null!==(s=e.buttonType)&&void 0!==s?s:"secondary"),u=!!e.icon&&!!e.text,m={tag:"button",classes:[...d.concat(["tox-button--icon"]),...e.active?["tox-button--enabled"]:[],...u?["tox-button--icon-and-text"]:[]],attributes:c},p=[],f=t.translate(e.text),g=Zc(f),h=SO([a.map((e=>e.asSpec()))]),v=[...h,...u?[g]:[]],b=KL(l,z.some(i),p,m,v,t);return qC.sketch(b)},rF=(e,t,n)=>{if(eF(e,t)){const t=()=>a,o=e,s=r(r({},e),{},{type:"menubutton",search:z.none(),onSetup:t=>(t.setEnabled(e.enabled),E),fetch:cL(o.items,t,n)}),a=GC(lL(s,"tox-tbtn",n,z.none()));return a.asSpec()}if(tF(e,t)){const o=ZL(e.name,t),s=r(r({},e),{},{borderless:!1});return QL(s,o,n.shared.providers,[])}if(nF(e,t)){const t=r(r({},e),{},{tooltip:e.tooltip,text:e.text.getOrUndefined(),buttonType:e.buttonType.getOrUndefined()});return oF(t,n.shared.providers)}throw console.error("Unknown footer button type: ",t),new Error("Unknown footer button type")},sF=(e,t)=>{const n=ZL(e.name,"custom");return TN(z.none(),wN.parts.field(r({factory:qC},JL(e,z.some(n),t,[uI.memory(""),oI.self()]))))},aF={type:"separator"},iF=e=>({type:"menuitem",value:e.url,text:e.title,meta:{attach:e.attach},onAction:E}),lF=(e,t)=>({type:"menuitem",value:t,text:e,meta:{attach:void 0},onAction:E}),cF=e=>Y(e,iF),dF=(e,t)=>Z(t,(t=>t.type===e)),uF=(e,t)=>cF(dF(e,t)),mF=e=>uF("header",e.targets),pF=e=>uF("anchor",e.targets),fF=e=>z.from(e.anchorTop).map((e=>lF("<top>",e))).toArray(),gF=e=>z.from(e.anchorBottom).map((e=>lF("<bottom>",e))).toArray(),hF=e=>Y(e,(e=>lF(e,e))),vF=e=>te(e,((e,t)=>{const n=0===e.length||0===t.length;return n?e.concat(t):e.concat(aF,t)}),[]),bF=(e,t)=>{const n=e.toLowerCase();return Z(t,(e=>{var t;const o=void 0!==e.meta&&void 0!==e.meta.text?e.meta.text:e.text,r=null!==(t=e.value)&&void 0!==t?t:"";return qe(o.toLowerCase(),n)||qe(r.toLowerCase(),n)}))},yF=(e,t,n)=>{var o,r;const s=Eh.getValue(t),a=null!==(r=null===(o=null===s||void 0===s?void 0:s.meta)||void 0===o?void 0:o.text)&&void 0!==r?r:s.value,i=n.getLinkInformation();return i.fold((()=>[]),(t=>{const o=bF(a,hF(n.getHistory(e)));return"file"===e?vF([o,bF(a,mF(t)),bF(a,se([fF(t),pF(t),gF(t)]))]):o}))},xF=xl("aria-invalid"),wF=(e,t,n,o)=>{const s=t.shared.providers,a=t=>{const o=Eh.getValue(t);n.addToHistory(o.value,e.filetype)},i=r(r({},o.map((e=>({initialData:e}))).getOr({})),{},{dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":xF,type:"url"},minChars:0,responseTime:0,fetch:o=>{const r=yF(e.filetype,o,n),s=rP(r,S_.BUBBLE_TO_SANDBOX,t,{isHorizontalMenu:!1,search:z.none()});return oR.pure(s)},getHotspot:e=>g.getOpt(e),onSetValue:(e,t)=>{e.hasConfigured(eD)&&eD.run(e).get(E)},typeaheadBehaviours:Vu([...n.getValidationHandler().map((t=>eD.config({getRoot:e=>Ft(e.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(e,t)=>{u.getOpt(e).each((e=>{ln(e.element,"title",s.translate(t))}))}},validator:{validate:n=>{const o=Eh.getValue(n);return GL.nu((n=>{t({type:e.filetype,url:o.value},(e=>{if("invalid"===e.status){const t=vr.error(e.message);n(t)}else{const t=vr.value(e.message);n(t)}}))}))},validateOnLoad:!1}}))).toArray(),cb.config({disabled:()=>!e.enabled||s.isDisabled()}),kN.config({}),xw("urlinput-events",[Ki(ni(),(t=>{const n=Nc(t.element),o=n.trim();o!==n&&Dc(t.element,o),"file"===e.filetype&&Fi(t,BN,{name:e.name})})),Ki(oi(),(t=>{Fi(t,BN,{name:e.name}),a(t)})),Ki(pi(),(t=>{Fi(t,BN,{name:e.name}),a(t)}))])]),eventOrder:{[ni()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:e=>e.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:t.shared.getSink,parts:{menu:X_(!1,1,"normal")},onExecute:(e,t,n)=>{Fi(t,LN,{})},onItemExecute:(t,n,o,r)=>{a(t),Fi(t,BN,{name:e.name})}}),l=wN.parts.field(r(r({},i),{},{factory:zL})),c=e.label.map((e=>DN(e,s))),d=(e,t,n=e,o=e)=>sS(n,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+e],attributes:r({title:s.translate(o),"aria-live":"polite"},t.fold((()=>({})),(e=>({id:e}))))},s.icons),u=GC(d("invalid",z.some(xF),"warning")),m=GC({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[u.asSpec()]}),p=n.getUrlPicker(e.filetype),f=xl("browser.url.event"),g=GC({dom:{tag:"div",classes:["tox-control-wrap"]},components:[l,m.asSpec()],behaviours:Vu([cb.config({disabled:()=>!e.enabled||s.isDisabled()})])}),h=GC(QL({name:e.name,icon:z.some("browse"),text:e.label.getOr(""),enabled:e.enabled,primary:!1,buttonType:z.none(),borderless:!0},(e=>Li(e,f)),s,[],["tox-browse-url"])),v=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:se([[g.asSpec()],p.map((()=>h.asSpec())).toArray()])}),b=t=>{Vv.getCurrent(t).each((n=>{const o=Eh.getValue(n),s=r({fieldname:e.name},o);p.each((o=>{o(s).get((o=>{Eh.setValue(n,o),Fi(t,BN,{name:e.name})}))}))}))};return wN.sketch({dom:RN(),components:c.toArray().concat([v()]),fieldBehaviours:Vu([cb.config({disabled:()=>!e.enabled||s.isDisabled(),onDisabled:e=>{wN.getField(e).each(cb.disable),h.getOpt(e).each(cb.disable)},onEnabled:e=>{wN.getField(e).each(cb.enable),h.getOpt(e).each(cb.enable)}}),mO(),xw("url-input-events",[Ki(f,b)])])})},CF=(e,t)=>gN.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${e.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"]},components:[qC.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:eS(e.icon,t.icons),attributes:{title:t.translate(e.iconTooltip)}},action:t=>{Fi(t,PN,{name:"alert-banner",value:e.url})},buttonBehaviours:Vu([oS()])})]},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:t.translate(e.text)}}]}),SF=(e,t)=>{e.dom.checked=t},_F=e=>e.dom.checked,kF=(e,t,n)=>{const o=e=>(e.element.dom.click(),z.some(!0)),r=wN.parts.field({factory:{sketch:N},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:Vu([oI.self(),cb.config({disabled:()=>!e.enabled||t.isDisabled()}),kN.config({}),Aw.config({}),uI.withElement(n,_F,SF),rw.config({mode:"special",onEnter:o,onSpace:o,stopSpaceKeyup:!0}),xw("checkbox-events",[Ki(oi(),((t,n)=>{Fi(t,BN,{name:e.name})}))])])}),s=wN.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[Zc(t.translate(e.label))],behaviours:Vu([rD.config({})])}),a=e=>{const n="checked"===e?"selected":"unselected";return sS(n,{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+e]},t.icons)},i=GC({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[a("checked"),a("unchecked")]});return wN.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[r,i.asSpec(),s],fieldBehaviours:Vu([cb.config({disabled:()=>!e.enabled||t.isDisabled(),disableClass:"tox-checkbox--disabled",onDisabled:e=>{wN.getField(e).each(cb.disable)},onEnabled:e=>{wN.getField(e).each(cb.enable)}}),mO()])})},EF=e=>"presentation"===e.presets?gN.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:e.html}}):gN.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:e.html,attributes:{role:"document"}},containerBehaviours:Vu([kN.config({}),Aw.config({})])}),OF=e=>(t,n,o,r)=>Re(n,"name").fold((()=>e(n,r,z.none())),(s=>t.field(s,e(n,r,Re(o,s))))),TF=e=>(t,n,o,r)=>{const s=Pr(n,{source:"dynamic"});return OF(e)(t,s,o,r)},AF={bar:OF(((e,t)=>vN(e,t.shared))),collection:OF(((e,t,n)=>HN(e,t.shared.providers,n))),alertbanner:OF(((e,t)=>CF(e,t.shared.providers))),input:OF(((e,t,n)=>RP(e,t.shared.providers,n))),textarea:OF(((e,t,n)=>NP(e,t.shared.providers,n))),label:OF(((e,t)=>II(e,t.shared))),iframe:TF(((e,t,n)=>RI(e,t.shared.providers,n))),button:OF(((e,t)=>sF(e,t.shared.providers))),checkbox:OF(((e,t,n)=>kF(e,t.shared.providers,n))),colorinput:OF(((e,t,n)=>cD(e,t.shared,t.colorinput,n))),colorpicker:OF(((e,t,n)=>fI(e,t.shared.providers,n))),dropzone:OF(((e,t,n)=>xI(e,t.shared.providers,n))),grid:OF(((e,t)=>wI(e,t.shared))),listbox:OF(((e,t,n)=>cP(e,t,n))),selectbox:OF(((e,t,n)=>pP(e,t.shared.providers,n))),sizeinput:OF(((e,t)=>EP(e,t.shared.providers))),slider:OF(((e,t,n)=>OP(e,t.shared.providers,n))),urlinput:OF(((e,t,n)=>wF(e,t,t.urlinput,n))),customeditor:OF(vI),htmlpanel:OF(EF),imagepreview:OF(((e,t,n)=>MI(e,n))),table:OF(((e,t)=>TP(e,t.shared.providers))),tree:OF(((e,t)=>yL(e,t))),panel:OF(((e,t)=>dP(e,t)))},RF={field:(e,t)=>t,record:R([])},NF=(e,t,n,o)=>{const r=Pr(o,{shared:{interpreter:t=>DF(e,t,n,r)}});return DF(e,t,n,r)},DF=(e,t,n,o)=>Re(AF,t.type).fold((()=>(console.error(`Unknown factory type "${t.type}", defaulting to container: `,t),t)),(r=>r(e,t,n,o))),BF=(e,t,n)=>DF(RF,e,t,n),MF="layout-inset",IF=e=>e.x,PF=(e,t)=>e.x+e.width/2-t.width/2,LF=(e,t)=>e.x+e.width-t.width,FF=e=>e.y,zF=(e,t)=>e.y+e.height-t.height,jF=(e,t)=>e.y+e.height/2-t.height/2,UF=(e,t,n)=>qd(LF(e,t),zF(e,t),n.insetSouthwest(),eu(),"southwest",lu(e,{right:0,bottom:3}),MF),HF=(e,t,n)=>qd(IF(e),zF(e,t),n.insetSoutheast(),Zd(),"southeast",lu(e,{left:1,bottom:3}),MF),$F=(e,t,n)=>qd(LF(e,t),FF(e),n.insetNorthwest(),Qd(),"northwest",lu(e,{right:0,top:2}),MF),VF=(e,t,n)=>qd(IF(e),FF(e),n.insetNortheast(),Jd(),"northeast",lu(e,{left:1,top:2}),MF),WF=(e,t,n)=>qd(PF(e,t),FF(e),n.insetNorth(),tu(),"north",lu(e,{top:2}),MF),qF=(e,t,n)=>qd(PF(e,t),zF(e,t),n.insetSouth(),nu(),"south",lu(e,{bottom:3}),MF),GF=(e,t,n)=>qd(LF(e,t),jF(e,t),n.insetEast(),ru(),"east",lu(e,{right:0}),MF),KF=(e,t,n)=>qd(IF(e),jF(e,t),n.insetWest(),ou(),"west",lu(e,{left:1}),MF),YF=e=>{switch(e){case"north":return WF;case"northeast":return VF;case"northwest":return $F;case"south":return qF;case"southeast":return HF;case"southwest":return UF;case"east":return GF;case"west":return KF}},XF=(e,t,n,o,r)=>{const s=wm(o).map(YF).getOr(WF);return s(e,t,n,o,r)},JF=e=>{switch(e){case"north":return qF;case"northeast":return HF;case"northwest":return UF;case"south":return WF;case"southeast":return VF;case"southwest":return $F;case"east":return KF;case"west":return GF}},QF=(e,t,n,o,r)=>{const s=wm(o).map(JF).getOr(WF);return s(e,t,n,o,r)},ZF={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},ez=(e,t,n)=>{const o=12,r={maxHeightFunction:tp()},s=()=>({type:"node",root:Jt(Xt(e())),node:z.from(e()),bubble:ap(o,o,ZF),layouts:{onRtl:()=>[VF],onLtr:()=>[$F]},overrides:r}),a=()=>({type:"hotspot",hotspot:t(),bubble:ap(-o,o,ZF),layouts:{onRtl:()=>[yu,xu,_u],onLtr:()=>[xu,yu,_u]},overrides:r});return()=>n()?s():a()},tz=(e,t,n)=>{const o=()=>({type:"node",root:Jt(Xt(e())),node:z.from(e()),layouts:{onRtl:()=>[WF],onLtr:()=>[WF]}}),r=()=>({type:"hotspot",hotspot:t(),layouts:{onRtl:()=>[_u],onLtr:()=>[_u]}});return()=>n()?o():r()},nz=(e,t)=>()=>({type:"selection",root:t(),getSelection:()=>{const t=e.selection.getRng();return z.some(Zp.range(st.fromDom(t.startContainer),t.startOffset,st.fromDom(t.endContainer),t.endOffset))}}),oz=e=>t=>({type:"node",root:e(),node:t}),rz=(e,t,n)=>{const o=d_(e),r=()=>st.fromDom(e.getBody()),s=()=>st.fromDom(e.getContentAreaContainer()),a=()=>o||!n();return{inlineDialog:ez(s,t,a),banner:tz(s,t,a),cursor:nz(e,r),node:oz(r)}},sz=e=>(t,n)=>{const o=fA(e);o(t,n)},az=e=>()=>YT(e),iz=e=>t=>XT(e,t),lz=e=>t=>KT(e,t),cz=e=>({colorPicker:sz(e),hasCustomColors:az(e),getColors:iz(e),getColorCols:lz(e)}),dz=e=>()=>GS(e),uz=e=>({isDraggableModal:dz(e)}),mz=e=>{const t=ya(l_(e)?"bottom":"top");return{isPositionedAtTop:()=>"top"===t.get(),getDockingMode:t.get,setDockingMode:t.set}},pz=e=>De(e,"items"),fz=e=>De(e,"format"),gz=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],hz=e=>Ne(e,"items"),vz=e=>Ne(e,"block"),bz=e=>Ne(e,"inline"),yz=e=>Ne(e,"selector"),xz=e=>te(e,((e,t)=>{if(hz(t)){const n=xz(t.items);return{customFormats:e.customFormats.concat(n.customFormats),formats:e.formats.concat([{title:t.title,items:n.formats}])}}if(bz(t)||vz(t)||yz(t)){const n=f(t.name)?t.name:t.title.toLowerCase(),o=`custom-${n}`;return{customFormats:e.customFormats.concat([{name:o,format:t}]),formats:e.formats.concat([{title:t.title,format:o,icon:t.icon}])}}return r(r({},e),{},{formats:e.formats.concat(t)})}),{customFormats:[],formats:[]}),wz=(e,t)=>{const n=xz(t),o=t=>{X(t,(t=>{e.formatter.has(t.name)||e.formatter.register(t.name,t.format)}))};return e.formatter?o(n.customFormats):e.on("init",(()=>{o(n.customFormats)})),n.formats},Cz=e=>ES(e).map((t=>{const n=wz(e,t);return OS(e)?gz.concat(n):n})).getOr(gz),Sz=e=>{const t=be(e);return 1===t.length&&W(t,"title")},_z=(e,t,n)=>r(r({},e),{},{type:"formatter",isSelected:t(e.format),getStylePreview:n(e.format)}),kz=(e,t,n,o)=>{const s=e=>_z(e,n,o),a=e=>{const t=l(e.items);return r(r({},e),{},{type:"submenu",getStyleItems:R(t)})},i=t=>{const s=f(t.name)?t.name:xl(t.title),a=`custom-${s}`,i=r(r({},t),{},{type:"formatter",format:a,isSelected:n(a),getStylePreview:o(a)});return e.formatter.register(s,i),i},l=e=>Y(e,(e=>pz(e)?a(e):fz(e)?s(e):Sz(e)?r(r({},e),{},{type:"separator"}):i(e)));return l(t)},Ez=e=>{const t=t=>()=>e.formatter.match(t),n=t=>()=>{const n=e.formatter.get(t);return void 0!==n?z.some({tag:n.length>0&&(n[0].inline||n[0].block)||"div",styles:e.dom.parseStyle(e.formatter.getCssText(t))}):z.none()},o=ya([]),r=ya([]),s=ya(!1);e.on("PreInit",(r=>{const s=Cz(e),a=kz(e,s,t,n);o.set(a)})),e.on("addStyleModifications",(o=>{const a=kz(e,o.items,t,n);r.set(a),s.set(o.replace)}));const a=()=>{const e=s.get()?[]:o.get(),t=r.get();return e.concat(t)};return{getData:a}},Oz=e=>C(e)&&1===e.nodeType,Tz=bI.trim,Az=e=>t=>{if(Oz(t)){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1},Rz=Az("true"),Nz=Az("false"),Dz=(e,t,n,o,r)=>({type:e,title:t,url:n,level:o,attach:r}),Bz=e=>{let t=e;while(t=t.parentNode){const e=t.contentEditable;if(e&&"inherit"!==e)return Rz(t)}return!1},Mz=(e,t)=>Y(gf(st.fromDom(t),e),(e=>e.dom)),Iz=e=>e.innerText||e.textContent,Pz=e=>e.id?e.id:xl("h"),Lz=e=>e&&"A"===e.nodeName&&void 0!==(e.id||e.name),Fz=e=>Lz(e)&&jz(e),zz=e=>e&&/^(H[1-6])$/.test(e.nodeName),jz=e=>Bz(e)&&!Nz(e),Uz=e=>zz(e)&&jz(e),Hz=e=>zz(e)?parseInt(e.nodeName.substr(1),10):0,$z=e=>{var t;const n=Pz(e),o=()=>{e.id=n};return Dz("header",null!==(t=Iz(e))&&void 0!==t?t:"","#"+n,Hz(e),o)},Vz=e=>{const t=e.id||e.name,n=Iz(e);return Dz("anchor",n||"#"+t,"#"+t,0,E)},Wz=e=>Y(Z(e,Uz),$z),qz=e=>Y(Z(e,Fz),Vz),Gz=e=>{const t=Mz("h1,h2,h3,h4,h5,h6,a:not([href])",e);return t},Kz=e=>Tz(e.title).length>0,Yz=e=>{const t=Gz(e);return Z(Wz(t).concat(qz(t)),Kz)},Xz={find:Yz},Jz="tinymce-url-history",Qz=5,Zz=e=>f(e)&&/^https?/.test(e),ej=e=>v(e)&&e.length<=Qz&&ie(e,Zz),tj=e=>g(e)&&Te(e,(e=>!ej(e))).isNone(),nj=()=>{const e=OT.getItem(Jz);if(null===e)return{};let t;try{t=JSON.parse(e)}catch(n){if(n instanceof SyntaxError)return console.log("Local storage "+Jz+" was not valid JSON",n),{};throw n}return tj(t)?t:(console.log("Local storage "+Jz+" was not valid format",t),{})},oj=e=>{if(!tj(e))throw new Error("Bad format for history:\n"+JSON.stringify(e));OT.setItem(Jz,JSON.stringify(e))},rj=e=>{const t=nj();return Re(t,e).getOr([])},sj=(e,t)=>{if(!Zz(e))return;const n=nj(),o=Re(n,t).getOr([]),r=Z(o,(t=>t!==e));n[t]=[e].concat(r).slice(0,Qz),oj(n)},aj=e=>!!e,ij=e=>we(bI.makeMap(e,/[, ]/),aj),lj=e=>z.from(jS(e)),cj=e=>{const t=z.from($S(e)).filter(aj).map(ij);return lj(e).fold(L,(e=>t.fold(F,(e=>be(e).length>0&&e))))},dj=(e,t)=>{const n=cj(e);return y(n)?n?lj(e):z.none():n[t]?lj(e):z.none()},uj=(e,t)=>dj(e,t).map((n=>o=>oR.nu((s=>{const a=(e,t)=>{if(!f(e))throw new Error("Expected value to be string");if(void 0!==t&&!g(t))throw new Error("Expected meta to be a object");const n={value:e,meta:t};s(n)},i=r({filetype:t,fieldname:o.fieldname},z.from(o.meta).getOr({}));n.call(e,a,o.value,i)})))),mj=e=>z.from(e).filter(f).getOrUndefined(),pj=e=>VS(e)?z.some({targets:Xz.find(e.getBody()),anchorTop:mj(WS(e)),anchorBottom:mj(qS(e))}):z.none(),fj=e=>z.from(US(e)),gj=e=>({getHistory:rj,addToHistory:sj,getLinkInformation:()=>pj(e),getValidationHandler:()=>fj(e),getUrlPicker:t=>uj(e,t)}),hj=(e,t,n)=>{const o=ya(!1),s=mz(t),a={icons:()=>t.ui.registry.getAll().icons,menuItems:()=>t.ui.registry.getAll().menuItems,translate:KC.translate,isDisabled:()=>t.mode.isReadOnly()||!t.ui.isEnabled(),getOption:t.options.get},i=gj(t),l=Ez(t),c=cz(t),d=uz(t),u=()=>o.get(),m=e=>o.set(e),p={shared:{providers:a,anchors:rz(t,n,s.isPositionedAtTop),header:s},urlinput:i,styles:l,colorinput:c,dialog:d,isContextMenuOpen:u,setContextMenuState:m},f=r(r({},p),{},{shared:r(r({},p.shared),{},{interpreter:e=>BF(e,{},f),getSink:e.popup})}),g=r(r({},p),{},{shared:r(r({},p.shared),{},{interpreter:e=>BF(e,{},g),getSink:e.dialog})});return{popup:f,dialog:g}},vj=(e,t,n)=>{const o=(e,o)=>{X([t,...n],(t=>{t.broadcastEvent(e,o)}))},r=(e,o)=>{X([t,...n],(t=>{t.broadcastOn([e],o)}))},s=e=>r(Wg(),{target:e.target}),a=Qo(),i=Mm(a,"touchstart",s),l=Mm(a,"touchmove",(e=>o(Ci(),e))),c=Mm(a,"touchend",(e=>o(Si(),e))),d=Mm(a,"mousedown",s),u=Mm(a,"mouseup",(e=>{0===e.raw.button&&r(Gg(),{target:e.target})})),m=e=>r(Wg(),{target:st.fromDom(e.target)}),p=e=>{0===e.button&&r(Gg(),{target:st.fromDom(e.target)})},f=()=>{X(e.editorManager.get(),(t=>{e!==t&&t.dispatch("DismissPopups",{relatedTarget:e})}))},g=e=>o(_i(),Pm(e)),h=e=>{r(qg(),{}),o(ki(),Pm(e))},v=Xt(st.fromDom(e.getElement())),b=Im(v,"scroll",(n=>{requestAnimationFrame((()=>{const r=e.getContainer();if(void 0!==r&&null!==r){const r=$R(e,t.element),s=r.map((e=>[e.element,...e.others])).getOr([]);q(s,(e=>Nt(e,n.target)))&&(e.dispatch("ElementScroll",{target:n.target.dom}),o(Di(),n))}}))})),y=()=>r(qg(),{}),x=t=>{t.state&&r(Wg(),{target:st.fromDom(e.getContainer())})},w=e=>{r(Wg(),{target:st.fromDom(e.relatedTarget.getContainer())})};e.on("PostRender",(()=>{e.on("click",m),e.on("tap",m),e.on("mouseup",p),e.on("mousedown",f),e.on("ScrollWindow",g),e.on("ResizeWindow",h),e.on("ResizeEditor",y),e.on("AfterProgressState",x),e.on("DismissPopups",w)})),e.on("remove",(()=>{e.off("click",m),e.off("tap",m),e.off("mouseup",p),e.off("mousedown",f),e.off("ScrollWindow",g),e.off("ResizeWindow",h),e.off("ResizeEditor",y),e.off("AfterProgressState",x),e.off("DismissPopups",w),d.unbind(),i.unbind(),l.unbind(),c.unbind(),u.unbind(),b.unbind()})),e.on("detach",(()=>{X([t,...n],_g),X([t,...n],(e=>e.destroy()))}))},bj=Tv,yj=dv,xj=R([ca("shell",!1),$s("makeItem"),ca("setupItem",E),Rh.field("listBehaviours",[bw])]),wj=()=>({behaviours:Vu([bw.config({})])}),Cj=iv({name:"items",overrides:wj}),Sj=R([Cj]),_j=R("CustomList"),kj=(e,t,n,o)=>{const r=(t,n)=>{a(t).fold((()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")}),(o=>{const r=bw.contents(o),s=n.length,a=s-r.length,i=a>0?G(a,(()=>e.makeItem())):[],l=r.slice(s);X(l,(e=>bw.remove(o,e))),X(i,(e=>bw.append(o,e)));const c=bw.contents(o);X(c,((o,r)=>{e.setupItem(t,o,n[r],r)}))}))},s=e.shell?{behaviours:[bw.config({})],components:[]}:{behaviours:[],components:t},a=t=>e.shell?z.some(t):xv(t,e,"items");return{uid:e.uid,dom:e.dom,components:s.components,behaviours:Ah(e.listBehaviours,s.behaviours),apis:{setItems:r}}},Ej=zv({name:_j(),configFields:xj(),partFields:Sj(),factory:kj,apis:{setItems:(e,t,n)=>{e.setItems(t,n)}}}),Oj=R([$s("dom"),ca("shell",!0),Oh("toolbarBehaviours",[bw])]),Tj=()=>({behaviours:Vu([bw.config({})])}),Aj=R([iv({name:"groups",overrides:Tj})]),Rj=(e,t,n,o)=>{const r=(e,t)=>{s(e).fold((()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")}),(e=>{bw.set(e,t)}))},s=t=>e.shell?z.some(t):xv(t,e,"groups"),a=e.shell?{behaviours:[bw.config({})],components:[]}:{behaviours:[],components:t};return{uid:e.uid,dom:e.dom,components:a.components,behaviours:Ah(e.toolbarBehaviours,a.behaviours),apis:{setGroups:r},domModification:{attributes:{role:"group"}}}},Nj=zv({name:"Toolbar",configFields:Oj(),partFields:Aj(),factory:Rj,apis:{setGroups:(e,t,n)=>{e.setGroups(t,n)}}}),Dj=E,Bj=L,Mj=R([]);var Ij=Object.freeze({__proto__:null,setup:Dj,isDocked:Bj,getBehaviours:Mj});const Pj=e=>{const t=Be(Cn(e,"position"),"fixed"),n=t?z.none():jt(e);return n.orThunk((()=>{const t=st.fromTag("span");return Lt(e).bind((e=>{Ho(e,t);const n=jt(t);return qo(t),n}))}))},Lj=e=>Pj(e).map(Pn).getOrThunk((()=>Bn(0,0))),Fj=(e,t)=>{const n=e.element;Cc(n,t.transitionClass),_c(n,t.fadeOutClass),Cc(n,t.fadeInClass),t.onShow(e)},zj=(e,t)=>{const n=e.element;Cc(n,t.transitionClass),_c(n,t.fadeInClass),Cc(n,t.fadeOutClass),t.onHide(e)},jj=(e,t)=>e.y<t.bottom&&e.bottom>t.y,Uj=(e,t)=>e.y>=t.y,Hj=(e,t)=>e.bottom<=t.bottom,$j=(e,t,n)=>({location:"top",leftX:t,topY:n.bounds.y-e.y}),Vj=(e,t,n)=>({location:"bottom",leftX:t,bottomY:e.bottom-n.bounds.bottom}),Wj=e=>e.box.x-e.win.x,qj=(e,t,n)=>{const o=t.win,r=t.box,s=Wj(t);return ve(e,(e=>{switch(e){case"bottom":return Hj(r,n.bounds)?z.none():z.some(Vj(o,s,n));case"top":return Uj(r,n.bounds)?z.none():z.some($j(o,s,n));default:return z.none()}})).getOr({location:"no-dock"})},Gj=(e,t,n)=>ie(e,(e=>{switch(e){case"bottom":return Hj(t,n.bounds);case"top":return Uj(t,n.bounds)}})),Kj=(e,t)=>{const n=t.optScrollEnv.fold(R(e.bounds.y),(t=>t.scrollElmTop+(e.bounds.y-t.currentScrollTop)));return Bn(e.bounds.x,n)},Yj=(e,t)=>{const n=t.optScrollEnv.fold(R(e.y),(t=>e.y+t.currentScrollTop-t.scrollElmTop));return Bn(e.x,n)},Xj=(e,t,n)=>n.getInitialPos().map((n=>{const o=Kj(n,t);return{box:ir(o.left,o.top,jn(e),An(e)),location:n.location}})),Jj=(e,t,n,o,r)=>{const s=Yj(t,n),a=ir(s.left,s.top,t.width,t.height);o.setInitialPos({style:Sn(e),position:xn(e,"position")||"static",bounds:a,location:r.location})},Qj=(e,t,n,o,r)=>{o.getInitialPos().fold((()=>Jj(e,t,n,o,r)),(()=>E))},Zj=(e,t,n)=>n.getInitialPos().bind((o=>{var r;switch(n.clearInitialPos(),o.position){case"static":return z.some({morph:"static"});case"absolute":const n=Pj(e).getOr(rn()),s=lr(n),a=null!==(r=n.dom.scrollTop)&&void 0!==r?r:0;return z.some({morph:"absolute",positionCss:sm("absolute",Re(o.style,"left").map((e=>t.x-s.x)),Re(o.style,"top").map((e=>t.y-s.y+a)),Re(o.style,"right").map((e=>s.right-t.right)),Re(o.style,"bottom").map((e=>s.bottom-t.bottom)))});default:return z.none()}})),eU=(e,t,n)=>Xj(e,t,n).filter((({box:e})=>Gj(n.getModes(),e,t))).bind((({box:t})=>Zj(e,t,n))),tU=e=>{switch(e.location){case"top":return z.some({morph:"fixed",positionCss:sm("fixed",z.some(e.leftX),z.some(e.topY),z.none(),z.none())});case"bottom":return z.some({morph:"fixed",positionCss:sm("fixed",z.some(e.leftX),z.none(),z.none(),z.some(e.bottomY))});default:return z.none()}},nU=(e,t,n)=>{const o=lr(e),r=mr(),s=qj(n.getModes(),{win:r,box:o},t);return"top"===s.location||"bottom"===s.location?(Jj(e,o,t,n,s),tU(s)):z.none()},oU=(e,t,n)=>eU(e,t,n).orThunk((()=>t.optScrollEnv.bind((o=>Xj(e,t,n))).bind((({box:e,location:n})=>{const o=mr(),r=Wj({win:o,box:e}),s="top"===n?$j(o,r,t):Vj(o,r,t);return tU(s)})))),rU=(e,t,n)=>{const o=e.element,r=Be(Cn(o,"position"),"fixed");return r?oU(o,t,n):nU(o,t,n)},sU=(e,t,n)=>{const o=e.element;return Xj(o,t,n).bind((({box:e})=>Zj(o,e,n)))},aU=(e,t,n,o)=>{const r=lr(e),s=mr(),a=Wj({win:s,box:r}),i=o(s,a,t);return"bottom"===i.location||"top"===i.location?(Qj(e,r,t,n,i),tU(i)):z.none()},iU=(e,t,n)=>{n.setDocked(!1),X(["left","right","top","bottom","position"],(t=>kn(e.element,t))),t.onUndocked(e)},lU=(e,t,n,o)=>{const r="fixed"===o.position;n.setDocked(r),im(e.element,o);const s=r?t.onDocked:t.onUndocked;s(e)},cU=(e,t,n,o,r=!1)=>{t.contextual.each((t=>{t.lazyContext(e).each((s=>{const a=jj(s,o.bounds);if(a!==n.isVisible())if(n.setVisible(a),r&&!a)Ec(e.element,[t.fadeOutClass]),t.onHide(e);else{const n=a?Fj:zj;n(e,t)}}))}))},dU=(e,t,n,o,r)=>{cU(e,t,n,o,!0),lU(e,t,n,r.positionCss)},uU=(e,t,n,o,r)=>{switch(r.morph){case"static":return iU(e,t,n);case"absolute":return lU(e,t,n,r.positionCss);case"fixed":return dU(e,t,n,o,r)}},mU=(e,t,n)=>{const o=t.lazyViewport(e);cU(e,t,n,o),rU(e,o,n).each((r=>{uU(e,t,n,o,r)}))},pU=(e,t,n)=>{const o=e.element;n.setDocked(!1);const r=t.lazyViewport(e);sU(e,r,n).each((o=>{switch(o.morph){case"static":iU(e,t,n);break;case"absolute":lU(e,t,n,o.positionCss);break}})),n.setVisible(!0),t.contextual.each((t=>{Oc(o,[t.fadeInClass,t.fadeOutClass,t.transitionClass]),t.onShow(e)})),fU(e,t,n)},fU=(e,t,n)=>{e.getSystem().isConnected()&&mU(e,t,n)},gU=(e,t,n)=>{n.isDocked()&&pU(e,t,n)},hU=e=>(t,n,o)=>{const r=n.lazyViewport(t),s=aU(t.element,r,o,e);s.each((e=>{dU(t,n,o,r,e)}))},vU=hU($j),bU=hU(Vj),yU=(e,t,n)=>n.isDocked(),xU=(e,t,n,o)=>n.setModes(o),wU=(e,t,n)=>n.getModes();var CU=Object.freeze({__proto__:null,refresh:fU,reset:gU,isDocked:yU,getModes:wU,setModes:xU,forceDockToTop:vU,forceDockToBottom:bU});const SU=(e,t)=>Vi([ol(ai(),((n,o)=>{e.contextual.each((e=>{if(kc(n.element,e.transitionClass)){Oc(n.element,[e.transitionClass,e.fadeInClass]);const o=t.isVisible()?e.onShown:e.onHidden;o(n)}o.stop()}))})),Ki(_i(),((n,o)=>{fU(n,e,t)})),Ki(Di(),((n,o)=>{fU(n,e,t)})),Ki(ki(),((n,o)=>{gU(n,e,t)}))]);var _U=Object.freeze({__proto__:null,events:SU}),kU=[ia("contextual",[qs("fadeInClass"),qs("fadeOutClass"),qs("transitionClass"),Ys("lazyContext"),zd("onShow"),zd("onShown"),zd("onHide"),zd("onHidden")]),ga("lazyViewport",(()=>({bounds:mr(),optScrollEnv:z.none()}))),va("modes",["top","bottom"],Ss),zd("onDocked"),zd("onUndocked")];const EU=e=>{const t=ya(!1),n=ya(!0),o=Dm(),r=ya(e.modes),s=()=>`docked:  ${t.get()}, visible: ${n.get()}, modes: ${r.get().join(",")}`;return Hl({isDocked:t.get,setDocked:t.set,getInitialPos:o.get,setInitialPos:o.set,clearInitialPos:o.clear,isVisible:n.get,setVisible:n.set,getModes:r.get,setModes:r.set,readState:s})};var OU=Object.freeze({__proto__:null,init:EU});const TU=qu({fields:kU,name:"docking",active:_U,apis:CU,state:OU}),AU=R(xl("toolbar-height-change")),RU={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},NU="tox-tinymce--toolbar-sticky-on",DU="tox-tinymce--toolbar-sticky-off",BU=(e,t)=>{const n=Bt(t),o=Pt(t),r=o.dom.innerHeight,s=Go(n),a=st.fromDom(e.elm),i=cr(a),l=An(a),c=i.y,d=c+l,u=Pn(t),m=An(t),p=u.top,f=p+m,g=Math.abs(p-s.top)<2,h=Math.abs(f-(s.top+r))<2;if(g&&c<f)Ko(s.left,c-m,n);else if(h&&d>p){const e=c-r+l+m;Ko(s.left,e,n)}},MU=(e,t)=>W(TU.getModes(e),t),IU=e=>{const t=e=>Rn(e)+(parseInt(xn(e,"margin-top"),10)||0)+(parseInt(xn(e,"margin-bottom"),10)||0),n=e.element;Ft(n).each((o=>{const r="padding-"+TU.getModes(e)[0];if(TU.isDocked(e)){const e=jn(o);vn(n,"width",e+"px"),vn(o,r,t(n)+"px")}else kn(n,"width"),kn(o,r)}))},PU=(e,t)=>{t?(_c(e,RU.fadeOutClass),Ec(e,[RU.transitionClass,RU.fadeInClass])):(_c(e,RU.fadeInClass),Ec(e,[RU.fadeOutClass,RU.transitionClass]))},LU=(e,t)=>{const n=st.fromDom(e.getContainer());t?(Cc(n,NU),_c(n,DU)):(Cc(n,DU),_c(n,NU))},FU=(e,t)=>{const n=Bt(t);nm(n).filter((e=>!Nt(t,e))).filter((t=>Nt(t,st.fromDom(n.dom.body))||Dt(e,t))).each((()=>Zu(t)))},zU=(e,t)=>om(e).orThunk((()=>t().toOptional().bind((e=>om(e.element))))),jU=(e,t,n)=>{e.inline||(t.header.isPositionedAtTop()||e.on("ResizeEditor",(()=>{n().each(TU.reset)})),e.on("ResizeWindow ResizeEditor",(()=>{n().each(IU)})),e.on("SkinLoaded",(()=>{n().each((e=>{TU.isDocked(e)?TU.reset(e):TU.refresh(e)}))})),e.on("FullscreenStateChanged",(()=>{n().each(TU.reset)}))),e.on("AfterScrollIntoView",(e=>{n().each((t=>{TU.refresh(t);const n=t.element;_y(n)&&BU(e,n)}))})),e.on("PostRender",(()=>{LU(e,!1)}))},UU=e=>e().map(TU.isDocked).getOr(!1),HU=()=>[Xu.config({channels:{[AU()]:{onReceive:IU}}})],$U=(e,t)=>{const n=Dm(),o=t.getSink,s=e=>{o().each((t=>e(t.element)))},a=t=>{e.inline||IU(t),LU(e,TU.isDocked(t)),t.getSystem().broadcastOn([qg()],{}),o().each((e=>e.getSystem().broadcastOn([qg()],{})))},i=e.inline?[]:HU();return[Aw.config({}),TU.config({contextual:r({lazyContext:t=>{const n=Rn(t.element),o=e.inline?e.getContentAreaContainer():e.getContainer();return z.from(o).map((o=>{const r=lr(st.fromDom(o)),s=$R(e,t.element);return s.fold((()=>{const e=r.height-n,o=r.y+(MU(t,"top")?0:n);return ir(r.x,o,r.width,e)}),(e=>{const t=dr(r,VR(e));return ir(t.x,t.y,t.width,t.height-n)}))}))},onShow:()=>{s((e=>PU(e,!0)))},onShown:e=>{s((e=>Oc(e,[RU.transitionClass,RU.fadeInClass]))),n.get().each((t=>{FU(e.element,t),n.clear()}))},onHide:e=>{zU(e.element,o).fold(n.clear,n.set),s((e=>PU(e,!1)))},onHidden:()=>{s((e=>Oc(e,[RU.transitionClass])))}},RU),lazyViewport:t=>{const n=$R(e,t.element);return n.fold((()=>{const n=mr(),o=LS(e),r=n.y+(MU(t,"top")?o:0),s=n.height-(MU(t,"bottom")?o:0);return{bounds:ir(n.x,r,n.width,s),optScrollEnv:z.none()}}),(e=>{const t=VR(e);return{bounds:t,optScrollEnv:z.some({currentScrollTop:e.element.dom.scrollTop,scrollElmTop:Pn(e.element).top})}}))},modes:[t.header.getDockingMode()],onDocked:a,onUndocked:a}),...i]};var VU=Object.freeze({__proto__:null,setup:jU,isDocked:UU,getBehaviours:$U});const WU=e=>{const t=e.editor,n=e.sticky?$U:Mj;return{uid:e.uid,dom:e.dom,components:e.components,behaviours:Vu(n(t,e.sharedBackstage))}},qU=fs([Ok,Vs("items",hs([ys([Tk,Zs("items",Ss)]),Ss]))].concat(iE)),GU=e=>Ms("GroupToolbarButton",qU,e),KU=[oa("text"),oa("tooltip"),oa("icon"),da("search",!1,hs([_s,fs([oa("placeholder")])],(e=>y(e)?e?z.some({placeholder:z.none()}):z.none():z.some(e)))),Ys("fetch"),ga("onSetup",(()=>E))],YU=fs([Ok,...KU]),XU=e=>Ms("menubutton",YU,e),JU=fs([Ok,Hk,Uk,jk,Wk,Mk,Fk,pa("presets","normal",["normal","color","listpreview"]),Xk(1),Pk,Lk]),QU=e=>Ms("SplitButton",JU,e),ZU=(e,t)=>{const n=(e,n)=>{const o=Y(n,(e=>{const n={type:"menubutton",text:e.text,fetch:t=>{t(e.getItems())}},o=XU(n).mapError((e=>Ls(e))).getOrDie();return lL(o,"tox-mbtn",t.backstage,z.some("menuitem"))}));bw.set(e,o)},o={focus:rw.focusIn,setMenus:n};return{uid:e.uid,dom:e.dom,components:[],behaviours:Vu([bw.config({}),xw("menubar-events",[rl((t=>{e.onSetup(t)})),Ki(Ja(),((e,t)=>{fd(e.element,".tox-mbtn--active").each((n=>{gd(t.event.target,".tox-mbtn").each((t=>{Nt(n,t)||e.getSystem().getByDom(n).each((n=>{e.getSystem().getByDom(t).each((e=>{wR.expand(e),wR.close(n),Aw.focus(e)}))}))}))}))})),Ki(Ri(),((e,t)=>{t.event.prevFocus.bind((t=>e.getSystem().getByDom(t).toOptional())).each((n=>{t.event.newFocus.bind((t=>e.getSystem().getByDom(t).toOptional())).each((e=>{wR.isOpen(n)&&(wR.expand(e),wR.close(n))}))}))}))]),rw.config({mode:"flow",selector:".tox-mbtn",onEscape:t=>(e.onEscape(t),z.some(!0))}),kN.config({})]),apis:o,domModification:{attributes:{role:"menubar"}}}};var eH=Fv({factory:ZU,name:"silver.Menubar",configFields:[$s("dom"),$s("uid"),$s("onEscape"),$s("backstage"),ca("onSetup",E)],apis:{focus:(e,t)=>{e.focus(t)},setMenus:(e,t,n)=>{e.setMenus(t,n)}}});const tH="⚡️Upgrade",nH="https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_source=TinyMCE&utm_medium=SPAP&utm_campaign=SPAP&utm_id=editorreferral",oH=e=>({uid:e.uid,dom:e.dom,components:[{dom:{tag:"a",attributes:{href:nH,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:tH}}]}),rH="container",sH=[Oh("slotBehaviours",[])],aH=e=>"<alloy.field."+e+">",iH=e=>{const t=(()=>{const e=[],t=(t,n)=>(e.push(t),gv(rH,aH(t),n));return{slot:t,record:R(e)}})(),n=e(t),o=t.record(),r=Y(o,(e=>sv({name:e,pname:aH(e)})));return Dv(rH,sH,r,lH,n)},lH=(e,t)=>{const n=t=>_v(e),o=(t,n)=>xv(t,e,n),r=(t,n)=>(o,r)=>xv(o,e,r).map((e=>t(e,r))).getOr(n),s=e=>(t,n)=>{X(n,(n=>e(t,n)))},a=(e,t)=>"true"!==dn(e.element,"aria-hidden"),i=(e,t)=>{if(!a(e)){const n=e.element;kn(n,"display"),pn(n,"aria-hidden"),Fi(e,Ni(),{name:t,visible:!0})}},l=(e,t)=>{if(a(e)){const n=e.element;vn(n,"display","none"),ln(n,"aria-hidden","true"),Fi(e,Ni(),{name:t,visible:!1})}},c=r(a,!1),d=r(l),u=s(d),m=e=>u(e,n()),p=r(i),f={getSlotNames:n,getSlot:o,isShowing:c,hideSlot:d,hideAllSlots:m,showSlot:p};return{uid:e.uid,dom:e.dom,components:t,behaviours:Th(e.slotBehaviours),apis:f}},cH=we({getSlotNames:(e,t)=>e.getSlotNames(t),getSlot:(e,t,n)=>e.getSlot(t,n),isShowing:(e,t,n)=>e.isShowing(t,n),hideSlot:(e,t,n)=>e.hideSlot(t,n),hideAllSlots:(e,t)=>e.hideAllSlots(t),showSlot:(e,t,n)=>e.showSlot(t,n)},(e=>jl(e))),dH=r(r({},cH),{sketch:iH}),uH=fs([Uk,Hk,ga("onShow",E),ga("onHide",E),Fk]),mH=e=>Ms("sidebar",uH,e),pH=e=>{const{sidebars:t}=e.ui.registry.getAll();X(be(t),(n=>{const o=t[n],r=()=>Be(z.from(e.queryCommandValue("ToggleSidebar")),n);e.ui.registry.addToggleButton(n,{icon:o.icon,tooltip:o.tooltip,onAction:t=>{e.execCommand("ToggleSidebar",!1,n),t.setActive(r())},onSetup:t=>{t.setActive(r());const n=()=>t.setActive(r());return e.on("ToggleSidebar",n),()=>{e.off("ToggleSidebar",n)}}})}))},fH=e=>({element:()=>e.element.dom}),gH=(e,t)=>{const n=Y(be(t),(e=>{const n=t[e],o=Is(mH(n));return{name:e,getApi:fH,onSetup:o.onSetup,onShow:o.onShow,onHide:o.onHide}}));return Y(n,(t=>{const o=ya(E);return e.slot(t.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:KE.unnamedEvents([yO(t,o),xO(t,o),Ki(Ni(),((e,t)=>{const o=t.event,r=oe(n,(e=>e.name===o.name));r.each((t=>{const n=o.visible?t.onShow:t.onHide;n(t.getApi(e))}))}))])})}))},hH=e=>dH.sketch((t=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:gH(t,e),slotBehaviours:KE.unnamedEvents([rl((e=>dH.hideAllSlots(e)))])}))),vH=(e,t,n)=>{const o=Vv.getCurrent(e);o.each((o=>{bw.set(o,[hH(t)]);const r=null===n||void 0===n?void 0:n.toLowerCase();f(r)&&Ne(t,r)&&Vv.getCurrent(o).each((t=>{dH.showSlot(t,r),aL.immediateGrow(o),kn(o.element,"width"),bH(e.element,"region")}))}))},bH=(e,t)=>{ln(e,"role",t)},yH=(e,t)=>{const n=Vv.getCurrent(e);n.each((n=>{const o=Vv.getCurrent(n);o.each((o=>{aL.hasGrown(n)?dH.isShowing(o,t)?(aL.shrink(n),bH(e.element,"presentation")):(dH.hideAllSlots(o),dH.showSlot(o,t),bH(e.element,"region")):(dH.hideAllSlots(o),dH.showSlot(o,t),aL.grow(n),bH(e.element,"region"))}))}))},xH=e=>{const t=Vv.getCurrent(e);return t.bind((e=>{const t=aL.isGrowing(e)||aL.hasGrown(e);if(t){const t=Vv.getCurrent(e);return t.bind((e=>oe(dH.getSlotNames(e),(t=>dH.isShowing(e,t)))))}return z.none()}))},wH=xl("FixSizeEvent"),CH=xl("AutoSizeEvent"),SH=e=>({uid:e.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:Vu([kN.config({}),Aw.config({}),aL.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:e=>{const t=Vv.getCurrent(e);t.each(dH.hideAllSlots),Li(e,CH)},onGrown:e=>{Li(e,CH)},onStartGrow:e=>{Fi(e,wH,{width:Cn(e.element,"width").getOr("")})},onStartShrink:e=>{Fi(e,wH,{width:jn(e.element)+"px"})}}),bw.config({}),Vv.config({find:e=>{const t=bw.contents(e);return fe(t)}})])}],behaviours:Vu([oI.childAt(0),xw("sidebar-sliding-events",[Ki(wH,((e,t)=>{vn(e.element,"width",t.event.width)})),Ki(CH,((e,t)=>{kn(e.element,"width")}))])])}),_H=(e,t,n,o)=>{ln(e.element,"aria-busy",!0);const r=t.getRoot(e).getOr(e),s=Vu([rw.config({mode:"special",onTab:()=>z.some(!0),onShiftTab:()=>z.some(!0)}),Aw.config({})]),a=o(r,s),i=r.getSystem().build(a);bw.append(r,sd(i)),i.hasConfigured(rw)&&t.focus&&rw.focusIn(i),n.isBlocked()||t.onBlock(e),n.blockWith((()=>bw.remove(r,i)))},kH=(e,t,n)=>{pn(e.element,"aria-busy"),n.isBlocked()&&t.onUnblock(e),n.clear()};var EH=Object.freeze({__proto__:null,block:_H,unblock:kH}),OH=[ga("getRoot",z.none),fa("focus",!0),zd("onBlock"),zd("onUnblock")];const TH=()=>{const e=Rm(),t=t=>{e.set({destroy:t})};return Hl({readState:e.isSet,blockWith:t,clear:e.clear,isBlocked:e.isSet})};var AH=Object.freeze({__proto__:null,init:TH});const RH=qu({fields:OH,name:"blocking",apis:EH,state:AH}),NH=e=>{const t=void 0!==e.dom.attributes?e.dom.attributes:[];return te(t,((e,t)=>"class"===t.name?e:r(r({},e),{},{[t.name]:t.value})),{})},DH=e=>Array.prototype.slice.call(e.dom.classList,0),BH=e=>{const t=st.fromHtml(e),n=Ht(t),o=NH(t),s=DH(t),a=0===n.length?{}:{innerHtml:cl(t)};return r({tag:bt(t),classes:s,attributes:o},a)},MH=e=>(t,n)=>({dom:{tag:"div",attributes:{"aria-label":e.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:BH('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),IH=e=>Vv.getCurrent(e).each((e=>Zu(e.element))),PH=(e,t)=>{const n="tabindex",o=`data-mce-${n}`;z.from(e.iframeElement).map(st.fromDom).each((e=>{t?(un(e,n).each((t=>ln(e,o,t))),ln(e,n,-1)):(pn(e,n),un(e,o).each((t=>{ln(e,n,t),pn(e,o)})))}))},LH=(e,t,n,o)=>{const r=t.element;if(PH(e,n),n)RH.block(t,MH(o)),kn(r,"display"),pn(r,"aria-hidden"),e.hasFocus()&&IH(t);else{const n=Vv.getCurrent(t).exists((e=>tm(e.element)));RH.unblock(t),vn(r,"display","none"),ln(r,"aria-hidden","true"),n&&e.focus()}},FH=e=>({uid:e.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:Vu([bw.config({}),RH.config({focus:!1}),Vv.config({find:e=>fe(e.components())})]),components:[]}),zH=e=>"focusin"===e.type,jH=e=>{if(zH(e)){const t=e.composed?fe(e.composedPath()):z.from(e.target);return t.map(st.fromDom).filter(Ct).exists((e=>kc(e,"mce-pastebin")))}return!1},UH=(e,t,n)=>{const o=ya(!1),r=Dm(),s=n=>{o.get()&&!jH(n)&&(n.preventDefault(),IH(t()),e.editorManager.setActive(e))};e.inline||e.on("PreInit",(()=>{e.dom.bind(e.getWin(),"focusin",s),e.on("BeforeExecCommand",(e=>{"mcefocus"===e.command.toLowerCase()&&!0!==e.value&&s(e)}))}));const a=r=>{r!==o.get()&&(o.set(r),LH(e,t(),r,n.providers),_T(e,r))};e.on("ProgressState",(t=>{if(r.on(clearTimeout),_(t.time)){const n=VC.setEditorTimeout(e,(()=>a(t.state)),t.time);r.set(n)}else a(t.state),r.clear()}))},HH=(e,t)=>{const n={len:0,list:[]},o=te(e,((e,n)=>{const o=t(n,e.len);return o.fold(R(e),(t=>({len:t.finish,list:e.list.concat([t])})))}),n);return o.list},$H=(e,t,n)=>({within:e,extra:t,withinWidth:n}),VH=(e,t,n)=>{const o=HH(e,((e,t)=>{const o=n(e);return z.some({element:e,start:t,finish:t+o,width:o})})),r=Z(o,(e=>e.finish<=t)),s=ee(r,((e,t)=>e+t.width),0),a=o.slice(r.length);return{within:r,extra:a,withinWidth:s}},WH=e=>Y(e,(e=>e.element)),qH=(e,t,n)=>{const o=WH(e.concat(t));return $H(o,[],n)},GH=(e,t,n,o)=>{const r=WH(e).concat([n]);return $H(r,WH(t),o)},KH=(e,t,n)=>$H(WH(e),[],n),YH=(e,t,n)=>{const o=VH(t,e,n);return 0===o.extra.length?z.some(o):z.none()},XH=(e,t,n,o)=>{const r=YH(e,t,n).getOrThunk((()=>VH(t,e-n(o),n))),s=r.within,a=r.extra,i=r.withinWidth;return 1===a.length&&a[0].width<=n(o)?qH(s,a,i):a.length>=1?GH(s,a,o,i):KH(s,a,i)},JH=(e,t)=>{const n=Y(t,(e=>sd(e)));Nj.setGroups(e,n)},QH=e=>ve(e,(e=>om(e.element).bind((t=>e.getSystem().getByDom(t).toOptional())))),ZH=(e,t,n)=>{const o=t.builtGroups.get();if(0===o.length)return;const r=wv(e,t,"primary"),s=YA.getCoupled(e,"overflowGroup");vn(r.element,"visibility","hidden");const a=o.concat([s]),i=QH(a);n([]),JH(r,a);const l=jn(r.element),c=XH(l,t.builtGroups.get(),(e=>jn(e.element)),s);0===c.extra.length?(bw.remove(r,s),n([])):(JH(r,c.within),n(c.extra)),kn(r.element,"visibility"),En(r.element),i.each(Aw.focus)},e$=R([Oh("splitToolbarBehaviours",[YA]),Us("builtGroups",(()=>ya([])))]),t$=R([Ld(["overflowToggledClass"]),sa("getOverflowBounds"),$s("lazySink"),Us("overflowGroups",(()=>ya([]))),zd("onOpened"),zd("onClosed")].concat(e$())),n$=R([sv({factory:Nj,schema:Oj(),name:"primary"}),av({schema:Oj(),name:"overflow"}),av({name:"overflow-button"}),av({name:"overflow-group"})]),o$=R(((e,t)=>{Hn(e,Math.floor(t))})),r$=R([Ld(["toggledClass"]),$s("lazySink"),Ys("fetch"),sa("getBounds"),ia("fireDismissalEventInstead",[ca("event",Ti())]),fp(),zd("onToggled")]),s$=R([av({name:"button",overrides:e=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:Vu([Kw.config({toggleClass:e.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:e.onToggled})])})}),av({factory:Nj,schema:Oj(),name:"toolbar",overrides:e=>({toolbarBehaviours:Vu([rw.config({mode:"cyclic",onEscape:t=>(xv(t,e,"button").each(Aw.focus),z.none())})])})})]),a$=Dm(),i$=(e,t)=>{a$.set(!0),l$(e,t),a$.clear()},l$=(e,t)=>{const n=YA.getCoupled(e,"toolbarSandbox");Vg.isOpen(n)?Vg.close(n):Vg.open(n,t.toolbar())},c$=(e,t,n,o)=>{const r=n.getBounds.map((e=>e())),s=n.lazySink(e).getOrDie();ag.positionWithinBounds(s,t,{anchor:{type:"hotspot",hotspot:e,layouts:o,overrides:{maxWidthFunction:o$()}}},r)},d$=(e,t,n,o,r)=>{Nj.setGroups(t,r),c$(e,t,n,o),Kw.on(e)},u$=(e,t,n)=>{const o=bd(),s=(r,s)=>{const a=a$.get().getOr(!1);n.fetch().get((r=>{d$(e,s,n,t.layouts,r),o.link(e.element),a||rw.focusIn(s)}))},a=()=>{Kw.off(e),a$.get().getOr(!1)||Aw.focus(e),o.unlink(e.element)};return{dom:{tag:"div",attributes:{id:o.id}},behaviours:Vu([rw.config({mode:"special",onEscape:e=>(Vg.close(e),z.some(!0))}),Vg.config({onOpen:s,onClose:a,isPartOf:(t,n,o)=>xd(n,o)||xd(e,o),getAttachPoint:()=>n.lazySink(e).getOrDie()}),Xu.config({channels:r(r({},Yg(r({isExtraPart:L},n.fireDismissalEventInstead.map((e=>({fireEventInstead:{event:e.event}}))).getOr({})))),Jg({doReposition:()=>{Vg.getState(YA.getCoupled(e,"toolbarSandbox")).each((o=>{c$(e,o,n,t.layouts)}))}}))})])}},m$=(e,t,n,o)=>r(r({},qC.sketch(r(r({},o.button()),{},{action:e=>{l$(e,o)},buttonBehaviours:Rh.augment({dump:o.button().buttonBehaviours},[YA.config({others:{toolbarSandbox:t=>u$(t,n,e)}})])}))),{},{apis:{setGroups:(t,o)=>{Vg.getState(YA.getCoupled(t,"toolbarSandbox")).each((r=>{d$(t,r,e,n.layouts,o)}))},reposition:t=>{Vg.getState(YA.getCoupled(t,"toolbarSandbox")).each((o=>{c$(t,o,e,n.layouts)}))},toggle:e=>{l$(e,o)},toggleWithoutFocusing:e=>{i$(e,o)},getToolbar:e=>Vg.getState(YA.getCoupled(e,"toolbarSandbox")),isOpen:e=>Vg.isOpen(YA.getCoupled(e,"toolbarSandbox"))}}),p$=zv({name:"FloatingToolbarButton",factory:m$,configFields:r$(),partFields:s$(),apis:{setGroups:(e,t,n)=>{e.setGroups(t,n)},reposition:(e,t)=>{e.reposition(t)},toggle:(e,t)=>{e.toggle(t)},toggleWithoutFocusing:(e,t)=>{e.toggleWithoutFocusing(t)},getToolbar:(e,t)=>e.getToolbar(t),isOpen:(e,t)=>e.isOpen(t)}}),f$=R([$s("items"),Ld(["itemSelector"]),Oh("tgroupBehaviours",[rw])]),g$=R([lv({name:"items",unit:"item"})]),h$=(e,t,n,o)=>({uid:e.uid,dom:e.dom,components:t,behaviours:Ah(e.tgroupBehaviours,[rw.config({mode:"flow",selector:e.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),v$=zv({name:"ToolbarGroup",configFields:f$(),partFields:g$(),factory:h$}),b$=e=>Y(e,(e=>sd(e))),y$=(e,t,n)=>{ZH(e,n,(o=>{n.overflowGroups.set(o),t.getOpt(e).each((e=>{p$.setGroups(e,b$(o))}))}))},x$=(e,t,n,o)=>{const s=GC(p$.sketch({fetch:()=>oR.nu((t=>{t(b$(e.overflowGroups.get()))})),layouts:{onLtr:()=>[xu,yu],onRtl:()=>[yu,xu],onBottomLtr:()=>[Cu,wu],onBottomRtl:()=>[wu,Cu]},getBounds:n.getOverflowBounds,lazySink:e.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:e.markers.overflowToggledClass},parts:{button:o["overflow-button"](),toolbar:o.overflow()},onToggled:(t,n)=>e[n?"onOpened":"onClosed"](t)}));return{uid:e.uid,dom:e.dom,components:t,behaviours:Ah(e.splitToolbarBehaviours,[YA.config({others:{overflowGroup:()=>v$.sketch(r(r({},o["overflow-group"]()),{},{items:[s.asSpec()]}))}})]),apis:{setGroups:(t,n)=>{e.builtGroups.set(Y(n,t.getSystem().build)),y$(t,s,e)},refresh:t=>y$(t,s,e),toggle:e=>{s.getOpt(e).each((e=>{p$.toggle(e)}))},toggleWithoutFocusing:e=>{s.getOpt(e).each(p$.toggleWithoutFocusing)},isOpen:e=>s.getOpt(e).map(p$.isOpen).getOr(!1),reposition:e=>{s.getOpt(e).each((e=>{p$.reposition(e)}))},getOverflow:e=>s.getOpt(e).bind(p$.getToolbar)},domModification:{attributes:{role:"group"}}}},w$=zv({name:"SplitFloatingToolbar",configFields:t$(),partFields:n$(),factory:x$,apis:{setGroups:(e,t,n)=>{e.setGroups(t,n)},refresh:(e,t)=>{e.refresh(t)},reposition:(e,t)=>{e.reposition(t)},toggle:(e,t)=>{e.toggle(t)},toggleWithoutFocusing:(e,t)=>{e.toggle(t)},isOpen:(e,t)=>e.isOpen(t),getOverflow:(e,t)=>e.getOverflow(t)}}),C$=R([Ld(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),zd("onOpened"),zd("onClosed")].concat(e$())),S$=R([sv({factory:Nj,schema:Oj(),name:"primary"}),sv({factory:Nj,schema:Oj(),name:"overflow",overrides:e=>({toolbarBehaviours:Vu([aL.config({dimension:{property:"height"},closedClass:e.markers.closedClass,openClass:e.markers.openClass,shrinkingClass:e.markers.shrinkingClass,growingClass:e.markers.growingClass,onShrunk:t=>{xv(t,e,"overflow-button").each((e=>{Kw.off(e),Aw.focus(e)})),e.onClosed(t)},onGrown:t=>{rw.focusIn(t),e.onOpened(t)},onStartGrow:t=>{xv(t,e,"overflow-button").each(Kw.on)}}),rw.config({mode:"acyclic",onEscape:t=>(xv(t,e,"overflow-button").each(Aw.focus),z.some(!0))})])})}),av({name:"overflow-button",overrides:e=>({buttonBehaviours:Vu([Kw.config({toggleClass:e.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])})}),av({name:"overflow-group"})]),_$=(e,t)=>xv(e,t,"overflow").map(aL.hasGrown).getOr(!1),k$=(e,t)=>{xv(e,t,"overflow-button").bind((()=>xv(e,t,"overflow"))).each((n=>{E$(e,t),aL.toggleGrow(n)}))},E$=(e,t)=>{xv(e,t,"overflow").each((n=>{ZH(e,t,(e=>{const t=Y(e,(e=>sd(e)));Nj.setGroups(n,t)})),xv(e,t,"overflow-button").each((e=>{aL.hasGrown(n)&&Kw.on(e)})),aL.refresh(n)}))},O$=(e,t,n,o)=>{const s="alloy.toolbar.toggle",a=(t,n)=>{const o=Y(n,t.getSystem().build);e.builtGroups.set(o)};return{uid:e.uid,dom:e.dom,components:t,behaviours:Ah(e.splitToolbarBehaviours,[YA.config({others:{overflowGroup:e=>v$.sketch(r(r({},o["overflow-group"]()),{},{items:[qC.sketch(r(r({},o["overflow-button"]()),{},{action:t=>{Li(e,s)}}))]}))}}),xw("toolbar-toggle-events",[Ki(s,(t=>{k$(t,e)}))])]),apis:{setGroups:(t,n)=>{a(t,n),E$(t,e)},refresh:t=>E$(t,e),toggle:t=>k$(t,e),isOpen:t=>_$(t,e)},domModification:{attributes:{role:"group"}}}},T$=zv({name:"SplitSlidingToolbar",configFields:C$(),partFields:S$(),factory:O$,apis:{setGroups:(e,t,n)=>{e.setGroups(t,n)},refresh:(e,t)=>{e.refresh(t)},toggle:(e,t)=>{e.toggle(t)},isOpen:(e,t)=>e.isOpen(t)}}),A$=e=>{const t=e.title.fold((()=>({})),(e=>({attributes:{title:e}})));return{dom:r({tag:"div",classes:["tox-toolbar__group"]},t),components:[v$.parts.items({})],items:e.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:Vu([kN.config({}),Aw.config({})])}},R$=e=>v$.sketch(A$(e)),N$=(e,t)=>{const n=rl((t=>{const n=Y(e.initGroups,R$);Nj.setGroups(t,n)}));return Vu([vO.toolbarButton(e.providers.isDisabled),mO(),rw.config({mode:t,onEscape:e.onEscape,selector:".tox-toolbar__group"}),xw("toolbar-events",[n])])},D$=e=>{const t=e.cyclicKeying?"cyclic":"acyclic";return{uid:e.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":A$({title:z.none(),items:[]}),"overflow-button":YL({name:"more",icon:z.some("more-drawer"),enabled:!0,tooltip:z.some("More..."),primary:!1,buttonType:z.none(),borderless:!1},z.none(),e.providers)},splitToolbarBehaviours:N$(e,t)}},B$=e=>{const t=D$(e),n=4,o=w$.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return w$.sketch(r(r({},t),{},{lazySink:e.getSink,getOverflowBounds:()=>{const t=e.moreDrawerData.lazyHeader().element,o=cr(t),r=It(t),s=cr(r),a=Math.max(r.dom.scrollHeight,s.height);return ir(o.x+n,s.y,o.width-2*n,a)},parts:r(r({},t.parts),{},{overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:e.attributes}}}),components:[o],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:t=>e.onToggled(t,!0),onClosed:t=>e.onToggled(t,!1)}))},M$=e=>{const t=T$.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),n=T$.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),o=D$(e);return T$.sketch(r(r({},o),{},{components:[t,n],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:t=>{t.getSystem().broadcastOn([AU()],{type:"opened"}),e.onToggled(t,!0)},onClosed:t=>{t.getSystem().broadcastOn([AU()],{type:"closed"}),e.onToggled(t,!1)}}))},I$=e=>{const t=e.cyclicKeying?"cyclic":"acyclic";return Nj.sketch({uid:e.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(e.type===dS.scrolling?["tox-toolbar--scrolling"]:[])},components:[Nj.parts.groups({})],toolbarBehaviours:N$(e,t)})},P$=[jk,Uk,oa("tooltip"),pa("buttonType","secondary",["primary","secondary"]),fa("borderless",!1),Ys("onAction")],L$=[...P$,Rk,Gs("type",["button"])],F$=[...P$,fa("active",!1),Gs("type",["togglebutton"])],z$={button:L$,togglebutton:F$},j$=[Gs("type",["group"]),va("buttons",[],Fs("type",z$))],U$=Fs("type",r(r({},z$),{},{group:j$})),H$=fs([va("buttons",[],U$),Ys("onShow"),Ys("onHide")]),$$=e=>Ms("view",H$,e),V$=(e,t)=>{var n,o;const s="togglebutton"===e.type,a=e.icon.map((e=>$I(e,t.icons))).map(GC),i=()=>n=>{const o=e=>{a.map((o=>o.getOpt(n).each((n=>{bw.set(n,[$I(e,t.icons)])}))))},r=e=>{const t=n.element;e?(Cc(t,"tox-button--enabled"),ln(t,"aria-pressed",!0)):(_c(t,"tox-button--enabled"),pn(t,"aria-pressed"))},i=()=>kc(n.element,"tox-button--enabled");return s?e.onAction({setIcon:o,setActive:r,isActive:i}):"button"===e.type?e.onAction({setIcon:o}):void 0},l=i(),c=r(r({},e),{},{name:s?e.text.getOr(e.icon.getOr("")):null!==(n=e.text)&&void 0!==n?n:e.icon.getOr(""),primary:"primary"===e.buttonType,buttonType:z.from(e.buttonType),tooltip:e.tooltip,icon:e.icon,enabled:!0,borderless:e.borderless}),d=XL(null!==(o=e.buttonType)&&void 0!==o?o:"secondary"),u=s?e.text.map(t.translate):z.some(t.translate(e.text)),m=u.map(Zc),p=c.tooltip.or(u).map((e=>({"aria-label":t.translate(e),title:t.translate(e)}))).getOr({}),f=a.map((e=>e.asSpec())),g=SO([f,m]),h=e.icon.isSome()&&m.isSome(),v={tag:"button",classes:d.concat(...e.icon.isSome()&&!h?["tox-button--icon"]:[]).concat(...h?["tox-button--icon-and-text"]:[]).concat(...e.borderless?["tox-button--naked"]:[]).concat(..."togglebutton"===e.type&&e.active?["tox-button--enabled"]:[]),attributes:p},b=[],y=KL(c,z.some(l),b,v,g,t);return qC.sketch(y)},W$=(e,t)=>V$(e,t),q$=(e,t)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:Y(e.buttons,(e=>W$(e,t)))}),G$=No().deviceType,K$=G$.isPhone(),Y$=G$.isTablet(),X$=e=>{let t=!1;const n=Y(e.buttons,(n=>"group"===n.type?(t=!0,q$(n,e.providers)):W$(n,e.providers)));return{uid:e.uid,dom:{tag:"div",classes:[t?"tox-view__toolbar":"tox-view__header",...K$||Y$?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:Vu([Aw.config({}),rw.config({mode:"flow",selector:"button, .tox-button",focusInside:Zb.OnEnterOrSpaceMode})]),components:t?n:[gN.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),gN.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:n})]}},J$=e=>({uid:e.uid,dom:{tag:"div",classes:["tox-view__pane"]}}),Q$=(e,t,n,o)=>{const r={getPane:t=>bj.getPart(t,e,"pane"),getOnShow:t=>e.viewConfig.onShow,getOnHide:t=>e.viewConfig.onHide};return{uid:e.uid,dom:e.dom,components:t,apis:r}};var Z$=zv({name:"silver.View",configFields:[$s("viewConfig")],partFields:[iv({factory:{sketch:X$},schema:[$s("buttons"),$s("providers")],name:"header"}),iv({factory:{sketch:J$},schema:[],name:"pane"})],factory:Q$,apis:{getPane:(e,t)=>e.getPane(t),getOnShow:(e,t)=>e.getOnShow(t),getOnHide:(e,t)=>e.getOnHide(t)}});const eV=(e,t,n)=>Oe(t,((t,o)=>{const r=Is($$(t));return e.slot(o,Z$.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:r,components:[...r.buttons.length>0?[Z$.parts.header({buttons:r.buttons,providers:n})]:[],Z$.parts.pane({})]}))})),tV=(e,t)=>dH.sketch((n=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:eV(n,e,t),slotBehaviours:KE.unnamedEvents([rl((e=>dH.hideAllSlots(e)))])}))),nV=e=>oe(dH.getSlotNames(e),(t=>dH.isShowing(e,t))),oV=e=>{const t=e.element;vn(t,"display","none"),ln(t,"aria-hidden","true")},rV=e=>{const t=e.element;kn(t,"display"),pn(t,"aria-hidden")},sV=e=>({getContainer:R(e)}),aV=(e,t,n)=>{dH.getSlot(e,t).each((e=>{Z$.getPane(e).each((t=>{const o=n(e);o(sV(t.element.dom))}))}))},iV=(e,t)=>aV(e,t,Z$.getOnShow),lV=(e,t)=>aV(e,t,Z$.getOnHide),cV=(e,t)=>{const n=(e,n)=>{bw.set(e,[tV(n,t.backstage.shared.providers)])},o=e=>Vv.getCurrent(e).bind(nV),r=(e,t,n,o)=>Vv.getCurrent(e).exists((r=>{const s=nV(r),a=s.exists((e=>o===e)),i=dH.getSlot(r,o).isSome();return i&&(dH.hideAllSlots(r),a?(oV(e),t()):(n(),rV(e),dH.showSlot(r,o),iV(r,o)),s.each((e=>lV(r,e)))),i})),s={setViews:n,whichView:o,toggleView:r};return{uid:e.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:Vu([bw.config({}),Vv.config({find:e=>{const t=bw.contents(e);return fe(t)}})]),apis:s}};var dV=Fv({factory:cV,name:"silver.ViewWrapper",configFields:[$s("backstage")],apis:{setViews:(e,t,n)=>e.setViews(t,n),toggleView:(e,t,n,o,r)=>e.toggleView(t,n,o,r),whichView:(e,t)=>e.whichView(t)}});const uV=(e,t,n)=>{let o=!1;const r={getSocket:t=>bj.getPart(t,e,"socket"),setSidebar:(t,n,o)=>{bj.getPart(t,e,"sidebar").each((e=>vH(e,n,o)))},toggleSidebar:(t,n)=>{bj.getPart(t,e,"sidebar").each((e=>yH(e,n)))},whichSidebar:t=>bj.getPart(t,e,"sidebar").bind(xH).getOrNull(),getHeader:t=>bj.getPart(t,e,"header"),getToolbar:t=>bj.getPart(t,e,"toolbar"),setToolbar:(t,n)=>{bj.getPart(t,e,"toolbar").each((e=>{const t=Y(n,R$);e.getApis().setGroups(e,t)}))},setToolbars:(t,n)=>{bj.getPart(t,e,"multiple-toolbar").each((e=>{const t=Y(n,(e=>Y(e,R$)));Ej.setItems(e,t)}))},refreshToolbar:t=>{const n=bj.getPart(t,e,"toolbar");n.each((e=>e.getApis().refresh(e)))},toggleToolbarDrawer:t=>{bj.getPart(t,e,"toolbar").each((e=>{ze(e.getApis().toggle,(t=>t(e)))}))},toggleToolbarDrawerWithoutFocusing:t=>{bj.getPart(t,e,"toolbar").each((e=>{ze(e.getApis().toggleWithoutFocusing,(t=>t(e)))}))},isToolbarDrawerToggled:t=>bj.getPart(t,e,"toolbar").bind((e=>z.from(e.getApis().isOpen).map((t=>t(e))))).getOr(!1),getThrobber:t=>bj.getPart(t,e,"throbber"),focusToolbar:t=>{const n=bj.getPart(t,e,"toolbar").orThunk((()=>bj.getPart(t,e,"multiple-toolbar")));n.each((e=>{rw.focusIn(e)}))},setMenubar:(t,n)=>{bj.getPart(t,e,"menubar").each((e=>{eH.setMenus(e,n)}))},focusMenubar:t=>{bj.getPart(t,e,"menubar").each((e=>{eH.focus(e)}))},setViews:(t,n)=>{bj.getPart(t,e,"viewWrapper").each((e=>{dV.setViews(e,n)}))},toggleView:(t,n)=>bj.getPart(t,e,"viewWrapper").exists((e=>dV.toggleView(e,(()=>r.showMainView(t)),(()=>r.hideMainView(t)),n))),whichView:t=>bj.getPart(t,e,"viewWrapper").bind(dV.whichView).getOrNull(),hideMainView:t=>{o=r.isToolbarDrawerToggled(t),o&&r.toggleToolbarDrawer(t),bj.getPart(t,e,"editorContainer").each((e=>{const t=e.element;vn(t,"display","none"),ln(t,"aria-hidden","true")}))},showMainView:t=>{o&&r.toggleToolbarDrawer(t),bj.getPart(t,e,"editorContainer").each((e=>{const t=e.element;kn(t,"display"),pn(t,"aria-hidden")})),r.refreshToolbar(t)}};return{uid:e.uid,dom:e.dom,components:t,apis:r,behaviours:e.behaviours}},mV=yj.optional({factory:eH,name:"menubar",schema:[$s("backstage")]}),pV=e=>e.type===dS.sliding?M$:e.type===dS.floating?B$:I$,fV=yj.optional({factory:{sketch:e=>Ej.sketch({uid:e.uid,dom:e.dom,listBehaviours:Vu([rw.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>I$({type:e.type,uid:xl("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:e.providers,onEscape:()=>(e.onEscape(),z.some(!0))}),setupItem:(e,t,n,o)=>{Nj.setGroups(t,n)},shell:!0})},name:"multiple-toolbar",schema:[$s("dom"),$s("onEscape")]}),gV=yj.optional({factory:{sketch:e=>{const t=pV(e),n={type:e.type,uid:e.uid,onEscape:()=>(e.onEscape(),z.some(!0)),onToggled:(t,n)=>e.onToolbarToggled(n),cyclicKeying:!1,initGroups:[],getSink:e.getSink,providers:e.providers,moreDrawerData:{lazyToolbar:e.lazyToolbar,lazyMoreButton:e.lazyMoreButton,lazyHeader:e.lazyHeader},attributes:e.attributes};return t(n)}},name:"toolbar",schema:[$s("dom"),$s("onEscape"),$s("getSink")]}),hV=yj.optional({factory:{sketch:WU},name:"header",schema:[$s("dom")]}),vV=yj.optional({factory:{sketch:oH},name:"promotion",schema:[$s("dom")]}),bV=yj.optional({name:"socket",schema:[$s("dom")]}),yV=yj.optional({factory:{sketch:SH},name:"sidebar",schema:[$s("dom")]}),xV=yj.optional({factory:{sketch:FH},name:"throbber",schema:[$s("dom")]}),wV=yj.optional({factory:dV,name:"viewWrapper",schema:[$s("backstage")]}),CV=e=>({uid:e.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:e.components}),SV=yj.optional({factory:{sketch:CV},name:"editorContainer",schema:[]});var _V=zv({name:"OuterContainer",factory:uV,configFields:[$s("dom"),$s("behaviours")],partFields:[hV,mV,gV,fV,bV,yV,vV,xV,wV,SV],apis:{getSocket:(e,t)=>e.getSocket(t),setSidebar:(e,t,n,o)=>{e.setSidebar(t,n,o)},toggleSidebar:(e,t,n)=>{e.toggleSidebar(t,n)},whichSidebar:(e,t)=>e.whichSidebar(t),getHeader:(e,t)=>e.getHeader(t),getToolbar:(e,t)=>e.getToolbar(t),setToolbar:(e,t,n)=>{e.setToolbar(t,n)},setToolbars:(e,t,n)=>{e.setToolbars(t,n)},refreshToolbar:(e,t)=>e.refreshToolbar(t),toggleToolbarDrawer:(e,t)=>{e.toggleToolbarDrawer(t)},toggleToolbarDrawerWithoutFocusing:(e,t)=>{e.toggleToolbarDrawerWithoutFocusing(t)},isToolbarDrawerToggled:(e,t)=>e.isToolbarDrawerToggled(t),getThrobber:(e,t)=>e.getThrobber(t),setMenubar:(e,t,n)=>{e.setMenubar(t,n)},focusMenubar:(e,t)=>{e.focusMenubar(t)},focusToolbar:(e,t)=>{e.focusToolbar(t)},setViews:(e,t,n)=>{e.setViews(t,n)},toggleView:(e,t,n)=>e.toggleView(t,n),whichView:(e,t)=>e.whichView(t)}});const kV="file edit view insert format tools table help",EV={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template inserttemplate codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},OV=(e,t,n)=>{const o=RS(n).split(/[ ,]/);return{text:e.title,getItems:()=>ae(e.items,(e=>{const n=e.toLowerCase();return 0===n.trim().length||q(o,(e=>e===n))?[]:"separator"===n||"|"===n?[{type:"separator"}]:t.menuItems[n]?[t.menuItems[n]]:[]}))}},TV=e=>e.split(" "),AV=(e,t)=>{const n=r(r({},EV),t.menus),o=be(t.menus).length>0,s=void 0===t.menubar||!0===t.menubar?TV(kV):TV(!1===t.menubar?"":t.menubar),a=Z(s,(e=>{const n=Ne(EV,e);return o?n||Re(t.menus,e).exists((e=>Ne(e,"items"))):n})),i=Y(a,(o=>{const r=n[o];return OV({title:r.title,items:TV(r.items)},t,e)}));return Z(i,(e=>{const t=e=>f(e)||"separator"!==e.type;return e.getItems().length>0&&q(e.getItems(),t)}))},RV=e=>{const t=()=>{e._skinLoaded=!0,bT(e)};return()=>{e.initialized?t():e.on("init",t)}},NV=(e,t)=>()=>yT(e,{message:t}),DV=(e,t,n)=>(e.on("remove",(()=>n.unload(t))),n.load(t)),BV=(e,t)=>{const n=t+"/skin.min.css";return DV(e,n,e.ui.styleSheetLoader)},MV=(e,t)=>{const n=Qt(st.fromDom(e.getElement()));if(n){const n=t+"/skin.shadowdom.min.css";return DV(e,n,pS.DOM.styleSheetLoader)}return Promise.resolve()},IV=(e,t)=>{const n=o_(t);return n&&t.contentCSS.push(n+(e?"/content.inline":"/content")+".min.css"),!t_(t)&&f(n)?Promise.all([BV(t,n),MV(t,n)]).then(RV(t),NV(t,"Skin could not be loaded")):Promise.resolve(RV(t)())},PV=B(IV,!1),LV=B(IV,!0),FV=(e,t)=>n=>{const o=Nm(),r=()=>{n.setActive(e.formatter.match(t));const r=e.formatter.formatChanged(t,n.setActive);o.set(r)};return e.initialized?r():e.once("init",r),()=>{e.off("init",r),o.clear()}},zV=(e,t,n)=>o=>{const r=()=>n(o),s=()=>{n(o),e.on(t,r)};return e.initialized?s():e.once("init",s),()=>{e.off("init",s),e.off(t,r)}},jV=e=>t=>()=>{e.undoManager.transact((()=>{e.focus(),e.execCommand("mceToggleFormat",!1,t.format)}))},UV=(e,t)=>()=>e.execCommand(t),HV=(e,t,n)=>{const o=(e,o,a,i)=>{const l=t.shared.providers.translate(e.title);if("separator"===e.type)return z.some({type:"separator",text:l});if("submenu"===e.type){const t=ae(e.getStyleItems(),(e=>s(e,o,i)));return 0===o&&t.length<=0?z.none():z.some({type:"nestedmenuitem",text:l,enabled:t.length>0,getSubmenuItems:()=>ae(e.getStyleItems(),(e=>s(e,o,i)))})}return z.some(r({type:"togglemenuitem",text:l,icon:e.icon,active:e.isSelected(i),enabled:!a,onAction:n.onAction(e)},e.getStylePreview().fold((()=>({})),(e=>({meta:{style:e}})))))},s=(e,t,r)=>{const s="formatter"===e.type&&n.isInvalid(e);return 0===t?s?[]:o(e,t,!1,r).toArray():o(e,t,s,r).toArray()},a=e=>{const t=n.getCurrentValue(),o=n.shouldHide?0:1;return ae(e,(e=>s(e,o,t)))},i=(e,t)=>(n,o)=>{const r=t(),s=a(r),i=rP(s,S_.CLOSE_ON_EXECUTE,e,{isHorizontalMenu:!1,search:z.none()});o(i)};return{validateItems:a,getFetch:i}},$V=(e,t,n)=>{const o=n.dataset,r="basic"===o.type?()=>Y(o.data,(e=>_z(e,n.isSelectedFor,n.getPreviewFor))):o.getData;return{items:HV(e,t,n),getStyleItems:r}},VV=(e,t,n)=>{const{items:o,getStyleItems:r}=$V(e,t,n),s=e=>({getComponent:R(e)}),a=zV(e,"NodeChange",(e=>{const t=e.getComponent();n.updateText(t)}));return GI({text:n.icon.isSome()?z.none():n.text,icon:n.icon,tooltip:z.from(n.tooltip),role:z.none(),fetch:o.getFetch(t,r),onSetup:a,getApi:s,columns:1,presets:"normal",classes:n.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",t.shared)},WV=e=>Y(e,(e=>{let t=e,n=e;const o=e.split("=");return o.length>1&&(t=o[0],n=o[1]),{title:t,format:n}})),qV=e=>({type:"basic",data:e});var GV;(function(e){e[e["SemiColon"]=0]="SemiColon",e[e["Space"]=1]="Space"})(GV||(GV={}));const KV=(e,t)=>t===GV.SemiColon?e.replace(/;$/,"").split(";"):e.split(" "),YV=(e,t,n)=>{const o=e.options.get(t),r=WV(KV(o,n));return{type:"basic",data:r}},XV=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],JV=e=>{const t=()=>oe(XV,(t=>e.formatter.match(t.format))),n=t=>()=>e.formatter.match(t),o=e=>z.none,r=e=>{const n=t(),o=n.fold(R("left"),(e=>e.title.toLowerCase()));Fi(e,qI,{icon:`align-${o}`})},s=qV(XV),a=t=>()=>oe(XV,(e=>e.format===t.format)).each((t=>e.execCommand(t.command)));return{tooltip:"Align",text:z.none(),icon:z.some("align-left"),isSelectedFor:n,getCurrentValue:z.none,getPreviewFor:o,onAction:a,updateText:r,dataset:s,shouldHide:!1,isInvalid:t=>!e.formatter.canApply(t.format)}},QV=(e,t)=>VV(e,t,JV(e)),ZV=(e,t)=>{const n=$V(e,t,JV(e));e.ui.registry.addNestedMenuItem("align",{text:t.shared.providers.translate("Align"),getSubmenuItems:()=>n.items.validateItems(n.getStyleItems())})},eW=(e,t)=>{const n=t(),o=Y(n,(e=>e.format));return z.from(e.formatter.closest(o)).bind((e=>oe(n,(t=>t.format===e)))).orThunk((()=>je(e.formatter.match("p"),{title:"Paragraph",format:"p"})))},tW=e=>{const t="Paragraph",n=t=>()=>e.formatter.match(t),o=t=>()=>{const n=e.formatter.get(t);return n?z.some({tag:n.length>0&&(n[0].inline||n[0].block)||"div",styles:e.dom.parseStyle(e.formatter.getCssText(t))}):z.none()},r=n=>{const o=eW(e,(()=>s.data)),r=o.fold(R(t),(e=>e.title));Fi(n,WI,{text:r})},s=YV(e,"block_formats",GV.SemiColon);return{tooltip:"Blocks",text:z.some(t),icon:z.none(),isSelectedFor:n,getCurrentValue:z.none,getPreviewFor:o,onAction:jV(e),updateText:r,dataset:s,shouldHide:!1,isInvalid:t=>!e.formatter.canApply(t.format)}},nW=(e,t)=>VV(e,t,tW(e)),oW=(e,t)=>{const n=$V(e,t,tW(e));e.ui.registry.addNestedMenuItem("blocks",{text:"Blocks",getSubmenuItems:()=>n.items.validateItems(n.getStyleItems())})},rW=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],sW=e=>{const t=e.split(/\s*,\s*/);return Y(t,(e=>e.replace(/^['"]+|['"]+$/g,"")))},aW=e=>{const t=()=>{const t=sW(e.toLowerCase());return ie(rW,(e=>t.indexOf(e.toLowerCase())>-1))};return 0===e.indexOf("-apple-system")&&t()},iW=e=>{const t="System Font",n=()=>{const n=e=>e?sW(e)[0]:"",o=e.queryCommandValue("FontName"),r=l.data,s=o?o.toLowerCase():"",a=oe(r,(e=>{const t=e.format;return t.toLowerCase()===s||n(t).toLowerCase()===n(s).toLowerCase()})).orThunk((()=>je(aW(s),{title:t,format:s})));return{matchOpt:a,font:o}},o=e=>t=>t.exists((t=>t.format===e)),r=()=>{const{matchOpt:e}=n();return e},s=e=>()=>z.some({tag:"div",styles:-1===e.indexOf("dings")?{"font-family":e}:{}}),a=t=>()=>{e.undoManager.transact((()=>{e.focus(),e.execCommand("FontName",!1,t.format)}))},i=e=>{const{matchOpt:t,font:o}=n(),r=t.fold(R(o),(e=>e.title));Fi(e,WI,{text:r})},l=YV(e,"font_family_formats",GV.SemiColon);return{tooltip:"Fonts",text:z.some(t),icon:z.none(),isSelectedFor:o,getCurrentValue:r,getPreviewFor:s,onAction:a,updateText:i,dataset:l,shouldHide:!1,isInvalid:L}},lW=(e,t)=>VV(e,t,iW(e)),cW=(e,t)=>{const n=$V(e,t,iW(e));e.ui.registry.addNestedMenuItem("fontfamily",{text:t.shared.providers.translate("Fonts"),getSubmenuItems:()=>n.items.validateItems(n.getStyleItems())})},dW={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},uW=(()=>{const e="[0-9]+",t="[+-]?"+e,n="[eE]"+t,o="\\.",r=e=>`(?:${e})?`,s=["Infinity",e+o+r(e)+r(n),o+e+r(n),e+r(n)].join("|"),a=`[+-]?(?:${s})`;return new RegExp(`^(${a})(.*)$`)})(),mW=(e,t)=>q(t,(t=>q(dW[t],(t=>e===t)))),pW=(e,t)=>{const n=z.from(uW.exec(e));return n.bind((e=>{const n=Number(e[1]),o=e[2];return mW(o,t)?z.some({value:n,unit:o}):z.none()}))},fW=(e,t)=>pW(e,t).map((({value:e,unit:t})=>e+t)),gW={tab:R(9),escape:R(27),enter:R(13),backspace:R(8),delete:R(46),left:R(37),up:R(38),right:R(39),down:R(40),space:R(32),home:R(36),end:R(35),pageUp:R(33),pageDown:R(34)},hW=(e,t,n)=>{let o=z.none();const r=e=>e.map((e=>Eh.getValue(e))).getOr(""),s=zV(e,"NodeChange",(e=>{const t=e.getComponent();o=z.some(t),n.updateInputValue(t)})),a=e=>({getComponent:R(e)}),i=ya(E),l=xl("custom-number-input-events"),c=(e,t,s)=>{const a=r(o),i=n.getNewValue(a,e),l=a.length-`${i}`.length,c=o.map((e=>e.element.dom.selectionStart-l)),d=o.map((e=>e.element.dom.selectionEnd-l));n.onAction(i,s),o.each((e=>{Eh.setValue(e,i),t&&(c.each((t=>e.element.dom.selectionStart=t)),d.each((t=>e.element.dom.selectionEnd=t)))}))},d=(e,t)=>c(((e,t)=>e-t),e,t),u=(e,t)=>c(((e,t)=>e+t),e,t),m=e=>Ft(e.element).fold(z.none,(e=>(Zu(e),z.some(!0)))),p=e=>tm(e.element)?(Vt(e.element).each((e=>Zu(e))),z.some(!0)):z.none(),f=(e,n,o,r)=>{const s=t.shared.providers.translate(o),a=xl("altExecuting"),i=()=>e(!0);return qC.sketch({dom:{tag:"button",attributes:{title:s,"aria-label":s},classes:r.concat(n)},components:[HI(n,t.shared.providers.icons)],buttonBehaviours:Vu([xw(a,[Ki(ei(),((t,n)=>{n.event.raw.keyCode!==gW.space()&&n.event.raw.keyCode!==gW.enter()||e(!1)})),Ki(ri(),i),Ki(Wa(),i)])]),eventOrder:{[ei()]:[a,"keying"],[ri()]:[a,"alloy.base.behaviour"],[Wa()]:[a,"alloy.base.behaviour"]}})},g=GC(f((e=>d(!1,e)),"minus","Decrease font size",["highlight-on-focus"])),h=GC(f((e=>u(!1,e)),"plus","Increase font size",["highlight-on-focus"])),v=GC({dom:{tag:"div",classes:["tox-input-wrapper","highlight-on-focus"]},components:[nk.sketch({inputBehaviours:Vu([xw(l,[yO({onSetup:s,getApi:a},i),xO({getApi:a},i)]),xw("input-update-display-text",[Ki(WI,((e,t)=>{Eh.setValue(e,t.event.text)})),Ki(Za(),(e=>{n.onAction(Eh.getValue(e))})),Ki(oi(),(e=>{n.onAction(Eh.getValue(e))}))]),rw.config({mode:"special",onEnter:e=>(c(N,!0,!0),z.some(!0)),onEscape:m,onUp:e=>(u(!0,!1),z.some(!0)),onDown:e=>(d(!0,!1),z.some(!0)),onLeft:(e,t)=>(t.cut(),z.none()),onRight:(e,t)=>(t.cut(),z.none())})])})],behaviours:Vu([Aw.config({}),rw.config({mode:"special",onEnter:p,onSpace:p,onEscape:m}),xw("input-wrapper-events",[Ki(Ja(),(e=>{X([g,h],(t=>{const n=st.fromDom(t.get(e).element.dom);tm(n)&&em(n)}))}))])])});return{dom:{tag:"div",classes:["tox-number-input"]},components:[g.asSpec(),v.asSpec(),h.asSpec()],behaviours:Vu([Aw.config({}),rw.config({mode:"flow",focusInside:Zb.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:e=>tm(e.element)?z.none():(Zu(e.element),z.some(!0))})])}},vW={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},bW={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},yW=(e,t)=>{const n=Math.pow(10,t);return Math.round(e*n)/n},xW=(e,t)=>/[0-9.]+px$/.test(e)?yW(72*parseInt(e,10)/96,t||0)+"pt":Re(bW,e).getOr(e),wW=e=>Re(vW,e).getOr(""),CW=e=>{const t=()=>{let t=z.none();const n=i.data,o=e.queryCommandValue("FontSize");if(o)for(let e=3;t.isNone()&&e>=0;e--){const r=xW(o,e),s=wW(r);t=oe(n,(e=>e.format===o||e.format===r||e.format===s))}return{matchOpt:t,size:o}},n=e=>t=>t.exists((t=>t.format===e)),o=()=>{const{matchOpt:e}=t();return e},r=R(z.none),s=t=>()=>{e.undoManager.transact((()=>{e.focus(),e.execCommand("FontSize",!1,t.format)}))},a=e=>{const{matchOpt:n,size:o}=t(),r=n.fold(R(o),(e=>e.title));Fi(e,WI,{text:r})},i=YV(e,"font_size_formats",GV.Space);return{tooltip:"Font sizes",text:z.some("12pt"),icon:z.none(),isSelectedFor:n,getPreviewFor:r,getCurrentValue:o,onAction:s,updateText:a,dataset:i,shouldHide:!1,isInvalid:L}},SW=(e,t)=>VV(e,t,CW(e)),_W=e=>{var t;const n={step:1},o={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}};return null!==(t=o[e])&&void 0!==t?t:n},kW=16,EW=e=>e>=0,OW=e=>{const t=()=>e.queryCommandValue("FontSize"),n=e=>Fi(e,WI,{text:t()});return{updateInputValue:n,onAction:(t,n)=>e.execCommand("FontSize",!1,t,{skip_focus:!n}),getNewValue:(n,o)=>{pW(n,["unsupportedLength","empty"]);const r=pW(n,["unsupportedLength","empty"]).or(pW(t(),["unsupportedLength","empty"])),s=r.map((e=>e.value)).getOr(kW),a=HS(e),i=r.map((e=>e.unit)).filter((e=>""!==e)).getOr(a),l=o(s,_W(i).step);return`${EW(l)?l:s}${i}`}}},TW=(e,t)=>hW(e,t,OW(e)),AW=(e,t)=>{const n=$V(e,t,CW(e));e.ui.registry.addNestedMenuItem("fontsize",{text:"Font sizes",getSubmenuItems:()=>n.items.validateItems(n.getStyleItems())})},RW=(e,t)=>{const n="Paragraph",o=t=>()=>e.formatter.match(t),r=t=>()=>{const n=e.formatter.get(t);return void 0!==n?z.some({tag:n.length>0&&(n[0].inline||n[0].block)||"div",styles:e.dom.parseStyle(e.formatter.getCssText(t))}):z.none()},s=t=>{const o=e=>pz(e)?ae(e.items,o):fz(e)?[{title:e.title,format:e.format}]:[],r=ae(Cz(e),o),s=eW(e,R(r)),a=s.fold(R(n),(e=>e.title));Fi(t,WI,{text:a})};return{tooltip:"Formats",text:z.some(n),icon:z.none(),isSelectedFor:o,getCurrentValue:z.none,getPreviewFor:r,onAction:jV(e),updateText:s,shouldHide:TS(e),isInvalid:t=>!e.formatter.canApply(t.format),dataset:t}},NW=(e,t)=>{const n=r({type:"advanced"},t.styles);return VV(e,t,RW(e,n))},DW=(e,t)=>{const n=r({type:"advanced"},t.styles),o=$V(e,t,RW(e,n));e.ui.registry.addNestedMenuItem("styles",{text:"Formats",getSubmenuItems:()=>o.items.validateItems(o.getStyleItems())})},BW=R([$s("toggleClass"),$s("fetch"),Ud("onExecute"),ca("getHotspot",z.some),ca("getAnchorOverrides",R({})),fp(),Ud("onItemExecute"),ea("lazySink"),$s("dom"),zd("onOpen"),Oh("splitDropdownBehaviours",[YA,rw,Aw]),ca("matchWidth",!1),ca("useMinWidth",!1),ca("eventOrder",{}),ea("role")].concat(vR())),MW=sv({factory:qC,schema:[$s("dom")],name:"arrow",defaults:()=>({buttonBehaviours:Vu([Aw.revoke()])}),overrides:e=>({dom:{tag:"span",attributes:{role:"presentation"}},action:t=>{t.getSystem().getByUid(e.uid).each(zi)},buttonBehaviours:Vu([Kw.config({toggleOnExecute:!1,toggleClass:e.toggleClass})])})}),IW=sv({factory:qC,schema:[$s("dom")],name:"button",defaults:()=>({buttonBehaviours:Vu([Aw.revoke()])}),overrides:e=>({dom:{tag:"span",attributes:{role:"presentation"}},action:t=>{t.getSystem().getByUid(e.uid).each((n=>{e.onExecute(n,t)}))}})}),PW=R([MW,IW,iv({factory:{sketch:e=>({uid:e.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:e.text}})},schema:[$s("text")],name:"aria-descriptor"}),av({schema:[Pd()],name:"menu",defaults:e=>({onExecute:(t,n)=>{t.getSystem().getByUid(e.uid).each((o=>{e.onItemExecute(o,t,n)}))}})}),sR()]),LW=(e,t,n,o)=>{const s=e=>{Vv.getCurrent(e).each((e=>{Ab.highlightFirst(e),rw.focusIn(e)}))},a=t=>{const n=s;uR(e,N,t,o,n,MC.HighlightMenuAndItem).get(E)},i=e=>(a(e),z.some(!0)),l=t=>{const n=wv(t,e,"button");return zi(n),z.some(!0)},c=r(r({},Vi([rl(((t,n)=>{const o=xv(t,e,"aria-descriptor");o.each((e=>{const n=xl("aria");ln(e.element,"id",n),ln(t.element,"aria-describedby",n)}))}))])),Xw(z.some(a))),d={repositionMenus:e=>{Kw.isOn(e)&&hR(e)}};return{uid:e.uid,dom:e.dom,components:t,apis:d,eventOrder:r(r({},e.eventOrder),{},{[gi()]:["disabling","toggling","alloy.base.behaviour"]}),events:c,behaviours:Ah(e.splitDropdownBehaviours,[YA.config({others:{sandbox:t=>{const n=wv(t,e,"arrow"),o={onOpen:()=>{Kw.on(n),Kw.on(t)},onClose:()=>{Kw.off(n),Kw.off(t)}};return gR(e,t,o)}}}),rw.config({mode:"special",onSpace:l,onEnter:l,onDown:i}),Aw.config({}),Kw.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:e.role.getOr("button"),"aria-haspopup":!0}}}},FW=zv({name:"SplitDropdown",configFields:BW(),partFields:PW(),factory:LW,apis:{repositionMenus:(e,t)=>e.repositionMenus(t)}}),zW=e=>({isEnabled:()=>!cb.isDisabled(e),setEnabled:t=>cb.set(e,!t),setText:t=>Fi(e,WI,{text:t}),setIcon:t=>Fi(e,qI,{icon:t})}),jW=e=>({setActive:t=>{Kw.set(e,t)},isActive:()=>Kw.isOn(e),isEnabled:()=>!cb.isDisabled(e),setEnabled:t=>cb.set(e,!t),setText:t=>Fi(e,WI,{text:t}),setIcon:t=>Fi(e,qI,{icon:t})}),UW=(e,t)=>e.map((e=>({"aria-label":t.translate(e),title:t.translate(e)}))).getOr({}),HW=xl("focus-button"),$W=(e,t,n,o,r)=>{const s=t.map((e=>GC(VI(e,"tox-tbtn",r)))),a=e.map((e=>GC($I(e,r.icons))));return{dom:{tag:"button",classes:["tox-tbtn"].concat(t.isSome()?["tox-tbtn--select"]:[]),attributes:UW(n,r)},components:SO([a.map((e=>e.asSpec())),s.map((e=>e.asSpec()))]),eventOrder:{[Ga()]:["focusing","alloy.base.behaviour",FI],[Ei()]:[FI,"toolbar-group-button-events"]},buttonBehaviours:Vu([vO.toolbarButton(r.isDisabled),mO(),xw(FI,[rl(((e,t)=>jI(e))),Ki(WI,((e,t)=>{s.bind((t=>t.getOpt(e))).each((e=>{bw.set(e,[Zc(r.translate(t.event.text))])}))})),Ki(qI,((e,t)=>{a.bind((t=>t.getOpt(e))).each((e=>{bw.set(e,[$I(t.event.icon,r.icons)])}))})),Ki(Ga(),((e,t)=>{t.event.prevent(),Li(e,HW)}))])].concat(o.getOr([])))}},VW=(e,t,n,o)=>{const r=t.shared,s=ya(E),a={toolbarButtonBehaviours:[],getApi:zW,onSetup:e.onSetup},i=[xw("toolbar-group-button-events",[yO(a,s),xO(a,s)])];return p$.sketch({lazySink:r.getSink,fetch:()=>oR.nu((t=>{t(Y(n(e.items),R$))})),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:$W(e.icon,e.text,e.tooltip,z.some(i),r.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:o}}}})},WW=(e,t,n)=>{var o;const s=ya(E),a=$W(e.icon,e.text,e.tooltip,z.none(),n);return qC.sketch({dom:a.dom,components:a.components,eventOrder:zI,buttonBehaviours:r(r({},Vu([xw("toolbar-button-events",[LI({onAction:e.onAction,getApi:t.getApi}),yO(t,s),xO(t,s)]),vO.toolbarButton((()=>!e.enabled||n.isDisabled())),mO()].concat(t.toolbarButtonBehaviours))),{},{[FI]:null===(o=a.buttonBehaviours)||void 0===o?void 0:o[FI]})})},qW=(e,t)=>GW(e,t,[]),GW=(e,t,n)=>WW(e,{toolbarButtonBehaviours:n.length>0?[xw("toolbarButtonWith",n)]:[],getApi:zW,onSetup:e.onSetup},t),KW=(e,t)=>YW(e,t,[]),YW=(e,t,n)=>WW(e,{toolbarButtonBehaviours:[bw.config({}),Kw.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(n.length>0?[xw("toolbarToggleButtonWith",n)]:[]),getApi:jW,onSetup:e.onSetup},t),XW=(e,t,n)=>o=>oR.nu((e=>t.fetch(e))).map((r=>z.from(IR(Pr(hA(xl("menu-value"),r,(n=>{t.onItemAction(e(o),n)}),t.columns,t.presets,S_.CLOSE_ON_EXECUTE,t.select.getOr(L),n),{movement:bA(t.columns,t.presets),menuBehaviours:KE.unnamedEvents("auto"!==t.columns?[]:[rl(((e,n)=>{WE(e,4,V_(t.presets)).each((({numRows:t,numColumns:n})=>{rw.setGridSize(e,t,n)}))}))])}))))),JW=(e,t)=>{const n=e=>({isEnabled:()=>!cb.isDisabled(e),setEnabled:t=>cb.set(e,!t),setIconFill:(t,n)=>{fd(e.element,`svg path[id="${t}"], rect[id="${t}"]`).each((e=>{ln(e,"fill",n)}))},setActive:t=>{ln(e.element,"aria-pressed",t),fd(e.element,"span").each((n=>{e.getSystem().getByDom(n).each((e=>Kw.set(e,t)))}))},isActive:()=>fd(e.element,"span").exists((t=>e.getSystem().getByDom(t).exists(Kw.isOn))),setText:t=>fd(e.element,"span").each((n=>e.getSystem().getByDom(n).each((e=>Fi(e,WI,{text:t}))))),setIcon:t=>fd(e.element,"span").each((n=>e.getSystem().getByDom(n).each((e=>Fi(e,qI,{icon:t})))))}),o=ya(E),s={getApi:n,onSetup:e.onSetup};return FW.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:r({"aria-pressed":!1},UW(e.tooltip,t.providers))},onExecute:t=>{const o=n(t);o.isEnabled()&&e.onAction(o)},onItemExecute:(e,t,n)=>{},splitDropdownBehaviours:Vu([vO.splitButton(t.providers.isDisabled),mO(),xw("split-dropdown-events",[rl(((e,t)=>jI(e))),Ki(HW,Aw.focus),yO(s,o),xO(s,o)]),rD.config({})]),eventOrder:{[Ei()]:["alloy.base.behaviour","split-dropdown-events"]},toggleClass:"tox-tbtn--enabled",lazySink:t.getSink,fetch:XW(n,e,t.providers),parts:{menu:X_(!1,e.columns,e.presets)},components:[FW.parts.button($W(e.icon,e.text,z.none(),z.some([Kw.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),t.providers)),FW.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:eS("chevron-down",t.providers.icons)},buttonBehaviours:Vu([vO.splitButton(t.providers.isDisabled),mO(),oS()])}),FW.parts["aria-descriptor"]({text:t.providers.translate("To open the popup, press Shift+Enter")})]})},QW=[{name:"history",items:["undo","redo"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],ZW=(e,t)=>(n,o,r)=>{const s=e(n).mapError((e=>Ls(e))).getOrDie();return t(s,o,r)},eq={button:ZW(cE,((e,t)=>qW(e,t.shared.providers))),togglebutton:ZW(mE,((e,t)=>KW(e,t.shared.providers))),menubutton:ZW(XU,((e,t)=>lL(e,"tox-tbtn",t,z.none(),!1))),splitbutton:ZW(QU,((e,t)=>JW(e,t.shared))),grouptoolbarbutton:ZW(GU,((e,t,n)=>{const o=n.ui.registry.getAll().buttons,r=e=>lq(n,{buttons:o,toolbar:e,allowToolbarGroups:!1},t,z.none()),s={[mp]:t.shared.header.isPositionedAtTop()?up.TopToBottom:up.BottomToTop};switch(NS(n)){case dS.floating:return VW(e,t,r,s);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}}))},tq=(e,t,n)=>Re(eq,e.type).fold((()=>(console.error("skipping button defined by",e),z.none())),(o=>z.some(o(e,t,n)))),nq={styles:NW,fontsize:SW,fontsizeinput:TW,fontfamily:lW,blocks:nW,align:QV},oq=e=>{const t=Y(QW,(t=>{const n=Z(t.items,(t=>Ne(e,t)||Ne(nq,t)));return{name:t.name,items:n}}));return Z(t,(e=>e.items.length>0))},rq=e=>{const t=e.split("|");return Y(t,(e=>({items:e.trim().split(" ")})))},sq=e=>k(e,(e=>Ne(e,"name")&&Ne(e,"items"))),aq=e=>{const t=e.toolbar,n=e.buttons;return!1===t?[]:void 0===t||!0===t?oq(n):f(t)?rq(t):sq(t)?t:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},iq=(e,t,n,o,r,s)=>Re(t,n.toLowerCase()).orThunk((()=>s.bind((e=>ve(e,(e=>Re(t,e+n.toLowerCase()))))))).fold((()=>Re(nq,n.toLowerCase()).map((t=>t(e,r)))),(t=>"grouptoolbarbutton"!==t.type||o?tq(t,r,e):(console.warn(`Ignoring the '${n}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),z.none()))),lq=(e,t,n,o)=>{const r=aq(t),s=Y(r,(r=>{const s=ae(r.items,(r=>0===r.trim().length?[]:iq(e,t.buttons,r,t.allowToolbarGroups,n,o).toArray()));return{title:z.from(e.translate(r.name)),items:s}}));return Z(s,(e=>e.items.length>0))},cq=(e,t,n,o)=>{const r=t.mainUi.outerContainer,s=n.toolbar,a=n.buttons;if(k(s,f)){const t=s.map((t=>{const r={toolbar:t,buttons:a,allowToolbarGroups:n.allowToolbarGroups};return lq(e,r,o,z.none())}));_V.setToolbars(r,t)}else _V.setToolbar(r,lq(e,n,o,z.none()))},dq=No(),uq=dq.os.isiOS()&&dq.os.version.major<=12,mq=(e,t)=>{const{uiMotherships:n}=t,o=e.dom;let r=e.getWin();const s=e.getDoc().documentElement,a=ya(Bn(r.innerWidth,r.innerHeight)),i=ya(Bn(s.offsetWidth,s.offsetHeight)),l=()=>{const t=a.get();t.left===r.innerWidth&&t.top===r.innerHeight||(a.set(Bn(r.innerWidth,r.innerHeight)),wT(e))},c=()=>{const t=e.getDoc().documentElement,n=i.get();n.left===t.offsetWidth&&n.top===t.offsetHeight||(i.set(Bn(t.offsetWidth,t.offsetHeight)),wT(e))},d=t=>{CT(e,t)};o.bind(r,"resize",l),o.bind(r,"scroll",d);const u=Im(st.fromDom(e.getBody()),"load",c);e.on("hide",(()=>{X(n,(e=>{vn(e.element,"display","none")}))})),e.on("show",(()=>{X(n,(e=>{kn(e.element,"display")}))})),e.on("NodeChange",c),e.on("remove",(()=>{u.unbind(),o.unbind(r,"resize",l),o.unbind(r,"scroll",d),r=null}))},pq=(e,t,n)=>{f_(e)&&Cg(n.mainUi.mothership.element,n.popupUi.mothership),wg(t,n.dialogUi.mothership)},fq=async(e,t,n,o,r)=>{const{mainUi:s,uiMotherships:a}=t,i=ya(0),l=s.outerContainer;await PV(e);const c=st.fromDom(r.targetNode),d=Jt(Xt(c));Cg(c,s.mothership),pq(e,d,t),e.on("PostRender",(()=>{_V.setSidebar(l,n.sidebar,ZS(e)),cq(e,t,n,o),i.set(e.getWin().innerWidth),_V.setMenubar(l,AV(e,n)),_V.setViews(l,n.views),mq(e,t)}));const u=_V.getSocket(l).getOrDie("Could not find expected socket element");if(uq){bn(u.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const t=CL((()=>{e.dispatch("ScrollContent")}),20),n=Mm(u.element,"scroll",t.throttle);e.on("remove",n.unbind)}uO(e,t),e.addCommand("ToggleSidebar",((t,n)=>{_V.toggleSidebar(l,n),e.dispatch("ToggleSidebar")})),e.addQueryValueHandler("ToggleSidebar",(()=>{var e;return null!==(e=_V.whichSidebar(l))&&void 0!==e?e:""})),e.addCommand("ToggleView",((t,n)=>{if(_V.toggleView(l,n)){const t=l.element;s.mothership.broadcastOn([Wg()],{target:t}),X(a,(e=>{e.broadcastOn([Wg()],{target:t})})),b(_V.whichView(l))&&(e.focus(),e.nodeChanged())}})),e.addQueryValueHandler("ToggleView",(()=>{var e;return null!==(e=_V.whichView(l))&&void 0!==e?e:""}));const m=NS(e),p=()=>{_V.refreshToolbar(t.mainUi.outerContainer)};m!==dS.sliding&&m!==dS.floating||e.on("ResizeWindow ResizeEditor ResizeContent",(()=>{const t=e.getWin().innerWidth;t!==i.get()&&(p(),i.set(t))}));const f={setEnabled:e=>{dO(t,!e)},isEnabled:()=>!cb.isDisabled(l)};return{iframeContainer:u.element.dom,editorContainer:l.element.dom,api:f}};var gq=Object.freeze({__proto__:null,render:fq});const hq=e=>{const t=/^[0-9\.]+(|px)$/i;return t.test(""+e)?z.some(parseInt(""+e,10)):z.none()},vq=e=>_(e)?e+"px":e,bq=(e,t,n)=>{const o=t.filter((t=>e<t)),r=n.filter((t=>e>t));return o.or(r).getOr(e)},yq=e=>{const t=xS(e),n=SS(e),o=kS(e);return hq(t).map((e=>bq(e,n,o)))},xq=e=>{const t=yq(e);return t.getOr(xS(e))},wq=e=>{const t=wS(e),n=CS(e),o=_S(e);return hq(t).map((e=>bq(e,n,o)))},Cq=e=>{const t=wq(e);return t.getOr(wS(e))},{ToolbarLocation:Sq,ToolbarMode:_q}=h_,kq=40,Eq=(e,t,n,o,s)=>{const{mainUi:a,uiMotherships:i}=n,l=pS.DOM,c=d_(e),d=p_(e),u=_S(e).or(wq(e)),m=o.shared.header,p=m.isPositionedAtTop,f=NS(e),g=f===_q.sliding||f===_q.floating,h=ya(!1),v=()=>h.get()&&!e.removed,b=e=>g?e.fold(R(0),(e=>e.components().length>1?An(e.components()[1].element):0)):0,y=n=>{switch(BS(e)){case Sq.auto:const e=_V.getToolbar(a.outerContainer),o=b(e),r=An(n.element)-o,s=lr(t),i=s.y>r;if(i)return"top";{const e=It(t),n=Math.max(e.dom.scrollHeight,An(e)),o=s.bottom<n-r;if(o)return"bottom";{const e=mr(),t=e.bottom<s.bottom-r;return t?"bottom":"top"}}case Sq.bottom:return"bottom";case Sq.top:default:return"top"}},x=e=>{s.on((t=>{TU.setModes(t,[e]),m.setDockingMode(e);const n=p()?up.TopToBottom:up.BottomToTop;ln(t.element,mp,n)}))},w=()=>{s.on((e=>{const n=u.getOrThunk((()=>{const e=hq(xn(rn(),"margin-left")).getOr(0);return jn(rn())-Pn(t).left+e}));vn(e.element,"max-width",n+"px")}))},C=n=>{s.on((o=>{const s=_V.getToolbar(a.outerContainer),i=b(s),l=lr(t),{top:c,left:d}=S(e,a.outerContainer.element).fold((()=>({top:p()?Math.max(l.y-An(o.element)+i,0):l.bottom,left:l.x})),(e=>{var t;const n=lr(e),r=null!==(t=e.dom.scrollTop)&&void 0!==t?t:0,s=Nt(e,rn()),a=s?Math.max(l.y-An(o.element)+i,0):l.y-n.y+r-An(o.element)+i;return{top:p()?a:l.bottom,left:s?l.x:l.x-n.x}})),u={position:"absolute",left:Math.round(d)+"px",top:Math.round(c)+"px"},m=n.map((e=>{const t=Go(),n=150,o=window.innerWidth-(d-t.left),r=Math.max(Math.min(e,o),n);return{width:r+"px"}})).getOr({});bn(a.outerContainer.element,r(r({},u),m))}))},S=(e,t)=>f_(e)?Pj(t):z.none(),_=()=>{X(i,(e=>{e.broadcastOn([qg()],{})}))},k=()=>{if(c)return z.none();{const e=Pn(a.outerContainer.element).left+Un(a.outerContainer.element);if(e>=window.innerWidth-kq||Cn(a.outerContainer.element,"width").isSome()){vn(a.outerContainer.element,"position","absolute"),vn(a.outerContainer.element,"left","0px"),kn(a.outerContainer.element,"width");const e=Un(a.outerContainer.element);return z.some(e)}return z.none()}},E=e=>{if(!v())return;c||w();const t=c?z.none():k();g&&_V.refreshToolbar(a.outerContainer),c||C(t),d&&s.on(e),_()},O=()=>!(c||!d||!v())&&s.get().exists((e=>{const t=m.getDockingMode(),n=y(e);return n!==t&&(x(n),!0)})),T=()=>{h.set(!0),vn(a.outerContainer.element,"display","flex"),l.addClass(e.getBody(),"mce-edit-focus"),X(i,(e=>{kn(e.element,"display")})),O(),f_(e)?E((e=>TU.isDocked(e)?TU.reset(e):TU.refresh(e))):E(TU.refresh)},A=()=>{h.set(!1),vn(a.outerContainer.element,"display","none"),l.removeClass(e.getBody(),"mce-edit-focus"),X(i,(e=>{vn(e.element,"display","none")}))},N=()=>{const e=O();e&&E(TU.reset)};return{isVisible:v,isPositionedAtTop:p,show:T,hide:A,update:E,updateMode:N,repositionPopups:_}},Oq=(e,t)=>{const n=lr(e);return{pos:t?n.y:n.bottom,bounds:n}},Tq=(e,t,n,o)=>{const r=ya(Oq(t,n.isPositionedAtTop())),s=o=>{const{pos:s,bounds:a}=Oq(t,n.isPositionedAtTop()),{pos:i,bounds:l}=r.get(),c=a.height!==l.height||a.width!==l.width;r.set({pos:s,bounds:a}),c&&wT(e,o),n.isVisible()&&(i!==s?n.update(TU.reset):c&&(n.updateMode(),n.repositionPopups()))};o||(e.on("activate",n.show),e.on("deactivate",n.hide)),e.on("SkinLoaded ResizeWindow",(()=>n.update(TU.reset))),e.on("NodeChange keydown",(e=>{requestAnimationFrame((()=>s(e)))}));let a=0;const i=SL((()=>n.update(TU.refresh)),33);e.on("ScrollWindow",(()=>{const e=Go().left;e!==a&&(a=e,i.throttle()),n.updateMode()})),f_(e)&&e.on("ElementScroll",(e=>{n.update(TU.refresh)}));const l=Nm();l.set(Im(st.fromDom(e.getBody()),"load",(e=>s(e.raw)))),e.on("remove",(()=>{l.clear()}))},Aq=async(e,t,n,o,r)=>{const{mainUi:s}=t,a=Dm(),i=st.fromDom(r.targetNode),l=Eq(e,i,t,o,a),c=PS(e);await LV(e);const d=()=>{if(a.isSet())return void l.show();a.set(_V.getHeader(s.outerContainer).getOrDie());const r=u_(e);f_(e)?(Cg(i,s.mothership),Cg(i,t.popupUi.mothership)):wg(r,s.mothership),wg(r,t.dialogUi.mothership),cq(e,t,n,o),_V.setMenubar(s.outerContainer,AV(e,n)),l.show(),Tq(e,i,l,c),e.nodeChanged()};e.on("show",d),e.on("hide",l.hide),c||(e.on("focus",d),e.on("blur",l.hide)),e.on("init",(()=>{(e.hasFocus()||c)&&d()})),uO(e,t);const u={show:d,hide:l.hide,setEnabled:e=>{dO(t,!e)},isEnabled:()=>!cb.isDisabled(s.outerContainer)};return{editorContainer:s.outerContainer.element.dom,api:u}};var Rq=Object.freeze({__proto__:null,render:Aq});const Nq=()=>{const e=Dm(),t=Dm(),n=Dm(),o=(e,t)=>()=>n.get().bind((e=>t(e.outerContainer))).getOrDie(`Could not find ${e} element in OuterContainer`),r=()=>{const n=e.get().map((e=>e.mothership)),o=t.get().map((e=>e.mothership));return n.fold((()=>o.toArray()),(e=>o.fold((()=>[e]),(t=>Nt(e.element,t.element)?[e]:[e,t]))))};return{dialogUi:e,popupUi:t,mainUi:n,getUiMotherships:r,lazyGetInOuterOrDie:o}},Dq="contexttoolbar-show",Bq="contexttoolbar-hide",Mq=e=>({hide:()=>Li(e,yi()),getValue:()=>Eh.getValue(e)}),Iq=(e,t)=>Ki(PI,((n,o)=>{const r=e.get(n),s=Mq(r);t.onAction(s,o.event.buttonApi)})),Pq=(e,t,n)=>{const s=t.original,{primary:a}=s,i=o(s,l),c=Is(cE(r(r({},i),{},{type:"button",onAction:E})));return GW(c,n,[Iq(e,t)])},Lq=(e,t,n)=>{const s=t.original,{primary:a}=s,i=o(s,c),l=Is(mE(r(r({},i),{},{type:"togglebutton",onAction:E})));return YW(l,n,[Iq(e,t)])},Fq=e=>"contextformtogglebutton"===e.type,zq=(e,t,n)=>Fq(t)?Lq(e,t,n):Pq(e,t,n),jq=(e,t,n)=>{const o=Y(t,(t=>GC(zq(e,t,n)))),r=()=>Y(o,(e=>e.asSpec())),s=e=>ve(t,((t,n)=>t.primary?z.from(o[n]).bind((t=>t.getOpt(e))).filter(M(cb.isDisabled)):z.none()));return{asSpecs:r,findPrimary:s}},Uq=(e,t)=>{const n=e.label.fold((()=>({})),(e=>({"aria-label":e}))),o=GC(nk.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:e.initValue(),inputAttributes:n,selectOnFocus:!0,inputBehaviours:Vu([rw.config({mode:"special",onEnter:e=>r.findPrimary(e).map((e=>(zi(e),!0))),onLeft:(e,t)=>(t.cut(),z.none()),onRight:(e,t)=>(t.cut(),z.none())})])})),r=jq(o,e.commands,t);return[{title:z.none(),items:[o.asSpec()]},{title:z.none(),items:r.asSpecs()}]},Hq=(e,t,n)=>I$({type:e,uid:xl("context-toolbar"),initGroups:Uq(t,n),onEscape:z.none,cyclicKeying:!0,providers:n}),$q={renderContextForm:Hq,buildInitGroups:Uq},Vq=(e,t,n)=>t.bottom-e.y>=n&&e.bottom-t.y>=n,Wq=e=>{const t=e.getBoundingClientRect();if(t.height<=0&&t.width<=0){const n=qt(st.fromDom(e.startContainer),e.startOffset).element,o=St(n)?Lt(n):z.some(n);return o.filter(Ct).map((e=>e.dom.getBoundingClientRect())).getOr(t)}return t},qq=e=>{const t=e.selection.getRng(),n=Wq(t);if(e.inline){const e=Go();return ir(e.left+n.left,e.top+n.top,n.width,n.height)}{const t=cr(st.fromDom(e.getBody()));return ir(t.x+n.left,t.y+n.top,n.width,n.height)}},Gq=(e,t)=>t.filter((e=>on(e)&&wt(e))).map(cr).getOrThunk((()=>qq(e))),Kq=(e,t,n)=>{const o=Math.max(e.x+n,t.x),r=Math.min(e.right-n,t.right);return{x:o,width:r-o}},Yq=(e,t,n,o,r,s)=>{const a=st.fromDom(e.getContainer()),i=fd(a,".tox-editor-header").getOr(a),l=lr(i),c=l.y>=t.bottom,d=o&&!c;if(e.inline&&d)return{y:Math.max(l.bottom+s,n.y),bottom:n.bottom};if(e.inline&&!d)return{y:n.y,bottom:Math.min(l.y-s,n.bottom)};const u="line"===r?lr(a):t;return d?{y:Math.max(l.bottom+s,n.y),bottom:Math.min(u.bottom-s,n.bottom)}:{y:Math.max(u.y+s,n.y),bottom:Math.min(l.y-s,n.bottom)}},Xq=(e,t,n,o=0)=>{const r=Jo(window),s=lr(st.fromDom(e.getContentAreaContainer())),a=n_(e)||s_(e)||i_(e),{x:i,width:l}=Kq(s,r,o);if(e.inline&&!a)return ir(i,r.y,l,r.height);{const a=t.header.isPositionedAtTop(),{y:c,bottom:d}=Yq(e,s,r,a,n,o);return ir(i,c,l,d-c)}},Jq=12,Qq={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},Zq={maxHeightFunction:tp(),maxWidthFunction:o$()},eG=(e,t)=>{const n=e.selection.getRng(),o=qt(st.fromDom(n.startContainer),n.startOffset);return n.startContainer===n.endContainer&&n.startOffset===n.endOffset-1&&Nt(o.element,t)},tG=(e,t,n)=>{const o=Cn(e,"position");vn(e,"position",t);const r=n(e);return o.each((t=>vn(e,"position",t))),r},nG=e=>"node"===e,oG=(e,t,n,o,r)=>{const s=qq(e),a=o.lastElement().exists((e=>Nt(n,e)));if(eG(e,n))return a?XF:WF;if(a)return tG(t,o.getMode(),(()=>{const e=Vq(s,lr(t),-20);return e&&!o.isReposition()?QF:XF}));{const e="fixed"===o.getMode()?r.y+Go().top:r.y,n=An(t)+Jq;return e+n<=s.y?WF:qF}},rG=(e,t,n,o)=>{const s=t=>(o,s,a,i,l)=>{const c=oG(e,i,t,n,l),d=r(r({},o),{},{y:l.y,height:l.height});return r(r({},c(d,s,a,i,l)),{},{alwaysFit:!0})},a=e=>nG(o)?[s(e)]:[],i={onLtr:e=>[Su,_u,wu,yu,Cu,xu].concat(a(e)),onRtl:e=>[Su,_u,Cu,xu,wu,yu].concat(a(e))},l={onLtr:e=>[_u,yu,xu,wu,Cu,Su].concat(a(e)),onRtl:e=>[_u,xu,yu,Cu,wu,Su].concat(a(e))};return t?l:i},sG=(e,t,n,o)=>"line"===t?{bubble:ap(Jq,0,Qq),layouts:{onLtr:()=>[ku],onRtl:()=>[Eu]},overrides:Zq}:{bubble:ap(0,Jq,Qq,1/Jq),layouts:rG(e,n,o,t),overrides:Zq},aG=(e,t)=>{const n=Z(t,(t=>t.predicate(e.dom))),{pass:o,fail:r}=Q(n,(e=>"contexttoolbar"===e.type));return{contextToolbars:o,contextForms:r}},iG=e=>{if(e.length<=1)return e;{const t=t=>q(e,(e=>e.position===t)),n=t=>Z(e,(e=>e.position===t)),o=t("selection"),s=t("node");if(o||s){if(s&&o){const e=n("node"),t=Y(n("selection"),(e=>r(r({},e),{},{position:"node"})));return e.concat(t)}return n(o?"selection":"node")}return n("line")}},lG=e=>{if(e.length<=1)return e;{const t=t=>oe(e,(e=>e.position===t)),n=t("selection").orThunk((()=>t("node"))).orThunk((()=>t("line"))).map((e=>e.position));return n.fold((()=>[]),(t=>Z(e,(e=>e.position===t))))}},cG=(e,t,n)=>{const o=aG(e,t);if(o.contextForms.length>0)return z.some({elem:e,toolbars:[o.contextForms[0]]});{const t=aG(e,n);if(t.contextForms.length>0)return z.some({elem:e,toolbars:[t.contextForms[0]]});if(o.contextToolbars.length>0||t.contextToolbars.length>0){const n=iG(o.contextToolbars.concat(t.contextToolbars));return z.some({elem:e,toolbars:n})}return z.none()}},dG=(e,t,n)=>e(t)?z.none():Ba(t,(e=>{if(Ct(e)){const{contextToolbars:t,contextForms:o}=aG(e,n.inNodeScope),r=o.length>0?o:lG(t);return r.length>0?z.some({elem:e,toolbars:r}):z.none()}return z.none()}),e),uG=(e,t)=>{const n=st.fromDom(t.getBody()),o=e=>Nt(e,n),r=e=>!o(e)&&!Dt(n,e),s=st.fromDom(t.selection.getNode());return r(s)?z.none():cG(s,e.inNodeScope,e.inEditorScope).orThunk((()=>dG(o,s,e)))},mG=(e,t)=>{const n={},o=[],s=[],a={},i={},l=(e,l)=>{const c=Is(xE(l));n[e]=c,c.launch.map((n=>{a["form:"+e]=r(r({},l.launch),{},{type:"contextformtogglebutton"===n.type?"togglebutton":"button",onAction:()=>{t(c)}})})),"editor"===c.scope?s.push(c):o.push(c),i[e]=c},c=(e,t)=>{CE(t).each((n=>{"editor"===t.scope?s.push(n):o.push(n),i[e]=n}))},d=be(e);return X(d,(t=>{const n=e[t];"contextform"===n.type?l(t,n):"contexttoolbar"===n.type&&c(t,n)})),{forms:n,inNodeScope:o,inEditorScope:s,lookupTable:i,formNavigators:a}},pG=xl("forward-slide"),fG=xl("backward-slide"),gG=xl("change-slide-event"),hG="tox-pop--resizing",vG=e=>{const t=ya([]);return $C.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:e=>{t.set([]),$C.getContent(e).each((e=>{kn(e.element,"visibility")})),_c(e.element,hG),kn(e.element,"width")},inlineBehaviours:Vu([xw("context-toolbar-events",[ol(ai(),((e,t)=>{"width"===t.event.raw.propertyName&&(_c(e.element,hG),kn(e.element,"width"))})),Ki(gG,((e,t)=>{const n=e.element;kn(n,"width");const o=jn(n);$C.setContent(e,t.event.contents),Cc(n,hG);const r=jn(n);vn(n,"width",o+"px"),$C.getContent(e).each((e=>{t.event.focus.bind((e=>(Zu(e),om(n)))).orThunk((()=>(rw.focusIn(e),nm(Xt(n)))))})),setTimeout((()=>{vn(e.element,"width",r+"px")}),0)})),Ki(pG,((e,n)=>{$C.getContent(e).each((n=>{t.set(t.get().concat([{bar:n,focus:nm(Xt(e.element))}]))})),Fi(e,gG,{contents:n.event.forwardContents,focus:z.none()})})),Ki(fG,((e,n)=>{ge(t.get()).each((n=>{t.set(t.get().slice(0,t.get().length-1)),Fi(e,gG,{contents:sd(n.bar),focus:n.focus})}))}))]),rw.config({mode:"special",onEscape:n=>ge(t.get()).fold((()=>e.onEscape()),(e=>(Li(n,fG),z.some(!0))))})]),lazySink:()=>vr.value(e.sink)})},bG="tox-pop--transition",yG=(e,t,n,o)=>{const s=o.backstage,a=s.shared,i=No().deviceType.isTouch,l=Dm(),c=Dm(),d=Dm(),u=rd(vG({sink:n,onEscape:()=>(e.focus(),z.some(!0))})),m=()=>{const t=d.get().getOr("node"),n=nG(t)?1:0;return Xq(e,a,t,n)},p=()=>!e.removed&&!(i()&&s.isContextMenuOpen()),f=e=>Be(Le(e,l.get(),Nt),!0),g=()=>{if(p()){const t=m(),n=Be(d.get(),"node")?Gq(e,l.get()):qq(e);return t.height<=0||!Vq(n,t,.01)}return!0},h=()=>{l.clear(),c.clear(),d.clear(),$C.hide(u)},v=()=>{if($C.isOpen(u)){const e=u.element;kn(e,"display"),g()?vn(e,"display","none"):(c.set(0),$C.reposition(u))}},b=t=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[t],behaviours:Vu([rw.config({mode:"acyclic"}),xw("pop-dialog-wrap-events",[rl((t=>{e.shortcuts.add("ctrl+F9","focus statusbar",(()=>rw.focusIn(t)))})),sl((t=>{e.shortcuts.remove("ctrl+F9")}))])])}),y=$n((()=>mG(t,(e=>{const t=C([e]);Fi(u,pG,{forwardContents:b(t)})})))),x=(t,n)=>lq(e,{buttons:t,toolbar:n.items,allowToolbarGroups:!1},o.backstage,z.some(["form:"])),w=(e,t)=>$q.buildInitGroups(e,t),C=t=>{const{buttons:n}=e.ui.registry.getAll(),o=y(),s=r(r({},n),o.formNavigators),i=NS(e)===dS.scrolling?dS.scrolling:dS.default,l=se(Y(t,(e=>"contexttoolbar"===e.type?x(s,e):w(e,a.providers))));return I$({type:i,uid:xl("context-toolbar"),initGroups:l,onEscape:z.none,cyclicKeying:!0,providers:a.providers})},S=(t,o)=>{const r="node"===t?a.anchors.node(o):a.anchors.cursor(),s=sG(e,t,i(),{lastElement:l.get,isReposition:()=>Be(c.get(),0),getMode:()=>ag.getMode(n)});return Pr(r,s)},_=(e,t)=>{if(O.cancel(),!p())return;const o=C(e),r=e[0].position,s=S(r,t);d.set(r),c.set(1);const a=u.element;kn(a,"display"),f(t)||(_c(a,bG),ag.reset(n,u)),$C.showWithinBounds(u,b(o),{anchor:s,transition:{classes:[bG],mode:"placement"}},(()=>z.some(m()))),t.fold(l.clear,l.set),g()&&vn(a,"display","none")};let k=!1;const O=SL((()=>{if(e.hasFocus()&&!e.removed&&!k)if(kc(u.element,bG))O.throttle();else{const t=y();uG(t,e).fold(h,(e=>{_(e.toolbars,z.some(e.elem))}))}}),17);e.on("init",(()=>{e.on("remove",h),e.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",v),e.on("click keyup focus SetContent",O.throttle),e.on(Bq,h),e.on(Dq,(t=>{const n=y();Re(n.lookupTable,t.toolbarKey).each((n=>{_([n],je(t.target!==e,t.target)),$C.getContent(u).each(rw.focusIn)}))})),e.on("focusout",(t=>{VC.setEditorTimeout(e,(()=>{om(n.element).isNone()&&om(u.element).isNone()&&h()}),0)})),e.on("SwitchMode",(()=>{e.mode.isReadOnly()&&h()})),e.on("AfterProgressState",(t=>{t.state?h():e.hasFocus()&&O.throttle()})),e.on("dragstart",(()=>{k=!0})),e.on("dragend drop",(()=>{k=!1})),e.on("NodeChange",(e=>{om(u.element).fold(O.throttle,E)}))}))},xG=e=>{const t=[{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}];X(t,(t=>{e.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onAction:UV(e,t.cmd),onSetup:FV(e,t.name)})})),e.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onAction:UV(e,"JustifyNone")})},wG=(e,t)=>{const n=()=>{const n=t.getOptions(e),o=t.getCurrent(e).map(t.hash),r=Dm();return Y(n,(n=>({type:"togglemenuitem",text:t.display(n),onSetup:s=>{const a=e=>{e&&(r.on((e=>e.setActive(!1))),r.set(s)),s.setActive(e)};a(Be(o,t.hash(n)));const i=t.watcher(e,n,a);return()=>{r.clear(),i()}},onAction:()=>t.setCurrent(e,n)})))};e.ui.registry.addMenuButton(t.name,{tooltip:t.text,icon:t.icon,fetch:e=>e(n()),onSetup:t.onToolbarSetup}),e.ui.registry.addNestedMenuItem(t.name,{type:"nestedmenuitem",text:t.text,getSubmenuItems:n,onSetup:t.onMenuSetup})},CG={name:"lineheight",text:"Line height",icon:"line-height",getOptions:r_,hash:e=>fW(e,["fixed","relative","empty"]).getOr(e),display:N,watcher:(e,t,n)=>e.formatter.formatChanged("lineheight",n,!1,{value:t}).unbind,getCurrent:e=>z.from(e.queryCommandValue("LineHeight")),setCurrent:(e,t)=>e.execCommand("LineHeight",!1,t)},SG=e=>{const t=z.from(AS(e));return t.map((t=>({name:"language",text:"Language",icon:"language",getOptions:R(t),hash:e=>x(e.customCode)?e.code:`${e.code}/${e.customCode}`,display:e=>e.title,watcher:(e,t,n)=>{var o;return e.formatter.formatChanged("lang",n,!1,{value:t.code,customValue:null!==(o=t.customCode)&&void 0!==o?o:null}).unbind},getCurrent:e=>{const t=st.fromDom(e.selection.getNode());return Ma(t,(e=>z.some(e).filter(Ct).bind((e=>{const t=un(e,"lang");return t.map((t=>{const n=un(e,"data-mce-lang").getOrUndefined();return{code:t,customCode:n,title:""}}))}))))},setCurrent:(e,t)=>e.execCommand("Lang",!1,t),onToolbarSetup:t=>{const n=Nm();return t.setActive(e.formatter.match("lang",{},void 0,!0)),n.set(e.formatter.formatChanged("lang",t.setActive,!0)),n.clear}})))},_G=e=>{wG(e,CG),SG(e).each((t=>wG(e,t)))},kG=(e,t)=>{ZV(e,t),cW(e,t),DW(e,t),oW(e,t),AW(e,t)},EG=e=>zV(e,"NodeChange",(t=>{t.setEnabled(e.queryCommandState("outdent"))})),OG=e=>{e.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:EG(e),onAction:UV(e,"outdent")}),e.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onAction:UV(e,"indent")})},TG=e=>{OG(e)},AG=(e,t)=>n=>{n.setActive(t.get());const o=e=>{t.set(e.state),n.setActive(e.state)};return e.on("PastePlainTextToggle",o),()=>e.off("PastePlainTextToggle",o)},RG=e=>{const t=ya(QS(e)),n=()=>e.execCommand("mceTogglePlainTextPaste");e.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:n,onSetup:AG(e,t)}),e.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:n,onSetup:AG(e,t)})},NG=(e,t)=>()=>{e.execCommand("mceToggleFormat",!1,t)},DG=e=>{bI.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],((t,n)=>{e.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onSetup:FV(e,t.name),onAction:NG(e,t.name)})}));for(let t=1;t<=6;t++){const n="h"+t;e.ui.registry.addToggleButton(n,{text:n.toUpperCase(),tooltip:"Heading "+t,onSetup:FV(e,n),onAction:NG(e,n)})}},BG=e=>{bI.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"print",text:"Print",action:"mcePrint",icon:"print"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],(t=>{e.ui.registry.addButton(t.name,{tooltip:t.text,icon:t.icon,onAction:UV(e,t.action)})}))},MG=e=>{bI.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],(t=>{e.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onAction:UV(e,t.action),onSetup:FV(e,t.name)})}))},IG=e=>{DG(e),BG(e),MG(e)},PG=e=>{bI.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],(t=>{e.ui.registry.addMenuItem(t.name,{text:t.text,icon:t.icon,shortcut:t.shortcut,onAction:UV(e,t.action)})})),e.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onAction:NG(e,"code")})},LG=e=>{IG(e),PG(e)},FG=(e,t)=>zV(e,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",(n=>{n.setEnabled(!e.mode.isReadOnly()&&e.undoManager[t]())})),zG=e=>{e.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:FG(e,"hasUndo"),onAction:UV(e,"undo")}),e.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:FG(e,"hasRedo"),onAction:UV(e,"redo")})},jG=e=>{e.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:FG(e,"hasUndo"),onAction:UV(e,"undo")}),e.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:FG(e,"hasRedo"),onAction:UV(e,"redo")})},UG=e=>{zG(e),jG(e)},HG=e=>zV(e,"VisualAid",(t=>{t.setActive(e.hasVisual)})),$G=e=>{e.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:HG(e),onAction:UV(e,"mceToggleVisualAid")})},VG=e=>{e.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:UV(e,"mceToggleVisualAid")})},WG=e=>{VG(e),$G(e)},qG=(e,t)=>{xG(e),LG(e),kG(e,t),UG(e),gA(e),WG(e),TG(e),_G(e),RG(e)},GG=e=>f(e)?e.split(/[ ,]/):e,KG=e=>t=>t.options.get(e),YG=e=>{const t=e.options.register;t("contextmenu_avoid_overlap",{processor:"string",default:""}),t("contextmenu_never_use_native",{processor:"boolean",default:!1}),t("contextmenu",{processor:e=>!1===e?{value:[],valid:!0}:f(e)||k(e,f)?{value:GG(e),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},XG=KG("contextmenu_never_use_native"),JG=KG("contextmenu_avoid_overlap"),QG=e=>0===ZG(e).length,ZG=e=>{const t=e.ui.registry.getAll().contextMenus,n=e.options.get("contextmenu");return e.options.isSet("contextmenu")?n:Z(n,(e=>Ne(t,e)))},eK=(e,t)=>({type:"makeshift",x:e,y:t}),tK=(e,t,n)=>eK(e.x+t,e.y+n),nK=e=>"longpress"===e.type||0===e.type.indexOf("touch"),oK=e=>{if(nK(e)){const t=e.touches[0];return eK(t.pageX,t.pageY)}return eK(e.pageX,e.pageY)},rK=e=>{if(nK(e)){const t=e.touches[0];return eK(t.clientX,t.clientY)}return eK(e.clientX,e.clientY)},sK=(e,t)=>{const n=pS.DOM.getPos(e);return tK(t,n.x,n.y)},aK=(e,t)=>"contextmenu"===t.type||"longpress"===t.type?e.inline?oK(t):sK(e.getContentAreaContainer(),rK(t)):iK(e),iK=e=>({type:"selection",root:st.fromDom(e.selection.getNode())}),lK=e=>({type:"node",node:z.some(st.fromDom(e.selection.getNode())),root:st.fromDom(e.getBody())}),cK=(e,t,n)=>{switch(n){case"node":return lK(e);case"point":return aK(e,t);case"selection":return iK(e)}},dK=(e,t,n,o,r,s)=>{const a=n(),i=cK(e,t,s);rP(a,S_.CLOSE_ON_EXECUTE,o,{isHorizontalMenu:!1,search:z.none()}).map((e=>{t.preventDefault(),$C.showMenuAt(r,{anchor:i},{menu:{markers:G_("normal")},data:e})}))},uK={onLtr:()=>[_u,yu,xu,wu,Cu,Su,WF,qF,VF,HF,$F,UF],onRtl:()=>[_u,xu,yu,Cu,wu,Su,WF,qF,$F,UF,VF,HF]},mK=12,pK={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},fK=(e,t)=>{const n=e.selection;if(n.isCollapsed()||t.touches.length<1)return!1;{const o=t.touches[0],r=n.getRng(),s=Cf(e.getWin(),Zp.domRange(r));return s.exists((e=>e.left<=o.clientX&&e.right>=o.clientX&&e.top<=o.clientY&&e.bottom>=o.clientY))}},gK=e=>{const t=e.selection.getRng(),n=()=>{VC.setEditorTimeout(e,(()=>{e.selection.setRng(t)}),10),s()};e.once("touchend",n);const o=e=>{e.preventDefault(),e.stopImmediatePropagation()};e.on("mousedown",o,!0);const r=()=>s();e.once("longpresscancel",r);const s=()=>{e.off("touchend",n),e.off("longpresscancel",r),e.off("mousedown",o)}},hK=(e,t,n)=>{const o=cK(e,t,n),s="point"===n?mK:0;return r({bubble:ap(0,s,pK),layouts:uK,overrides:{maxWidthFunction:o$(),maxHeightFunction:tp()}},o)},vK=(e,t,n,o,r,s,a)=>{const i=hK(e,t,s);rP(n,S_.CLOSE_ON_EXECUTE,o,{isHorizontalMenu:!0,search:z.none()}).map((n=>{t.preventDefault();const l=a?MC.HighlightMenuAndItem:MC.HighlightNone;$C.showMenuWithinBounds(r,{anchor:i},{menu:{markers:G_("normal"),highlightOnOpen:l},data:n,type:"horizontal"},(()=>z.some(Xq(e,o.shared,"node"===s?"node":"selection")))),e.dispatch(Bq)}))},bK=(e,t,n,o,r,s)=>{const a=No(),i=a.os.isiOS(),l=a.os.isMacOS(),c=a.os.isAndroid(),d=a.deviceType.isTouch(),u=()=>!(c||i||l&&d),m=()=>{const a=n();vK(e,t,a,o,r,s,u())};if((l||i)&&"node"!==s){const n=()=>{gK(e),m()};fK(e,t)?n():(e.once("selectionchange",n),e.once("touchend",(()=>e.off("selectionchange",n))))}else m()},yK=e=>f(e)?"|"===e:"separator"===e.type,xK={type:"separator"},wK=e=>{const t=e=>({text:e.text,icon:e.icon,enabled:e.enabled,shortcut:e.shortcut});if(f(e))return e;switch(e.type){case"separator":return xK;case"submenu":return r(r({type:"nestedmenuitem"},t(e)),{},{getSubmenuItems:()=>{const t=e.getSubmenuItems();return f(t)?t:Y(t,wK)}});default:const n=e;return r(r({type:"menuitem"},t(n)),{},{onAction:O(n.onAction)})}},CK=(e,t)=>{if(0===t.length)return e;const n=ge(e).filter((e=>!yK(e))),o=n.fold((()=>[]),(e=>[xK]));return e.concat(o).concat(t).concat([xK])},SK=(e,t,n)=>{const o=te(t,((t,o)=>Re(e,o.toLowerCase()).map((e=>{const o=e.update(n);if(f(o))return CK(t,o.split(" "));if(o.length>0){const e=Y(o,wK);return CK(t,e)}return t})).getOrThunk((()=>t.concat([o])))),[]);return o.length>0&&yK(o[o.length-1])&&o.pop(),o},_K=(e,t)=>t.ctrlKey&&!XG(e),kK=e=>"longpress"===e.type||Ne(e,"touches"),EK=(e,t)=>!kK(t)&&(2!==t.button||t.target===e.getBody()&&""===t.pointerType),OK=(e,t)=>EK(e,t)?e.selection.getStart(!0):t.target,TK=(e,t)=>{const n=JG(e),o=EK(e,t)?"selection":"point";if(Je(n)){const r=OK(e,t),s=WR(st.fromDom(r),n);return s?"node":o}return o},AK=(e,t,n)=>{const o=No(),r=o.deviceType.isTouch,s=rd($C.sketch({dom:{tag:"div"},lazySink:t,onEscape:()=>e.focus(),onShow:()=>n.setContextMenuState(!0),onHide:()=>n.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:Vu([xw("dismissContextMenu",[Ki(Ti(),((t,n)=>{Vg.close(t),e.focus()}))])])})),a=()=>$C.hide(s),i=t=>{if(XG(e)&&t.preventDefault(),_K(e,t)||QG(e))return;const o=TK(e,t),a=()=>{const n=OK(e,t),o=e.ui.registry.getAll(),r=ZG(e);return SK(o.contextMenus,r,n)},i=r()?bK:dK;i(e,t,a,n,s,o)};e.on("init",(()=>{const t="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(r()?"":" ResizeWindow");e.on(t,a),e.on("longpress contextmenu",i)}))},RK=wa.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),NK=e=>t=>t.translate(-e.left,-e.top),DK=e=>t=>t.translate(e.left,e.top),BK=e=>(t,n)=>te(e,((e,t)=>t(e)),Bn(t,n)),MK=(e,t,n)=>e.fold(BK([DK(n),NK(t)]),BK([NK(t)]),BK([])),IK=(e,t,n)=>e.fold(BK([DK(n)]),BK([]),BK([DK(t)])),PK=(e,t,n)=>e.fold(BK([]),BK([NK(n)]),BK([DK(t),NK(n)])),LK=(e,t,n,o,r,s)=>{const a=IK(e,r,s),i=IK(t,r,s);return Math.abs(a.left-i.left)<=n&&Math.abs(a.top-i.top)<=o},FK=(e,t,n,o,r,s)=>{const a=IK(e,r,s),i=IK(t,r,s),l=Math.abs(a.left-i.left),c=Math.abs(a.top-i.top);return Bn(l,c)},zK=(e,t,n)=>{const o=e.fold(((e,t)=>({position:z.some("absolute"),left:z.some(e+"px"),top:z.some(t+"px")})),((e,t)=>({position:z.some("absolute"),left:z.some(e-n.left+"px"),top:z.some(t-n.top+"px")})),((e,t)=>({position:z.some("fixed"),left:z.some(e+"px"),top:z.some(t+"px")})));return r({right:z.none(),bottom:z.none()},o)},jK=(e,t,n)=>e.fold(((e,o)=>HK(e+t,o+n)),((e,o)=>$K(e+t,o+n)),((e,o)=>VK(e+t,o+n))),UK=(e,t,n,o)=>{const r=(e,r)=>(s,a)=>{const i=e(t,n,o);return r(s.getOr(i.left),a.getOr(i.top))};return e.fold(r(PK,HK),r(IK,$K),r(MK,VK))},HK=RK.offset,$K=RK.absolute,VK=RK.fixed,WK=(e,t)=>{const n=dn(e,t);return x(n)?NaN:parseInt(n,10)},qK=(e,t)=>{const n=e.element,o=WK(n,t.leftAttr),r=WK(n,t.topAttr);return isNaN(o)||isNaN(r)?z.none():z.some(Bn(o,r))},GK=(e,t,n)=>{const o=e.element;ln(o,t.leftAttr,n.left+"px"),ln(o,t.topAttr,n.top+"px")},KK=(e,t)=>{const n=e.element;pn(n,t.leftAttr),pn(n,t.topAttr)},YK=(e,t,n,o)=>qK(e,t).fold((()=>n),(e=>VK(e.left+o.left,e.top+o.top))),XK=(e,t,n,o,r,s)=>{const a=YK(e,t,n,o),i=t.mustSnap?ZK(e,t,a,r,s):eY(e,t,a,r,s),l=MK(a,r,s);return GK(e,t,l),i.fold((()=>({coord:VK(l.left,l.top),extra:z.none()})),(e=>({coord:e.output,extra:e.extra})))},JK=(e,t)=>{KK(e,t)},QK=(e,t,n,o)=>ve(e,(e=>{const r=e.sensor,s=LK(t,r,e.range.left,e.range.top,n,o);return s?z.some({output:UK(e.output,t,n,o),extra:e.extra}):z.none()})),ZK=(e,t,n,o,r)=>{const s=t.getSnapPoints(e),a=QK(s,n,o,r);return a.orThunk((()=>{const e=te(s,((e,t)=>{const s=t.sensor,a=FK(n,s,t.range.left,t.range.top,o,r);return e.deltas.fold((()=>({deltas:z.some(a),snap:z.some(t)})),(n=>{const o=(a.left+a.top)/2,r=(n.left+n.top)/2;return o<=r?{deltas:z.some(a),snap:z.some(t)}:e}))}),{deltas:z.none(),snap:z.none()});return e.snap.map((e=>({output:UK(e.output,n,o,r),extra:e.extra})))}))},eY=(e,t,n,o,r)=>{const s=t.getSnapPoints(e);return QK(s,n,o,r)},tY=(e,t,n)=>({coord:UK(e.output,e.output,t,n),extra:e.extra}),nY=(e,t,n,o)=>{const r=t.getTarget(e.element);if(t.repositionTarget){const t=Bt(e.element),n=Go(t),s=Lj(r),a=tY(o,n,s),i=zK(a.coord,n,s);yn(r,i)}};var oY=Object.freeze({__proto__:null,snapTo:nY});const rY="data-initial-z-index",sY=e=>{Lt(e.element).filter(Ct).each((e=>{un(e,rY).fold((()=>kn(e,"z-index")),(t=>vn(e,"z-index",t))),pn(e,rY)}))},aY=e=>{Lt(e.element).filter(Ct).each((t=>{Cn(t,"z-index").each((e=>{ln(t,rY,e)})),vn(t,"z-index",xn(e.element,"z-index"))}))},iY=(e,t)=>{e.getSystem().addToGui(t),aY(t)},lY=e=>{sY(e),e.getSystem().removeFromGui(e)},cY=(e,t,n)=>e.getSystem().build(gN.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[t]},events:n}));var dY=ia("snaps",[$s("getSnapPoints"),zd("onSensor"),$s("leftAttr"),$s("topAttr"),ca("lazyViewport",mr),ca("mustSnap",!1)]);const uY=[ca("useFixed",L),$s("blockerClass"),ca("getTarget",N),ca("onDrag",E),ca("repositionTarget",!0),ca("onDrop",E),ga("getBounds",mr),dY],mY=e=>Fe(Cn(e,"left"),Cn(e,"top"),Cn(e,"position"),((e,t,n)=>{const o="fixed"===n?VK:HK;return o(parseInt(e,10),parseInt(t,10))})).getOrThunk((()=>{const t=Pn(e);return $K(t.left,t.top)})),pY=(e,t,n,o,r)=>{const s=r.bounds,a=IK(t,n,o),i=au(a.left,s.x,s.x+s.width-r.width),l=au(a.top,s.y,s.y+s.height-r.height),c=$K(i,l);return t.fold((()=>{const e=PK(c,n,o);return HK(e.left,e.top)}),R(c),(()=>{const e=MK(c,n,o);return VK(e.left,e.top)}))},fY=(e,t,n,o,r,s,a)=>{const i=t.fold((()=>{const e=jK(n,s.left,s.top),t=MK(e,o,r);return VK(t.left,t.top)}),(t=>{const a=XK(e,t,n,s,o,r);return a.extra.each((n=>{t.onSensor(e,n)})),a.coord}));return pY(e,i,o,r,a)},gY=(e,t,n,o)=>{const r=t.getTarget(e.element);if(t.repositionTarget){const s=Bt(e.element),a=Go(s),i=Lj(r),l=mY(r),c=fY(e,t.snaps,l,a,i,o,n),d=zK(c,a,i);yn(r,d)}t.onDrag(e,r,o)},hY=(e,t)=>({bounds:e.getBounds(),height:Rn(t.element),width:Un(t.element)}),vY=(e,t,n,o,r)=>{const s=n.update(o,r),a=n.getStartData().getOrThunk((()=>hY(t,e)));s.each((n=>{gY(e,t,a,n)}))},bY=(e,t,n,o)=>{t.each(lY),n.snaps.each((t=>{JK(e,t)}));const r=n.getTarget(e.element);o.reset(),n.onDrop(e,r)},yY=e=>(t,n)=>{const o=e=>{n.setStartData(hY(t,e))};return Vi([Ki(_i(),(e=>{n.getStartData().each((()=>o(e)))})),...e(t,n,o)])},xY=e=>Vi([Ki(Ga(),e.forceDrop),Ki(Xa(),e.drop),Ki(Ka(),((t,n)=>{e.move(n.event)})),Ki(Ya(),e.delayDrop)]),wY=e=>z.from(Bn(e.x,e.y)),CY=(e,t)=>Bn(t.left-e.left,t.top-e.top);var SY=Object.freeze({__proto__:null,getData:wY,getDelta:CY});const _Y=(e,t,n)=>[Ki(Ga(),((o,r)=>{const s=r.event.raw;if(0!==s.button)return;r.stop();const a=()=>bY(o,z.some(c),e,t),i=qR(a,200),l={drop:a,delayDrop:i.schedule,forceDrop:a,move:n=>{i.cancel(),vY(o,e,t,SY,n)}},c=cY(o,e.blockerClass,xY(l)),d=()=>{n(o),iY(o,c)};d()}))],kY=[...uY,$d("dragger",{handlers:yY(_Y)})],EY=e=>Vi([Ki($a(),e.forceDrop),Ki(Wa(),e.drop),Ki(qa(),e.drop),Ki(Va(),((t,n)=>{e.move(n.event)}))]),OY=e=>{const t=e[0];return z.some(Bn(t.clientX,t.clientY))},TY=e=>{const t=e.raw,n=t.touches;return 1===n.length?OY(n):z.none()},AY=(e,t)=>Bn(t.left-e.left,t.top-e.top);var RY=Object.freeze({__proto__:null,getData:TY,getDelta:AY});const NY=(e,t,n)=>{const o=Dm(),r=n=>{bY(n,o.get(),e,t),o.clear()};return[Ki($a(),((s,a)=>{a.stop();const i=()=>r(s),l={drop:i,delayDrop:E,forceDrop:i,move:n=>{vY(s,e,t,RY,n)}},c=cY(s,e.blockerClass,EY(l));o.set(c);const d=()=>{n(s),iY(s,c)};d()})),Ki(Va(),((n,o)=>{o.stop(),vY(n,e,t,RY,o.event)})),Ki(Wa(),((e,t)=>{t.stop(),r(e)})),Ki(qa(),r)]},DY=[...uY,$d("dragger",{handlers:yY(NY)})],BY=(e,t,n)=>[..._Y(e,t,n),...NY(e,t,n)],MY=[...uY,$d("dragger",{handlers:yY(BY)})],IY=kY,PY=DY,LY=MY;var FY=Object.freeze({__proto__:null,mouse:IY,touch:PY,mouseOrTouch:LY});const zY=()=>{let e=z.none(),t=z.none();const n=()=>{e=z.none(),t=z.none()},o=(t,n)=>{const o=e.map((e=>t.getDelta(e,n)));return e=z.some(n),o},r=(e,t)=>e.getData(t).bind((t=>o(e,t))),s=e=>{t=z.some(e)},a=()=>t,i=R({});return Hl({readState:i,reset:n,update:r,getStartData:a,setStartData:s})};var jY=Object.freeze({__proto__:null,init:zY});const UY=Ku({branchKey:"mode",branches:FY,name:"dragging",active:{events:(e,t)=>{const n=e.dragger;return n.handlers(e,t)}},extra:{snap:e=>({sensor:e.sensor,range:e.range,output:e.output,extra:z.from(e.extra)})},state:jY,apis:oY}),HY=40,$Y=HY/2,VY=(e,t,n,o,r,s)=>e.fold((()=>UY.snap({sensor:$K(n-$Y,o-$Y),range:Bn(r,s),output:$K(z.some(n),z.some(o)),extra:{td:t}})),(e=>{const r=n-$Y,s=o-$Y,a=HY,i=HY,l=e.element.dom.getBoundingClientRect();return UY.snap({sensor:$K(r,s),range:Bn(a,i),output:$K(z.some(n-l.width/2),z.some(o-l.height/2)),extra:{td:t}})})),WY=(e,t,n)=>{const o=(e,t)=>e.exists((e=>Nt(e,t)));return{getSnapPoints:e,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(e,r)=>{const s=r.td;o(t.get(),s)||(t.set(s),n(s))},mustSnap:!0}},qY=e=>GC(qC.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:Vu([UY.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:e}),rD.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),GY=(e,t)=>{const n=ya([]),o=ya([]),r=ya(!1),s=Dm(),a=Dm(),i=e=>{const n=cr(e);return VY(p.getOpt(t),e,n.x,n.y,n.width,n.height)},l=()=>Y(n.get(),(e=>i(e))),c=e=>{const n=cr(e);return VY(f.getOpt(t),e,n.right,n.bottom,n.width,n.height)},d=()=>Y(o.get(),(e=>c(e))),u=WY(l,s,(t=>{a.get().each((n=>{e.dispatch("TableSelectorChange",{start:t,finish:n})}))})),m=WY(d,a,(t=>{s.get().each((n=>{e.dispatch("TableSelectorChange",{start:n,finish:t})}))})),p=qY(u),f=qY(m),g=rd(p.asSpec()),h=rd(f.asSpec()),v=(t,n,o,r)=>{const s=n.dom.getBoundingClientRect();kn(t.element,"display");const a=Pt(st.fromDom(e.getBody())).dom.innerHeight,i=o(s),l=r(s,a);(i||l)&&vn(t.element,"display","none")},b=(e,t,n,o)=>{const r=n(t);UY.snapTo(e,r);const s=e=>e[o]<0,a=(e,t)=>e[o]>t;v(e,t,s,a)},y=e=>b(g,e,i,"top"),x=()=>s.get().each(y),w=e=>b(h,e,c,"bottom"),C=()=>a.get().each(w);No().deviceType.isTouch()&&(e.on("TableSelectionChange",(e=>{r.get()||(hg(t,g),hg(t,h),r.set(!0)),s.set(e.start),a.set(e.finish),e.otherCells.each((t=>{n.set(t.upOrLeftCells),o.set(t.downOrRightCells),y(e.start),w(e.finish)}))})),e.on("ResizeEditor ResizeWindow ScrollContent",(()=>{x(),C()})),e.on("TableSelectionClear",(()=>{r.get()&&(yg(g),yg(h),r.set(!1)),s.clear(),a.clear()})))};var KY='<svg width="50px" height="16px" viewBox="0 0 50 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.143 0c2.608.015 5.186 2.178 5.186 5.331 0 0 .077 3.812-.084 4.87-.361 2.41-2.164 4.074-4.65 4.496-1.453.284-2.523.49-3.212.623-.373.071-.634.122-.785.152-.184.038-.997.145-1.35.145-2.732 0-5.21-2.04-5.248-5.33 0 0 0-3.514.03-4.442.093-2.4 1.758-4.342 4.926-4.963 0 0 3.875-.752 4.036-.782.368-.07.775-.1 1.15-.1Zm1.826 2.8L5.83 3.989v2.393l-2.455.475v5.968l6.137-1.189V9.243l2.456-.476V2.8ZM5.83 6.382l3.682-.713v3.574l-3.682.713V6.382Zm27.173-1.64-.084-1.066h-2.226v9.132h2.456V7.743c-.008-1.151.998-2.064 2.149-2.072 1.15-.008 1.987.92 1.995 2.072v5.065h2.455V7.359c-.015-2.18-1.657-3.929-3.837-3.913a3.993 3.993 0 0 0-2.908 1.296Zm-6.3-4.266L29.16 0v2.387l-2.456.475V.476Zm0 3.2v9.132h2.456V3.676h-2.456Zm18.179 11.787L49.11 3.676H46.58l-1.612 4.527-.46 1.382-.384-1.382-1.611-4.527H39.98l3.3 9.132L42.15 16l2.732-.537ZM22.867 9.738c0 .752.568 1.075.921 1.075.353 0 .668-.047.998-.154l.537 1.765c-.23.154-.92.537-2.225.537-1.305 0-2.655-.997-2.686-2.686a136.877 136.877 0 0 1 0-4.374H18.8V3.676h1.612v-1.98l2.455-.476v2.456h2.302V5.9h-2.302v3.837Z"/>\n</svg>\n';const YY=e=>"BR"===e.nodeName||!!e.getAttribute("data-mce-bogus")||"bookmark"===e.getAttribute("data-mce-type"),XY=(e,t,n)=>{var o;const r=null!==(o=t.delimiter)&&void 0!==o?o:"›",s=(t,o,r)=>qC.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":r,"aria-level":r+1}},components:[Zc(t)],action:t=>{e.focus(),e.selection.select(o),e.nodeChanged()},buttonBehaviours:Vu([vO.button(n.isDisabled),mO()])}),a=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[Zc(` ${r} `)]}),i=e=>te(e,((e,t,n)=>{const o=s(t.name,t.element,n);return 0===n?e.concat([o]):e.concat([a(),o])}),[]),l=t=>{const n=[];let o=t.length;while(o-- >0){const r=t[o];if(1===r.nodeType&&!YY(r)){const t=kT(e,r);if(t.isDefaultPrevented()||n.push({name:t.name,element:r}),t.isPropagationStopped())break}}return n};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:Vu([rw.config({mode:"flow",selector:"div[role=button]"}),cb.config({disabled:n.isDisabled}),mO(),kN.config({}),bw.config({}),xw("elementPathEvents",[rl(((t,n)=>{e.shortcuts.add("alt+F11","focus statusbar elementpath",(()=>rw.focusIn(t))),e.on("NodeChange",(e=>{const n=l(e.parents),o=n.length>0?i(n):[];bw.set(t,o)}))}))])]),components:[]}};var JY;(function(e){e[e["None"]=0]="None",e[e["Both"]=1]="Both",e[e["Vertical"]=2]="Vertical"})(JY||(JY={}));const QY=(e,t,n,o,r)=>{const s={height:bq(o+t.top,SS(e),kS(e))};return n===JY.Both&&(s.width=bq(r+t.left,CS(e),_S(e))),s},ZY=(e,t,n)=>{const o=st.fromDom(e.getContainer()),r=QY(e,t,n,An(o),jn(o));xe(r,((e,t)=>{_(e)&&vn(o,t,vq(e))})),xT(e)},eX=e=>{const t=JS(e);return!1===t?JY.None:"both"===t?JY.Both:JY.Vertical},tX=(e,t,n,o)=>{const r=20,s=Bn(n*r,o*r);return ZY(e,s,t),z.some(!0)},nX=(e,t)=>{const n=eX(e);return n===JY.None?z.none():z.some(sS("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:t.translate("Resize")},behaviours:[UY.config({mode:"mouse",repositionTarget:!1,onDrag:(t,o,r)=>ZY(e,r,n),blockerClass:"tox-blocker"}),rw.config({mode:"special",onLeft:()=>tX(e,n,-1,0),onRight:()=>tX(e,n,1,0),onUp:()=>tX(e,n,0,-1),onDown:()=>tX(e,n,0,1)}),kN.config({}),Aw.config({})]},t.icons))},oX=(e,t)=>{const n=(e,n,o)=>bw.set(e,[Zc(t.translate(["{0} "+o,n[o]]))]);return qC.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:Vu([vO.button(t.isDisabled),mO(),kN.config({}),bw.config({}),Eh.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),xw("wordcount-events",[il((e=>{const t=Eh.getValue(e),o="words"===t.mode?"characters":"words";Eh.setValue(e,{mode:o,count:t.count}),n(e,t.count,o)})),rl((t=>{e.on("wordCountUpdate",(e=>{const{mode:o}=Eh.getValue(t);Eh.setValue(t,{mode:o,count:e.wordCount}),n(t,e.wordCount,o)}))}))])]),eventOrder:{[gi()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},rX=(e,t)=>{const n=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=editor_referral&utm_medium=poweredby&utm_source=tinymce&utm_content=v6",rel:"noopener",target:"_blank","aria-label":KC.translate(["Powered by {0}","Tiny"])},innerHtml:KY.trim()},behaviours:Vu([Aw.config({})])}]}),o=()=>{const o=[];return YS(e)&&o.push(XY(e,{},t)),e.hasPlugin("wordcount")&&o.push(oX(e,t)),XS(e)&&o.push(n()),o.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container"]},components:o}]:[]},r=()=>{const n=o(),r=nX(e,t);return n.concat(r.toArray())};return{dom:{tag:"div",classes:["tox-statusbar"]},components:r()}},sX=(e,t)=>t.get().getOrDie(`UI for ${e} has not been rendered`),aX=(e,t)=>{const n=e.inline,o=n?Rq:gq,s=p_(e)?VU:Ij,a=Nq(),i=Dm(),l=Dm(),c=Dm(),d=No(),u=d.deviceType.isTouch(),m="tox-platform-touch",p=u?[m]:[],f=l_(e),g=NS(e),h=GC({dom:{tag:"div",classes:["tox-anchorbar"]}}),v=()=>a.mainUi.get().map((e=>e.outerContainer)).bind(_V.getHeader),b=()=>vr.fromOption(a.dialogUi.get().map((e=>e.sink)),"UI has not been rendered"),y=()=>vr.fromOption(a.popupUi.get().map((e=>e.sink)),"(popup) UI has not been rendered"),x=a.lazyGetInOuterOrDie("anchor bar",h.getOpt),w=a.lazyGetInOuterOrDie("toolbar",_V.getToolbar),C=a.lazyGetInOuterOrDie("throbber",_V.getThrobber),S=hj({popup:y,dialog:b},e,x),_=()=>{const t={attributes:{[mp]:f?up.BottomToTop:up.TopToBottom}},n=_V.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:S.popup,onEscape:()=>{e.focus()}}),o=_V.parts.toolbar(r({dom:{tag:"div",classes:["tox-toolbar"]},getSink:S.popup.shared.getSink,providers:S.popup.shared.providers,onEscape:()=>{e.focus()},onToolbarToggled:t=>{ET(e,t)},type:g,lazyToolbar:w,lazyHeader:()=>v().getOrDie("Could not find header element")},t)),s=_V.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:S.popup.shared.providers,onEscape:()=>{e.focus()},type:g}),a=i_(e),i=s_(e),l=n_(e),c=e_(e),d=k(),u=a||i||l,m=()=>a?[s]:i?[o]:[],p=c?[d,n]:[n];return _V.parts.header({dom:r({tag:"div",classes:["tox-editor-header"].concat(u?[]:["tox-editor-header--empty"])},t),components:se([l?p:[],m(),d_(e)?[]:[h.asSpec()]]),sticky:p_(e),editor:e,sharedBackstage:S.popup.shared})},k=()=>_V.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),E=()=>{const e=_V.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),t=_V.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[e,t]}},O=()=>{const t=u_(e),n=Nt(rn(),t)&&"grid"===xn(t,"display"),o={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(p),attributes:r({},KC.isRtl()?{dir:"rtl"}:{})},behaviours:Vu([ag.config({useFixed:()=>s.isDocked(v)})])},a={dom:{styles:{width:document.body.clientWidth+"px"}},events:Vi([Ki(ki(),(e=>{vn(e.element,"width",document.body.clientWidth+"px")}))])},i=rd(Pr(o,n?a:{})),c=hN(i);return l.set(c),{sink:i,mothership:c}},T=()=>{const e={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(p),attributes:r({},KC.isRtl()?{dir:"rtl"}:{})},behaviours:Vu([ag.config({useFixed:()=>s.isDocked(v),getBounds:()=>t.getPopupSinkBounds()})])},n=rd(e),o=hN(n);return c.set(o),{sink:n,mothership:o}},A=()=>{const t=_(),o=E(),s=_V.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:S.popup}),a=_V.parts.viewWrapper({backstage:S.popup}),l=KS(e)&&!n?z.some(rX(e,S.popup.shared.providers)):z.none(),c=se([f?[]:[t],n?[]:[o],f?[t]:[]]),d=_V.parts.editorContainer({components:se([c,n?[]:l.toArray()])}),u=m_(e),m=r(r({role:"application"},KC.isRtl()?{dir:"rtl"}:{}),u?{"aria-hidden":"true"}:{}),g=rd(_V.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(n?["tox-tinymce-inline"]:[]).concat(f?["tox-tinymce--toolbar-bottom"]:[]).concat(p),styles:r({visibility:"hidden"},u?{opacity:"0",border:"0"}:{}),attributes:m},components:[d,...n?[]:[a],s],behaviours:Vu([mO(),cb.config({disableClass:"tox-tinymce--disabled"}),rw.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),h=hN(g);return i.set(h),{mothership:h,outerContainer:g}},R=t=>{const n=vq(xq(e)),o=vq(Cq(e));return e.inline||(_n("div","width",o)&&vn(t.element,"width",o),_n("div","height",n)?vn(t.element,"height",n):vn(t.element,"height","400px")),n},N=t=>{e.addShortcut("alt+F9","focus menubar",(()=>{_V.focusMenubar(t)})),e.addShortcut("alt+F10","focus toolbar",(()=>{_V.focusToolbar(t)})),e.addCommand("ToggleToolbarDrawer",((e,n)=>{(null===n||void 0===n?void 0:n.skipFocus)?_V.toggleToolbarDrawerWithoutFocusing(t):_V.toggleToolbarDrawer(t)})),e.addQueryStateHandler("ToggleToolbarDrawer",(()=>_V.isToolbarDrawerToggled(t)))},D=t=>{const{mainUi:n,popupUi:r,uiMotherships:a}=t;we(DS(e),((t,n)=>{e.ui.registry.addGroupToolbarButton(n,t)}));const{buttons:i,menuItems:l,contextToolbars:c,sidebars:d,views:u}=e.ui.registry.getAll(),m=a_(e),p={menuItems:l,menus:g_(e),menubar:FS(e),toolbar:m.getOrThunk((()=>zS(e))),allowToolbarGroups:g===dS.floating,buttons:i,sidebar:d,views:u};N(n.outerContainer),vj(e,n.mothership,a),s.setup(e,S.popup.shared,v),qG(e,S.popup),AK(e,S.popup.shared.getSink,S.popup),pH(e),UH(e,C,S.popup.shared),yG(e,c,r.sink,{backstage:S.popup}),GY(e,r.sink);const f=e.getElement(),h=R(n.outerContainer),b={targetNode:f,height:h};return o.render(e,t,p,S.popup,b)},B=e=>(c.set(e.mothership),e),M=()=>{const t=A(),n=O(),o=f_(e)?T():B(n);a.dialogUi.set(n),a.popupUi.set(o),a.mainUi.set(t);const r={popupUi:o,dialogUi:n,mainUi:t,uiMotherships:a.getUiMotherships()};return D(r)};return{popups:{backstage:S.popup,getMothership:()=>sX("popups",c)},dialogs:{backstage:S.dialog,getMothership:()=>sX("dialogs",l)},renderUI:M}},iX=(e,t)=>{const n=z.from(dn(e,"id")).fold((()=>{const e=xl("dialog-describe");return ln(t,"id",e),e}),N);ln(e,"aria-describedby",n)},lX=(e,t)=>{const n=un(e,"id").fold((()=>{const e=xl("dialog-label");return ln(t,"id",e),e}),N);ln(e,"aria-labelledby",n)},cX=R([$s("lazySink"),ea("dragBlockClass"),ga("getBounds",mr),ca("useTabstopAt",F),ca("firstTabstop",0),ca("eventOrder",{}),Oh("modalBehaviours",[rw]),jd("onExecute"),Hd("onEscape")]),dX={sketch:N},uX=R([iv({name:"draghandle",overrides:(e,t)=>({behaviours:Vu([UY.config({mode:"mouse",getTarget:e=>md(e,'[role="dialog"]').getOr(e),blockerClass:e.dragBlockClass.getOrDie(new Error("The drag blocker class was not specified for a dialog with a drag handle: \n"+JSON.stringify(t,null,2)).message),getBounds:e.getDragBounds})])})}),sv({schema:[$s("dom")],name:"title"}),sv({factory:dX,schema:[$s("dom")],name:"close"}),sv({factory:dX,schema:[$s("dom")],name:"body"}),iv({factory:dX,schema:[$s("dom")],name:"footer"}),av({factory:{sketch:(e,t)=>r(r({},e),{},{dom:t.dom,components:t.components})},schema:[ca("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),ca("components",[])],name:"blocker"})]),mX=(e,t,n,o)=>{const s=Dm(),a=t=>{s.set(t);const n=e.lazySink(t).getOrDie(),a=o.blocker(),i=n.getSystem().build(r(r({},a),{},{components:a.components.concat([sd(t)]),behaviours:Vu([Aw.config({}),xw("dialog-blocker-events",[ol(Qa(),(()=>{rw.focusIn(t)}))])])}));hg(n,i),rw.focusIn(t)},i=e=>{s.clear(),Lt(e.element).each((t=>{e.getSystem().getByDom(t).each((e=>{yg(e)}))}))},l=t=>wv(t,e,"body"),c=t=>wv(t,e,"footer"),d=(e,t)=>{RH.block(e,t)},u=e=>{RH.unblock(e)},m=xl("modal-events"),p=r(r({},e.eventOrder),{},{[Ei()]:[m].concat(e.eventOrder["alloy.system.attached"]||[])});return{uid:e.uid,dom:e.dom,components:t,apis:{show:a,hide:i,getBody:l,getFooter:c,setIdle:u,setBusy:d},eventOrder:p,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:Ah(e.modalBehaviours,[bw.config({}),rw.config({mode:"cyclic",onEnter:e.onExecute,onEscape:e.onEscape,useTabstopAt:e.useTabstopAt,firstTabstop:e.firstTabstop}),RH.config({getRoot:s.get}),xw(m,[rl((t=>{lX(t.element,wv(t,e,"title").element),iX(t.element,wv(t,e,"body").element)}))])])}},pX=zv({name:"ModalDialog",configFields:cX(),partFields:uX(),factory:mX,apis:{show:(e,t)=>{e.show(t)},hide:(e,t)=>{e.hide(t)},getBody:(e,t)=>e.getBody(t),getFooter:(e,t)=>e.getFooter(t),setBusy:(e,t,n)=>{e.setBusy(t,n)},setIdle:(e,t)=>{e.setIdle(t)}}}),fX=fs([Ok,Tk].concat(AE)),gX=_s,hX=[eE("button"),Uk,pa("align","end",["start","end"]),Yk,Kk,ra("buttonType",["primary","secondary"])],vX=[...hX,Rk],bX=[Gs("type",["submit","cancel","custom"]),...vX],yX=[Gs("type",["menu"]),jk,Hk,Uk,Zs("items",fX),...hX],xX=[...hX,Gs("type",["togglebutton"]),qs("tooltip"),Dk,jk,fa("active",!1)],wX=Fs("type",{submit:bX,cancel:bX,custom:bX,menu:yX,togglebutton:xX}),CX=[Ok,Rk,Gs("level",["info","warn","error","success"]),Dk,ca("url","")],SX=fs(CX),_X=e=>[Ok,e],kX=[Ok,Rk,Kk,eE("button"),Uk,Gk,ra("buttonType",["primary","secondary","toolbar"]),Yk],EX=fs(kX),OX=[Ok,Tk],TX=OX.concat([$k]),AX=OX.concat([Ak,Kk]),RX=fs(AX),NX=_s,DX=TX.concat([Xk("auto")]),BX=fs(DX),MX=ys([Bk,Rk,Dk]),IX=TX.concat([ma("storageKey","default")]),PX=fs(IX),LX=Ss,FX=TX,zX=fs(FX),jX=Ss,UX=OX.concat([ma("tag","textarea"),qs("scriptId"),qs("scriptUrl"),ha("settings",void 0)]),HX=OX.concat([ma("tag","textarea"),Ys("init")]),$X=Ns((e=>Ms("customeditor.old",ps(HX),e).orThunk((()=>Ms("customeditor.new",ps(UX),e))))),VX=Ss,WX=TX,qX=fs(WX),GX=Rs(),KX=e=>[Ok,Ws("columns"),e],YX=[Ok,qs("html"),pa("presets","presentation",["presentation","document"])],XX=fs(YX),JX=TX.concat([fa("sandboxed",!0),fa("transparent",!0)]),QX=fs(JX),ZX=Ss,eJ=fs(OX.concat([oa("height")])),tJ=fs([qs("url"),na("zoom"),na("cachedWidth"),na("cachedHeight")]),nJ=TX.concat([oa("inputMode"),oa("placeholder"),fa("maximized",!1),Kk]),oJ=fs(nJ),rJ=Ss,sJ=e=>[Ok,Ak,e],aJ=[Rk,Bk],iJ=[Rk,Zs("items",zs("items",(()=>lJ)))],lJ=hs([fs(aJ),fs(iJ)]),cJ=TX.concat([Zs("items",lJ),Kk]),dJ=fs(cJ),uJ=Ss,mJ=TX.concat([Qs("items",[Rk,Bk]),ua("size",1),Kk]),pJ=fs(mJ),fJ=Ss,gJ=TX.concat([fa("constrain",!0),Kk]),hJ=fs(gJ),vJ=fs([qs("width"),qs("height")]),bJ=OX.concat([Ak,ua("min",0),ua("max",0)]),yJ=fs(bJ),xJ=Cs,wJ=[Ok,Zs("header",Ss),Zs("cells",gs(Ss))],CJ=fs(wJ),SJ=TX.concat([oa("placeholder"),fa("maximized",!1),Kk]),_J=fs(SJ),kJ=Ss,EJ=[Gs("type",["directory","leaf"]),Nk,qs("id"),ta("menu",YU)],OJ=EJ,TJ=fs(OJ),AJ=EJ.concat([Zs("children",zs("children",(()=>As("type",{directory:RJ,leaf:TJ}))))]),RJ=fs(AJ),NJ=As("type",{directory:RJ,leaf:TJ}),DJ=[Ok,Zs("items",NJ),sa("onLeafAction")],BJ=fs(DJ),MJ=TX.concat([pa("filetype","file",["image","media","file"]),Kk]),IJ=fs(MJ),PJ=fs([Bk,Jk]),LJ=e=>js("items","items",Fr(),gs(Ns((t=>Ms(`Checking item of ${e}`,FJ,t).fold((e=>vr.error(Ls(e))),(e=>vr.value(e))))))),FJ=us((()=>As("type",{alertbanner:SX,bar:fs(_X(LJ("bar"))),button:EX,checkbox:RX,colorinput:PX,colorpicker:zX,dropzone:qX,grid:fs(KX(LJ("grid"))),iframe:QX,input:oJ,listbox:dJ,selectbox:pJ,sizeinput:hJ,slider:yJ,textarea:_J,urlinput:IJ,customeditor:$X,htmlpanel:XX,imagepreview:eJ,collection:BX,label:fs(sJ(LJ("label"))),table:CJ,tree:BJ,panel:jJ}))),zJ=[Ok,ca("classes",[]),Zs("items",FJ)],jJ=fs(zJ),UJ=[eE("tab"),Nk,Zs("items",FJ)],HJ=[Ok,Qs("tabs",UJ)],$J=fs(HJ),VJ=vX,WJ=wX,qJ=fs([qs("title"),Vs("body",As("type",{panel:jJ,tabpanel:$J})),ma("size","normal"),Zs("buttons",WJ),ca("initialData",{}),ga("onAction",E),ga("onChange",E),ga("onSubmit",E),ga("onClose",E),ga("onCancel",E),ga("onTabChange",E)]),GJ=e=>Ms("dialog",qJ,e),KJ=fs([Gs("type",["cancel","custom"]),...VJ]),YJ=fs([qs("title"),qs("url"),na("height"),na("width"),aa("buttons",KJ),ga("onAction",E),ga("onCancel",E),ga("onClose",E),ga("onMessage",E)]),XJ=e=>Ms("dialog",YJ,e),JJ=e=>g(e)?[e].concat(ae(Ae(e),JJ)):v(e)?ae(e,JJ):[],QJ=e=>f(e.type)&&f(e.name),ZJ={checkbox:NX,colorinput:LX,colorpicker:jX,dropzone:GX,input:rJ,iframe:ZX,imagepreview:tJ,selectbox:fJ,sizeinput:vJ,slider:xJ,listbox:uJ,size:vJ,textarea:kJ,urlinput:PJ,customeditor:VX,collection:MX,togglemenuitem:gX},eQ=e=>z.from(ZJ[e.type]),tQ=e=>Z(JJ(e),QJ),nQ=e=>{const t=tQ(e),n=ae(t,(e=>eQ(e).fold((()=>[]),(t=>[Vs(e.name,t)]))));return fs(n)},oQ=e=>{var t;const n=Is(GJ(e)),o=nQ(e),r=null!==(t=e.initialData)&&void 0!==t?t:{};return{internalDialog:n,dataValidator:o,initialData:r}},rQ={open:(e,t)=>{const n=oQ(t);return e(n.internalDialog,n.initialData,n.dataValidator)},openUrl:(e,t)=>{const n=Is(XJ(t));return e(n)},redial:e=>oQ(e)},sQ=(e,t)=>{const n=(n,o)=>{e.updateState.each((e=>{const r=e(n,o);t.set(r)})),e.renderComponents.each((r=>{const s=r(o,t.get()),a=e.reuseDom?aw:sw;a(n,s)}))};return Vi([Ki(fi(),((t,o)=>{const r=o;if(!r.universal){const o=e.channel;W(r.channels,o)&&n(t,r.data)}})),rl(((t,o)=>{e.initialData.each((e=>{n(t,e)}))}))])};var aQ=Object.freeze({__proto__:null,events:sQ});const iQ=(e,t,n)=>n;var lQ=Object.freeze({__proto__:null,getState:iQ}),cQ=[$s("channel"),ea("renderComponents"),ea("updateState"),ea("initialData"),fa("reuseDom",!0)];const dQ=()=>{const e=ya(z.none()),t=()=>e.set(z.none()),n=()=>e.get().getOr("none");return{readState:n,get:e.get,set:e.set,clear:t}};var uQ=Object.freeze({__proto__:null,init:dQ});const mQ=qu({fields:cQ,name:"reflecting",active:aQ,apis:lQ,state:uQ}),pQ=e=>{const t=[],n={};return xe(e,((e,o)=>{e.fold((()=>{t.push(o)}),(e=>{n[o]=e}))})),t.length>0?vr.error(t):vr.value(n)},fQ=(e,t,n)=>{const o=GC(qM.sketch((o=>({dom:{tag:"div",classes:["tox-form"].concat(e.classes)},components:Y(e.items,(e=>NF(o,e,t,n)))}))));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[o.asSpec()]}],behaviours:Vu([rw.config({mode:"acyclic",useTabstopAt:M(TI)}),oI.memento(o),uI.memento(o,{postprocess:e=>pQ(e).fold((e=>(console.error(e),{})),N)})])}},gQ=(e,t)=>({uid:e.uid,dom:e.dom,components:e.components,events:Xw(e.action),behaviours:Ah(e.tabButtonBehaviours,[Aw.config({}),rw.config({mode:"execution",useSpace:!0,useEnter:!0}),Eh.config({store:{mode:"memory",initialValue:e.value}})]),domModification:e.domModification}),hQ=Fv({name:"TabButton",configFields:[ca("uid",void 0),$s("value"),js("dom","dom",Hr((()=>({attributes:{role:"tab",id:xl("aria"),"aria-selected":"false"}}))),xs()),ea("action"),ca("domModification",{}),Oh("tabButtonBehaviours",[Aw,rw,Eh]),$s("view")],factory:gQ}),vQ=R([$s("tabs"),$s("dom"),ca("clickToDismiss",!1),Oh("tabbarBehaviours",[Ab,rw]),Ld(["tabClass","selectedClass"])]),bQ=lv({factory:hQ,name:"tabs",unit:"tab",overrides:e=>{const t=(e,t)=>{Ab.dehighlight(e,t),Fi(e,Mi(),{tabbar:e,button:t})},n=(e,t)=>{Ab.highlight(e,t),Fi(e,Bi(),{tabbar:e,button:t})};return{action:o=>{const r=o.getSystem().getByUid(e.uid).getOrDie(),s=Ab.isHighlighted(r,o),a=(()=>s&&e.clickToDismiss?t:s?E:n)();a(r,o)},domModification:{classes:[e.markers.tabClass]}}}}),yQ=R([bQ]),xQ=(e,t,n,o)=>({uid:e.uid,dom:e.dom,components:t,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:Ah(e.tabbarBehaviours,[Ab.config({highlightClass:e.markers.selectedClass,itemClass:e.markers.tabClass,onHighlight:(e,t)=>{ln(t.element,"aria-selected","true")},onDehighlight:(e,t)=>{ln(t.element,"aria-selected","false")}}),rw.config({mode:"flow",getInitial:e=>Ab.getHighlighted(e).map((e=>e.element)),selector:"."+e.markers.tabClass,executeOnMove:!0})])}),wQ=zv({name:"Tabbar",configFields:vQ(),partFields:yQ(),factory:xQ}),CQ=(e,t)=>({uid:e.uid,dom:e.dom,behaviours:Ah(e.tabviewBehaviours,[bw.config({})]),domModification:{attributes:{role:"tabpanel"}}}),SQ=Fv({name:"Tabview",configFields:[Oh("tabviewBehaviours",[bw])],factory:CQ}),_Q=R([ca("selectFirst",!0),zd("onChangeTab"),zd("onDismissTab"),ca("tabs",[]),Oh("tabSectionBehaviours",[])]),kQ=sv({factory:wQ,schema:[$s("dom"),Js("markers",[$s("tabClass"),$s("selectedClass")])],name:"tabbar",defaults:e=>({tabs:e.tabs})}),EQ=sv({factory:SQ,name:"tabview"}),OQ=R([kQ,EQ]),TQ=(e,t,n,o)=>{const r=t=>{const n=Eh.getValue(t);xv(t,e,"tabview").each((o=>{const r=oe(e.tabs,(e=>e.value===n));r.each((n=>{const r=n.view();un(t.element,"id").each((e=>{ln(o.element,"aria-labelledby",e)})),bw.set(o,r),e.onChangeTab(o,t,r)}))}))},s=(t,n)=>{xv(t,e,"tabbar").each((e=>{n(e).each(zi)}))};return{uid:e.uid,dom:e.dom,components:t,behaviours:Th(e.tabSectionBehaviours),events:Vi(se([e.selectFirst?[rl(((e,t)=>{s(e,Ab.getFirst)}))]:[],[Ki(Bi(),((e,t)=>{const n=t.event.button;r(n)})),Ki(Mi(),((t,n)=>{const o=n.event.button;e.onDismissTab(t,o)}))]])),apis:{getViewItems:t=>xv(t,e,"tabview").map((e=>bw.contents(e))).getOr([]),showTab:(e,t)=>{const n=e=>{const n=Ab.getCandidates(e),o=oe(n,(e=>Eh.getValue(e)===t));return o.filter((t=>!Ab.isHighlighted(e,t)))};s(e,n)}}}},AQ=zv({name:"TabSection",configFields:_Q(),partFields:OQ(),factory:TQ,apis:{getViewItems:(e,t)=>e.getViewItems(t),showTab:(e,t,n)=>{e.showTab(t,n)}}}),RQ=(e,t,n)=>Y(e,((o,r)=>{bw.set(n,e[r].view());const s=t.dom.getBoundingClientRect();return bw.set(n,[]),s.height})),NQ=e=>fe(me(e,((e,t)=>e>t?-1:e<t?1:0))),DQ=(e,t,n)=>{const o=It(e).dom,r=md(e,".tox-dialog-wrap").getOr(e),s="fixed"===xn(r,"position");let a;a=s?Math.max(o.clientHeight,window.innerHeight):Math.max(o.offsetHeight,o.scrollHeight);const i=An(t),l=t.dom.offsetLeft>=n.dom.offsetLeft+jn(n),c=l?Math.max(An(n),i):i,d=parseInt(xn(e,"margin-top"),10)||0,u=parseInt(xn(e,"margin-bottom"),10)||0,m=An(e)+d+u,p=m-c;return a-p},BQ=(e,t)=>{fe(e).each((e=>AQ.showTab(t,e.value)))},MQ=(e,t)=>{vn(e,"height",t+"px"),vn(e,"flex-basis",t+"px")},IQ=(e,t,n)=>{md(e,'[role="dialog"]').each((e=>{fd(e,'[role="tablist"]').each((o=>{n.get().map((n=>(vn(t,"height","0"),vn(t,"flex-basis","0"),Math.min(n,DQ(e,t,o))))).each((e=>{MQ(t,e)}))}))}))},PQ=e=>fd(e,'[role="tabpanel"]'),LQ=e=>{const t=Dm(),n=[rl((n=>{const o=n.element;PQ(o).each((r=>{vn(r,"visibility","hidden"),n.getSystem().getByDom(r).toOptional().each((n=>{const o=RQ(e,r,n),s=NQ(o);s.fold(t.clear,t.set)})),IQ(o,r,t),kn(r,"visibility"),BQ(e,n),requestAnimationFrame((()=>{IQ(o,r,t)}))}))})),Ki(ki(),(e=>{const n=e.element;PQ(n).each((e=>{IQ(n,e,t)}))})),Ki(UN,((e,n)=>{const o=e.element;PQ(o).each((e=>{const n=nm(Xt(e));vn(e,"visibility","hidden");const r=Cn(e,"height").map((e=>parseInt(e,10)));kn(e,"height"),kn(e,"flex-basis");const s=e.dom.getBoundingClientRect().height,a=r.forall((e=>s>e));a?(t.set(s),IQ(o,e,t)):r.each((t=>{MQ(e,t)})),kn(e,"visibility"),n.each(Zu)}))}))],o=!1;return{extraEvents:n,selectFirst:o}},FQ="send-data-to-section",zQ="send-data-to-view",jQ=(e,t,n)=>{const o=ya({}),r=e=>{const t=Eh.getValue(e),n=pQ(t).getOr({}),r=o.get(),s=Pr(r,n);o.set(s)},s=e=>{const t=o.get();Eh.setValue(e,t)},a=ya(null),i=Y(e.tabs,(e=>({value:e.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[Zc(n.shared.providers.translate(e.title))],view:()=>[qM.sketch((o=>({dom:{tag:"div",classes:["tox-form"]},components:Y(e.items,(e=>NF(o,e,t,n))),formBehaviours:Vu([rw.config({mode:"acyclic",useTabstopAt:M(TI)}),xw("TabView.form.events",[rl(s),sl(r)]),Xu.config({channels:Ta([{key:FQ,value:{onReceive:r}},{key:zQ,value:{onReceive:s}}])})])})))]}))),l=LQ(i);return AQ.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(e,t,n)=>{const o=Eh.getValue(t);Fi(e,jN,{name:o,oldName:a.get()}),a.set(o)},tabs:i,components:[AQ.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[wQ.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:Vu([kN.config({})])}),AQ.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:l.selectFirst,tabSectionBehaviours:Vu([xw("tabpanel",l.extraEvents),rw.config({mode:"acyclic"}),Vv.config({find:e=>fe(AQ.getViewItems(e))}),uI.withComp(z.none(),(e=>(e.getSystem().broadcastOn([FQ],{}),o.get())),((e,t)=>{o.set(t),e.getSystem().broadcastOn([zQ],{})}))])})},UQ=xl("update-dialog"),HQ=xl("update-title"),$Q=xl("update-body"),VQ=xl("update-footer"),WQ=xl("body-send-message"),qQ=(e,t,n,o,s)=>{const a=e=>{const t=e.body;switch(t.type){case"tabpanel":return[jQ(t,e.initialData,o)];default:return[fQ(t,e.initialData,o)]}},i=(e,t)=>z.some({isTabPanel:()=>"tabpanel"===t.body.type}),l={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:r(r({},n.map((e=>({id:e}))).getOr({})),s?l:{})},components:[],behaviours:Vu([oI.childAt(0),mQ.config({channel:`${$Q}-${t}`,updateState:i,renderComponents:a,initialData:e})])}},GQ=(e,t,n,o,r)=>qQ(e,t,z.some(n),o,r),KQ=(e,t,n)=>{const o=qQ(e,t,z.none(),n,!1);return pX.parts.body(o)},YQ=e=>{const t={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[kI({dom:{tag:"iframe",attributes:{src:e.url}},behaviours:Vu([kN.config({}),Aw.config({})])})]}],behaviours:Vu([rw.config({mode:"acyclic",useTabstopAt:M(TI)})])};return pX.parts.body(t)};function XQ(e){return XQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},XQ(e)}function JQ(e,t){return JQ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},JQ(e,t)}function QQ(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function ZQ(e,t,n){return ZQ=QQ()?Reflect.construct:function(e,t,n){var o=[null];o.push.apply(o,t);var r=Function.bind.apply(e,o),s=new r;return n&&JQ(s,n.prototype),s},ZQ.apply(null,arguments)}function eZ(e){return tZ(e)||nZ(e)||oZ(e)||sZ()}function tZ(e){if(Array.isArray(e))return rZ(e)}function nZ(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function oZ(e,t){if(e){if("string"===typeof e)return rZ(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rZ(e,t):void 0}}function rZ(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function sZ(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var aZ=Object.hasOwnProperty,iZ=Object.setPrototypeOf,lZ=Object.isFrozen,cZ=Object.getPrototypeOf,dZ=Object.getOwnPropertyDescriptor,uZ=Object.freeze,mZ=Object.seal,pZ=Object.create,fZ="undefined"!==typeof Reflect&&Reflect,gZ=fZ.apply,hZ=fZ.construct;gZ||(gZ=function(e,t,n){return e.apply(t,n)}),uZ||(uZ=function(e){return e}),mZ||(mZ=function(e){return e}),hZ||(hZ=function(e,t){return ZQ(e,eZ(t))});var vZ=OZ(Array.prototype.forEach),bZ=OZ(Array.prototype.pop),yZ=OZ(Array.prototype.push),xZ=OZ(String.prototype.toLowerCase),wZ=OZ(String.prototype.match),CZ=OZ(String.prototype.replace),SZ=OZ(String.prototype.indexOf),_Z=OZ(String.prototype.trim),kZ=OZ(RegExp.prototype.test),EZ=TZ(TypeError);function OZ(e){return function(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return gZ(e,t,o)}}function TZ(e){return function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return hZ(e,n)}}function AZ(e,t){iZ&&iZ(e,null);var n=t.length;while(n--){var o=t[n];if("string"===typeof o){var r=xZ(o);r!==o&&(lZ(t)||(t[n]=r),o=r)}e[o]=!0}return e}function RZ(e){var t,n=pZ(null);for(t in e)gZ(aZ,e,[t])&&(n[t]=e[t]);return n}function NZ(e,t){while(null!==e){var n=dZ(e,t);if(n){if(n.get)return OZ(n.get);if("function"===typeof n.value)return OZ(n.value)}e=cZ(e)}function o(e){return console.warn("fallback value for",e),null}return o}var DZ=uZ(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),BZ=uZ(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),MZ=uZ(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),IZ=uZ(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),PZ=uZ(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),LZ=uZ(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),FZ=uZ(["#text"]),zZ=uZ(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),jZ=uZ(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),UZ=uZ(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),HZ=uZ(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),$Z=mZ(/\{\{[\w\W]*|[\w\W]*\}\}/gm),VZ=mZ(/<%[\w\W]*|[\w\W]*%>/gm),WZ=mZ(/^data-[\-\w.\u00B7-\uFFFF]/),qZ=mZ(/^aria-[\-\w]+$/),GZ=mZ(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),KZ=mZ(/^(?:\w+script|data):/i),YZ=mZ(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),XZ=mZ(/^html$/i),JZ=function(){return"undefined"===typeof window?null:window},QZ=function(e,t){if("object"!==XQ(e)||"function"!==typeof e.createPolicy)return null;var n=null,o="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(o)&&(n=t.currentScript.getAttribute(o));var r="dompurify"+(n?"#"+n:"");try{return e.createPolicy(r,{createHTML:function(e){return e}})}catch(s){return console.warn("TrustedTypes policy "+r+" could not be created."),null}};function ZZ(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:JZ(),t=function(e){return ZZ(e)};if(t.version="2.3.8",t.removed=[],!e||!e.document||9!==e.document.nodeType)return t.isSupported=!1,t;var n=e.document,o=e.document,r=e.DocumentFragment,s=e.HTMLTemplateElement,a=e.Node,i=e.Element,l=e.NodeFilter,c=e.NamedNodeMap,d=void 0===c?e.NamedNodeMap||e.MozNamedAttrMap:c,u=e.HTMLFormElement,m=e.DOMParser,p=e.trustedTypes,f=i.prototype,g=NZ(f,"cloneNode"),h=NZ(f,"nextSibling"),v=NZ(f,"childNodes"),b=NZ(f,"parentNode");if("function"===typeof s){var y=o.createElement("template");y.content&&y.content.ownerDocument&&(o=y.content.ownerDocument)}var x=QZ(p,n),w=x?x.createHTML(""):"",C=o,S=C.implementation,_=C.createNodeIterator,k=C.createDocumentFragment,E=C.getElementsByTagName,O=n.importNode,T={};try{T=RZ(o).documentMode?o.documentMode:{}}catch(Ue){}var A={};t.isSupported="function"===typeof b&&S&&"undefined"!==typeof S.createHTMLDocument&&9!==T;var R,N,D=$Z,B=VZ,M=WZ,I=qZ,P=KZ,L=YZ,F=GZ,z=null,j=AZ({},[].concat(eZ(DZ),eZ(BZ),eZ(MZ),eZ(PZ),eZ(FZ))),U=null,H=AZ({},[].concat(eZ(zZ),eZ(jZ),eZ(UZ),eZ(HZ))),$=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),V=null,W=null,q=!0,G=!0,K=!1,Y=!1,X=!1,J=!1,Q=!1,Z=!1,ee=!1,te=!1,ne=!0,oe=!0,re=!1,se={},ae=null,ie=AZ({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),le=null,ce=AZ({},["audio","video","img","source","image","track"]),de=null,ue=AZ({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),me="http://www.w3.org/1998/Math/MathML",pe="http://www.w3.org/2000/svg",fe="http://www.w3.org/1999/xhtml",ge=fe,he=!1,ve=["application/xhtml+xml","text/html"],be="text/html",ye=null,xe=o.createElement("form"),we=function(e){return e instanceof RegExp||e instanceof Function},Ce=function(e){ye&&ye===e||(e&&"object"===XQ(e)||(e={}),e=RZ(e),z="ALLOWED_TAGS"in e?AZ({},e.ALLOWED_TAGS):j,U="ALLOWED_ATTR"in e?AZ({},e.ALLOWED_ATTR):H,de="ADD_URI_SAFE_ATTR"in e?AZ(RZ(ue),e.ADD_URI_SAFE_ATTR):ue,le="ADD_DATA_URI_TAGS"in e?AZ(RZ(ce),e.ADD_DATA_URI_TAGS):ce,ae="FORBID_CONTENTS"in e?AZ({},e.FORBID_CONTENTS):ie,V="FORBID_TAGS"in e?AZ({},e.FORBID_TAGS):{},W="FORBID_ATTR"in e?AZ({},e.FORBID_ATTR):{},se="USE_PROFILES"in e&&e.USE_PROFILES,q=!1!==e.ALLOW_ARIA_ATTR,G=!1!==e.ALLOW_DATA_ATTR,K=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Y=e.SAFE_FOR_TEMPLATES||!1,X=e.WHOLE_DOCUMENT||!1,Z=e.RETURN_DOM||!1,ee=e.RETURN_DOM_FRAGMENT||!1,te=e.RETURN_TRUSTED_TYPE||!1,Q=e.FORCE_BODY||!1,ne=!1!==e.SANITIZE_DOM,oe=!1!==e.KEEP_CONTENT,re=e.IN_PLACE||!1,F=e.ALLOWED_URI_REGEXP||F,ge=e.NAMESPACE||fe,e.CUSTOM_ELEMENT_HANDLING&&we(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&($.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&we(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&($.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"===typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&($.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),R=R=-1===ve.indexOf(e.PARSER_MEDIA_TYPE)?be:e.PARSER_MEDIA_TYPE,N="application/xhtml+xml"===R?function(e){return e}:xZ,Y&&(G=!1),ee&&(Z=!0),se&&(z=AZ({},eZ(FZ)),U=[],!0===se.html&&(AZ(z,DZ),AZ(U,zZ)),!0===se.svg&&(AZ(z,BZ),AZ(U,jZ),AZ(U,HZ)),!0===se.svgFilters&&(AZ(z,MZ),AZ(U,jZ),AZ(U,HZ)),!0===se.mathMl&&(AZ(z,PZ),AZ(U,UZ),AZ(U,HZ))),e.ADD_TAGS&&(z===j&&(z=RZ(z)),AZ(z,e.ADD_TAGS)),e.ADD_ATTR&&(U===H&&(U=RZ(U)),AZ(U,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&AZ(de,e.ADD_URI_SAFE_ATTR),e.FORBID_CONTENTS&&(ae===ie&&(ae=RZ(ae)),AZ(ae,e.FORBID_CONTENTS)),oe&&(z["#text"]=!0),X&&AZ(z,["html","head","body"]),z.table&&(AZ(z,["tbody"]),delete V.tbody),uZ&&uZ(e),ye=e)},Se=AZ({},["mi","mo","mn","ms","mtext"]),_e=AZ({},["foreignobject","desc","title","annotation-xml"]),ke=AZ({},["title","style","font","a","script"]),Ee=AZ({},BZ);AZ(Ee,MZ),AZ(Ee,IZ);var Oe=AZ({},PZ);AZ(Oe,LZ);var Te=function(e){var t=b(e);t&&t.tagName||(t={namespaceURI:fe,tagName:"template"});var n=xZ(e.tagName),o=xZ(t.tagName);return e.namespaceURI===pe?t.namespaceURI===fe?"svg"===n:t.namespaceURI===me?"svg"===n&&("annotation-xml"===o||Se[o]):Boolean(Ee[n]):e.namespaceURI===me?t.namespaceURI===fe?"math"===n:t.namespaceURI===pe?"math"===n&&_e[o]:Boolean(Oe[n]):e.namespaceURI===fe&&(!(t.namespaceURI===pe&&!_e[o])&&(!(t.namespaceURI===me&&!Se[o])&&(!Oe[n]&&(ke[n]||!Ee[n]))))},Ae=function(e){yZ(t.removed,{element:e});try{e.parentNode.removeChild(e)}catch(Ue){try{e.outerHTML=w}catch(Ue){e.remove()}}},Re=function(e,n){try{yZ(t.removed,{attribute:n.getAttributeNode(e),from:n})}catch(Ue){yZ(t.removed,{attribute:null,from:n})}if(n.removeAttribute(e),"is"===e&&!U[e])if(Z||ee)try{Ae(n)}catch(Ue){}else try{n.setAttribute(e,"")}catch(Ue){}},Ne=function(e){var t,n;if(Q)e="<remove></remove>"+e;else{var r=wZ(e,/^[\r\n\t ]+/);n=r&&r[0]}"application/xhtml+xml"===R&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var s=x?x.createHTML(e):e;if(ge===fe)try{t=(new m).parseFromString(s,R)}catch(Ue){}if(!t||!t.documentElement){t=S.createDocument(ge,"template",null);try{t.documentElement.innerHTML=he?"":s}catch(Ue){}}var a=t.body||t.documentElement;return e&&n&&a.insertBefore(o.createTextNode(n),a.childNodes[0]||null),ge===fe?E.call(t,X?"html":"body")[0]:X?t.documentElement:a},De=function(e){return _.call(e.ownerDocument||e,e,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT,null,!1)},Be=function(e){return e instanceof u&&("string"!==typeof e.nodeName||"string"!==typeof e.textContent||"function"!==typeof e.removeChild||!(e.attributes instanceof d)||"function"!==typeof e.removeAttribute||"function"!==typeof e.setAttribute||"string"!==typeof e.namespaceURI||"function"!==typeof e.insertBefore)},Me=function(e){return"object"===XQ(a)?e instanceof a:e&&"object"===XQ(e)&&"number"===typeof e.nodeType&&"string"===typeof e.nodeName},Ie=function(e,n,o){A[e]&&vZ(A[e],(function(e){e.call(t,n,o,ye)}))},Pe=function(e){var n;if(Ie("beforeSanitizeElements",e,null),Be(e))return Ae(e),!0;if(kZ(/[\u0080-\uFFFF]/,e.nodeName))return Ae(e),!0;var o=N(e.nodeName);if(Ie("uponSanitizeElement",e,{tagName:o,allowedTags:z}),e.hasChildNodes()&&!Me(e.firstElementChild)&&(!Me(e.content)||!Me(e.content.firstElementChild))&&kZ(/<[/\w]/g,e.innerHTML)&&kZ(/<[/\w]/g,e.textContent))return Ae(e),!0;if("select"===o&&kZ(/<template/i,e.innerHTML))return Ae(e),!0;if(!z[o]||V[o]){if(!V[o]&&Fe(o)){if($.tagNameCheck instanceof RegExp&&kZ($.tagNameCheck,o))return!1;if($.tagNameCheck instanceof Function&&$.tagNameCheck(o))return!1}if(oe&&!ae[o]){var r=b(e)||e.parentNode,s=v(e)||e.childNodes;if(s&&r)for(var a=s.length,l=a-1;l>=0;--l)r.insertBefore(g(s[l],!0),h(e))}return Ae(e),!0}return e instanceof i&&!Te(e)?(Ae(e),!0):"noscript"!==o&&"noembed"!==o||!kZ(/<\/no(script|embed)/i,e.innerHTML)?(Y&&3===e.nodeType&&(n=e.textContent,n=CZ(n,D," "),n=CZ(n,B," "),e.textContent!==n&&(yZ(t.removed,{element:e.cloneNode()}),e.textContent=n)),Ie("afterSanitizeElements",e,null),!1):(Ae(e),!0)},Le=function(e,t,n){if(ne&&("id"===t||"name"===t)&&(n in o||n in xe))return!1;if(G&&!W[t]&&kZ(M,t));else if(q&&kZ(I,t));else if(!U[t]||W[t]){if(!(Fe(e)&&($.tagNameCheck instanceof RegExp&&kZ($.tagNameCheck,e)||$.tagNameCheck instanceof Function&&$.tagNameCheck(e))&&($.attributeNameCheck instanceof RegExp&&kZ($.attributeNameCheck,t)||$.attributeNameCheck instanceof Function&&$.attributeNameCheck(t))||"is"===t&&$.allowCustomizedBuiltInElements&&($.tagNameCheck instanceof RegExp&&kZ($.tagNameCheck,n)||$.tagNameCheck instanceof Function&&$.tagNameCheck(n))))return!1}else if(de[t]);else if(kZ(F,CZ(n,L,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==SZ(n,"data:")||!le[e]){if(K&&!kZ(P,CZ(n,L,"")));else if(n)return!1}else;return!0},Fe=function(e){return e.indexOf("-")>0},ze=function(e){var t,n,o,r;Ie("beforeSanitizeAttributes",e,null);var s=e.attributes;if(s){var a={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:U};r=s.length;while(r--){t=s[r];var i=t,l=i.name,c=i.namespaceURI;n="value"===l?t.value:_Z(t.value),o=N(l);var d=n;if(a.attrName=o,a.attrValue=n,a.keepAttr=!0,a.forceKeepAttr=void 0,Ie("uponSanitizeAttribute",e,a),n=a.attrValue,!a.forceKeepAttr)if(a.keepAttr)if(kZ(/\/>/i,n))Re(l,e);else{Y&&(n=CZ(n,D," "),n=CZ(n,B," "));var u=N(e.nodeName);if(Le(u,o,n)){if(n!==d)try{c?e.setAttributeNS(c,l,n):e.setAttribute(l,n)}catch(Ue){Re(l,e)}}else Re(l,e)}else Re(l,e)}Ie("afterSanitizeAttributes",e,null)}},je=function e(t){var n,o=De(t);Ie("beforeSanitizeShadowDOM",t,null);while(n=o.nextNode())Ie("uponSanitizeShadowNode",n,null),Pe(n)||(n.content instanceof r&&e(n.content),ze(n));Ie("afterSanitizeShadowDOM",t,null)};return t.sanitize=function(o,s){var i,l,c,d,u;if(he=!o,he&&(o="\x3c!--\x3e"),"string"!==typeof o&&!Me(o)){if("function"!==typeof o.toString)throw EZ("toString is not a function");if(o=o.toString(),"string"!==typeof o)throw EZ("dirty is not a string, aborting")}if(!t.isSupported){if("object"===XQ(e.toStaticHTML)||"function"===typeof e.toStaticHTML){if("string"===typeof o)return e.toStaticHTML(o);if(Me(o))return e.toStaticHTML(o.outerHTML)}return o}if(J||Ce(s),t.removed=[],"string"===typeof o&&(re=!1),re){if(o.nodeName){var m=N(o.nodeName);if(!z[m]||V[m])throw EZ("root node is forbidden and cannot be sanitized in-place")}}else if(o instanceof a)i=Ne("\x3c!----\x3e"),l=i.ownerDocument.importNode(o,!0),1===l.nodeType&&"BODY"===l.nodeName||"HTML"===l.nodeName?i=l:i.appendChild(l);else{if(!Z&&!Y&&!X&&-1===o.indexOf("<"))return x&&te?x.createHTML(o):o;if(i=Ne(o),!i)return Z?null:te?w:""}i&&Q&&Ae(i.firstChild);var p=De(re?o:i);while(c=p.nextNode())3===c.nodeType&&c===d||Pe(c)||(c.content instanceof r&&je(c.content),ze(c),d=c);if(d=null,re)return o;if(Z){if(ee){u=k.call(i.ownerDocument);while(i.firstChild)u.appendChild(i.firstChild)}else u=i;return U.shadowroot&&(u=O.call(n,u,!0)),u}var f=X?i.outerHTML:i.innerHTML;return X&&z["!doctype"]&&i.ownerDocument&&i.ownerDocument.doctype&&i.ownerDocument.doctype.name&&kZ(XZ,i.ownerDocument.doctype.name)&&(f="<!DOCTYPE "+i.ownerDocument.doctype.name+">\n"+f),Y&&(f=CZ(f,D," "),f=CZ(f,B," ")),x&&te?x.createHTML(f):f},t.setConfig=function(e){Ce(e),J=!0},t.clearConfig=function(){ye=null,J=!1},t.isValidAttribute=function(e,t,n){ye||Ce({});var o=N(e),r=N(t);return Le(o,r,n)},t.addHook=function(e,t){"function"===typeof t&&(A[e]=A[e]||[],yZ(A[e],t))},t.removeHook=function(e){if(A[e])return bZ(A[e])},t.removeHooks=function(e){A[e]&&(A[e]=[])},t.removeAllHooks=function(){A={}},t}var e0=ZZ();const t0=e=>e0().sanitize(e),n0=gS.deviceType.isTouch(),o0=(e,t)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[e,t]}),r0=(e,t)=>pX.parts.close(qC.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close")}},action:e,buttonBehaviours:Vu([kN.config({})])})),s0=()=>pX.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),a0=(e,t)=>pX.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:BH(`<p>${t0(t.translate(e))}</p>`)}]}]}),i0=e=>pX.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:e}),l0=(e,t)=>[gN.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:e}),gN.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:t})],c0=e=>{const t="tox-dialog",n=t+"-wrap",o=n+"__backdrop",s=t+"__disable-scroll";return pX.sketch({lazySink:e.lazySink,onEscape:t=>(e.onEscape(t),z.some(!0)),useTabstopAt:e=>!TI(e),firstTabstop:e.firstTabstop,dom:{tag:"div",classes:[t].concat(e.extraClasses),styles:r({position:"relative"},e.extraStyles)},components:[e.header,e.body,...e.footer.toArray()],parts:{blocker:{dom:BH(`<div class="${n}"></div>`),components:[{dom:{tag:"div",classes:n0?[o,o+"--opaque"]:[o]}}]}},dragBlockClass:n,modalBehaviours:Vu([Aw.config({}),xw("dialog-events",e.dialogEvents.concat([ol(Qa(),((e,t)=>{rw.focusIn(e)}))])),xw("scroll-lock",[rl((()=>{Cc(rn(),s)})),sl((()=>{_c(rn(),s)}))]),...e.extraBehaviours]),eventOrder:r({[gi()]:["dialog-events"],[Ei()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[Oi()]:["alloy.base.behaviour","dialog-events","scroll-lock"]},e.eventOrder)})},d0=e=>qC.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":e.translate("Close"),title:e.translate("Close")}},buttonBehaviours:Vu([kN.config({})]),components:[sS("close",{tag:"div",classes:["tox-icon"]},e.icons)],action:e=>{Li(e,IN)}}),u0=(e,t,n,o)=>{const s=e=>[Zc(o.translate(e.title))];return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:r({},n.map((e=>({id:e}))).getOr({}))},components:[],behaviours:Vu([mQ.config({channel:`${HQ}-${t}`,initialData:e,renderComponents:s})])}},m0=()=>({dom:BH('<div class="tox-dialog__draghandle"></div>')}),p0=(e,t,n,o)=>gN.sketch({dom:BH('<div class="tox-dialog__header"></div>'),components:[u0(e,t,z.some(n),o),m0(),d0(o)],containerBehaviours:Vu([UY.config({mode:"mouse",blockerClass:"blocker",getTarget:e=>gd(e,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}),f0=(e,t,n)=>{const o=pX.parts.title(u0(e,t,z.none(),n)),r=pX.parts.draghandle(m0()),s=pX.parts.close(d0(n)),a=[o].concat(e.draggable?[r]:[]).concat([s]);return gN.sketch({dom:BH('<div class="tox-dialog__header"></div>'),components:a})},g0=(e,t,n)=>f0({title:n.shared.providers.translate(e),draggable:n.dialog.isDraggableModal()},t,n.shared.providers),h0=(e,t,n)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":n.translate(e)},styles:{left:"0px",right:"0px",bottom:"0px",top:"0px",position:"absolute"}},behaviours:t,components:[{dom:BH('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),v0=(e,t,n)=>({onClose:()=>n.closeWindow(),onBlock:n=>{pX.setBusy(e(),((e,o)=>h0(n.message,o,t)))},onUnblock:()=>{pX.setIdle(e())}}),b0=(e,t,n,o)=>{const s=(e,t)=>z.some(t);return rd(c0(r(r({},e),{},{firstTabstop:1,lazySink:o.shared.getSink,extraBehaviours:[mQ.config({channel:`${UQ}-${e.id}`,updateState:s,initialData:t}),uI.memory({}),...e.extraBehaviours],onEscape:e=>{Li(e,IN)},dialogEvents:n,eventOrder:{[fi()]:[mQ.name(),Xu.name()],[Ei()]:["scroll-lock",mQ.name(),"messages","dialog-events","alloy.base.behaviour"],[Oi()]:["alloy.base.behaviour","dialog-events","messages",mQ.name(),"scroll-lock"]}})))},y0=(e,t={})=>{const n=e=>{const n=Y(e.items,(e=>{const n=Re(t,e.name).getOr(ya(!1));return r(r({},e),{},{storage:n})}));return r(r({},e),{},{items:n})};return Y(e,(e=>"menu"===e.type?n(e):e))},x0=e=>te(e,((e,t)=>{if("menu"===t.type){const n=t;return te(n.items,((e,t)=>(e[t.name]=t.storage,e)),e)}return e}),{}),w0=(e,t)=>[el(Qa(),OI),e(MN,((e,n,o,r)=>{nm(Xt(r.element)).fold(E,em),t.onClose(),n.onClose()})),e(IN,((e,t,n,o)=>{t.onCancel(e),Li(o,MN)})),Ki(zN,((e,n)=>t.onUnblock())),Ki(FN,((e,n)=>t.onBlock(n.event)))],C0=(e,t)=>{const n=(t,n)=>Ki(t,((t,r)=>{o(t,((o,s)=>{n(e(),o,r.event,t)}))})),o=(e,t)=>{mQ.getState(e).get().each((n=>{t(n,e)}))};return[...w0(n,t),n(PN,((e,t,n)=>{t.onAction(e,{name:n.name})}))]},S0=(e,t,n)=>{const o=(t,n)=>Ki(t,((t,o)=>{r(t,((r,s)=>{n(e(),r,o.event,t)}))})),r=(e,t)=>{mQ.getState(e).get().each((n=>{t(n.internalDialog,e)}))};return[...w0(o,t),o(LN,((e,t)=>t.onSubmit(e))),o(BN,((e,t,n)=>{t.onChange(e,{name:n.name})})),o(PN,((e,t,o,r)=>{const s=()=>rw.focusIn(r),a=e=>mn(e,"disabled")||un(e,"aria-disabled").exists((e=>"true"===e)),i=Xt(r.element),l=nm(i);t.onAction(e,{name:o.name,value:o.value}),nm(i).fold(s,(e=>{a(e)||l.exists((t=>Dt(e,t)&&a(t)))?s():n().toOptional().filter((t=>!Dt(t.element,e))).each(s)}))})),o(jN,((e,t,n)=>{t.onTabChange(e,{newTabName:n.name,oldTabName:n.oldName})})),sl((t=>{const n=e();Eh.setValue(t,n.getData())}))]},_0={initUrlDialog:C0,initDialog:S0},k0=(e,t)=>rF(e,e.type,t),E0=(e,t,n)=>oe(t,(e=>e.name===n)).bind((t=>t.memento.getOpt(e))),O0=(e,t)=>{const n=t.map((e=>e.footerButtons)).getOr([]),o=Q(n,(e=>"start"===e.align)),r=(e,t)=>gN.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${e}`]},components:Y(t,(e=>e.memento.asSpec()))}),s=r("start",o.pass),a=r("end",o.fail);return[s,a]},T0=(e,t,n)=>{const o=(e,t)=>{const o=Y(t.buttons,(e=>{const t=GC(k0(e,n));return{name:e.name,align:e.align,memento:t}})),r=t=>E0(e,o,t);return z.some({lookupByName:r,footerButtons:o})};return{dom:BH('<div class="tox-dialog__footer"></div>'),components:[],behaviours:Vu([mQ.config({channel:`${VQ}-${t}`,initialData:e,updateState:o,renderComponents:O0})])}},A0=(e,t,n)=>T0(e,t,n),R0=(e,t,n)=>pX.parts.footer(T0(e,t,n)),N0=(e,t)=>{const n=e.getRoot();if(n.getSystem().isConnected()){const n=Vv.getCurrent(e.getFormWrapper()).getOr(e.getFormWrapper());return qM.getField(n,t).orThunk((()=>{const n=e.getFooter(),o=mQ.getState(n).get();return o.bind((e=>e.lookupByName(t)))}))}return z.none()},D0=(e,t)=>{const n=e.getRoot();return mQ.getState(n).get().map((e=>Is(Ms("data",e.dataValidator,t)))).getOr(t)},B0=(e,t,n)=>{const o=t=>{const n=e.getRoot();n.getSystem().isConnected()&&t(n)},s=()=>{const t=e.getRoot(),o=t.getSystem().isConnected()?e.getFormWrapper():t,s=Eh.getValue(o),a=we(n,(e=>e.get()));return r(r({},s),a)},a=t=>{o((o=>{const r=g.getData(),s=Pr(r,t),a=D0(e,s),i=e.getFormWrapper();Eh.setValue(i,a),xe(n,((e,t)=>{Ne(s,t)&&e.set(s[t])}))}))},i=(t,n)=>{N0(e,t).each(n?cb.enable:cb.disable)},l=t=>{N0(e,t).each(Aw.focus)},c=e=>{if(!f(e))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");o((t=>{Fi(t,FN,{message:e})}))},d=()=>{o((e=>{Li(e,zN)}))},u=t=>{o((n=>{const o=e.getBody(),r=mQ.getState(o);r.get().exists((e=>e.isTabPanel()))&&Vv.getCurrent(o).each((e=>{AQ.showTab(e,t)}))}))},m=s=>{o((o=>{const a=e.getId(),i=t(s),l=y0(i.internalDialog.buttons,n);o.getSystem().broadcastOn([`${UQ}-${a}`],i),o.getSystem().broadcastOn([`${HQ}-${a}`],i.internalDialog),o.getSystem().broadcastOn([`${$Q}-${a}`],i.internalDialog),o.getSystem().broadcastOn([`${VQ}-${a}`],r(r({},i.internalDialog),{},{buttons:l})),g.setData(i.initialData)}))},p=()=>{o((e=>{Li(e,MN)}))},g={getData:s,setData:a,setEnabled:i,focus:l,block:c,unblock:d,showTab:u,redial:m,close:p,toggleFullscreen:e.toggleFullscreen};return g},M0=e=>{switch(e){case"large":return["tox-dialog--width-lg"];case"medium":return["tox-dialog--width-md"];default:return[]}},I0=(e,t,n)=>{const o=xl("dialog"),r=e.internalDialog,s=g0(r.title,o,n),a=KQ({body:r.body,initialData:r.initialData},o,n),i=y0(r.buttons),l=x0(i),c=R0({buttons:i},o,n),d=_0.initDialog((()=>g),v0((()=>p),n.shared.providers,t),n.shared.getSink),u=M0(r.size),m={id:o,header:s,body:a,footer:z.some(c),extraClasses:u,extraBehaviours:[],extraStyles:{}},p=b0(m,e,d,n),f=(()=>{const e=()=>{const e=pX.getBody(p);return Vv.getCurrent(e).getOr(e)},t=()=>{const e="tox-dialog--fullscreen",t=st.fromDom(p.element.dom);kc(t,e)?(_c(t,e),Ec(t,u)):(Oc(t,u),Cc(t,e))};return{getId:R(o),getRoot:R(p),getBody:()=>pX.getBody(p),getFooter:()=>pX.getFooter(p),getFormWrapper:e,toggleFullscreen:t}})(),g=B0(f,t.redial,l);return{dialog:p,instanceApi:g}},P0=(e,t,n,o)=>{const r=xl("dialog"),s=xl("dialog-label"),a=xl("dialog-content"),i=e.internalDialog,l=(e,t)=>z.some(t),c=GC(p0({title:i.title,draggable:!0},r,s,n.shared.providers)),d=GC(GQ({body:i.body,initialData:i.initialData},r,a,n,o)),u=y0(i.buttons),m=x0(u),p=GC(A0({buttons:u},r,n)),f=_0.initDialog((()=>b),{onBlock:e=>{RH.block(h,((t,o)=>h0(e.message,o,n.shared.providers)))},onUnblock:()=>{RH.unblock(h)},onClose:()=>t.closeWindow()},n.shared.getSink),g="tox-dialog-inline",h=rd({dom:{tag:"div",classes:["tox-dialog",g],attributes:{role:"dialog",["aria-labelledby"]:s,["aria-describedby"]:a}},eventOrder:{[fi()]:[mQ.name(),Xu.name()],[gi()]:["execute-on-form"],[Ei()]:["reflecting","execute-on-form"]},behaviours:Vu([rw.config({mode:"cyclic",onEscape:e=>(Li(e,MN),z.some(!0)),useTabstopAt:e=>!TI(e)&&("button"!==bt(e)||"disabled"!==dn(e,"disabled")),firstTabstop:1}),mQ.config({channel:`${UQ}-${r}`,updateState:l,initialData:e}),Aw.config({}),xw("execute-on-form",f.concat([ol(Qa(),((e,t)=>{rw.focusIn(e)}))])),RH.config({getRoot:()=>z.some(h)}),bw.config({}),uI.memory({})]),components:[c.asSpec(),d.asSpec(),p.asSpec()]}),v=()=>{const e="tox-dialog--fullscreen",t=st.fromDom(h.element.dom);Tc(t,[e])?(Oc(t,[e]),Ec(t,[g])):(Oc(t,[g]),Ec(t,[e]))},b=B0({getId:R(r),getRoot:R(h),getFooter:()=>p.get(h),getBody:()=>d.get(h),getFormWrapper:()=>{const e=d.get(h);return Vv.getCurrent(e).getOr(e)},toggleFullscreen:v},t.redial,m);return{dialog:h,instanceApi:b}};var L0=tinymce.util.Tools.resolve("tinymce.util.URI");const F0=e=>{const t=t=>{e.getSystem().isConnected()&&t(e)},n=e=>{if(!f(e))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");t((t=>{Fi(t,FN,{message:e})}))},o=()=>{t((e=>{Li(e,zN)}))},r=()=>{t((e=>{Li(e,MN)}))},s=e=>{t((t=>{t.getSystem().broadcastOn([WQ],e)}))};return{block:n,unblock:o,close:r,sendMessage:s}},z0=["insertContent","setContent","execCommand","close","block","unblock"],j0=e=>g(e)&&-1!==z0.indexOf(e.mceAction),U0=e=>!j0(e)&&g(e)&&Ne(e,"mceAction"),H0=(e,t,n)=>{switch(n.mceAction){case"insertContent":e.insertContent(n.content);break;case"setContent":e.setContent(n.content);break;case"execCommand":const o=!!y(n.ui)&&n.ui;e.execCommand(n.cmd,o,n.value);break;case"close":t.close();break;case"block":t.block(n.message);break;case"unblock":t.unblock();break}},$0=(e,t,n,o)=>{const s=xl("dialog"),a=g0(e.title,s,o),i=YQ(e),l=e.buttons.bind((e=>0===e.length?z.none():z.some(R0({buttons:e},s,o)))),c=_0.initUrlDialog((()=>b),v0((()=>v),o.shared.providers,t)),d=r(r({},e.height.fold((()=>({})),(e=>({height:e+"px","max-height":e+"px"})))),e.width.fold((()=>({})),(e=>({width:e+"px","max-width":e+"px"})))),u=e.width.isNone()&&e.height.isNone()?["tox-dialog--width-lg"]:[],m=new L0(e.url,{base_uri:new L0(window.location.href)}),p=`${m.protocol}://${m.host}${m.port?":"+m.port:""}`,f=Nm(),g=[xw("messages",[rl((()=>{const t=Mm(st.fromDom(window),"message",(t=>{if(m.isSameOrigin(new L0(t.raw.origin))){const o=t.raw.data;j0(o)?H0(n,b,o):U0(o)&&e.onMessage(b,o)}}));f.set(t)})),sl(f.clear)]),Xu.config({channels:{[WQ]:{onReceive:(e,t)=>{fd(e.element,"iframe").each((e=>{const n=e.dom.contentWindow;C(n)&&n.postMessage(t,p)}))}}}})],h={id:s,header:a,body:i,footer:l,extraClasses:u,extraBehaviours:g,extraStyles:d},v=b0(h,e,c,o),b=F0(v);return{dialog:v,instanceApi:b}},V0=e=>{const t=e.shared,n=(n,o)=>{const r=()=>{pX.hide(l),o()},s=GC(rF({name:"close-alert",text:"OK",primary:!0,buttonType:z.some("primary"),align:"end",enabled:!0,icon:z.none()},"cancel",e)),a=s0(),i=r0(r,t.providers),l=rd(c0({lazySink:()=>t.getSink(),header:o0(a,i),body:a0(n,t.providers),footer:z.some(i0(l0([],[s.asSpec()]))),onEscape:r,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Ki(IN,r)],eventOrder:{}}));pX.show(l);const c=s.get(l);Aw.focus(c)};return{open:n}},W0=e=>{const t=e.shared,n=(n,o)=>{const r=e=>{pX.hide(c),o(e)},s=GC(rF({name:"yes",text:"Yes",primary:!0,buttonType:z.some("primary"),align:"end",enabled:!0,icon:z.none()},"submit",e)),a=rF({name:"no",text:"No",primary:!1,buttonType:z.some("secondary"),align:"end",enabled:!0,icon:z.none()},"cancel",e),i=s0(),l=r0((()=>r(!1)),t.providers),c=rd(c0({lazySink:()=>t.getSink(),header:o0(i,l),body:a0(n,t.providers),footer:z.some(i0(l0([],[a,s.asSpec()]))),onEscape:()=>r(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Ki(IN,(()=>r(!1))),Ki(LN,(()=>r(!0)))],eventOrder:{}}));pX.show(c);const d=s.get(c);Aw.focus(d)};return{open:n}},q0=(e,t)=>Is(Ms("data",t,e)),G0=e=>WR(e,".tox-alert-dialog")||WR(e,".tox-confirm-dialog"),K0=(e,t,n)=>t&&n?[]:[TU.config({contextual:{lazyContext:()=>z.some(lr(st.fromDom(e.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:t=>{const n=$R(e,t.element);return n.map((e=>{const t=VR(e);return{bounds:t,optScrollEnv:z.some({currentScrollTop:e.element.dom.scrollTop,scrollElmTop:Pn(e.element).top})}})).getOrThunk((()=>({bounds:mr(),optScrollEnv:z.none()})))}})],Y0=e=>{const t=e.editor,n=p_(t),o=V0(e.backstages.dialog),s=W0(e.backstages.dialog),a=(t,n,o)=>void 0!==n&&"toolbar"===n.inline?d(t,e.backstages.popup.shared.anchors.inlineDialog(),o,n.ariaAttrs):void 0!==n&&"cursor"===n.inline?d(t,e.backstages.popup.shared.anchors.cursor(),o,n.ariaAttrs):c(t,o),i=(e,t)=>l(e,t),l=(n,o)=>{const r=n=>{const r=$0(n,{closeWindow:()=>{pX.hide(r.dialog),o(r.instanceApi)}},t,e.backstages.dialog);return pX.show(r.dialog),r.instanceApi};return rQ.openUrl(r,n)},c=(t,n)=>{const o=(t,o,r)=>{const s=o,a={dataValidator:r,initialData:s,internalDialog:t},i=I0(a,{redial:rQ.redial,closeWindow:()=>{pX.hide(i.dialog),n(i.instanceApi)}},e.backstages.dialog);return pX.show(i.dialog),i.instanceApi.setData(s),i.instanceApi};return rQ.open(o,t)},d=(o,s,a,i=!1)=>{const l=(o,l,c)=>{const d=q0(l,c),u=Dm(),m=e.backstages.popup.shared.header.isPositionedAtTop(),p={dataValidator:c,initialData:d,internalDialog:o},f=()=>u.on((e=>{$C.reposition(e),TU.refresh(e)})),g=P0(p,{redial:rQ.redial,closeWindow:()=>{u.on($C.hide),t.off("ResizeEditor",f),u.clear(),a(g.instanceApi)}},e.backstages.popup,i),h=rd($C.sketch(r(r({lazySink:e.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:{}},m?{}:{fireRepositionEventInstead:{}}),{},{inlineBehaviours:Vu([xw("window-manager-inline-events",[Ki(Ti(),((e,t)=>{Li(g.dialog,IN)}))]),...K0(t,n,m)]),isExtraPart:(e,t)=>G0(t)})));u.set(h);const v=()=>{const e=t.inline?rn():st.fromDom(t.getContainer()),n=lr(e);return z.some(n)};return $C.showWithinBounds(h,sd(g.dialog),{anchor:s},v),n&&m||(TU.refresh(h),t.on("ResizeEditor",f)),g.instanceApi.setData(d),rw.focusIn(g.dialog),g.instanceApi};return rQ.open(l,o)},u=(e,t)=>{s.open(e,t)},m=(e,t)=>{o.open(e,t)},p=e=>{e.close()};return{open:a,openUrl:i,alert:m,close:p,confirm:u}},X0=e=>{bS(e),qT(e),YG(e)};var J0=()=>{pr.add("silver",(e=>{X0(e);let t=()=>mr();const{dialogs:n,popups:o,renderUI:r}=aX(e,{getPopupSinkBounds:()=>t()}),s=async()=>{const n=await r(),s=$R(e,o.getMothership().element);return s.each((e=>{t=()=>VR(e)})),n};zR.register(e,o.backstage.shared);const a=Y0({editor:e,backstages:{popup:o.backstage,dialog:n.backstage}}),i=()=>mS(e,{backstage:o.backstage},o.getMothership());return{renderUI:s,getWindowManagerImpl:R(a),getNotificationManagerImpl:i}}))};J0()}()},635:function(e,t,n){var o=n(22)["default"],r=n(2214)["default"];const s=["uid"];n(2707),n(1703),n(7658),n(5069),n(4916),n(5306),n(3948),n(7922),n(3210),n(4603),n(8450),n(7714),n(2801),n(1174),n(9575),n(2472),n(8675),n(3105),n(3408),n(2958),n(3462),n(3824),n(3767),n(8585),n(8696),n(1817),n(1299),n(285),n(1637),n(6373),n(8862),function(){"use strict";var t=function(e){if(null===e)return"null";if(void 0===e)return"undefined";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t},n=function(e){return{eq:e}},a=n((function(e,t){return e===t})),i=function(e){return n((function(t,n){if(t.length!==n.length)return!1;for(var o=t.length,r=0;r<o;r++)if(!e.eq(t[r],n[r]))return!1;return!0}))},l=function(e){return n((function(t,o){var r=Object.keys(t),s=Object.keys(o);if(!function(e,t){return function(e,t){return n((function(n,o){return e.eq(t(n),t(o))}))}(i(e),(function(e){return function(e,t){return Array.prototype.slice.call(e).sort(t)}(e,t)}))}(a).eq(r,s))return!1;for(var l=r.length,c=0;c<l;c++){var d=r[c];if(!e.eq(t[d],o[d]))return!1}return!0}))},c=n((function(e,n){if(e===n)return!0;var o=t(e);return o===t(n)&&(function(e){return-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(e)}(o)?e===n:"array"===o?i(c).eq(e,n):"object"===o&&l(c).eq(e,n))}));const d=Object.getPrototypeOf,u=(e,t,n)=>{var o;return!!n(e,t.prototype)||(null===(o=e.constructor)||void 0===o?void 0:o.name)===t.name},m=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&u(e,String,((e,t)=>t.isPrototypeOf(e)))?"string":t})(t)===e,p=e=>t=>typeof t===e,f=e=>t=>e===t,g=(e,t)=>v(e)&&u(e,t,((e,t)=>d(e)===t)),h=m("string"),v=m("object"),b=e=>g(e,Object),y=m("array"),x=f(null),w=p("boolean"),C=f(void 0),S=e=>null==e,_=e=>!S(e),k=p("function"),E=p("number"),O=(e,t)=>{if(y(e)){for(let n=0,o=e.length;n<o;++n)if(!t(e[n]))return!1;return!0}return!1},T=()=>{},A=(e,t)=>(...n)=>e(t.apply(null,n)),R=(e,t)=>n=>e(t(n)),N=e=>()=>e,D=e=>e,B=(e,t)=>e===t;function M(e,...t){return(...n)=>{const o=t.concat(n);return e.apply(null,o)}}const I=e=>t=>!e(t),P=e=>()=>{throw new Error(e)},L=e=>e(),F=e=>{e()},z=N(!1),j=N(!0);class U{constructor(e,t){this.tag=e,this.value=t}static some(e){return new U(!0,e)}static none(){return U.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?U.some(e(this.value)):U.none()}bind(e){return this.tag?e(this.value):U.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:U.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return _(e)?U.some(e):U.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}U.singletonNone=new U(!1);const H=Array.prototype.slice,$=Array.prototype.indexOf,V=Array.prototype.push,W=(e,t)=>$.call(e,t),q=(e,t)=>W(e,t)>-1,G=(e,t)=>{for(let n=0,o=e.length;n<o;n++)if(t(e[n],n))return!0;return!1},K=(e,t)=>{const n=e.length,o=new Array(n);for(let r=0;r<n;r++){const n=e[r];o[r]=t(n,r)}return o},Y=(e,t)=>{for(let n=0,o=e.length;n<o;n++)t(e[n],n)},X=(e,t)=>{for(let n=e.length-1;n>=0;n--)t(e[n],n)},J=(e,t)=>{const n=[],o=[];for(let r=0,s=e.length;r<s;r++){const s=e[r];(t(s,r)?n:o).push(s)}return{pass:n,fail:o}},Q=(e,t)=>{const n=[];for(let o=0,r=e.length;o<r;o++){const r=e[o];t(r,o)&&n.push(r)}return n},Z=(e,t,n)=>(X(e,((e,o)=>{n=t(n,e,o)})),n),ee=(e,t,n)=>(Y(e,((e,o)=>{n=t(n,e,o)})),n),te=(e,t,n)=>{for(let o=0,r=e.length;o<r;o++){const r=e[o];if(t(r,o))return U.some(r);if(n(r,o))break}return U.none()},ne=(e,t)=>te(e,t,z),oe=(e,t)=>{for(let n=0,o=e.length;n<o;n++)if(t(e[n],n))return U.some(n);return U.none()},re=e=>{const t=[];for(let n=0,o=e.length;n<o;++n){if(!y(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);V.apply(t,e[n])}return t},se=(e,t)=>re(K(e,t)),ae=(e,t)=>{for(let n=0,o=e.length;n<o;++n)if(!0!==t(e[n],n))return!1;return!0},ie=e=>{const t=H.call(e,0);return t.reverse(),t},le=(e,t)=>Q(e,(e=>!q(t,e))),ce=(e,t)=>{const n={};for(let o=0,r=e.length;o<r;o++){const r=e[o];n[String(r)]=t(r,o)}return n},de=(e,t)=>{const n=H.call(e,0);return n.sort(t),n},ue=(e,t)=>t>=0&&t<e.length?U.some(e[t]):U.none(),me=e=>ue(e,0),pe=e=>ue(e,e.length-1),fe=k(Array.from)?Array.from:e=>H.call(e),ge=(e,t)=>{for(let n=0;n<e.length;n++){const o=t(e[n],n);if(o.isSome())return o}return U.none()},he=Object.keys,ve=Object.hasOwnProperty,be=(e,t)=>{const n=he(e);for(let o=0,r=n.length;o<r;o++){const r=n[o];t(e[r],r)}},ye=(e,t)=>xe(e,((e,n)=>({k:n,v:t(e,n)}))),xe=(e,t)=>{const n={};return be(e,((e,o)=>{const r=t(e,o);n[r.k]=r.v})),n},we=e=>(t,n)=>{e[n]=t},Ce=(e,t,n,o)=>{be(e,((e,r)=>{(t(e,r)?n:o)(e,r)}))},Se=(e,t)=>{const n={};return Ce(e,t,we(n),T),n},_e=(e,t)=>{const n=[];return be(e,((e,o)=>{n.push(t(e,o))})),n},ke=e=>_e(e,D),Ee=(e,t)=>Oe(e,t)?U.from(e[t]):U.none(),Oe=(e,t)=>ve.call(e,t),Te=(e,t)=>Oe(e,t)&&void 0!==e[t]&&null!==e[t],Ae=e=>{const t={};return Y(e,(e=>{t[e]={}})),he(t)},Re=e=>void 0!==e.length,Ne=Array.isArray,De=(e,t,n)=>{if(!e)return!1;if(n=n||e,Re(e)){for(let o=0,r=e.length;o<r;o++)if(!1===t.call(n,e[o],o,e))return!1}else for(const o in e)if(Oe(e,o)&&!1===t.call(n,e[o],o,e))return!1;return!0},Be=(e,t)=>{const n=[];return De(e,((o,r)=>{n.push(t(o,r,e))})),n},Me=(e,t)=>{const n=[];return De(e,((o,r)=>{t&&!t(o,r,e)||n.push(o)})),n},Ie=(e,t,n,o)=>{let r=C(n)?e[0]:n;for(let s=0;s<e.length;s++)r=t.call(o,r,e[s],s);return r},Pe=(e,t,n)=>{for(let o=0,r=e.length;o<r;o++)if(t.call(n,e[o],o,e))return o;return-1},Le=e=>e[e.length-1],Fe=e=>{let t,n=!1;return(...o)=>(n||(n=!0,t=e.apply(null,o)),t)},ze=()=>je(0,0),je=(e,t)=>({major:e,minor:t}),Ue={nu:je,detect:(e,t)=>{const n=String(t).toLowerCase();return 0===e.length?ze():((e,t)=>{const n=((e,t)=>{for(let n=0;n<e.length;n++){const o=e[n];if(o.test(t))return o}})(e,t);if(!n)return{major:0,minor:0};const o=e=>Number(t.replace(n,"$"+e));return je(o(1),o(2))})(e,n)},unknown:ze},He=(e,t)=>{const n=String(t).toLowerCase();return ne(e,(e=>e.search(n)))},$e=(e,t,n)=>""===t||e.length>=t.length&&e.substr(n,n+t.length)===t,Ve=(e,t)=>qe(e,t)?((e,t)=>e.substring(t))(e,t.length):e,We=(e,t,n=0,o)=>{const r=e.indexOf(t,n);return-1!==r&&(!!C(o)||r+t.length<=o)},qe=(e,t)=>$e(e,t,0),Ge=(e,t)=>$e(e,t,e.length-t.length),Ke=e=>t=>t.replace(e,""),Ye=Ke(/^\s+|\s+$/g),Xe=Ke(/^\s+/g),Je=Ke(/\s+$/g),Qe=e=>e.length>0,Ze=e=>!Qe(e),et=(e,t=10)=>{const n=parseInt(e,t);return isNaN(n)?U.none():U.some(n)},tt=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,nt=e=>t=>We(t,e),ot=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>We(e,"edge/")&&We(e,"chrome")&&We(e,"safari")&&We(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,tt],search:e=>We(e,"chrome")&&!We(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>We(e,"msie")||We(e,"trident")},{name:"Opera",versionRegexes:[tt,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:nt("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:nt("firefox")},{name:"Safari",versionRegexes:[tt,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(We(e,"safari")||We(e,"mobile/"))&&We(e,"applewebkit")}],rt=[{name:"Windows",search:nt("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>We(e,"iphone")||We(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:nt("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:nt("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:nt("linux"),versionRegexes:[]},{name:"Solaris",search:nt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:nt("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:nt("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],st={browsers:N(ot),oses:N(rt)},at="Edge",it="Chromium",lt="Opera",ct="Firefox",dt="Safari",ut=e=>{const t=e.current,n=e.version,o=e=>()=>t===e;return{current:t,version:n,isEdge:o(at),isChromium:o(it),isIE:o("IE"),isOpera:o(lt),isFirefox:o(ct),isSafari:o(dt)}},mt=()=>ut({current:void 0,version:Ue.unknown()}),pt=ut,ft=(N(at),N(it),N("IE"),N(lt),N(ct),N(dt),"Windows"),gt="Android",ht="Linux",vt="macOS",bt="Solaris",yt="FreeBSD",xt="ChromeOS",wt=e=>{const t=e.current,n=e.version,o=e=>()=>t===e;return{current:t,version:n,isWindows:o(ft),isiOS:o("iOS"),isAndroid:o(gt),isMacOS:o(vt),isLinux:o(ht),isSolaris:o(bt),isFreeBSD:o(yt),isChromeOS:o(xt)}},Ct=()=>wt({current:void 0,version:Ue.unknown()}),St=wt,_t=(N(ft),N("iOS"),N(gt),N(ht),N(vt),N(bt),N(yt),N(xt),e=>window.matchMedia(e).matches);let kt=Fe((()=>((e,t,n)=>{const o=st.browsers(),r=st.oses(),s=t.bind((e=>((e,t)=>ge(t.brands,(t=>{const n=t.brand.toLowerCase();return ne(e,(e=>{var t;return n===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())})).map((e=>({current:e.name,version:Ue.nu(parseInt(t.version,10),0)})))})))(o,e))).orThunk((()=>((e,t)=>He(e,t).map((e=>{const n=Ue.detect(e.versionRegexes,t);return{current:e.name,version:n}})))(o,e))).fold(mt,pt),a=((e,t)=>He(e,t).map((e=>{const n=Ue.detect(e.versionRegexes,t);return{current:e.name,version:n}})))(r,e).fold(Ct,St),i=((e,t,n,o)=>{const r=e.isiOS()&&!0===/ipad/i.test(n),s=e.isiOS()&&!r,a=e.isiOS()||e.isAndroid(),i=a||o("(pointer:coarse)"),l=r||!s&&a&&o("(min-device-width:768px)"),c=s||a&&!l,d=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n),u=!c&&!l&&!d;return{isiPad:N(r),isiPhone:N(s),isTablet:N(l),isPhone:N(c),isTouch:N(i),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:N(d),isDesktop:N(u)}})(a,s,e,n);return{browser:s,os:a,deviceType:i}})(navigator.userAgent,U.from(navigator.userAgentData),_t)));const Et=()=>kt(),Ot=navigator.userAgent,Tt=Et(),At=Tt.browser,Rt=Tt.os,Nt=Tt.deviceType,Dt=-1!==Ot.indexOf("Windows Phone"),Bt={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:At.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!At.isIE(),windowsPhone:Dt,browser:{current:At.current,version:At.version,isChromium:At.isChromium,isEdge:At.isEdge,isFirefox:At.isFirefox,isIE:At.isIE,isOpera:At.isOpera,isSafari:At.isSafari},os:{current:Rt.current,version:Rt.version,isAndroid:Rt.isAndroid,isChromeOS:Rt.isChromeOS,isFreeBSD:Rt.isFreeBSD,isiOS:Rt.isiOS,isLinux:Rt.isLinux,isMacOS:Rt.isMacOS,isSolaris:Rt.isSolaris,isWindows:Rt.isWindows},deviceType:{isDesktop:Nt.isDesktop,isiPad:Nt.isiPad,isiPhone:Nt.isiPhone,isPhone:Nt.isPhone,isTablet:Nt.isTablet,isTouch:Nt.isTouch,isWebView:Nt.isWebView}},Mt=/^\s*|\s*$/g,It=e=>S(e)?"":(""+e).replace(Mt,""),Pt=function(e,t,n,o){o=o||this,e&&(n&&(e=e[n]),De(e,((e,r)=>!1!==t.call(o,e,r,n)&&(Pt(e,t,n,o),!0))))},Lt={trim:It,isArray:Ne,is:(e,t)=>t?!("array"!==t||!Ne(e))||typeof e===t:void 0!==e,toArray:e=>{if(Ne(e))return e;{const t=[];for(let n=0,o=e.length;n<o;n++)t[n]=e[n];return t}},makeMap:(e,t,n={})=>{const o=h(e)?e.split(t||","):e||[];let r=o.length;for(;r--;)n[o[r]]={};return n},each:De,map:Be,grep:Me,inArray:(e,t)=>{if(e)for(let n=0,o=e.length;n<o;n++)if(e[n]===t)return n;return-1},hasOwn:Oe,extend:(e,...t)=>{for(let n=0;n<t.length;n++){const o=t[n];for(const t in o)if(Oe(o,t)){const n=o[t];void 0!==n&&(e[t]=n)}}return e},walk:Pt,resolve:(e,t=window)=>{const n=e.split(".");for(let o=0,r=n.length;o<r&&(t=t[n[o]]);o++);return t},explode:(e,t)=>y(e)?e:""===e?[]:Be(e.split(t||","),It),_addCacheSuffix:e=>{const t=Bt.cacheSuffix;return t&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e}},Ft=(e,t,n=B)=>e.exists((e=>n(e,t))),zt=(e,t,n)=>e.isSome()&&t.isSome()?U.some(n(e.getOrDie(),t.getOrDie())):U.none(),jt=(e,t)=>e?U.some(t):U.none(),Ut="undefined"!=typeof window?window:Function("return this;")(),Ht=(e,t)=>((e,t)=>{let n=null!=t?t:Ut;for(let o=0;o<e.length&&null!=n;++o)n=n[e[o]];return n})(e.split("."),t),$t=Object.getPrototypeOf,Vt=e=>{const t=Ht("ownerDocument.defaultView",e);return v(e)&&((e=>((e,t)=>{const n=((e,t)=>Ht(e,t))(e,t);if(null==n)throw new Error(e+" not available on this browser");return n})("HTMLElement",e))(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test($t(e).constructor.name))},Wt=e=>e.dom.nodeName.toLowerCase(),qt=e=>e.dom.nodeType,Gt=e=>t=>qt(t)===e,Kt=Gt(1),Yt=Gt(3),Xt=Gt(9),Jt=Gt(11),Qt=e=>t=>Kt(t)&&Wt(t)===e,Zt=(e,t,n)=>{if(!(h(n)||w(n)||E(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},en=(e,t,n)=>{Zt(e.dom,t,n)},tn=(e,t)=>{const n=e.dom;be(t,((e,t)=>{Zt(n,t,e)}))},nn=(e,t)=>{const n=e.dom.getAttribute(t);return null===n?void 0:n},on=(e,t)=>U.from(nn(e,t)),rn=(e,t)=>{const n=e.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},sn=(e,t)=>{e.dom.removeAttribute(t)},an=e=>ee(e.dom.attributes,((e,t)=>(e[t.name]=t.value,e)),{}),ln=(e,t)=>{const n=nn(e,t);return void 0===n||""===n?[]:n.split(" ")},cn=e=>void 0!==e.dom.classList,dn=e=>ln(e,"class"),un=(e,t)=>((e,t,n)=>{const o=ln(e,t).concat([n]);return en(e,t,o.join(" ")),!0})(e,"class",t),mn=(e,t)=>((e,t,n)=>{const o=Q(ln(e,t),(e=>e!==n));return o.length>0?en(e,t,o.join(" ")):sn(e,t),!1})(e,"class",t),pn=(e,t)=>{cn(e)?e.dom.classList.add(t):un(e,t)},fn=e=>{0===(cn(e)?e.dom.classList:dn(e)).length&&sn(e,"class")},gn=(e,t)=>{cn(e)?e.dom.classList.remove(t):mn(e,t),fn(e)},hn=(e,t)=>cn(e)&&e.dom.classList.contains(t),vn=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},bn=(e,t)=>{const n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){const t="HTML does not have a single root node";throw console.error(t,e),new Error(t)}return vn(n.childNodes[0])},yn=(e,t)=>{const n=(t||document).createElement(e);return vn(n)},xn=(e,t)=>{const n=(t||document).createTextNode(e);return vn(n)},wn=vn,Cn=(e,t,n)=>U.from(e.dom.elementFromPoint(t,n)).map(vn),Sn=(e,t)=>{const n=[],o=e=>(n.push(e),t(e));let r=t(e);do{r=r.bind(o)}while(r.isSome());return n},_n=(e,t)=>{const n=e.dom;if(1!==n.nodeType)return!1;{const e=n;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},kn=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,En=(e,t)=>e.dom===t.dom,On=(e,t)=>{const n=e.dom,o=t.dom;return n!==o&&n.contains(o)},Tn=e=>wn(e.dom.ownerDocument),An=e=>Xt(e)?e:Tn(e),Rn=e=>wn(An(e).dom.defaultView),Nn=e=>U.from(e.dom.parentNode).map(wn),Dn=e=>U.from(e.dom.parentElement).map(wn),Bn=(e,t)=>{const n=k(t)?t:z;let o=e.dom;const r=[];for(;null!==o.parentNode&&void 0!==o.parentNode;){const e=o.parentNode,t=wn(e);if(r.push(t),!0===n(t))break;o=e}return r},Mn=e=>U.from(e.dom.previousSibling).map(wn),In=e=>U.from(e.dom.nextSibling).map(wn),Pn=e=>ie(Sn(e,Mn)),Ln=e=>Sn(e,In),Fn=e=>K(e.dom.childNodes,wn),zn=(e,t)=>{const n=e.dom.childNodes;return U.from(n[t]).map(wn)},jn=e=>zn(e,0),Un=e=>zn(e,e.dom.childNodes.length-1),Hn=e=>e.dom.childNodes.length,$n=e=>Jt(e)&&_(e.dom.host),Vn=k(Element.prototype.attachShadow)&&k(Node.prototype.getRootNode),Wn=N(Vn),qn=Vn?e=>wn(e.dom.getRootNode()):An,Gn=e=>$n(e)?e:(e=>{const t=e.dom.head;if(null==t)throw new Error("Head is not available yet");return wn(t)})(An(e)),Kn=e=>wn(e.dom.host),Yn=e=>{if(Wn()&&_(e.target)){const t=wn(e.target);if(Kt(t)&&Xn(t)&&e.composed&&e.composedPath){const t=e.composedPath();if(t)return me(t)}}return U.from(e.target)},Xn=e=>_(e.dom.shadowRoot),Jn=e=>{const t=Yt(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;const n=t.ownerDocument;return(e=>{const t=qn(e);return $n(t)?U.some(t):U.none()})(wn(t)).fold((()=>n.body.contains(t)),R(Jn,Kn))};var Qn=(e,t,n,o,r)=>e(n,o)?U.some(n):k(r)&&r(n)?U.none():t(n,o,r);const Zn=(e,t,n)=>{let o=e.dom;const r=k(n)?n:z;for(;o.parentNode;){o=o.parentNode;const e=wn(o);if(t(e))return U.some(e);if(r(e))break}return U.none()},eo=(e,t,n)=>Qn(((e,t)=>t(e)),Zn,e,t,n),to=(e,t,n)=>Zn(e,(e=>_n(e,t)),n),no=(e,t)=>((e,t)=>{const n=void 0===t?document:t.dom;return kn(n)?U.none():U.from(n.querySelector(e)).map(wn)})(t,e),oo=(e,t,n)=>Qn(((e,t)=>_n(e,t)),to,e,t,n),ro=(e,t=!1)=>{return Jn(e)?e.dom.isContentEditable:(n=e,oo(n,"[contenteditable]")).fold(N(t),(e=>"true"===so(e)));var n},so=e=>e.dom.contentEditable,ao=e=>void 0!==e.style&&k(e.style.getPropertyValue),io=(e,t,n)=>{if(!h(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);ao(e)&&e.style.setProperty(t,n)},lo=(e,t,n)=>{const o=e.dom;io(o,t,n)},co=(e,t)=>{const n=e.dom;be(t,((e,t)=>{io(n,t,e)}))},uo=(e,t)=>{const n=e.dom,o=window.getComputedStyle(n).getPropertyValue(t);return""!==o||Jn(e)?o:mo(n,t)},mo=(e,t)=>ao(e)?e.style.getPropertyValue(t):"",po=(e,t)=>{const n=e.dom,o=mo(n,t);return U.from(o).filter((e=>e.length>0))},fo=e=>{const t={},n=e.dom;if(ao(n))for(let o=0;o<n.style.length;o++){const e=n.style.item(o);t[e]=n.style[e]}return t},go=(e,t)=>{((e,t)=>{ao(e)&&e.style.removeProperty(t)})(e.dom,t),Ft(on(e,"style").map(Ye),"")&&sn(e,"style")},ho=(e,t)=>{Nn(e).each((n=>{n.dom.insertBefore(t.dom,e.dom)}))},vo=(e,t)=>{In(e).fold((()=>{Nn(e).each((e=>{yo(e,t)}))}),(e=>{ho(e,t)}))},bo=(e,t)=>{jn(e).fold((()=>{yo(e,t)}),(n=>{e.dom.insertBefore(t.dom,n.dom)}))},yo=(e,t)=>{e.dom.appendChild(t.dom)},xo=(e,t)=>{ho(e,t),yo(t,e)},wo=(e,t)=>{Y(t,(t=>{yo(e,t)}))},Co=e=>{e.dom.textContent="",Y(Fn(e),(e=>{So(e)}))},So=e=>{const t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},_o=e=>{const t=Fn(e);var n,o;t.length>0&&(n=e,Y(o=t,((e,t)=>{const r=0===t?n:o[t-1];vo(r,e)}))),So(e)},ko=e=>K(e,wn),Eo=e=>e.dom.innerHTML,Oo=(e,t)=>{const n=Tn(e).dom,o=wn(n.createDocumentFragment()),r=((e,t)=>{const n=(t||document).createElement("div");return n.innerHTML=e,Fn(wn(n))})(t,n);wo(o,r),Co(e),yo(e,o)},To=(e,t,n,o)=>((e,t,n,o,r)=>{const s=((e,t)=>n=>{e(n)&&t((e=>{const t=wn(Yn(e).getOr(e.target)),n=()=>e.stopPropagation(),o=()=>e.preventDefault(),r=A(o,n);return((e,t,n,o,r,s,a)=>({target:e,x:t,y:n,stop:o,prevent:r,kill:s,raw:a}))(t,e.clientX,e.clientY,n,o,r,e)})(n))})(n,o);return e.dom.addEventListener(t,s,!1),{unbind:M(Ao,e,t,s,!1)}})(e,t,n,o),Ao=(e,t,n,o)=>{e.dom.removeEventListener(t,n,o)},Ro=(e,t)=>({left:e,top:t,translate:(n,o)=>Ro(e+n,t+o)}),No=Ro,Do=(e,t)=>void 0!==e?e:void 0!==t?t:0,Bo=e=>{const t=e.dom,n=t.ownerDocument.body;return n===t?No(n.offsetLeft,n.offsetTop):Jn(e)?(e=>{const t=e.getBoundingClientRect();return No(t.left,t.top)})(t):No(0,0)},Mo=e=>{const t=void 0!==e?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,o=t.body.scrollTop||t.documentElement.scrollTop;return No(n,o)},Io=(e,t)=>{Et().browser.isSafari()&&k(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},Po=(e,t,n,o)=>({x:e,y:t,width:n,height:o,right:e+n,bottom:t+o}),Lo=e=>{const t=void 0===e?window:e,n=t.document,o=Mo(wn(n));return(e=>{const t=void 0===e?window:e;return Et().browser.isFirefox()?U.none():U.from(t.visualViewport)})(t).fold((()=>{const e=t.document.documentElement,n=e.clientWidth,r=e.clientHeight;return Po(o.left,o.top,n,r)}),(e=>Po(Math.max(e.pageLeft,o.left),Math.max(e.pageTop,o.top),e.width,e.height)))},Fo=(e,t)=>{let n=[];return Y(Fn(e),(e=>{t(e)&&(n=n.concat([e])),n=n.concat(Fo(e,t))})),n},zo=(e,t)=>((e,t)=>{const n=void 0===t?document:t.dom;return kn(n)?[]:K(n.querySelectorAll(e),wn)})(t,e),jo=(e,t,n)=>to(e,t,n).isSome();class Uo{constructor(e,t){this.node=e,this.rootNode=t,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(e){return this.node=this.findSibling(this.node,"firstChild","nextSibling",e),this.node}prev(e){return this.node=this.findSibling(this.node,"lastChild","previousSibling",e),this.node}prev2(e){return this.node=this.findPreviousNode(this.node,e),this.node}findSibling(e,t,n,o){if(e){if(!o&&e[t])return e[t];if(e!==this.rootNode){let t=e[n];if(t)return t;for(let o=e.parentNode;o&&o!==this.rootNode;o=o.parentNode)if(t=o[n],t)return t}}}findPreviousNode(e,t){if(e){const n=e.previousSibling;if(this.rootNode&&n===this.rootNode)return;if(n){if(!t)for(let e=n.lastChild;e;e=e.lastChild)if(!e.lastChild)return e;return n}const o=e.parentNode;if(o&&o!==this.rootNode)return o}}}const Ho=e=>t=>!!t&&t.nodeType===e,$o=e=>!!e&&!Object.getPrototypeOf(e),Vo=Ho(1),Wo=e=>{const t=e.toLowerCase();return e=>_(e)&&e.nodeName.toLowerCase()===t},qo=e=>{const t=e.map((e=>e.toLowerCase()));return e=>{if(e&&e.nodeName){const n=e.nodeName.toLowerCase();return q(t,n)}return!1}},Go=(e,t)=>{const n=t.toLowerCase().split(" ");return t=>{if(Vo(t)){const o=t.ownerDocument.defaultView;if(o)for(let r=0;r<n.length;r++){const s=o.getComputedStyle(t,null);if((s?s.getPropertyValue(e):null)===n[r])return!0}}return!1}},Ko=e=>t=>Vo(t)&&t.hasAttribute(e),Yo=e=>Vo(e)&&e.hasAttribute("data-mce-bogus"),Xo=e=>Vo(e)&&"TABLE"===e.tagName,Jo=e=>t=>{if(Vo(t)){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1},Qo=qo(["textarea","input"]),Zo=Ho(3),er=Ho(4),tr=Ho(7),nr=Ho(8),or=Ho(9),rr=Ho(11),sr=Wo("br"),ar=Wo("img"),ir=Jo("true"),lr=Jo("false"),cr=qo(["td","th"]),dr=qo(["td","th","caption"]),ur=qo(["video","audio","object","embed"]),mr=Wo("li"),pr="\ufeff",fr=" ",gr=e=>e===pr,hr=((e,t)=>{const n=t=>e(t)?U.from(t.dom.nodeValue):U.none();return{get:t=>{if(!e(t))throw new Error("Can only get text value of a text node");return n(t).getOr("")},getOption:n,set:(t,n)=>{if(!e(t))throw new Error("Can only set raw text value of a text node");t.dom.nodeValue=n}}})(Yt),vr=e=>hr.get(e),br=e=>hr.getOption(e),yr=["pre"].concat(["h1","h2","h3","h4","h5","h6"]),xr=e=>{let t;return n=>(t=t||ce(e,j),Oe(t,Wt(n)))},wr=xr(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),Cr=e=>Kt(e)&&!wr(e),Sr=e=>Kt(e)&&"br"===Wt(e),_r=xr(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),kr=xr(["ul","ol","dl"]),Er=xr(["li","dd","dt"]),Or=xr(["thead","tbody","tfoot"]),Tr=xr(["td","th"]),Ar=xr(["pre","script","textarea","style"]),Rr=xr(yr),Nr=e=>Rr(e)||Cr(e),Dr=()=>{const e=yn("br");return en(e,"data-mce-bogus","1"),e},Br=e=>{Co(e),yo(e,Dr())},Mr=e=>{Un(e).each((t=>{Mn(t).each((n=>{wr(e)&&Sr(t)&&wr(n)&&So(t)}))}))},Ir=pr,Pr=gr,Lr=e=>e.replace(/\uFEFF/g,""),Fr=Vo,zr=Zo,jr=e=>(zr(e)&&(e=e.parentNode),Fr(e)&&e.hasAttribute("data-mce-caret")),Ur=e=>zr(e)&&Pr(e.data),Hr=e=>jr(e)||Ur(e),$r=e=>e.firstChild!==e.lastChild||!sr(e.firstChild),Vr=e=>{const t=e.container();return!!Zo(t)&&(t.data.charAt(e.offset())===Ir||e.isAtStart()&&Ur(t.previousSibling))},Wr=e=>{const t=e.container();return!!Zo(t)&&(t.data.charAt(e.offset()-1)===Ir||e.isAtEnd()&&Ur(t.nextSibling))},qr=e=>zr(e)&&e.data[0]===Ir,Gr=e=>zr(e)&&e.data[e.data.length-1]===Ir,Kr=e=>e&&e.hasAttribute("data-mce-caret")?((e=>{var t;const n=e.getElementsByTagName("br"),o=n[n.length-1];Yo(o)&&(null===(t=o.parentNode)||void 0===t||t.removeChild(o))})(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,Yr=e=>jr(e.startContainer),Xr=ir,Jr=lr,Qr=sr,Zr=Zo,es=qo(["script","style","textarea"]),ts=qo(["img","input","textarea","hr","iframe","video","audio","object","embed"]),ns=qo(["table"]),os=Hr,rs=e=>!os(e)&&(Zr(e)?!es(e.parentNode):ts(e)||Qr(e)||ns(e)||ss(e)),ss=e=>!(e=>Vo(e)&&"true"===e.getAttribute("unselectable"))(e)&&Jr(e),as=(e,t)=>rs(e)&&((e,t)=>{for(let n=e.parentNode;n&&n!==t;n=n.parentNode){if(ss(n))return!1;if(Xr(n))return!0}return!0})(e,t),is=/^[ \t\r\n]*$/,ls=e=>is.test(e),cs=e=>"\n"===e||"\r"===e,ds=(e,t=4,n=!0,o=!0)=>{const r=((e,t)=>t<=0?"":new Array(t+1).join(" "))(0,t),s=e.replace(/\t/g,r),a=ee(s,((e,t)=>(e=>-1!==" \f\t\v".indexOf(e))(t)||t===fr?e.pcIsSpace||""===e.str&&n||e.str.length===s.length-1&&o||((e,t)=>t<e.length&&t>=0&&cs(e[t]))(s,e.str.length+1)?{pcIsSpace:!1,str:e.str+fr}:{pcIsSpace:!0,str:e.str+" "}:{pcIsSpace:cs(t),str:e.str+t}),{pcIsSpace:!1,str:""});return a.str},us=(e,t)=>rs(e)&&!((e,t)=>Zo(e)&&ls(e.data)&&!((e,t)=>{const n=wn(t),o=wn(e);return jo(o,"pre,code",M(En,n))})(e,t))(e,t)||(e=>Vo(e)&&"A"===e.nodeName&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")))(e)||ms(e),ms=Ko("data-mce-bookmark"),ps=Ko("data-mce-bogus"),fs=e=>Vo(e)&&"all"===e.getAttribute("data-mce-bogus"),gs=(e,t=!0)=>((e,t)=>{let n=0;if(us(e,e))return!1;{let o=e.firstChild;if(!o)return!0;const r=new Uo(o,e);do{if(t){if(fs(o)){o=r.next(!0);continue}if(ps(o)){o=r.next();continue}}if(sr(o))n++,o=r.next();else{if(us(o,e))return!1;o=r.next()}}while(o);return n<=1}})(e.dom,t),hs="data-mce-block",vs=e=>(e=>Q(he(e),(e=>!/[A-Z]/.test(e))))(e).join(","),bs=(e,t)=>_(t.querySelector(e))?(t.setAttribute(hs,"true"),"inline-boundary"===t.getAttribute("data-mce-selected")&&t.removeAttribute("data-mce-selected"),!0):(t.removeAttribute(hs),!1),ys=(e,t)=>{const n=vs(e.getTransparentElements()),o=vs(e.getBlockElements());return Q(t.querySelectorAll(n),(e=>bs(o,e)))},xs=(e,t)=>{var n;const o=t?"lastChild":"firstChild";for(let r=e[o];r;r=r[o])if(gs(wn(r)))return void(null===(n=r.parentNode)||void 0===n||n.removeChild(r))},ws=(e,t,n)=>{const o=e.getBlockElements(),r=wn(t),s=e=>Wt(e)in o,a=e=>En(e,r);Y(ko(n),(t=>{Zn(t,s,a).each((n=>{const o=((t,o)=>Q(Fn(t),(t=>s(t)&&!e.isValidChild(Wt(n),Wt(t)))))(t);if(o.length>0){const t=Dn(n);Y(o,(e=>{Zn(e,s,a).each((t=>{((e,t)=>{const n=document.createRange(),o=e.parentNode;if(o){n.setStartBefore(e),n.setEndBefore(t);const r=n.extractContents();xs(r,!0),n.setStartAfter(t),n.setEndAfter(e);const s=n.extractContents();xs(s,!1),gs(wn(r))||o.insertBefore(r,e),gs(wn(t))||o.insertBefore(t,e),gs(wn(s))||o.insertBefore(s,e),o.removeChild(e)}})(t.dom,e.dom)}))})),t.each((t=>ys(e,t.dom)))}}))}))},Cs=(e,t)=>{const n=ys(e,t);ws(e,t,n),((e,t,n)=>{Y([...n,...Os(e,t)?[t]:[]],(t=>Y(zo(wn(t),t.nodeName.toLowerCase()),(t=>{Ts(e,t.dom)&&_o(t)}))))})(e,t,n)},Ss=(e,t)=>{if(Es(e,t)){const n=vs(e.getBlockElements());bs(n,t)}},_s=e=>e.hasAttribute(hs),ks=(e,t)=>Oe(e.getTransparentElements(),t),Es=(e,t)=>Vo(t)&&ks(e,t.nodeName),Os=(e,t)=>Es(e,t)&&_s(t),Ts=(e,t)=>Es(e,t)&&!_s(t),As=(e,t)=>1===t.type&&ks(e,t.name)&&C(t.attr(hs)),Rs=Et().browser,Ns=e=>ne(e,Kt),Ds=(e,t)=>e.children&&q(e.children,t),Bs=(e,t={})=>{let n=0;const o={},r=wn(e),s=An(r),a=e=>new Promise(((a,i)=>{let l;const c=Lt._addCacheSuffix(e),d=(e=>Ee(o,e).getOrThunk((()=>({id:"mce-u"+n++,passed:[],failed:[],count:0}))))(c);o[c]=d,d.count++;const u=(e,t)=>{Y(e,F),d.status=t,d.passed=[],d.failed=[],l&&(l.onload=null,l.onerror=null,l=null)},m=()=>u(d.passed,2),p=()=>u(d.failed,3);if(a&&d.passed.push(a),i&&d.failed.push(i),1===d.status)return;if(2===d.status)return void m();if(3===d.status)return void p();d.status=1;const f=yn("link",s.dom);var g;tn(f,{rel:"stylesheet",type:"text/css",id:d.id}),t.contentCssCors&&en(f,"crossOrigin","anonymous"),t.referrerPolicy&&en(f,"referrerpolicy",t.referrerPolicy),l=f.dom,l.onload=m,l.onerror=p,g=f,yo(Gn(r),g),en(f,"href",c)})),i=e=>{const t=Lt._addCacheSuffix(e);Ee(o,t).each((e=>{0==--e.count&&(delete o[t],(e=>{const t=Gn(r);no(t,"#"+e).each(So)})(e.id))}))};return{load:a,loadAll:e=>Promise.allSettled(K(e,(e=>a(e).then(N(e))))).then((e=>{const t=J(e,(e=>"fulfilled"===e.status));return t.fail.length>0?Promise.reject(K(t.fail,(e=>e.reason))):K(t.pass,(e=>e.value))})),unload:i,unloadAll:e=>{Y(e,(e=>{i(e)}))},_setReferrerPolicy:e=>{t.referrerPolicy=e},_setContentCssCors:e=>{t.contentCssCors=e}}},Ms=(()=>{const e=new WeakMap;return{forElement:(t,n)=>{const o=qn(t).dom;return U.from(e.get(o)).getOrThunk((()=>{const t=Bs(o,n);return e.set(o,t),t}))}}})(),Is=(e,t)=>_(e)&&(us(e,t)||Cr(wn(e))),Ps=e=>(e=>"span"===e.nodeName.toLowerCase())(e)&&"bookmark"===e.getAttribute("data-mce-type"),Ls=(e,t,n)=>{var o;const r=n||t;if(Vo(t)&&Ps(t))return t;const s=t.childNodes;for(let a=s.length-1;a>=0;a--)Ls(e,s[a],r);if(Vo(t)){const e=t.childNodes;1===e.length&&Ps(e[0])&&(null===(o=t.parentNode)||void 0===o||o.insertBefore(e[0],t))}return(e=>rr(e)||or(e))(t)||us(t,r)||(e=>!!Vo(e)&&e.childNodes.length>0)(t)||((e,t)=>Zo(e)&&e.data.length>0&&((e,t)=>{const n=new Uo(e,t).prev(!1),o=new Uo(e,t).next(!1),r=C(n)||Is(n,t),s=C(o)||Is(o,t);return r&&s})(e,t))(t,r)||e.remove(t),t},Fs=Lt.makeMap,zs=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,js=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Us=/[<>&\"\']/g,Hs=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,$s={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},Vs={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Ws={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},qs=(e,t)=>{const n={};if(e){const o=e.split(",");t=t||10;for(let e=0;e<o.length;e+=2){const r=String.fromCharCode(parseInt(o[e],t));if(!Vs[r]){const t="&"+o[e+1]+";";n[r]=t,n[t]=r}}return n}},Gs=qs("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Ks=(e,t)=>e.replace(t?zs:js,(e=>Vs[e]||e)),Ys=(e,t)=>e.replace(t?zs:js,(e=>e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":Vs[e]||"&#"+e.charCodeAt(0)+";")),Xs=(e,t,n)=>{const o=n||Gs;return e.replace(t?zs:js,(e=>Vs[e]||o[e]||e))},Js={encodeRaw:Ks,encodeAllRaw:e=>(""+e).replace(Us,(e=>Vs[e]||e)),encodeNumeric:Ys,encodeNamed:Xs,getEncodeFunc:(e,t)=>{const n=qs(t)||Gs,o=Fs(e.replace(/\+/g,","));return o.named&&o.numeric?(e,t)=>e.replace(t?zs:js,(e=>void 0!==Vs[e]?Vs[e]:void 0!==n[e]?n[e]:e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":"&#"+e.charCodeAt(0)+";")):o.named?t?(e,t)=>Xs(e,t,n):Xs:o.numeric?Ys:Ks},decode:e=>e.replace(Hs,((e,t)=>t?(t="x"===t.charAt(0).toLowerCase()?parseInt(t.substr(1),16):parseInt(t,10))>65535?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):$s[t]||String.fromCharCode(t):Ws[e]||Gs[e]||(e=>{const t=yn("div").dom;return t.innerHTML=e,t.textContent||t.innerText||e})(e)))},Qs={},Zs={},ea={},ta=Lt.makeMap,na=Lt.each,oa=Lt.extend,ra=Lt.explode,sa=Lt.inArray,aa=(e,t)=>(e=Lt.trim(e))?e.split(t||" "):[],ia=(e,t={})=>{const n=ta(e," ",ta(e.toUpperCase()," "));return oa(n,t)},la=e=>ia("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),ca=(e,t)=>{if(e){const n={};return h(e)&&(e={"*":e}),na(e,((e,o)=>{n[o]=n[o.toUpperCase()]="map"===t?ta(e,/[, ]/):ra(e,/[, ]/)})),n}},da=(e={})=>{var t;const n={},o={};let r=[];const s={},a={},i=(t,n,o)=>{const r=e[t];if(r)return ta(r,/[, ]/,ta(r.toUpperCase(),/[, ]/));{let e=Zs[t];return e||(e=ia(n,o),Zs[t]=e),e}},l=null!==(t=e.schema)&&void 0!==t?t:"html5",c=(e=>{const t={};let n,o,r,s;const a=(e,o="",r="")=>{const s=aa(r),a=aa(e);let i=a.length;for(;i--;){const e=aa([n,o].join(" "));t[a[i]]={attributes:ce(e,(()=>({}))),attributesOrder:e,children:ce(s,N(ea))}}},i=(e,n)=>{const o=aa(e),r=aa(n);let s=o.length;for(;s--;){const e=t[o[s]];for(let t=0,n=r.length;t<n;t++)e.attributes[r[t]]={},e.attributesOrder.push(r[t])}};if(Qs[e])return Qs[e];if(n="id accesskey class dir lang style tabindex title role",o="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",r="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==e&&(n+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",o+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",r+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==e){n+=" xml:lang";const e="acronym applet basefont big font strike tt";r=[r,e].join(" "),na(aa(e),(e=>{a(e,"",r)}));const t="center dir isindex noframes";o=[o,t].join(" "),s=[o,r].join(" "),na(aa(t),(e=>{a(e,"",s)}))}return s=s||[o,r].join(" "),a("html","manifest","head body"),a("head","","base command link meta noscript script style title"),a("title hr noscript br"),a("base","href target"),a("link","href rel media hreflang type sizes hreflang"),a("meta","name http-equiv content charset"),a("style","media type scoped"),a("script","src async defer type charset"),a("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",s),a("address dt dd div caption","",s),a("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",r),a("blockquote","cite",s),a("ol","reversed start type","li"),a("ul","","li"),a("li","value",s),a("dl","","dt dd"),a("a","href target rel media hreflang type",s),a("q","cite",r),a("ins del","cite datetime",s),a("img","src sizes srcset alt usemap ismap width height"),a("iframe","src name width height",s),a("embed","src type width height"),a("object","data type typemustmatch name usemap form width height",[s,"param"].join(" ")),a("param","name value"),a("map","name",[s,"area"].join(" ")),a("area","alt coords shape href target rel media hreflang type"),a("table","border","caption colgroup thead tfoot tbody tr"+("html4"===e?" col":"")),a("colgroup","span","col"),a("col","span"),a("tbody thead tfoot","","tr"),a("tr","","td th"),a("td","colspan rowspan headers",s),a("th","colspan rowspan headers scope abbr",s),a("form","accept-charset action autocomplete enctype method name novalidate target",s),a("fieldset","disabled form name",[s,"legend"].join(" ")),a("label","form for",r),a("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),a("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===e?s:r),a("select","disabled form multiple name required size","option optgroup"),a("optgroup","disabled label","option"),a("option","disabled label selected value"),a("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),a("menu","type label",[s,"li"].join(" ")),a("noscript","",s),"html4"!==e&&(a("wbr"),a("ruby","",[r,"rt rp"].join(" ")),a("figcaption","",s),a("mark rt rp summary bdi","",r),a("canvas","width height",s),a("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[s,"track source"].join(" ")),a("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[s,"track source"].join(" ")),a("picture","","img source"),a("source","src srcset type media sizes"),a("track","kind src srclang label default"),a("datalist","",[r,"option"].join(" ")),a("article section nav aside main header footer","",s),a("hgroup","","h1 h2 h3 h4 h5 h6"),a("figure","",[s,"figcaption"].join(" ")),a("time","datetime",r),a("dialog","open",s),a("command","type label icon disabled checked radiogroup command"),a("output","for form name",r),a("progress","value max",r),a("meter","value min max low high optimum",r),a("details","open",[s,"summary"].join(" ")),a("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==e&&(i("script","language xml:space"),i("style","xml:space"),i("object","declare classid code codebase codetype archive standby align border hspace vspace"),i("embed","align name hspace vspace"),i("param","valuetype type"),i("a","charset name rev shape coords"),i("br","clear"),i("applet","codebase archive code object alt name width height align hspace vspace"),i("img","name longdesc align border hspace vspace"),i("iframe","longdesc frameborder marginwidth marginheight scrolling align"),i("font basefont","size color face"),i("input","usemap align"),i("select"),i("textarea"),i("h1 h2 h3 h4 h5 h6 div p legend caption","align"),i("ul","type compact"),i("li","type"),i("ol dl menu dir","compact"),i("pre","width xml:space"),i("hr","align noshade size width"),i("isindex","prompt"),i("table","summary width frame rules cellspacing cellpadding align bgcolor"),i("col","width align char charoff valign"),i("colgroup","width align char charoff valign"),i("thead","align char charoff valign"),i("tr","align char charoff valign bgcolor"),i("th","axis align char charoff valign nowrap bgcolor width height"),i("form","accept"),i("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),i("tfoot","align char charoff valign"),i("tbody","align char charoff valign"),i("area","nohref"),i("body","background bgcolor text link vlink alink")),"html4"!==e&&(i("input button select textarea","autofocus"),i("input textarea","placeholder"),i("a","download"),i("link script img","crossorigin"),i("img","loading"),i("iframe","sandbox seamless allow allowfullscreen loading")),"html4"!==e&&Y([t.video,t.audio],(e=>{delete e.children.audio,delete e.children.video})),na(aa("a form meter progress dfn"),(e=>{t[e]&&delete t[e].children[e]})),delete t.caption.children.table,delete t.script,Qs[e]=t,t})(l);!1===e.verify_html&&(e.valid_elements="*[*]");const d=ca(e.valid_styles),u=ca(e.invalid_styles,"map"),m=ca(e.valid_classes,"map"),p=i("whitespace_elements","pre script noscript style textarea video audio iframe object code"),f=i("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),g=i("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),h=i("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),v="td th iframe video audio object script code",b=i("non_empty_elements",v+" pre",g),y=i("move_caret_before_on_enter_elements",v+" table",g),x=i("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),w=i("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",x),C=i("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),S=i("transparent_elements","a ins del canvas map");na("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),(e=>{a[e]=new RegExp("</"+e+"[^>]*>","gi")}));const _=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),k=e=>{const t=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,o=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,s=/[*?+]/;if(e){const a=aa(e,",");let i,l;n["@"]&&(i=n["@"].attributes,l=n["@"].attributesOrder);for(let e=0,c=a.length;e<c;e++){let c=t.exec(a[e]);if(c){const e=c[1],t=c[2],a=c[3],d=c[5],u={},m=[],p={attributes:u,attributesOrder:m};if("#"===e&&(p.paddEmpty=!0),"-"===e&&(p.removeEmpty=!0),"!"===c[4]&&(p.removeEmptyAttrs=!0),i&&(be(i,((e,t)=>{u[t]=e})),l&&m.push(...l)),d){const e=aa(d,"|");for(let t=0,n=e.length;t<n;t++)if(c=o.exec(e[t]),c){const e={},t=c[1],n=c[2].replace(/[\\:]:/g,":"),o=c[3],r=c[4];if("!"===t&&(p.attributesRequired=p.attributesRequired||[],p.attributesRequired.push(n),e.required=!0),"-"===t){delete u[n],m.splice(sa(m,n),1);continue}if(o&&("="===o&&(p.attributesDefault=p.attributesDefault||[],p.attributesDefault.push({name:n,value:r}),e.defaultValue=r),"~"===o&&(p.attributesForced=p.attributesForced||[],p.attributesForced.push({name:n,value:r}),e.forcedValue=r),"<"===o&&(e.validValues=ta(r,"?"))),s.test(n)){const t=e;p.attributePatterns=p.attributePatterns||[],t.pattern=_(n),p.attributePatterns.push(t)}else u[n]||m.push(n),u[n]=e}}if(i||"@"!==t||(i=u,l=m),a&&(p.outputName=t,n[a]=p),s.test(t)){const e=p;e.pattern=_(t),r.push(e)}else n[t]=p}}}},E=e=>{r=[],Y(he(n),(e=>{delete n[e]})),k(e),na(c,((e,t)=>{o[t]=e.children}))},O=e=>{const t=/^(~)?(.+)$/;e&&(delete Zs.text_block_elements,delete Zs.block_elements,na(aa(e,","),(e=>{const r=t.exec(e);if(r){const e="~"===r[1],t=e?"span":"div",a=r[2];if(o[a]=o[t],s[a]=t,b[a.toUpperCase()]={},b[a]={},e||(w[a.toUpperCase()]={},w[a]={}),!n[a]){let e=n[t];e=oa({},e),delete e.removeEmptyAttrs,delete e.removeEmpty,n[a]=e}na(o,((e,n)=>{e[t]&&(o[n]=e=oa({},o[n]),e[a]=e[t])}))}})))},T=e=>{const t=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;delete Qs[l],e&&na(aa(e,","),(e=>{const n=t.exec(e);if(n){const e=n[1];let t;t=e?o[n[2]]:o[n[2]]={"#comment":{}},t=o[n[2]],na(aa(n[3],"|"),(n=>{"-"===e?delete t[n]:t[n]={}}))}}))},A=e=>{const t=n[e];if(t)return t;let o=r.length;for(;o--;){const t=r[o];if(t.pattern.test(e))return t}};e.valid_elements?E(e.valid_elements):(na(c,((e,t)=>{n[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},o[t]=e.children})),na(aa("strong/b em/i"),(e=>{const t=aa(e,"/");n[t[1]].outputName=t[0]})),na(C,((t,o)=>{n[o]&&(e.padd_empty_block_inline_children&&(n[o].paddInEmptyBlock=!0),n[o].removeEmpty=!0)})),na(aa("ol ul blockquote a table tbody"),(e=>{n[e]&&(n[e].removeEmpty=!0)})),na(aa("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),(e=>{n[e].paddEmpty=!0})),na(aa("span"),(e=>{n[e].removeEmptyAttrs=!0}))),O(e.custom_elements),T(e.valid_children),k(e.extended_valid_elements),T("+ol[ul|ol],+ul[ul|ol]"),na({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},((e,t)=>{n[t]&&(n[t].parentsRequired=aa(e))})),e.invalid_elements&&na(ra(e.invalid_elements),(e=>{n[e]&&delete n[e]})),A("span")||k("span[!data-mce-type|*]");const R=N(d),D=N(u),B=N(m),M=N(h),I=N(w),P=N(x),L=N(C),F=N(Object.seal(g)),z=N(f),j=N(b),U=N(y),H=N(p),$=N(S),V=N(Object.seal(a)),W=N(s);return{type:l,children:o,elements:n,getValidStyles:R,getValidClasses:B,getBlockElements:I,getInvalidStyles:D,getVoidElements:F,getTextBlockElements:P,getTextInlineElements:L,getBoolAttrs:M,getElementRule:A,getSelfClosingElements:z,getNonEmptyElements:j,getMoveCaretBeforeOnEnterElements:U,getWhitespaceElements:H,getTransparentElements:$,getSpecialElements:V,isValidChild:(e,t)=>{const n=o[e.toLowerCase()];return!(!n||!n[t.toLowerCase()])},isValid:(e,t)=>{const n=A(e);if(n){if(!t)return!0;{if(n.attributes[t])return!0;const e=n.attributePatterns;if(e){let n=e.length;for(;n--;)if(e[n].pattern.test(t))return!0}}}return!1},getCustomElements:W,addValidElements:k,setValidElements:E,addCustomElements:O,addValidChildren:T}},ua=(e={},t)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,o=/\s*([^:]+):\s*([^;]+);?/g,r=/\s+$/,s={};let a,i;t&&(a=t.getValidStyles(),i=t.getInvalidStyles());const l="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(let d=0;d<l.length;d++)s[l[d]]="\ufeff"+d,s["\ufeff"+d]=l[d];const c={parse:t=>{const a={};let i=!1;const l=e.url_converter,d=e.url_converter_scope||c,u=(e,t,n)=>{const o=a[e+"-top"+t];if(!o)return;const r=a[e+"-right"+t];if(!r)return;const s=a[e+"-bottom"+t];if(!s)return;const i=a[e+"-left"+t];if(!i)return;const l=[o,r,s,i];let c=l.length-1;for(;c--&&l[c]===l[c+1];);c>-1&&n||(a[e+t]=-1===c?l[0]:l.join(" "),delete a[e+"-top"+t],delete a[e+"-right"+t],delete a[e+"-bottom"+t],delete a[e+"-left"+t])},m=e=>{const t=a[e];if(!t)return;const n=t.split(" ");let o=n.length;for(;o--;)if(n[o]!==n[0])return!1;return a[e]=n[0],!0},p=e=>(i=!0,s[e]),f=(e,t)=>(i&&(e=e.replace(/\uFEFF[0-9]/g,(e=>s[e]))),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e),g=e=>String.fromCharCode(parseInt(e.slice(1),16)),h=e=>e.replace(/\\[0-9a-f]+/gi,g),v=(t,n,o,r,s,a)=>{if(s=s||a)return"'"+(s=f(s)).replace(/\'/g,"\\'")+"'";if(n=f(n||o||r||""),!e.allow_script_urls){const t=n.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(t))return"";if(!e.allow_svg_data_urls&&/^data:image\/svg/i.test(t))return""}return l&&(n=l.call(d,n,"style")),"url('"+n.replace(/\'/g,"\\'")+"')"};if(t){let s;for(t=(t=t.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,p).replace(/\"[^\"]+\"|\'[^\']+\'/g,(e=>e.replace(/[;:]/g,p)));s=o.exec(t);){o.lastIndex=s.index+s[0].length;let t=s[1].replace(r,"").toLowerCase(),l=s[2].replace(r,"");if(t&&l){if(t=h(t),l=h(l),-1!==t.indexOf("\ufeff")||-1!==t.indexOf('"'))continue;if(!e.allow_script_urls&&("behavior"===t||/expression\s*\(|\/\*|\*\//.test(l)))continue;"font-weight"===t&&"700"===l?l="bold":"color"!==t&&"background-color"!==t||(l=l.toLowerCase()),l=l.replace(n,v),a[t]=i?f(l,!0):l}}u("border","",!0),u("border","-width"),u("border","-color"),u("border","-style"),u("padding",""),u("margin",""),y="border-style",x="border-color",m(b="border-width")&&m(y)&&m(x)&&(a.border=a[b]+" "+a[y]+" "+a[x],delete a[b],delete a[y],delete a[x]),"medium none"===a.border&&delete a.border,"none"===a["border-image"]&&delete a["border-image"]}var b,y,x;return a},serialize:(e,t)=>{let n="";const o=(t,o)=>{const r=o[t];if(r)for(let s=0,a=r.length;s<a;s++){const t=r[s],o=e[t];o&&(n+=(n.length>0?" ":"")+t+": "+o+";")}};return t&&a?(o("*",a),o(t,a)):be(e,((e,o)=>{e&&((e,t)=>{if(!i||!t)return!0;let n=i["*"];return!(n&&n[e]||(n=i[t],n&&n[e]))})(o,t)&&(n+=(n.length>0?" ":"")+o+": "+e+";")})),n}};return c},ma={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},pa=(e,t)=>{const n=null!=t?t:{};for(const o in e)Oe(ma,o)||(n[o]=e[o]);return _(e.composedPath)&&(n.composedPath=()=>e.composedPath()),n},fa=(e,t,n,o)=>{var r;const s=pa(t,o);return s.type=e,S(s.target)&&(s.target=null!==(r=s.srcElement)&&void 0!==r?r:n),(e=>S(e.preventDefault)||(e=>e instanceof Event||k(e.initEvent))(e))(t)&&(s.preventDefault=()=>{s.defaultPrevented=!0,s.isDefaultPrevented=j,k(t.preventDefault)&&t.preventDefault()},s.stopPropagation=()=>{s.cancelBubble=!0,s.isPropagationStopped=j,k(t.stopPropagation)&&t.stopPropagation()},s.stopImmediatePropagation=()=>{s.isImmediatePropagationStopped=j,s.stopPropagation()},(e=>e.isDefaultPrevented===j||e.isDefaultPrevented===z)(s)||(s.isDefaultPrevented=!0===s.defaultPrevented?j:z,s.isPropagationStopped=!0===s.cancelBubble?j:z,s.isImmediatePropagationStopped=z)),s},ga=/^(?:mouse|contextmenu)|click/,ha=(e,t,n,o)=>{e.addEventListener(t,n,o||!1)},va=(e,t,n,o)=>{e.removeEventListener(t,n,o||!1)},ba=(e,t)=>{const n=fa(e.type,e,document,t);if((e=>_(e)&&ga.test(e.type))(e)&&C(e.pageX)&&!C(e.clientX)){const t=n.target.ownerDocument||document,o=t.documentElement,r=t.body,s=n;s.pageX=e.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),s.pageY=e.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)}return n},ya=(e,t,n)=>{const o=e.document,r={type:"ready"};if(n.domLoaded)return void t(r);const s=()=>{va(e,"DOMContentLoaded",s),va(e,"load",s),n.domLoaded||(n.domLoaded=!0,t(r)),e=null};"complete"===o.readyState||"interactive"===o.readyState&&o.body?s():ha(e,"DOMContentLoaded",s),n.domLoaded||ha(e,"load",s)};class xa{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(e,t,n,o){const r=this;let s;const a=window,i=e=>{r.executeHandlers(ba(e||a.event),l)};if(!e||Zo(e)||nr(e))return n;let l;e[r.expando]?l=e[r.expando]:(l=r.count++,e[r.expando]=l,r.events[l]={}),o=o||e;const c=t.split(" ");let d=c.length;for(;d--;){let t=c[d],u=i,m=!1,p=!1;"DOMContentLoaded"===t&&(t="ready"),r.domLoaded&&"ready"===t&&"complete"===e.readyState?n.call(o,ba({type:t})):(r.hasFocusIn||"focusin"!==t&&"focusout"!==t||(m=!0,p="focusin"===t?"focus":"blur",u=e=>{const t=ba(e||a.event);t.type="focus"===t.type?"focusin":"focusout",r.executeHandlers(t,l)}),s=r.events[l][t],s?"ready"===t&&r.domLoaded?n(ba({type:t})):s.push({func:n,scope:o}):(r.events[l][t]=s=[{func:n,scope:o}],s.fakeName=p,s.capture=m,s.nativeHandler=u,"ready"===t?ya(e,u,r):ha(e,p||t,u,m)))}return e=s=null,n}unbind(e,t,n){if(!e||Zo(e)||nr(e))return this;const o=e[this.expando];if(o){let r=this.events[o];if(t){const o=t.split(" ");let s=o.length;for(;s--;){const t=o[s],a=r[t];if(a){if(n){let e=a.length;for(;e--;)if(a[e].func===n){const n=a.nativeHandler,o=a.fakeName,s=a.capture,i=a.slice(0,e).concat(a.slice(e+1));i.nativeHandler=n,i.fakeName=o,i.capture=s,r[t]=i}}n&&0!==a.length||(delete r[t],va(e,a.fakeName||t,a.nativeHandler,a.capture))}}}else be(r,((t,n)=>{va(e,t.fakeName||n,t.nativeHandler,t.capture)})),r={};for(const e in r)if(Oe(r,e))return this;delete this.events[o];try{delete e[this.expando]}catch(t){e[this.expando]=null}}return this}fire(e,t,n){return this.dispatch(e,t,n)}dispatch(e,t,n){if(!e||Zo(e)||nr(e))return this;const o=ba({type:t,target:e},n);do{const t=e[this.expando];t&&this.executeHandlers(o,t),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!o.isPropagationStopped());return this}clean(e){if(!e||Zo(e)||nr(e))return this;if(e[this.expando]&&this.unbind(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName){this.unbind(e);const t=e.getElementsByTagName("*");let n=t.length;for(;n--;)(e=t[n])[this.expando]&&this.unbind(e)}return this}destroy(){this.events={}}cancel(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}executeHandlers(e,t){const n=this.events[t],o=n&&n[e.type];if(o)for(let r=0,s=o.length;r<s;r++){const t=o[r];if(t&&!1===t.func.call(t.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return}}}xa.Event=new xa;const wa=Lt.each,Ca=Lt.grep,Sa="data-mce-style",_a=Lt.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),ka=(e,t,n)=>{S(n)||""===n?sn(e,t):en(e,t,n)},Ea=e=>e.replace(/[A-Z]/g,(e=>"-"+e.toLowerCase())),Oa=(e,t)=>{let n=0;if(e)for(let o=e.nodeType,r=e.previousSibling;r;r=r.previousSibling){const e=r.nodeType;(!t||!Zo(r)||e!==o&&r.data.length)&&(n++,o=e)}return n},Ta=(e,t)=>{const n=nn(t,"style"),o=e.serialize(e.parse(n),Wt(t));ka(t,Sa,o)},Aa=(e,t,n)=>{const o=Ea(t);S(n)||""===n?go(e,o):lo(e,o,((e,t)=>E(e)?Oe(_a,t)?e+"":e+"px":e)(n,o))},Ra=(e,t={})=>{const n={},o=window,r={};let s=0;const a=Ms.forElement(wn(e),{contentCssCors:t.contentCssCors,referrerPolicy:t.referrerPolicy}),i=[],l=t.schema?t.schema:da({}),c=ua({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),d=t.ownEvents?new xa:xa.Event,u=l.getBlockElements(),m=t=>t&&e&&h(t)?e.getElementById(t):t,p=e=>{const t=m(e);return _(t)?wn(t):null},f=(e,t,n="")=>{let o;const r=p(e);if(_(r)&&Kt(r)){const e=K[t];o=e&&e.get?e.get(r.dom,t):nn(r,t)}return _(o)?o:n},g=e=>{const t=m(e);return S(t)?[]:t.attributes},v=(e,n,o)=>{R(e,(e=>{if(Vo(e)){const r=wn(e),s=""===o?null:o,a=nn(r,n),i=K[n];i&&i.set?i.set(r.dom,s,n):ka(r,n,s),a!==s&&t.onSetAttrib&&t.onSetAttrib({attrElm:r.dom,attrName:n,attrValue:s})}}))},b=()=>t.root_element||e.body,x=(t,n)=>((e,t,n)=>{let o=0,r=0;const s=e.ownerDocument;if(n=n||e,t){if(n===e&&t.getBoundingClientRect&&"static"===uo(wn(e),"position")){const n=t.getBoundingClientRect();return o=n.left+(s.documentElement.scrollLeft||e.scrollLeft)-s.documentElement.clientLeft,r=n.top+(s.documentElement.scrollTop||e.scrollTop)-s.documentElement.clientTop,{x:o,y:r}}let a=t;for(;a&&a!==n&&a.nodeType&&!Ds(a,n);){const e=a;o+=e.offsetLeft||0,r+=e.offsetTop||0,a=e.offsetParent}for(a=t.parentNode;a&&a!==n&&a.nodeType&&!Ds(a,n);)o-=a.scrollLeft||0,r-=a.scrollTop||0,a=a.parentNode;r+=(e=>Rs.isFirefox()&&"table"===Wt(e)?Ns(Fn(e)).filter((e=>"caption"===Wt(e))).bind((e=>Ns(Ln(e)).map((t=>{const n=t.dom.offsetTop,o=e.dom.offsetTop,r=e.dom.offsetHeight;return n<=o?-r:0})))).getOr(0):0)(wn(t))}return{x:o,y:r}})(e.body,m(t),n),w=(e,t,n)=>{const o=m(e);if(!S(o)&&Vo(o))return n?uo(wn(o),Ea(t)):("float"===(t=t.replace(/-(\D)/g,((e,t)=>t.toUpperCase())))&&(t="cssFloat"),o.style?o.style[t]:void 0)},C=e=>{const t=m(e);if(!t)return{w:0,h:0};let n=w(t,"width"),o=w(t,"height");return n&&-1!==n.indexOf("px")||(n="0"),o&&-1!==o.indexOf("px")||(o="0"),{w:parseInt(n,10)||t.offsetWidth||t.clientWidth,h:parseInt(o,10)||t.offsetHeight||t.clientHeight}},E=(e,t)=>{if(!e)return!1;const n=y(e)?e:[e];return G(n,(e=>_n(wn(e),t)))},O=(e,t,n,o)=>{const r=[];let s=m(e);o=void 0===o;const a=n||("BODY"!==b().nodeName?b().parentNode:null);if(h(t))if("*"===t)t=Vo;else{const e=t;t=t=>E(t,e)}for(;s&&!(s===a||S(s.nodeType)||or(s)||rr(s));){if(!t||t(s)){if(!o)return[s];r.push(s)}s=s.parentNode}return o?r:null},A=(e,t,n)=>{let o=t;if(e){h(t)&&(o=e=>E(e,t));for(let t=e[n];t;t=t[n])if(k(o)&&o(t))return t}return null},R=function(e,t,n){const o=null!=n?n:this;if(y(e)){const n=[];return wa(e,((e,r)=>{const s=m(e);s&&n.push(t.call(o,s,r))})),n}{const n=m(e);return!!n&&t.call(o,n)}},D=(e,t)=>{R(e,(e=>{be(t,((t,n)=>{v(e,n,t)}))}))},B=(e,t)=>{R(e,(e=>{const n=wn(e);Oo(n,t)}))},M=(t,n,o,r,s)=>R(t,(t=>{const a=h(n)?e.createElement(n):n;return _(o)&&D(a,o),r&&(!h(r)&&r.nodeType?a.appendChild(r):h(r)&&B(a,r)),s?a:t.appendChild(a)})),I=(t,n,o)=>M(e.createElement(t),t,n,o,!0),P=Js.encodeAllRaw,L=(e,t)=>R(e,(e=>{const n=wn(e);return t&&Y(Fn(n),(e=>{Yt(e)&&0===e.dom.length?So(e):ho(n,e)})),So(n),n.dom})),F=(e,t,n)=>{R(e,(e=>{if(Vo(e)){const o=wn(e),r=t.split(" ");Y(r,(e=>{_(n)?(n?pn:gn)(o,e):((e,t)=>{cn(e)?e.dom.classList.toggle(t):((e,t)=>{q(dn(e),t)?mn(e,t):un(e,t)})(e,t);fn(e)})(o,e)}))}}))},z=(e,t,n)=>R(t,(o=>{var r;const s=y(t)?e.cloneNode(!0):e;return n&&wa(Ca(o.childNodes),(e=>{s.appendChild(e)})),null===(r=o.parentNode)||void 0===r||r.replaceChild(s,o),o})),j=e=>{if(Vo(e)){const t="a"===e.nodeName.toLowerCase()&&!f(e,"href")&&f(e,"id");if(f(e,"name")||f(e,"data-mce-bookmark")||t)return!0}return!1},U=()=>e.createRange(),H=(n,r,s,a)=>{if(y(n)){let e=n.length;const t=[];for(;e--;)t[e]=H(n[e],r,s,a);return t}return!t.collect||n!==e&&n!==o||i.push([n,r,s,a]),d.bind(n,r,s,a||W)},$=(t,n,r)=>{if(y(t)){let e=t.length;const o=[];for(;e--;)o[e]=$(t[e],n,r);return o}if(i.length>0&&(t===e||t===o)){let e=i.length;for(;e--;){const[o,s,a]=i[e];t!==o||n&&n!==s||r&&r!==a||d.unbind(o,s,a)}}return d.unbind(t,n,r)},V=e=>{if(e&&Vo(e)){const t=e.getAttribute("data-mce-contenteditable");return t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null}return null},W={doc:e,settings:t,win:o,files:r,stdMode:!0,boxModel:!0,styleSheetLoader:a,boundEvents:i,styles:c,schema:l,events:d,isBlock:e=>h(e)?Oe(u,e):Vo(e)&&(Oe(u,e.nodeName)||Os(l,e)),root:null,clone:(e,t)=>e.cloneNode(t),getRoot:b,getViewPort:e=>{const t=Lo(e);return{x:t.x,y:t.y,w:t.width,h:t.height}},getRect:e=>{const t=m(e),n=x(t),o=C(t);return{x:n.x,y:n.y,w:o.w,h:o.h}},getSize:C,getParent:(e,t,n)=>{const o=O(e,t,n,!1);return o&&o.length>0?o[0]:null},getParents:O,get:m,getNext:(e,t)=>A(e,t,"nextSibling"),getPrev:(e,t)=>A(e,t,"previousSibling"),select:(n,o)=>{var r,s;const a=null!==(s=null!==(r=m(o))&&void 0!==r?r:t.root_element)&&void 0!==s?s:e;return k(a.querySelectorAll)?fe(a.querySelectorAll(n)):[]},is:E,add:M,create:I,createHTML:(e,t,n="")=>{let o="<"+e;for(const r in t)Te(t,r)&&(o+=" "+r+'="'+P(t[r])+'"');return Ze(n)&&Oe(l.getVoidElements(),e)?o+" />":o+">"+n+"</"+e+">"},createFragment:t=>{const n=e.createElement("div"),o=e.createDocumentFragment();let r;for(o.appendChild(n),t&&(n.innerHTML=t);r=n.firstChild;)o.appendChild(r);return o.removeChild(n),o},remove:L,setStyle:(e,n,o)=>{R(e,(e=>{const r=wn(e);Aa(r,n,o),t.update_styles&&Ta(c,r)}))},getStyle:w,setStyles:(e,n)=>{R(e,(e=>{const o=wn(e);be(n,((e,t)=>{Aa(o,t,e)})),t.update_styles&&Ta(c,o)}))},removeAllAttribs:e=>R(e,(e=>{const t=e.attributes;for(let n=t.length-1;n>=0;n--)e.removeAttributeNode(t.item(n))})),setAttrib:v,setAttribs:D,getAttrib:f,getPos:x,parseStyle:e=>c.parse(e),serializeStyle:(e,t)=>c.serialize(e,t),addStyle:t=>{if(W!==Ra.DOM&&e===document){if(n[t])return;n[t]=!0}let o=e.getElementById("mceDefaultStyles");if(!o){o=e.createElement("style"),o.id="mceDefaultStyles",o.type="text/css";const t=e.head;t.firstChild?t.insertBefore(o,t.firstChild):t.appendChild(o)}o.styleSheet?o.styleSheet.cssText+=t:o.appendChild(e.createTextNode(t))},loadCSS:e=>{e||(e=""),Y(e.split(","),(e=>{r[e]=!0,a.load(e).catch(T)}))},addClass:(e,t)=>{F(e,t,!0)},removeClass:(e,t)=>{F(e,t,!1)},hasClass:(e,t)=>{const n=p(e),o=t.split(" ");return _(n)&&ae(o,(e=>hn(n,e)))},toggleClass:F,show:e=>{R(e,(e=>go(wn(e),"display")))},hide:e=>{R(e,(e=>lo(wn(e),"display","none")))},isHidden:e=>{const t=p(e);return _(t)&&Ft(po(t,"display"),"none")},uniqueId:e=>(e||"mce_")+s++,setHTML:B,getOuterHTML:e=>{const t=p(e);return _(t)?Vo(t.dom)?t.dom.outerHTML:(e=>{const t=yn("div"),n=wn(e.dom.cloneNode(!0));return yo(t,n),Eo(t)})(t):""},setOuterHTML:(e,t)=>{R(e,(e=>{Vo(e)&&(e.outerHTML=t)}))},decode:Js.decode,encode:P,insertAfter:(e,t)=>{const n=m(t);return R(e,(e=>{const t=null==n?void 0:n.parentNode,o=null==n?void 0:n.nextSibling;return t&&(o?t.insertBefore(e,o):t.appendChild(e)),e}))},replace:z,rename:(e,t)=>{if(e.nodeName!==t.toUpperCase()){const n=I(t);return wa(g(e),(t=>{v(n,t.nodeName,f(e,t.nodeName))})),z(n,e,!0),n}return e},findCommonAncestor:(e,t)=>{let n=e;for(;n;){let e=t;for(;e&&n!==e;)e=e.parentNode;if(n===e)break;n=n.parentNode}return!n&&e.ownerDocument?e.ownerDocument.documentElement:n},run:R,getAttribs:g,isEmpty:(e,t)=>{let n=0;if(j(e))return!1;const o=e.firstChild;if(o){const r=new Uo(o,e),s=l?l.getWhitespaceElements():{},a=t||(l?l.getNonEmptyElements():null);let i=o;do{if(Vo(i)){const e=i.getAttribute("data-mce-bogus");if(e){i=r.next("all"===e);continue}const t=i.nodeName.toLowerCase();if(a&&a[t]){if("br"===t){n++,i=r.next();continue}return!1}if(j(i))return!1}if(nr(i))return!1;if(Zo(i)&&!ls(i.data))return!1;if(Zo(i)&&i.parentNode&&s[i.parentNode.nodeName]&&ls(i.data))return!1;i=r.next()}while(i)}return n<=1},createRng:U,nodeIndex:Oa,split:(e,t,n)=>{let o,r,s=U();if(e&&t&&e.parentNode&&t.parentNode){const a=e.parentNode;return s.setStart(a,Oa(e)),s.setEnd(t.parentNode,Oa(t)),o=s.extractContents(),s=U(),s.setStart(t.parentNode,Oa(t)+1),s.setEnd(a,Oa(e)+1),r=s.extractContents(),a.insertBefore(Ls(W,o),e),n?a.insertBefore(n,e):a.insertBefore(t,e),a.insertBefore(Ls(W,r),e),L(e),n||t}},bind:H,unbind:$,fire:(e,t,n)=>d.dispatch(e,t,n),dispatch:(e,t,n)=>d.dispatch(e,t,n),getContentEditable:V,getContentEditableParent:e=>{const t=b();let n=null;for(let o=e;o&&o!==t&&(n=V(o),null===n);o=o.parentNode);return n},isEditable:e=>{if(_(e)){const t=Vo(e)?e:e.parentElement,n="true"===V(b());return _(t)&&ro(wn(t),n)}return!1},destroy:()=>{if(i.length>0){let e=i.length;for(;e--;){const[t,n,o]=i[e];d.unbind(t,n,o)}}be(r,((e,t)=>{a.unload(t),delete r[t]}))},isChildOf:(e,t)=>e===t||t.contains(e),dumpRng:e=>"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset},K=((e,t,n)=>{const o=t.keep_values,r={set:(e,o,r)=>{const s=wn(e);k(t.url_converter)&&_(o)&&(o=t.url_converter.call(t.url_converter_scope||n(),String(o),r,e)),ka(s,"data-mce-"+r,o),ka(s,r,o)},get:(e,t)=>{const n=wn(e);return nn(n,"data-mce-"+t)||nn(n,t)}},s={style:{set:(t,n)=>{const r=wn(t);o&&ka(r,Sa,n),sn(r,"style"),h(n)&&co(r,e.parse(n))},get:t=>{const n=wn(t),o=nn(n,Sa)||nn(n,"style");return e.serialize(e.parse(o),Wt(n))}}};return o&&(s.href=s.src=r),s})(c,t,N(W));return W};Ra.DOM=Ra(document),Ra.nodeIndex=Oa;const Na=Ra.DOM;class Da{constructor(e={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=e}_setReferrerPolicy(e){this.settings.referrerPolicy=e}loadScript(e){return new Promise(((t,n)=>{const o=Na;let r;const s=()=>{o.remove(a),r&&(r.onerror=r.onload=r=null)},a=o.uniqueId();r=document.createElement("script"),r.id=a,r.type="text/javascript",r.src=Lt._addCacheSuffix(e),this.settings.referrerPolicy&&o.setAttrib(r,"referrerpolicy",this.settings.referrerPolicy),r.onload=()=>{s(),t()},r.onerror=()=>{s(),n("Failed to load script: "+e)},(document.getElementsByTagName("head")[0]||document.body).appendChild(r)}))}isDone(e){return 2===this.states[e]}markDone(e){this.states[e]=2}add(e){const t=this;return t.queue.push(e),void 0===t.states[e]&&(t.states[e]=0),new Promise(((n,o)=>{t.scriptLoadedCallbacks[e]||(t.scriptLoadedCallbacks[e]=[]),t.scriptLoadedCallbacks[e].push({resolve:n,reject:o})}))}load(e){return this.add(e)}remove(e){delete this.states[e],delete this.scriptLoadedCallbacks[e]}loadQueue(){const e=this.queue;return this.queue=[],this.loadScripts(e)}loadScripts(e){const t=this,n=(e,n)=>{Ee(t.scriptLoadedCallbacks,n).each((t=>{Y(t,(t=>t[e](n)))})),delete t.scriptLoadedCallbacks[n]},o=e=>{const t=Q(e,(e=>"rejected"===e.status));return t.length>0?Promise.reject(se(t,(({reason:e})=>y(e)?e:[e]))):Promise.resolve()},r=e=>Promise.allSettled(K(e,(e=>2===t.states[e]?(n("resolve",e),Promise.resolve()):3===t.states[e]?(n("reject",e),Promise.reject(e)):(t.states[e]=1,t.loadScript(e).then((()=>{t.states[e]=2,n("resolve",e);const s=t.queue;return s.length>0?(t.queue=[],r(s).then(o)):Promise.resolve()}),(()=>(t.states[e]=3,n("reject",e),Promise.reject(e)))))))),s=e=>(t.loading=!0,r(e).then((e=>{t.loading=!1;const n=t.queueLoadedCallbacks.shift();return U.from(n).each(F),o(e)}))),a=Ae(e);return t.loading?new Promise(((e,n)=>{t.queueLoadedCallbacks.push((()=>s(a).then(e,n)))})):s(a)}}Da.ScriptLoader=new Da;const Ba=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},Ma={},Ia=Ba("en"),Pa=()=>Ee(Ma,Ia.get()),La={getData:()=>ye(Ma,(e=>r({},e))),setCode:e=>{e&&Ia.set(e)},getCode:()=>Ia.get(),add:(e,t)=>{let n=Ma[e];n||(Ma[e]=n={}),be(t,((e,t)=>{n[t.toLowerCase()]=e}))},translate:e=>{const t=Pa().getOr({}),n=e=>k(e)?Object.prototype.toString.call(e):o(e)?"":""+e,o=e=>""===e||null==e,r=e=>{const o=n(e);return Ee(t,o.toLowerCase()).map(n).getOr(o)},s=e=>e.replace(/{context:\w+}$/,"");if(o(e))return"";if(v(a=e)&&Oe(a,"raw"))return n(e.raw);var a;if((e=>y(e)&&e.length>1)(e)){const t=e.slice(1);return s(r(e[0]).replace(/\{([0-9]+)\}/g,((e,o)=>Oe(t,o)?n(t[o]):e)))}return s(r(e))},isRtl:()=>Pa().bind((e=>Ee(e,"_dir"))).exists((e=>"rtl"===e)),hasCode:e=>Oe(Ma,e)},Fa=()=>{const e=[],t={},n={},o=[],r=(e,t)=>{const n=Q(o,(n=>n.name===e&&n.state===t));Y(n,(e=>e.resolve()))},s=e=>Oe(t,e),a=(e,n)=>{const o=La.getCode();!o||n&&-1===(","+(n||"")+",").indexOf(","+o+",")||Da.ScriptLoader.add(t[e]+"/langs/"+o+".js")},i=(e,t="added")=>"added"===t&&(e=>Oe(n,e))(e)||"loaded"===t&&s(e)?Promise.resolve():new Promise((n=>{o.push({name:e,state:t,resolve:n})}));return{items:e,urls:t,lookup:n,get:e=>{if(n[e])return n[e].instance},requireLangPack:(e,t)=>{!1!==Fa.languageLoad&&(s(e)?a(e,t):i(e,"loaded").then((()=>a(e,t))))},add:(t,o)=>(e.push(o),n[t]={instance:o},r(t,"added"),o),remove:e=>{delete t[e],delete n[e]},createUrl:(e,t)=>h(t)?h(e)?{prefix:"",resource:t,suffix:""}:{prefix:e.prefix,resource:t,suffix:e.suffix}:t,load:(e,o)=>{if(t[e])return Promise.resolve();let s=h(o)?o:o.prefix+o.resource+o.suffix;0!==s.indexOf("/")&&-1===s.indexOf("://")&&(s=Fa.baseURL+"/"+s),t[e]=s.substring(0,s.lastIndexOf("/"));const a=()=>(r(e,"loaded"),Promise.resolve());return n[e]?a():Da.ScriptLoader.add(s).then(a)},waitFor:i}};Fa.languageLoad=!0,Fa.baseURL="",Fa.PluginManager=Fa(),Fa.ThemeManager=Fa(),Fa.ModelManager=Fa();const za=e=>{const t=Ba(U.none()),n=()=>t.get().each((e=>clearInterval(e)));return{clear:()=>{n(),t.set(U.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:o=>{n(),t.set(U.some(setInterval(o,e)))}}},ja=()=>{const e=(e=>{const t=Ba(U.none()),n=()=>t.get().each(e);return{clear:()=>{n(),t.set(U.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{n(),t.set(U.some(e))}}})(T);return r(r({},e),{},{on:t=>e.get().each(t)})},Ua=(e,t)=>{let n=null;return{cancel:()=>{x(n)||(clearTimeout(n),n=null)},throttle:(...o)=>{x(n)&&(n=setTimeout((()=>{n=null,e.apply(null,o)}),t))}}},Ha=(e,t)=>{let n=null;const o=()=>{x(n)||(clearTimeout(n),n=null)};return{cancel:o,throttle:(...r)=>{o(),n=setTimeout((()=>{n=null,e.apply(null,r)}),t)}}},$a=N("mce-annotation"),Va=N("data-mce-annotation"),Wa=N("data-mce-annotation-uid"),qa=N("data-mce-annotation-active"),Ga=N("data-mce-annotation-classes"),Ka=N("data-mce-annotation-attrs"),Ya=e=>t=>En(t,e),Xa=(e,t)=>{const n=e.selection.getRng(),o=wn(n.startContainer),r=wn(e.getBody()),s=t.fold((()=>"."+$a()),(e=>`[${Va()}="${e}"]`)),a=zn(o,n.startOffset).getOr(o);return oo(a,s,Ya(r)).bind((t=>on(t,`${Wa()}`).bind((n=>on(t,`${Va()}`).map((t=>{const o=Qa(e,n);return{uid:n,name:t,elements:o}}))))))},Ja=(e,t)=>rn(e,"data-mce-bogus")||jo(e,'[data-mce-bogus="all"]',Ya(t)),Qa=(e,t)=>{const n=wn(e.getBody()),o=zo(n,`[${Wa()}="${t}"]`);return Q(o,(e=>!Ja(e,n)))},Za=(e,t)=>{const n=wn(e.getBody()),o=zo(n,`[${Va()}="${t}"]`),r={};return Y(o,(e=>{if(!Ja(e,n)){const t=nn(e,Wa()),n=Ee(r,t).getOr([]);r[t]=n.concat([e])}})),r};let ei=0;const ti=e=>{const t=(new Date).getTime(),n=Math.floor(1e9*Math.random());return ei++,e+"_"+n+ei+String(t)},ni=(e,t)=>wn(e.dom.cloneNode(t)),oi=e=>ni(e,!1),ri=e=>ni(e,!0),si=(e,t,n=z)=>{const o=new Uo(e,t),r=e=>{let t;do{t=o[e]()}while(t&&!Zo(t)&&!n(t));return U.from(t).filter(Zo)};return{current:()=>U.from(o.current()).filter(Zo),next:()=>r("next"),prev:()=>r("prev"),prev2:()=>r("prev2")}},ai=(e,t)=>{const n=t||(t=>e.isBlock(t)||sr(t)||lr(t)),o=(e,t,n,r)=>{if(Zo(e)){const n=r(e,t,e.data);if(-1!==n)return U.some({container:e,offset:n})}return n().bind((e=>o(e.container,e.offset,n,r)))};return{backwards:(t,r,s,a)=>{const i=si(t,null!=a?a:e.getRoot(),n);return o(t,r,(()=>i.prev().map((e=>({container:e,offset:e.length})))),s).getOrNull()},forwards:(t,r,s,a)=>{const i=si(t,null!=a?a:e.getRoot(),n);return o(t,r,(()=>i.next().map((e=>({container:e,offset:0})))),s).getOrNull()}}},ii=Math.round,li=e=>e?{left:ii(e.left),top:ii(e.top),bottom:ii(e.bottom),right:ii(e.right),width:ii(e.width),height:ii(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},ci=(e,t)=>(e=li(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),di=(e,t,n)=>e>=0&&e<=Math.min(t.height,n.height)/2,ui=(e,t)=>{const n=Math.min(t.height/2,e.height/2);return e.bottom-n<t.top||!(e.top>t.bottom)&&di(t.top-e.bottom,e,t)},mi=(e,t)=>e.top>t.bottom||!(e.bottom<t.top)&&di(t.bottom-e.top,e,t),pi=(e,t,n)=>{const o=Math.max(Math.min(t,e.left+e.width),e.left),r=Math.max(Math.min(n,e.top+e.height),e.top);return Math.sqrt((t-o)*(t-o)+(n-r)*(n-r))},fi=e=>{const t=e.startContainer,n=e.startOffset;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},gi=(e,t)=>{if(Vo(e)&&e.hasChildNodes()){const n=e.childNodes,o=((e,t,n)=>Math.min(Math.max(e,0),n))(t,0,n.length-1);return n[o]}return e},hi=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),vi=e=>h(e)&&e.charCodeAt(0)>=768&&hi.test(e),bi=Vo,yi=rs,xi=Go("display","block table"),wi=Go("float","left right"),Ci=((...e)=>t=>{for(let n=0;n<e.length;n++)if(!e[n](t))return!1;return!0})(bi,yi,I(wi)),Si=I(Go("white-space","pre pre-line pre-wrap")),_i=Zo,ki=sr,Ei=Ra.nodeIndex,Oi=(e,t)=>t<0&&Vo(e)&&e.hasChildNodes()?void 0:gi(e,t),Ti=e=>e?e.createRange():Ra.DOM.createRng(),Ai=e=>h(e)&&/[\r\n\t ]/.test(e),Ri=e=>!!e.setStart&&!!e.setEnd,Ni=e=>{const t=e.startContainer,n=e.startOffset;if(Ai(e.toString())&&Si(t.parentNode)&&Zo(t)){const e=t.data;if(Ai(e[n-1])||Ai(e[n+1]))return!0}return!1},Di=e=>0===e.left&&0===e.right&&0===e.top&&0===e.bottom,Bi=e=>{var t;let n;const o=e.getClientRects();return n=o.length>0?li(o[0]):li(e.getBoundingClientRect()),!Ri(e)&&ki(e)&&Di(n)?(e=>{const t=e.ownerDocument,n=Ti(t),o=t.createTextNode(fr),r=e.parentNode;r.insertBefore(o,e),n.setStart(o,0),n.setEnd(o,1);const s=li(n.getBoundingClientRect());return r.removeChild(o),s})(e):Di(n)&&Ri(e)&&null!==(t=(e=>{const t=e.startContainer,n=e.endContainer,o=e.startOffset,r=e.endOffset;if(t===n&&Zo(n)&&0===o&&1===r){const t=e.cloneRange();return t.setEndAfter(n),Bi(t)}return null})(e))&&void 0!==t?t:n},Mi=(e,t)=>{const n=ci(e,t);return n.width=1,n.right=n.left+1,n},Ii=(e,t,n)=>{const o=()=>(n||(n=(e=>{const t=[],n=e=>{var n,o;0!==e.height&&(t.length>0&&(n=e,o=t[t.length-1],n.left===o.left&&n.top===o.top&&n.bottom===o.bottom&&n.right===o.right)||t.push(e))},o=(e,t)=>{const o=Ti(e.ownerDocument);if(t<e.data.length){if(vi(e.data[t]))return;if(vi(e.data[t-1])&&(o.setStart(e,t),o.setEnd(e,t+1),!Ni(o)))return void n(Mi(Bi(o),!1))}t>0&&(o.setStart(e,t-1),o.setEnd(e,t),Ni(o)||n(Mi(Bi(o),!1))),t<e.data.length&&(o.setStart(e,t),o.setEnd(e,t+1),Ni(o)||n(Mi(Bi(o),!0)))},r=e.container(),s=e.offset();if(_i(r))return o(r,s),t;if(bi(r))if(e.isAtEnd()){const e=Oi(r,s);_i(e)&&o(e,e.data.length),Ci(e)&&!ki(e)&&n(Mi(Bi(e),!1))}else{const a=Oi(r,s);if(_i(a)&&o(a,0),Ci(a)&&e.isAtEnd())return n(Mi(Bi(a),!1)),t;const i=Oi(e.container(),e.offset()-1);Ci(i)&&!ki(i)&&(xi(i)||xi(a)||!Ci(a))&&n(Mi(Bi(i),!1)),Ci(a)&&n(Mi(Bi(a),!0))}return t})(Ii(e,t))),n);return{container:N(e),offset:N(t),toRange:()=>{const n=Ti(e.ownerDocument);return n.setStart(e,t),n.setEnd(e,t),n},getClientRects:o,isVisible:()=>o().length>0,isAtStart:()=>(_i(e),0===t),isAtEnd:()=>_i(e)?t>=e.data.length:t>=e.childNodes.length,isEqual:n=>n&&e===n.container()&&t===n.offset(),getNode:n=>Oi(e,n?t-1:t)}};Ii.fromRangeStart=e=>Ii(e.startContainer,e.startOffset),Ii.fromRangeEnd=e=>Ii(e.endContainer,e.endOffset),Ii.after=e=>Ii(e.parentNode,Ei(e)+1),Ii.before=e=>Ii(e.parentNode,Ei(e)),Ii.isAbove=(e,t)=>zt(me(t.getClientRects()),pe(e.getClientRects()),ui).getOr(!1),Ii.isBelow=(e,t)=>zt(pe(t.getClientRects()),me(e.getClientRects()),mi).getOr(!1),Ii.isAtStart=e=>!!e&&e.isAtStart(),Ii.isAtEnd=e=>!!e&&e.isAtEnd(),Ii.isTextPosition=e=>!!e&&Zo(e.container()),Ii.isElementPosition=e=>!Ii.isTextPosition(e);const Pi=(e,t)=>{Zo(t)&&0===t.data.length&&e.remove(t)},Li=(e,t,n)=>{rr(n)?((e,t,n)=>{const o=U.from(n.firstChild),r=U.from(n.lastChild);t.insertNode(n),o.each((t=>Pi(e,t.previousSibling))),r.each((t=>Pi(e,t.nextSibling)))})(e,t,n):((e,t,n)=>{t.insertNode(n),Pi(e,n.previousSibling),Pi(e,n.nextSibling)})(e,t,n)},Fi=Zo,zi=Yo,ji=Ra.nodeIndex,Ui=e=>{const t=e.parentNode;return zi(t)?Ui(t):t},Hi=e=>e?Ie(e.childNodes,((e,t)=>(zi(t)&&"BR"!==t.nodeName?e=e.concat(Hi(t)):e.push(t),e)),[]):[],$i=e=>t=>e===t,Vi=e=>(Fi(e)?"text()":e.nodeName.toLowerCase())+"["+(e=>{let t,n;t=Hi(Ui(e)),n=Pe(t,$i(e),e),t=t.slice(0,n+1);const o=Ie(t,((e,n,o)=>(Fi(n)&&Fi(t[o-1])&&e++,e)),0);return t=Me(t,qo([e.nodeName])),n=Pe(t,$i(e),e),n-o})(e)+"]",Wi=(e,t)=>{let n,o=[],r=t.container(),s=t.offset();if(Fi(r))n=((e,t)=>{let n=e;for(;(n=n.previousSibling)&&Fi(n);)t+=n.data.length;return t})(r,s);else{const e=r.childNodes;s>=e.length?(n="after",s=e.length-1):n="before",r=e[s]}o.push(Vi(r));let a=((e,t,n)=>{const o=[];for(let r=t.parentNode;r&&r!==e;r=r.parentNode)o.push(r);return o})(e,r);return a=Me(a,I(Yo)),o=o.concat(Be(a,(e=>Vi(e)))),o.reverse().join("/")+","+n},qi=(e,t)=>{if(!t)return null;const n=t.split(","),o=n[0].split("/"),r=n.length>1?n[1]:"before",s=Ie(o,((e,t)=>{const n=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t);return n?("text()"===n[1]&&(n[1]="#text"),((e,t,n)=>{let o=Hi(e);return o=Me(o,((e,t)=>!Fi(e)||!Fi(o[t-1]))),o=Me(o,qo([t])),o[n]})(e,n[1],parseInt(n[2],10))):null}),e);if(!s)return null;if(!Fi(s)&&s.parentNode){let e;return e="after"===r?ji(s)+1:ji(s),Ii(s.parentNode,e)}return((e,t)=>{let n=e,o=0;for(;Fi(n);){const r=n.data.length;if(t>=o&&t<=o+r){e=n,t-=o;break}if(!Fi(n.nextSibling)){e=n,t=r;break}o+=r,n=n.nextSibling}return Fi(e)&&t>e.data.length&&(t=e.data.length),Ii(e,t)})(s,parseInt(r,10))},Gi=lr,Ki=(e,t,n,o,r)=>{const s=r?o.startContainer:o.endContainer;let a=r?o.startOffset:o.endOffset;const i=[],l=e.getRoot();if(Zo(s))i.push(n?((e,t,n)=>{let o=e(t.data.slice(0,n)).length;for(let r=t.previousSibling;r&&Zo(r);r=r.previousSibling)o+=e(r.data).length;return o})(t,s,a):a);else{let t=0;const o=s.childNodes;a>=o.length&&o.length&&(t=1,a=Math.max(0,o.length-1)),i.push(e.nodeIndex(o[a],n)+t)}for(let c=s;c&&c!==l;c=c.parentNode)i.push(e.nodeIndex(c,n));return i},Yi=(e,t,n)=>{let o=0;return Lt.each(e.select(t),(e=>"all"===e.getAttribute("data-mce-bogus")?void 0:e!==n&&void o++)),o},Xi=(e,t)=>{let n=t?e.startContainer:e.endContainer,o=t?e.startOffset:e.endOffset;if(Vo(n)&&"TR"===n.nodeName){const r=n.childNodes;n=r[Math.min(t?o:o-1,r.length-1)],n&&(o=t?0:n.childNodes.length,t?e.setStart(n,o):e.setEnd(n,o))}},Ji=e=>(Xi(e,!0),Xi(e,!1),e),Qi=(e,t)=>{if(Vo(e)&&(e=gi(e,t),Gi(e)))return e;if(Hr(e)){Zo(e)&&jr(e)&&(e=e.parentNode);let t=e.previousSibling;if(Gi(t))return t;if(t=e.nextSibling,Gi(t))return t}},Zi=(e,t,n)=>{const o=n.getNode(),s=n.getRng();if("IMG"===o.nodeName||Gi(o)){const e=o.nodeName;return{name:e,index:Yi(n.dom,e,o)}}const a=(e=>Qi(e.startContainer,e.startOffset)||Qi(e.endContainer,e.endOffset))(s);if(a){const e=a.tagName;return{name:e,index:Yi(n.dom,e,a)}}return((e,t,n,o)=>{const s=t.dom,a=Ki(s,e,n,o,!0),i=t.isForward(),l=Yr(o)?{isFakeCaret:!0}:{};return t.isCollapsed()?r({start:a,forward:i},l):r({start:a,end:Ki(s,e,n,o,!1),forward:i},l)})(e,n,t,s)},el=(e,t,n)=>{const o={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",o,"&#xFEFF;"):e.create("span",o)},tl=(e,t)=>{const n=e.dom;let o=e.getRng();const r=n.uniqueId(),s=e.isCollapsed(),a=e.getNode(),i=a.nodeName,l=e.isForward();if("IMG"===i)return{name:i,index:Yi(n,i,a)};const c=Ji(o.cloneRange());if(!s){c.collapse(!1);const e=el(n,r+"_end",t);Li(n,c,e)}o=Ji(o),o.collapse(!0);const d=el(n,r+"_start",t);return Li(n,o,d),e.moveToBookmark({id:r,keep:!0,forward:l}),{id:r,forward:l}},nl=M(Zi,D,!0),ol=e=>{const t=t=>t(e),n=N(e),o=()=>r,r={tag:!0,inner:e,fold:(t,n)=>n(e),isValue:j,isError:z,map:t=>sl.value(t(e)),mapError:o,bind:t,exists:t,forall:t,getOr:n,or:o,getOrThunk:n,orThunk:o,getOrDie:n,each:t=>{t(e)},toOptional:()=>U.some(e)};return r},rl=e=>{const t=()=>n,n={tag:!1,inner:e,fold:(t,n)=>t(e),isValue:z,isError:j,map:t,mapError:t=>sl.error(t(e)),bind:t,exists:z,forall:j,getOr:D,or:D,getOrThunk:L,orThunk:L,getOrDie:P(String(e)),each:T,toOptional:U.none};return n},sl={value:ol,error:rl,fromOption:(e,t)=>e.fold((()=>rl(t)),ol)},al=e=>{if(!y(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");const t=[],n={};return Y(e,((o,r)=>{const s=he(o);if(1!==s.length)throw new Error("one and only one name per case");const a=s[0],i=o[a];if(void 0!==n[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!y(i))throw new Error("case arguments must be an array");t.push(a),n[a]=(...n)=>{const o=n.length;if(o!==i.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+i.length+" ("+i+"), got "+o);return{fold:(...t)=>{if(t.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+t.length);return t[r].apply(null,n)},match:e=>{const o=he(e);if(t.length!==o.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+o.join(","));if(!ae(t,(e=>q(o,e))))throw new Error("Not all branches were specified when using match. Specified: "+o.join(", ")+"\nRequired: "+t.join(", "));return e[a].apply(null,n)},log:e=>{console.log(e,{constructors:t,constructor:a,params:n})}}}})),n};al([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const il=e=>"inline-command"===e.type||"inline-format"===e.type,ll=e=>"block-command"===e.type||"block-format"===e.type,cl=e=>{const t=t=>sl.error({message:t,pattern:e}),n=(n,o,r)=>{if(void 0!==e.format){let r;if(y(e.format)){if(!ae(e.format,h))return t(n+" pattern has non-string items in the `format` array");r=e.format}else{if(!h(e.format))return t(n+" pattern has non-string `format` parameter");r=[e.format]}return sl.value(o(r))}return void 0!==e.cmd?h(e.cmd)?sl.value(r(e.cmd,e.value)):t(n+" pattern has non-string `cmd` parameter"):t(n+" pattern is missing both `format` and `cmd` parameters")};if(!v(e))return t("Raw pattern is not an object");if(!h(e.start))return t("Raw pattern is missing `start` parameter");if(void 0!==e.end){if(!h(e.end))return t("Inline pattern has non-string `end` parameter");if(0===e.start.length&&0===e.end.length)return t("Inline pattern has empty `start` and `end` parameters");let o=e.start,r=e.end;return 0===r.length&&(r=o,o=""),n("Inline",(e=>({type:"inline-format",start:o,end:r,format:e})),((e,t)=>({type:"inline-command",start:o,end:r,cmd:e,value:t})))}return void 0!==e.replacement?h(e.replacement)?0===e.start.length?t("Replacement pattern has empty `start` parameter"):sl.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):t("Replacement pattern has non-string `replacement` parameter"):0===e.start.length?t("Block pattern has empty `start` parameter"):n("Block",(t=>({type:"block-format",start:e.start,format:t[0]})),((t,n)=>({type:"block-command",start:e.start,cmd:t,value:n})))},dl=e=>Q(e,ll),ul=e=>Q(e,il),ml=e=>{const t=(e=>{const t=[],n=[];return Y(e,(e=>{e.fold((e=>{t.push(e)}),(e=>{n.push(e)}))})),{errors:t,values:n}})(K(e,cl));return Y(t.errors,(e=>console.error(e.message,e.pattern))),t.values},pl=Et().deviceType,fl=pl.isTouch(),gl=Ra.DOM,hl=e=>g(e,RegExp),vl=e=>t=>t.options.get(e),bl=e=>h(e)||v(e),yl=(e,t="")=>n=>{const o=h(n);if(o){if(-1!==n.indexOf("=")){const r=(e=>{const t=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return ee(t,((e,t)=>{const n=t.split("="),o=n[0],r=n.length>1?n[1]:o;return e[Ye(o)]=Ye(r),e}),{})})(n);return{value:Ee(r,e.id).getOr(t),valid:o}}return{value:n,valid:o}}return{valid:!1,message:"Must be a string."}},xl=vl("iframe_attrs"),wl=vl("doctype"),Cl=vl("document_base_url"),Sl=vl("body_id"),_l=vl("body_class"),kl=vl("content_security_policy"),El=vl("br_in_pre"),Ol=vl("forced_root_block"),Tl=vl("forced_root_block_attrs"),Al=vl("newline_behavior"),Rl=vl("br_newline_selector"),Nl=vl("no_newline_selector"),Dl=vl("keep_styles"),Bl=vl("end_container_on_empty_block"),Ml=vl("automatic_uploads"),Il=vl("images_reuse_filename"),Pl=vl("images_replace_blob_uris"),Ll=vl("icons"),Fl=vl("icons_url"),zl=vl("images_upload_url"),jl=vl("images_upload_base_path"),Ul=vl("images_upload_credentials"),Hl=vl("images_upload_handler"),$l=vl("content_css_cors"),Vl=vl("referrer_policy"),Wl=vl("language"),ql=vl("language_url"),Gl=vl("indent_use_margin"),Kl=vl("indentation"),Yl=vl("content_css"),Xl=vl("content_style"),Jl=vl("font_css"),Ql=vl("directionality"),Zl=vl("inline_boundaries_selector"),ec=vl("object_resizing"),tc=vl("resize_img_proportional"),nc=vl("placeholder"),oc=vl("event_root"),rc=vl("service_message"),sc=vl("theme"),ac=vl("theme_url"),ic=vl("model"),lc=vl("model_url"),cc=vl("inline_boundaries"),dc=vl("formats"),uc=vl("preview_styles"),mc=vl("format_empty_lines"),pc=vl("format_noneditable_selector"),fc=vl("custom_ui_selector"),gc=vl("inline"),hc=vl("hidden_input"),vc=vl("submit_patch"),bc=vl("add_form_submit_trigger"),yc=vl("add_unload_trigger"),xc=vl("custom_undo_redo_levels"),wc=vl("disable_nodechange"),Cc=vl("readonly"),Sc=vl("content_css_cors"),_c=vl("plugins"),kc=vl("external_plugins"),Ec=vl("block_unsupported_drop"),Oc=vl("visual"),Tc=vl("visual_table_class"),Ac=vl("visual_anchor_class"),Rc=vl("iframe_aria_text"),Nc=vl("setup"),Dc=vl("init_instance_callback"),Bc=vl("urlconverter_callback"),Mc=vl("auto_focus"),Ic=vl("browser_spellcheck"),Pc=vl("protect"),Lc=vl("paste_block_drop"),Fc=vl("paste_data_images"),zc=vl("paste_preprocess"),jc=vl("paste_postprocess"),Uc=vl("paste_webkit_styles"),Hc=vl("paste_remove_styles_if_webkit"),$c=vl("paste_merge_formats"),Vc=vl("smart_paste"),Wc=vl("paste_as_text"),qc=vl("paste_tab_spaces"),Gc=vl("allow_html_data_urls"),Kc=vl("text_patterns"),Yc=vl("text_patterns_lookup"),Xc=vl("noneditable_class"),Jc=vl("editable_class"),Qc=vl("noneditable_regexp"),Zc=vl("preserve_cdata"),ed=vl("highlight_on_focus"),td=vl("xss_sanitization"),nd=e=>Lt.explode(e.options.get("images_file_types")),od=vl("table_tab_navigation"),rd=Vo,sd=Zo,ad=e=>{const t=e.parentNode;t&&t.removeChild(e)},id=e=>{const t=Lr(e);return{count:e.length-t.length,text:t}},ld=e=>{let t;for(;-1!==(t=e.data.lastIndexOf(Ir));)e.deleteData(t,1)},cd=(e,t)=>(ud(e),t),dd=(e,t)=>Ii.isTextPosition(t)?((e,t)=>sd(e)&&t.container()===e?((e,t)=>{const n=id(e.data.substr(0,t.offset())),o=id(e.data.substr(t.offset()));return(n.text+o.text).length>0?(ld(e),Ii(e,t.offset()-n.count)):t})(e,t):cd(e,t))(e,t):((e,t)=>t.container()===e.parentNode?((e,t)=>{const n=t.container(),o=((e,t)=>{const n=W(e,t);return-1===n?U.none():U.some(n)})(fe(n.childNodes),e).map((e=>e<t.offset()?Ii(n,t.offset()-1):t)).getOr(t);return ud(e),o})(e,t):cd(e,t))(e,t),ud=e=>{rd(e)&&Hr(e)&&($r(e)?e.removeAttribute("data-mce-caret"):ad(e)),sd(e)&&(ld(e),0===e.data.length&&ad(e))},md=lr,pd=ur,fd=cr,gd=(e,t,n)=>{const o=ci(t.getBoundingClientRect(),n);let r,s;if("BODY"===e.tagName){const t=e.ownerDocument.documentElement;r=e.scrollLeft||t.scrollLeft,s=e.scrollTop||t.scrollTop}else{const t=e.getBoundingClientRect();r=e.scrollLeft-t.left,s=e.scrollTop-t.top}o.left+=r,o.right+=r,o.top+=s,o.bottom+=s,o.width=1;let a=t.offsetWidth-t.clientWidth;return a>0&&(n&&(a*=-1),o.left+=a,o.right+=a),o},hd=(e,t,n,o)=>{const s=ja();let a,i;const l=Ol(e),c=e.dom,d=()=>{(e=>{var t,n;const o=zo(wn(e),"*[contentEditable=false],video,audio,embed,object");for(let r=0;r<o.length;r++){const e=o[r].dom;let s=e.previousSibling;if(Gr(s)){const e=s.data;1===e.length?null===(t=s.parentNode)||void 0===t||t.removeChild(s):s.deleteData(e.length-1,1)}s=e.nextSibling,qr(s)&&(1===s.data.length?null===(n=s.parentNode)||void 0===n||n.removeChild(s):s.deleteData(0,1))}})(t),i&&(ud(i),i=null),s.on((e=>{c.remove(e.caret),s.clear()})),a&&(clearInterval(a),a=void 0)};return{show:(e,u)=>{let m;if(d(),fd(u))return null;if(!n(u))return i=((e,t)=>{var n;const o=(null!==(n=e.ownerDocument)&&void 0!==n?n:document).createTextNode(Ir),r=e.parentNode;if(t){const t=e.previousSibling;if(zr(t)){if(Hr(t))return t;if(Gr(t))return t.splitText(t.data.length-1)}null==r||r.insertBefore(o,e)}else{const t=e.nextSibling;if(zr(t)){if(Hr(t))return t;if(qr(t))return t.splitText(1),t}e.nextSibling?null==r||r.insertBefore(o,e.nextSibling):null==r||r.appendChild(o)}return o})(u,e),m=u.ownerDocument.createRange(),bd(i.nextSibling)?(m.setStart(i,0),m.setEnd(i,0)):(m.setStart(i,1),m.setEnd(i,1)),m;{const n=((e,t,n)=>{var o;const r=(null!==(o=t.ownerDocument)&&void 0!==o?o:document).createElement(e);r.setAttribute("data-mce-caret",n?"before":"after"),r.setAttribute("data-mce-bogus","all"),r.appendChild(Dr().dom);const s=t.parentNode;return n?null==s||s.insertBefore(r,t):t.nextSibling?null==s||s.insertBefore(r,t.nextSibling):null==s||s.appendChild(r),r})(l,u,e),d=gd(t,u,e);c.setStyle(n,"top",d.top),i=n;const p=c.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});c.setStyles(p,r({},d)),c.add(t,p),s.set({caret:p,element:u,before:e}),e&&c.addClass(p,"mce-visual-caret-before"),a=setInterval((()=>{s.on((e=>{o()?c.toggleClass(e.caret,"mce-visual-caret-hidden"):c.addClass(e.caret,"mce-visual-caret-hidden")}))}),500),m=u.ownerDocument.createRange(),m.setStart(n,0),m.setEnd(n,0)}return m},hide:d,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{s.on((e=>{const n=gd(t,e.element,e.before);c.setStyles(e.caret,r({},n))}))},destroy:()=>clearInterval(a)}},vd=()=>Bt.browser.isFirefox(),bd=e=>md(e)||pd(e),yd=e=>(bd(e)||Xo(e)&&vd())&&Dn(wn(e)).exists(ro),xd=ir,wd=lr,Cd=ur,Sd=Go("display","block table table-cell table-caption list-item"),_d=Hr,kd=jr,Ed=Vo,Od=Zo,Td=rs,Ad=e=>e>0,Rd=e=>e<0,Nd=(e,t)=>{let n;for(;n=e(t);)if(!kd(n))return n;return null},Dd=(e,t,n,o,r)=>{const s=new Uo(e,o),a=wd(e)||kd(e);let i;if(Rd(t)){if(a&&(i=Nd(s.prev.bind(s),!0),n(i)))return i;for(;i=Nd(s.prev.bind(s),r);)if(n(i))return i}if(Ad(t)){if(a&&(i=Nd(s.next.bind(s),!0),n(i)))return i;for(;i=Nd(s.next.bind(s),r);)if(n(i))return i}return null},Bd=(e,t)=>{for(;e&&e!==t;){if(Sd(e))return e;e=e.parentNode}return null},Md=(e,t,n)=>Bd(e.container(),n)===Bd(t.container(),n),Id=(e,t)=>{if(!t)return U.none();const n=t.container(),o=t.offset();return Ed(n)?U.from(n.childNodes[o+e]):U.none()},Pd=(e,t)=>{var n;const o=(null!==(n=t.ownerDocument)&&void 0!==n?n:document).createRange();return e?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)),o},Ld=(e,t,n)=>Bd(t,e)===Bd(n,e),Fd=(e,t,n)=>{const o=e?"previousSibling":"nextSibling";let r=n;for(;r&&r!==t;){let e=r[o];if(e&&_d(e)&&(e=e[o]),wd(e)||Cd(e)){if(Ld(t,e,r))return e;break}if(Td(e))break;r=r.parentNode}return null},zd=M(Pd,!0),jd=M(Pd,!1),Ud=(e,t,n)=>{let o;const r=M(Fd,!0,t),s=M(Fd,!1,t),a=n.startContainer,i=n.startOffset;if(jr(a)){const e=Od(a)?a.parentNode:a,t=e.getAttribute("data-mce-caret");if("before"===t&&(o=e.nextSibling,yd(o)))return zd(o);if("after"===t&&(o=e.previousSibling,yd(o)))return jd(o)}if(!n.collapsed)return n;if(Zo(a)){if(_d(a)){if(1===e){if(o=s(a),o)return zd(o);if(o=r(a),o)return jd(o)}if(-1===e){if(o=r(a),o)return jd(o);if(o=s(a),o)return zd(o)}return n}if(Gr(a)&&i>=a.data.length-1)return 1===e&&(o=s(a),o)?zd(o):n;if(qr(a)&&i<=1)return-1===e&&(o=r(a),o)?jd(o):n;if(i===a.data.length)return o=s(a),o?zd(o):n;if(0===i)return o=r(a),o?jd(o):n}return n},Hd=(e,t)=>Id(e?0:-1,t).filter(wd),$d=(e,t,n)=>{const o=Ud(e,t,n);return-1===e?Ii.fromRangeStart(o):Ii.fromRangeEnd(o)},Vd=e=>U.from(e.getNode()).map(wn),Wd=(e,t)=>{let n=t;for(;n=e(n);)if(n.isVisible())return n;return n},qd=(e,t)=>{const n=Md(e,t);return!(n||!sr(e.getNode()))||n};var Gd;!function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"}(Gd||(Gd={}));const Kd=lr,Yd=Zo,Xd=Vo,Jd=sr,Qd=rs,Zd=e=>ts(e)||(e=>!!ss(e)&&!ee(fe(e.getElementsByTagName("*")),((e,t)=>e||Xr(t)),!1))(e),eu=as,tu=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,nu=(e,t)=>{if(Ad(e)){if(Qd(t.previousSibling)&&!Yd(t.previousSibling))return Ii.before(t);if(Yd(t))return Ii(t,0)}if(Rd(e)){if(Qd(t.nextSibling)&&!Yd(t.nextSibling))return Ii.after(t);if(Yd(t))return Ii(t,t.data.length)}return Rd(e)?Jd(t)?Ii.before(t):Ii.after(t):Ii.before(t)},ou=(e,t,n)=>{let o,r,s,a;if(!Xd(n)||!t)return null;if(t.isEqual(Ii.after(n))&&n.lastChild){if(a=Ii.after(n.lastChild),Rd(e)&&Qd(n.lastChild)&&Xd(n.lastChild))return Jd(n.lastChild)?Ii.before(n.lastChild):a}else a=t;const i=a.container();let l=a.offset();if(Yd(i)){if(Rd(e)&&l>0)return Ii(i,--l);if(Ad(e)&&l<i.length)return Ii(i,++l);o=i}else{if(Rd(e)&&l>0&&(r=tu(i,l-1),Qd(r)))return!Zd(r)&&(s=Dd(r,e,eu,r),s)?Yd(s)?Ii(s,s.data.length):Ii.after(s):Yd(r)?Ii(r,r.data.length):Ii.before(r);if(Ad(e)&&l<i.childNodes.length&&(r=tu(i,l),Qd(r)))return Jd(r)?((e,t)=>{const n=t.nextSibling;return n&&Qd(n)?Yd(n)?Ii(n,0):Ii.before(n):ou(Gd.Forwards,Ii.after(t),e)})(n,r):!Zd(r)&&(s=Dd(r,e,eu,r),s)?Yd(s)?Ii(s,0):Ii.before(s):Yd(r)?Ii(r,0):Ii.after(r);o=r||a.getNode()}if(o&&(Ad(e)&&a.isAtEnd()||Rd(e)&&a.isAtStart())&&(o=Dd(o,e,j,n,!0),eu(o,n)))return nu(e,o);r=o?Dd(o,e,eu,n):o;const c=Le(Q(((e,t)=>{const n=[];let o=e;for(;o&&o!==t;)n.push(o),o=o.parentNode;return n})(i,n),Kd));return!c||r&&c.contains(r)?r?nu(e,r):null:(a=Ad(e)?Ii.after(c):Ii.before(c),a)},ru=e=>({next:t=>ou(Gd.Forwards,t,e),prev:t=>ou(Gd.Backwards,t,e)}),su=e=>Ii.isTextPosition(e)?0===e.offset():rs(e.getNode()),au=e=>{if(Ii.isTextPosition(e)){const t=e.container();return e.offset()===t.data.length}return rs(e.getNode(!0))},iu=(e,t)=>!Ii.isTextPosition(e)&&!Ii.isTextPosition(t)&&e.getNode()===t.getNode(!0),lu=(e,t,n)=>{const o=ru(t);return U.from(e?o.next(n):o.prev(n))},cu=(e,t,n)=>lu(e,t,n).bind((o=>Md(n,o,t)&&((e,t,n)=>{return e?!iu(t,n)&&(o=t,!(!Ii.isTextPosition(o)&&sr(o.getNode())))&&au(t)&&su(n):!iu(n,t)&&su(t)&&au(n);var o})(e,n,o)?lu(e,t,o):U.some(o))),du=(e,t,n,o)=>cu(e,t,n).bind((n=>o(n)?du(e,t,n,o):U.some(n))),uu=(e,t)=>{const n=e?t.firstChild:t.lastChild;return Zo(n)?U.some(Ii(n,e?0:n.data.length)):n?rs(n)?U.some(e?Ii.before(n):sr(o=n)?Ii.before(o):Ii.after(o)):((e,t,n)=>{const o=e?Ii.before(n):Ii.after(n);return lu(e,t,o)})(e,t,n):U.none();var o},mu=M(lu,!0),pu=M(lu,!1),fu=M(uu,!0),gu=M(uu,!1),hu="_mce_caret",vu=e=>Vo(e)&&e.id===hu,bu=(e,t)=>{let n=t;for(;n&&n!==e;){if(vu(n))return n;n=n.parentNode}return null},yu=e=>Oe(e,"name"),xu=e=>Lt.isArray(e.start),wu=e=>!(!yu(e)&&w(e.forward))||e.forward,Cu=(e,t)=>(Vo(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),Su=(e,t)=>gu(e).fold(z,(e=>(t.setStart(e.container(),e.offset()),t.setEnd(e.container(),e.offset()),!0))),_u=(e,t,n)=>!(!(e=>!e.hasChildNodes())(t)||!bu(e,t)||(((e,t)=>{var n;const o=(null!==(n=e.ownerDocument)&&void 0!==n?n:document).createTextNode(Ir);e.appendChild(o),t.setStart(o,0),t.setEnd(o,0)})(t,n),0)),ku=(e,t,n,o)=>{const r=n[t?"start":"end"],s=e.getRoot();if(r){let e=s,n=r[0];for(let t=r.length-1;e&&t>=1;t--){const n=e.childNodes;if(_u(s,e,o))return!0;if(r[t]>n.length-1)return!!_u(s,e,o)||Su(e,o);e=n[r[t]]}Zo(e)&&(n=Math.min(r[0],e.data.length)),Vo(e)&&(n=Math.min(r[0],e.childNodes.length)),t?o.setStart(e,n):o.setEnd(e,n)}return!0},Eu=e=>Zo(e)&&e.data.length>0,Ou=(e,t,n)=>{const o=e.get(n.id+"_"+t),r=null==o?void 0:o.parentNode,s=n.keep;if(o&&r){let a,i;if("start"===t?s?o.hasChildNodes()?(a=o.firstChild,i=1):Eu(o.nextSibling)?(a=o.nextSibling,i=0):Eu(o.previousSibling)?(a=o.previousSibling,i=o.previousSibling.data.length):(a=r,i=e.nodeIndex(o)+1):(a=r,i=e.nodeIndex(o)):s?o.hasChildNodes()?(a=o.firstChild,i=1):Eu(o.previousSibling)?(a=o.previousSibling,i=o.previousSibling.data.length):(a=r,i=e.nodeIndex(o)):(a=r,i=e.nodeIndex(o)),!s){const r=o.previousSibling,s=o.nextSibling;let l;for(Lt.each(Lt.grep(o.childNodes),(e=>{Zo(e)&&(e.data=e.data.replace(/\uFEFF/g,""))}));l=e.get(n.id+"_"+t);)e.remove(l,!0);if(Zo(s)&&Zo(r)&&!Bt.browser.isOpera()){const t=r.data.length;r.appendData(s.data),e.remove(s),a=r,i=t}}return U.some(Ii(a,i))}return U.none()},Tu=(e,t,n)=>((e,t,n=!1)=>2===t?Zi(Lr,n,e):3===t?(e=>{const t=e.getRng();return{start:Wi(e.dom.getRoot(),Ii.fromRangeStart(t)),end:Wi(e.dom.getRoot(),Ii.fromRangeEnd(t)),forward:e.isForward()}})(e):t?(e=>({rng:e.getRng(),forward:e.isForward()}))(e):tl(e,!1))(e,t,n),Au=(e,t)=>{((e,t)=>{const n=e.dom;if(t){if(xu(t))return((e,t)=>{const n=e.createRng();return ku(e,!0,t,n)&&ku(e,!1,t,n)?U.some({range:n,forward:wu(t)}):U.none()})(n,t);if((e=>h(e.start))(t))return((e,t)=>{const n=U.from(qi(e.getRoot(),t.start)),o=U.from(qi(e.getRoot(),t.end));return zt(n,o,((n,o)=>{const r=e.createRng();return r.setStart(n.container(),n.offset()),r.setEnd(o.container(),o.offset()),{range:r,forward:wu(t)}}))})(n,t);if((e=>Oe(e,"id"))(t))return((e,t)=>{const n=Ou(e,"start",t),o=Ou(e,"end",t);return zt(n,o.or(n),((n,o)=>{const r=e.createRng();return r.setStart(Cu(e,n.container()),n.offset()),r.setEnd(Cu(e,o.container()),o.offset()),{range:r,forward:wu(t)}}))})(n,t);if(yu(t))return((e,t)=>U.from(e.select(t.name)[t.index]).map((t=>{const n=e.createRng();return n.selectNode(t),{range:n,forward:!0}})))(n,t);if((e=>Oe(e,"rng"))(t))return U.some({range:t.rng,forward:wu(t)})}return U.none()})(e,t).each((({range:t,forward:n})=>{e.setRng(t,n)}))},Ru=e=>Vo(e)&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type"),Nu=e=>" "===e,Du=e=>""!==e&&-1!==" \f\n\r\t\v".indexOf(e),Bu=e=>!Du(e)&&!Nu(e)&&!gr(e),Mu=e=>{const t=e.toString(16);return(1===t.length?"0"+t:t).toUpperCase()},Iu=e=>(e=>{return{value:(t=e,Ve(t,"#").toUpperCase())};var t})(Mu(e.red)+Mu(e.green)+Mu(e.blue)),Pu=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,Lu=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Fu=(e,t,n,o)=>({red:e,green:t,blue:n,alpha:o}),zu=(e,t,n,o)=>{const r=parseInt(e,10),s=parseInt(t,10),a=parseInt(n,10),i=parseFloat(o);return Fu(r,s,a,i)},ju=e=>(e=>{if("transparent"===e)return U.some(Fu(0,0,0,0));const t=Pu.exec(e);if(null!==t)return U.some(zu(t[1],t[2],t[3],"1"));const n=Lu.exec(e);return null!==n?U.some(zu(n[1],n[2],n[3],n[4])):U.none()})(e).map(Iu).map((e=>"#"+e.value)).getOr(e),Uu=e=>{const t=[];if(e)for(let n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},Hu=(e,t)=>{const n=zo(t,"td[data-mce-selected],th[data-mce-selected]");return n.length>0?n:(e=>Q((e=>se(e,(e=>{const t=fi(e);return t?[wn(t)]:[]})))(e),Tr))(e)},$u=e=>Hu(Uu(e.selection.getSel()),wn(e.getBody())),Vu=(e,t)=>to(e,"table",t),Wu=e=>jn(e).fold(N([e]),(t=>[e].concat(Wu(t)))),qu=e=>Un(e).fold(N([e]),(t=>"br"===Wt(t)?Mn(t).map((t=>[e].concat(qu(t)))).getOr([]):[e].concat(qu(t)))),Gu=(e,t)=>zt((e=>{const t=e.startContainer,n=e.startOffset;return Zo(t)?0===n?U.some(wn(t)):U.none():U.from(t.childNodes[n]).map(wn)})(t),(e=>{const t=e.endContainer,n=e.endOffset;return Zo(t)?n===t.data.length?U.some(wn(t)):U.none():U.from(t.childNodes[n-1]).map(wn)})(t),((t,n)=>{const o=ne(Wu(e),M(En,t)),r=ne(qu(e),M(En,n));return o.isSome()&&r.isSome()})).getOr(!1),Ku=(e,t,n,o)=>{const r=n,s=new Uo(n,r),a=Se(e.schema.getMoveCaretBeforeOnEnterElements(),((e,t)=>!q(["td","th","table"],t.toLowerCase())));let i=n;do{if(Zo(i)&&0!==Lt.trim(i.data).length)return void(o?t.setStart(i,0):t.setEnd(i,i.data.length));if(a[i.nodeName])return void(o?t.setStartBefore(i):"BR"===i.nodeName?t.setEndBefore(i):t.setEndAfter(i))}while(i=o?s.next():s.prev());"BODY"===r.nodeName&&(o?t.setStart(r,0):t.setEnd(r,r.childNodes.length))},Yu=e=>{const t=e.selection.getSel();return _(t)&&t.rangeCount>0},Xu=(e,t)=>{const n=$u(e);n.length>0?Y(n,(n=>{const o=n.dom,r=e.dom.createRng();r.setStartBefore(o),r.setEndAfter(o),t(r,!0)})):t(e.selection.getRng(),!1)},Ju=(e,t,n)=>{const o=tl(e,t);n(o),e.moveToBookmark(o)},Qu=e=>E(null==e?void 0:e.nodeType),Zu=e=>Vo(e)&&!Ru(e)&&!vu(e)&&!Yo(e),em=e=>!0===e.isContentEditable,tm=(e,t,n)=>{const{selection:o,dom:r}=e,s=o.getNode(),a=lr(s);Ju(o,!0,(()=>{t()})),a&&lr(s)&&r.isChildOf(s,e.getBody())?e.selection.select(s):n(o.getStart())&&nm(r,o)},nm=(e,t)=>{var n,o;const r=t.getRng(),{startContainer:s,startOffset:a}=r;if(!((e,t)=>{if(Zu(t)&&!/^(TD|TH)$/.test(t.nodeName)){const n=e.getAttrib(t,"data-mce-selected"),o=parseInt(n,10);return!isNaN(o)&&o>0}return!1})(e,t.getNode())&&Vo(s)){const i=s.childNodes,l=e.getRoot();let c;if(a<i.length){const t=i[a];c=new Uo(t,null!==(n=e.getParent(t,e.isBlock))&&void 0!==n?n:l)}else{const t=i[i.length-1];c=new Uo(t,null!==(o=e.getParent(t,e.isBlock))&&void 0!==o?o:l),c.next(!0)}for(let n=c.current();n;n=c.next()){if("false"===e.getContentEditable(n))return;if(Zo(n)&&!am(n))return r.setStart(n,0),void t.setRng(r)}}},om=(e,t,n)=>{if(e){const o=t?"nextSibling":"previousSibling";for(e=n?e:e[o];e;e=e[o])if(Vo(e)||!am(e))return e}},rm=(e,t)=>!!e.getTextBlockElements()[t.nodeName.toLowerCase()]||Os(e,t),sm=(e,t,n)=>e.schema.isValidChild(t,n),am=(e,t=!1)=>{if(_(e)&&Zo(e)){const n=t?e.data.replace(/ /g," "):e.data;return ls(n)}return!1},im=(e,t)=>{const n=e.dom;return Zu(t)&&"false"===n.getContentEditable(t)&&((e,t)=>{const n="[data-mce-cef-wrappable]",o=pc(e),r=Ze(o)?n:`${n},${o}`;return _n(wn(t),r)})(e,t)&&0===n.select('[contenteditable="true"]',t).length},lm=(e,t)=>k(e)?e(t):(_(t)&&(e=e.replace(/%(\w+)/g,((e,n)=>t[n]||e))),e),cm=(e,t)=>(t=t||"",e=""+((e=e||"").nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()),dm=(e,t)=>{if(S(e))return null;{let n=String(e);return"color"!==t&&"backgroundColor"!==t||(n=ju(n)),"fontWeight"===t&&700===e&&(n="bold"),"fontFamily"===t&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},um=(e,t,n)=>{const o=e.getStyle(t,n);return dm(o,n)},mm=(e,t)=>{let n;return e.getParent(t,(t=>!!Vo(t)&&(n=e.getStyle(t,"text-decoration"),!!n&&"none"!==n))),n},pm=(e,t,n)=>e.getParents(t,n,e.getRoot()),fm=(e,t,n)=>{const o=e.formatter.get(t);return _(o)&&G(o,n)},gm=e=>Te(e,"block"),hm=e=>Te(e,"selector"),vm=e=>Te(e,"inline"),bm=e=>hm(e)&&!1!==e.expand&&!vm(e),ym=Ru,xm=pm,wm=am,Cm=rm,Sm=(e,t)=>{let n=t;for(;n;){if(Vo(n)&&e.getContentEditable(n))return"false"===e.getContentEditable(n)?n:t;n=n.parentNode}return t},_m=(e,t,n,o)=>{const r=t.data;if(e){for(let s=n;s>0;s--)if(o(r.charAt(s-1)))return s}else for(let s=n;s<r.length;s++)if(o(r.charAt(s)))return s;return-1},km=(e,t,n)=>_m(e,t,n,(e=>Nu(e)||Du(e))),Em=(e,t,n)=>_m(e,t,n,Bu),Om=(e,t,n,o,r,s)=>{let a;const i=e.getParent(n,e.isBlock)||t,l=(t,n,o)=>{const s=ai(e),l=r?s.backwards:s.forwards;return U.from(l(t,n,((e,t)=>ym(e.parentNode)?-1:(a=e,o(r,e,t))),i))};return l(n,o,km).bind((e=>s?l(e.container,e.offset+(r?-1:0),Em):U.some(e))).orThunk((()=>a?U.some({container:a,offset:r?0:a.length}):U.none()))},Tm=(e,t,n,o,r)=>{const s=o[r];Zo(o)&&Ze(o.data)&&s&&(o=s);const a=xm(e,o);for(let i=0;i<a.length;i++)for(let o=0;o<t.length;o++){const r=t[o];if((!_(r.collapsed)||r.collapsed===n.collapsed)&&hm(r)&&e.is(a[i],r.selector))return a[i]}return o},Am=(e,t,n,o)=>{var r;let s=n;const a=e.getRoot(),i=t[0];if(gm(i)&&(s=i.wrapper?null:e.getParent(n,i.block,a)),!s){const t=null!==(r=e.getParent(n,"LI,TD,TH"))&&void 0!==r?r:a;s=e.getParent(Zo(n)?n.parentNode:n,(t=>t!==a&&Cm(e.schema,t)),t)}if(s&&gm(i)&&i.wrapper&&(s=xm(e,s,"ul,ol").reverse()[0]||s),!s)for(s=n;s&&s[o]&&!e.isBlock(s[o])&&(s=s[o],!cm(s,"br")););return s||n},Rm=(e,t,n,o)=>{const r=n.parentNode;return!_(n[o])&&(!(r!==t&&!S(r)&&!e.isBlock(r))||Rm(e,t,r,o))},Nm=(e,t,n,o,r)=>{let s=n;const a=r?"previousSibling":"nextSibling",i=e.getRoot();if(Zo(n)&&!wm(n)&&(r?o>0:o<n.data.length))return n;for(;s;){if(!t[0].block_expand&&e.isBlock(s))return s;for(let t=s[a];t;t=t[a]){const n=Zo(t)&&!Rm(e,i,t,a);if(!ym(t)&&(!sr(l=t)||!l.getAttribute("data-mce-bogus")||l.nextSibling)&&!wm(t,n))return s}if(s===i||s.parentNode===i){n=s;break}s=s.parentNode}var l;return n},Dm=e=>ym(e.parentNode)||ym(e),Bm=(e,t,n,o=!1)=>{let{startContainer:r,startOffset:s,endContainer:a,endOffset:i}=t;const l=n[0];return Vo(r)&&r.hasChildNodes()&&(r=gi(r,s),Zo(r)&&(s=0)),Vo(a)&&a.hasChildNodes()&&(a=gi(a,t.collapsed?i:i-1),Zo(a)&&(i=a.data.length)),r=Sm(e,r),a=Sm(e,a),Dm(r)&&(r=ym(r)?r:r.parentNode,r=t.collapsed?r.previousSibling||r:r.nextSibling||r,Zo(r)&&(s=t.collapsed?r.length:0)),Dm(a)&&(a=ym(a)?a:a.parentNode,a=t.collapsed?a.nextSibling||a:a.previousSibling||a,Zo(a)&&(i=t.collapsed?0:a.length)),t.collapsed&&(Om(e,e.getRoot(),r,s,!0,o).each((({container:e,offset:t})=>{r=e,s=t})),Om(e,e.getRoot(),a,i,!1,o).each((({container:e,offset:t})=>{a=e,i=t}))),(vm(l)||l.block_expand)&&(vm(l)&&Zo(r)&&0!==s||(r=Nm(e,n,r,s,!0)),vm(l)&&Zo(a)&&i!==a.data.length||(a=Nm(e,n,a,i,!1))),bm(l)&&(r=Tm(e,n,t,r,"previousSibling"),a=Tm(e,n,t,a,"nextSibling")),(gm(l)||hm(l))&&(r=Am(e,n,r,"previousSibling"),a=Am(e,n,a,"nextSibling"),gm(l)&&(e.isBlock(r)||(r=Nm(e,n,r,s,!0)),e.isBlock(a)||(a=Nm(e,n,a,i,!1)))),Vo(r)&&r.parentNode&&(s=e.nodeIndex(r),r=r.parentNode),Vo(a)&&a.parentNode&&(i=e.nodeIndex(a)+1,a=a.parentNode),{startContainer:r,startOffset:s,endContainer:a,endOffset:i}},Mm=(e,t,n)=>{var o;const r=t.startOffset,s=gi(t.startContainer,r),a=t.endOffset,i=gi(t.endContainer,a-1),l=e=>{const t=e[0];Zo(t)&&t===s&&r>=t.data.length&&e.splice(0,1);const n=e[e.length-1];return 0===a&&e.length>0&&n===i&&Zo(n)&&e.splice(e.length-1,1),e},c=(e,t,n)=>{const o=[];for(;e&&e!==n;e=e[t])o.push(e);return o},d=(t,n)=>e.getParent(t,(e=>e.parentNode===n),n),u=(e,t,o)=>{const r=o?"nextSibling":"previousSibling";for(let s=e,a=s.parentNode;s&&s!==t;s=a){a=s.parentNode;const t=c(s===e?s:s[r],r);t.length&&(o||t.reverse(),n(l(t)))}};if(s===i)return n(l([s]));const m=null!==(o=e.findCommonAncestor(s,i))&&void 0!==o?o:e.getRoot();if(e.isChildOf(s,i))return u(s,m,!0);if(e.isChildOf(i,s))return u(i,m);const p=d(s,m)||s,f=d(i,m)||i;u(s,p,!0);const g=c(p===s?p:p.nextSibling,"nextSibling",f===i?f.nextSibling:f);g.length&&n(l(g)),u(i,f)},Im=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],Pm=(e,t,n,r,a,i)=>{const{uid:l=t}=n,c=o(n,s);pn(e,$a()),en(e,`${Wa()}`,l),en(e,`${Va()}`,r);const{attributes:d={},classes:u=[]}=a(l,c);if(tn(e,d),((e,t)=>{Y(t,(t=>{pn(e,t)}))})(e,u),i){u.length>0&&en(e,`${Ga()}`,u.join(","));const t=he(d);t.length>0&&en(e,`${Ka()}`,t.join(","))}},Lm=(e,t,n,o,r)=>{const s=yn("span",e);return Pm(s,t,n,o,r,!1),s},Fm=(e,t,n,o,r,s)=>{const a=[],i=Lm(e.getDoc(),n,s,o,r),l=ja(),c=()=>{l.clear()},d=e=>{Y(e,u)},u=t=>{switch(((e,t,n,o)=>Nn(t).fold((()=>"skipping"),(r=>"br"===o||(e=>Yt(e)&&vr(e)===Ir)(t)?"valid":(e=>Kt(e)&&hn(e,$a()))(t)?"existing":vu(t.dom)?"caret":G(Im,(e=>_n(t,e)))?"valid-block":sm(e,n,o)&&sm(e,Wt(r),n)?"valid":"invalid-child")))(e,t,"span",Wt(t))){case"invalid-child":{c();const e=Fn(t);d(e),c();break}case"valid-block":c(),Pm(t,n,s,o,r,!0);break;case"valid":{const e=l.get().getOrThunk((()=>{const e=oi(i);return a.push(e),l.set(e),e}));xo(t,e);break}}};return Mm(e.dom,t,(e=>{c(),(e=>{const t=K(e,wn);d(t)})(e)})),a},zm=e=>{const t=(()=>{const e={};return{register:(t,n)=>{e[t]={name:t,settings:n}},lookup:t=>Ee(e,t).map((e=>e.settings)),getNames:()=>he(e)}})();((e,t)=>{const n=Va(),o=e=>U.from(e.attr(n)).bind(t.lookup),r=e=>{var t,n;e.attr(Wa(),null),e.attr(Va(),null),e.attr(qa(),null);const o=U.from(e.attr(Ka())).map((e=>e.split(","))).getOr([]),r=U.from(e.attr(Ga())).map((e=>e.split(","))).getOr([]);Y(o,(t=>e.attr(t,null)));const s=null!==(n=null===(t=e.attr("class"))||void 0===t?void 0:t.split(" "))&&void 0!==n?n:[],a=le(s,[$a()].concat(r));e.attr("class",a.length>0?a.join(" "):null),e.attr(Ga(),null),e.attr(Ka(),null)};e.serializer.addTempAttr(qa()),e.serializer.addAttributeFilter(n,(e=>{for(const t of e)o(t).each((e=>{!1===e.persistent&&("span"===t.name?t.unwrap():r(t))}))}))})(e,t);const n=((e,t)=>{const n=Ba({}),o=()=>({listeners:[],previous:ja()}),r=(e,t)=>{s(e,(e=>(t(e),e)))},s=(e,t)=>{const r=n.get(),s=t(Ee(r,e).getOrThunk(o));r[e]=s,n.set(r)},a=(t,n)=>{Y(Qa(e,t),(e=>{n?en(e,qa(),"true"):sn(e,qa())}))},i=Ha((()=>{const n=de(t.getNames());Y(n,(t=>{s(t,(n=>{const o=n.previous.get();return Xa(e,U.some(t)).fold((()=>{o.each((e=>{(e=>{r(e,(t=>{Y(t.listeners,(t=>t(!1,e)))}))})(t),n.previous.clear(),a(e,!1)}))}),(({uid:e,name:t,elements:s})=>{Ft(o,e)||(o.each((e=>a(e,!1))),((e,t,n)=>{r(e,(o=>{Y(o.listeners,(o=>o(!0,e,{uid:t,nodes:K(n,(e=>e.dom))})))}))})(t,e,s),n.previous.set(e),a(e,!0))})),{previous:n.previous,listeners:n.listeners}}))}))}),30);return e.on("remove",(()=>{i.cancel()})),e.on("NodeChange",(()=>{i.throttle()})),{addListener:(e,t)=>{s(e,(e=>({previous:e.previous,listeners:e.listeners.concat([t])})))}}})(e,t),o=Qt("span"),r=e=>{Y(e,(e=>{o(e)?_o(e):(e=>{gn(e,$a()),sn(e,`${Wa()}`),sn(e,`${Va()}`),sn(e,`${qa()}`);const t=on(e,`${Ka()}`).map((e=>e.split(","))).getOr([]),n=on(e,`${Ga()}`).map((e=>e.split(","))).getOr([]);var o;Y(t,(t=>sn(e,t))),o=e,Y(n,(e=>{gn(o,e)})),sn(e,`${Ga()}`),sn(e,`${Ka()}`)})(e)}))};return{register:(e,n)=>{t.register(e,n)},annotate:(n,o)=>{t.lookup(n).each((t=>{((e,t,n,o)=>{e.undoManager.transact((()=>{const r=e.selection,s=r.getRng(),a=$u(e).length>0,i=ti("mce-annotation");if(s.collapsed&&!a&&((e,t)=>{const n=Bm(e.dom,t,[{inline:"span"}]);t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),e.selection.setRng(t)})(e,s),r.getRng().collapsed&&!a){const s=Lm(e.getDoc(),i,o,t,n.decorate);Oo(s,fr),r.getRng().insertNode(s.dom),r.select(s.dom)}else Ju(r,!1,(()=>{Xu(e,(r=>{Fm(e,r,i,t,n.decorate,o)}))}))}))})(e,n,t,o)}))},annotationChanged:(e,t)=>{n.addListener(e,t)},remove:t=>{Xa(e,U.some(t)).each((({elements:t})=>{const n=e.selection.getBookmark();r(t),e.selection.moveToBookmark(n)}))},removeAll:t=>{const n=e.selection.getBookmark();be(Za(e,t),((e,t)=>{r(e)})),e.selection.moveToBookmark(n)},getAll:t=>{const n=Za(e,t);return ye(n,(e=>K(e,(e=>e.dom))))}}},jm=e=>({getBookmark:M(Tu,e),moveToBookmark:M(Au,e)});jm.isBookmarkNode=Ru;const Um=(e,t,n)=>!n.collapsed&&G(n.getClientRects(),(n=>((e,t,n)=>t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom)(n,e,t))),Hm=(e,t,n)=>{e.dispatch(t,n)},$m=(e,t,n,o)=>{e.dispatch("FormatApply",{format:t,node:n,vars:o})},Vm=(e,t,n,o)=>{e.dispatch("FormatRemove",{format:t,node:n,vars:o})},Wm=(e,t)=>e.dispatch("SetContent",t),qm=(e,t)=>e.dispatch("GetContent",t),Gm=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),Km={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||Km.metaKeyPressed(e),metaKeyPressed:e=>Bt.os.isMacOS()||Bt.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},Ym="data-mce-selected",Xm=Math.abs,Jm=Math.round,Qm={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},Zm=(e,t)=>{const n=t.dom,o=t.getDoc(),r=document,s=t.getBody();let a,i,l,c,d,u,m,p,f,g,h,v,b,y,x;const w=e=>_(e)&&(ar(e)||n.is(e,"figure.image")),C=e=>ur(e)||n.hasClass(e,"mce-preview-object"),S=e=>{const n=e.target;((e,t)=>{if((e=>"longpress"===e.type||0===e.type.indexOf("touch"))(e)){const n=e.touches[0];return w(e.target)&&!Um(n.clientX,n.clientY,t)}return w(e.target)&&!Um(e.clientX,e.clientY,t)})(e,t.selection.getRng())&&!e.isDefaultPrevented()&&t.selection.select(n)},k=e=>n.hasClass(e,"mce-preview-object")&&_(e.firstElementChild)?[e,e.firstElementChild]:n.is(e,"figure.image")?[e.querySelector("img")]:[e],E=e=>{const o=ec(t);return!!o&&"false"!==e.getAttribute("data-mce-resize")&&e!==t.getBody()&&(n.hasClass(e,"mce-preview-object")&&_(e.firstElementChild)?_n(wn(e.firstElementChild),o):_n(wn(e),o))},O=(e,o,r)=>{if(_(r)){const s=k(e);Y(s,(e=>{e.style[o]||!t.schema.isValid(e.nodeName.toLowerCase(),o)?n.setStyle(e,o,r):n.setAttrib(e,o,""+r)}))}},T=(e,t,n)=>{O(e,"width",t),O(e,"height",n)},A=e=>{let o,r,d,S,_;o=e.screenX-u,r=e.screenY-m,v=o*c[2]+p,b=r*c[3]+f,v=v<5?5:v,b=b<5?5:b,d=(w(a)||C(a))&&!1!==tc(t)?!Km.modifierPressed(e):Km.modifierPressed(e),d&&(Xm(o)>Xm(r)?(b=Jm(v*g),v=Jm(b/g)):(v=Jm(b/g),b=Jm(v*g))),T(i,v,b),S=c.startPos.x+o,_=c.startPos.y+r,S=S>0?S:0,_=_>0?_:0,n.setStyles(l,{left:S,top:_,display:"block"}),l.innerHTML=v+" &times; "+b,c[2]<0&&i.clientWidth<=v&&n.setStyle(i,"left",void 0+(p-v)),c[3]<0&&i.clientHeight<=b&&n.setStyle(i,"top",void 0+(f-b)),o=s.scrollWidth-y,r=s.scrollHeight-x,o+r!==0&&n.setStyles(l,{left:S-o,top:_-r}),h||(((e,t,n,o,r)=>{e.dispatch("ObjectResizeStart",{target:t,width:n,height:o,origin:r})})(t,a,p,f,"corner-"+c.name),h=!0)},R=()=>{const e=h;h=!1,e&&(O(a,"width",v),O(a,"height",b)),n.unbind(o,"mousemove",A),n.unbind(o,"mouseup",R),r!==o&&(n.unbind(r,"mousemove",A),n.unbind(r,"mouseup",R)),n.remove(i),n.remove(l),n.remove(d),N(a),e&&(((e,t,n,o,r)=>{e.dispatch("ObjectResized",{target:t,width:n,height:o,origin:r})})(t,a,v,b,"corner-"+c.name),n.setAttrib(a,"style",n.getAttrib(a,"style"))),t.nodeChanged()},N=e=>{P();const h=n.getPos(e,s),w=h.x,S=h.y,_=e.getBoundingClientRect(),O=_.width||_.right-_.left,N=_.height||_.bottom-_.top;a!==e&&(B(),a=e,v=b=0);const D=t.dispatch("ObjectSelected",{target:e});E(e)&&!D.isDefaultPrevented()?be(Qm,((e,t)=>{let h=n.get("mceResizeHandle"+t);h&&n.remove(h),h=n.add(s,"div",{id:"mceResizeHandle"+t,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+t+"-resize; margin:0; padding:0"}),n.bind(h,"mousedown",(h=>{h.stopImmediatePropagation(),h.preventDefault(),(h=>{const v=k(a)[0];var b;u=h.screenX,m=h.screenY,p=v.clientWidth,f=v.clientHeight,g=f/p,c=e,c.name=t,c.startPos={x:O*e[0]+w,y:N*e[1]+S},y=s.scrollWidth,x=s.scrollHeight,d=n.add(s,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(d,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),i=C(b=a)?n.create("img",{src:Bt.transparentSrc}):b.cloneNode(!0),n.addClass(i,"mce-clonedresizable"),n.setAttrib(i,"data-mce-bogus","all"),i.contentEditable="false",n.setStyles(i,{left:w,top:S,margin:0}),T(i,O,N),i.removeAttribute(Ym),s.appendChild(i),n.bind(o,"mousemove",A),n.bind(o,"mouseup",R),r!==o&&(n.bind(r,"mousemove",A),n.bind(r,"mouseup",R)),l=n.add(s,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},p+" &times; "+f)})(h)})),e.elm=h,n.setStyles(h,{left:O*e[0]+w-h.offsetWidth/2,top:N*e[1]+S-h.offsetHeight/2})})):B(!1)},D=Ua(N,0),B=(e=!0)=>{D.cancel(),P(),a&&e&&a.removeAttribute(Ym),be(Qm,((e,t)=>{const o=n.get("mceResizeHandle"+t);o&&(n.unbind(o),n.remove(o))}))},M=(e,t)=>n.isChildOf(e,t),I=o=>{if(h||t.removed||t.composing)return;const r="mousedown"===o.type?o.target:e.getNode(),a=oo(wn(r),"table,img,figure.image,hr,video,span.mce-preview-object").map((e=>e.dom)).filter((e=>n.isEditable(e.parentElement))).getOrUndefined(),i=_(a)?n.getAttrib(a,Ym,"1"):"1";if(Y(n.select("img[data-mce-selected],hr[data-mce-selected]"),(e=>{e.removeAttribute(Ym)})),_(a)&&M(a,s)){L();const t=e.getStart(!0);if(M(t,a)&&M(e.getEnd(!0),a))return n.setAttrib(a,Ym,i),void D.throttle(a)}B()},P=()=>{be(Qm,(e=>{e.elm&&(n.unbind(e.elm),delete e.elm)}))},L=()=>{try{t.getDoc().execCommand("enableObjectResizing",!1,"false")}catch(e){}};return t.on("init",(()=>{L(),t.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",I),t.on("keyup compositionend",(e=>{a&&"TABLE"===a.nodeName&&I(e)})),t.on("hide blur",B),t.on("contextmenu longpress",S,!0)})),t.on("remove",P),{isResizable:E,showResizeRect:N,hideResizeRect:B,updateResizeRect:I,destroy:()=>{D.cancel(),a=i=d=null}}},ep=(e,t,n)=>{const o=e.document.createRange();var r;return r=o,t.fold((e=>{r.setStartBefore(e.dom)}),((e,t)=>{r.setStart(e.dom,t)}),(e=>{r.setStartAfter(e.dom)})),((e,t)=>{t.fold((t=>{e.setEndBefore(t.dom)}),((t,n)=>{e.setEnd(t.dom,n)}),(t=>{e.setEndAfter(t.dom)}))})(o,n),o},tp=(e,t,n,o,r)=>{const s=e.document.createRange();return s.setStart(t.dom,n),s.setEnd(o.dom,r),s},np=al([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),op=(e,t,n)=>t(wn(n.startContainer),n.startOffset,wn(n.endContainer),n.endOffset);np.ltr,np.rtl;const rp=(e,t,n,o)=>({start:e,soffset:t,finish:n,foffset:o}),sp=document.caretPositionFromPoint?(e,t,n)=>{var o,r;return U.from(null===(r=(o=e.dom).caretPositionFromPoint)||void 0===r?void 0:r.call(o,t,n)).bind((t=>{if(null===t.offsetNode)return U.none();const n=e.dom.createRange();return n.setStart(t.offsetNode,t.offset),n.collapse(),U.some(n)}))}:document.caretRangeFromPoint?(e,t,n)=>{var o,r;return U.from(null===(r=(o=e.dom).caretRangeFromPoint)||void 0===r?void 0:r.call(o,t,n))}:U.none,ap=al([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),ip={before:ap.before,on:ap.on,after:ap.after,cata:(e,t,n,o)=>e.fold(t,n,o),getStart:e=>e.fold(D,D,D)},lp=al([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),cp={domRange:lp.domRange,relative:lp.relative,exact:lp.exact,exactFromRange:e=>lp.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{const t=(e=>e.match({domRange:e=>wn(e.startContainer),relative:(e,t)=>ip.getStart(e),exact:(e,t,n,o)=>e}))(e);return Rn(t)},range:rp},dp=(e,t)=>{const n=Wt(e);return"input"===n?ip.after(e):q(["br","img"],n)?0===t?ip.before(e):ip.after(e):ip.on(e,t)},up=(e,t)=>{const n=e.fold(ip.before,dp,ip.after),o=t.fold(ip.before,dp,ip.after);return cp.relative(n,o)},mp=(e,t,n,o)=>{const r=dp(e,t),s=dp(n,o);return cp.relative(r,s)},pp=(e,t)=>{const n=(t||document).createDocumentFragment();return Y(e,(e=>{n.appendChild(e.dom)})),wn(n)},fp=e=>{const t=cp.getWin(e).dom,n=(e,n,o,r)=>tp(t,e,n,o,r),o=(e=>e.match({domRange:e=>{const t=wn(e.startContainer),n=wn(e.endContainer);return mp(t,e.startOffset,n,e.endOffset)},relative:up,exact:mp}))(e);return((e,t)=>{const n=((e,t)=>t.match({domRange:e=>({ltr:N(e),rtl:U.none}),relative:(t,n)=>({ltr:Fe((()=>ep(e,t,n))),rtl:Fe((()=>U.some(ep(e,n,t))))}),exact:(t,n,o,r)=>({ltr:Fe((()=>tp(e,t,n,o,r))),rtl:Fe((()=>U.some(tp(e,o,r,t,n))))})}))(e,t);return((e,t)=>{const n=t.ltr();return n.collapsed?t.rtl().filter((e=>!1===e.collapsed)).map((e=>np.rtl(wn(e.endContainer),e.endOffset,wn(e.startContainer),e.startOffset))).getOrThunk((()=>op(0,np.ltr,n))):op(0,np.ltr,n)})(0,n)})(t,o).match({ltr:n,rtl:n})},gp=(e,t,n)=>((e,t,n)=>((e,t,n)=>{const o=wn(e.document);return sp(o,t,n).map((e=>rp(wn(e.startContainer),e.startOffset,wn(e.endContainer),e.endOffset)))})(e,t,n))(Rn(wn(n)).dom,e,t).map((e=>{const t=n.createRange();return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),t})).getOrUndefined(),hp=(e,t)=>_(e)&&_(t)&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,vp=(e,t,n)=>null!==((e,t,n)=>{let o=e;for(;o&&o!==t;){if(n(o))return o;o=o.parentNode}return null})(e,t,n),bp=(e,t,n)=>vp(e,t,(e=>e.nodeName===n)),yp=(e,t)=>Hr(e)&&!vp(e,t,vu),xp=(e,t,n)=>{const o=t.parentNode;if(o){const r=new Uo(t,e.getParent(o,e.isBlock)||e.getRoot());let s;for(;s=r[n?"prev":"next"]();)if(sr(s))return!0}return!1},wp=(e,t,n,o,r)=>{const s=e.getRoot(),a=e.schema.getNonEmptyElements(),i=r.parentNode;let l,c;if(!i)return U.none();const d=e.getParent(i,e.isBlock)||s;if(o&&sr(r)&&t&&e.isEmpty(d))return U.some(Ii(i,e.nodeIndex(r)));const u=new Uo(r,d);for(;c=u[o?"prev":"next"]();){if("false"===e.getContentEditableParent(c)||yp(c,s))return U.none();if(Zo(c)&&c.data.length>0)return bp(c,s,"A")?U.none():U.some(Ii(c,o?c.data.length:0));if(e.isBlock(c)||a[c.nodeName.toLowerCase()])return U.none();l=c}return nr(l)?U.none():n&&l?U.some(Ii(l,0)):U.none()},Cp=(e,t,n,o)=>{const r=e.getRoot();let s,a=!1,i=n?o.startContainer:o.endContainer,l=n?o.startOffset:o.endOffset;const c=Vo(i)&&l===i.childNodes.length,d=e.schema.getNonEmptyElements();let u=n;if(Hr(i))return U.none();if(Vo(i)&&l>i.childNodes.length-1&&(u=!1),or(i)&&(i=r,l=0),i===r){if(u&&(s=i.childNodes[l>0?l-1:0],s)){if(Hr(s))return U.none();if(d[s.nodeName]||Xo(s))return U.none()}if(i.hasChildNodes()){if(l=Math.min(!u&&l>0?l-1:l,i.childNodes.length-1),i=i.childNodes[l],l=Zo(i)&&c?i.data.length:0,!t&&i===r.lastChild&&Xo(i))return U.none();if(((e,t)=>{let n=t;for(;n&&n!==e;){if(lr(n))return!0;n=n.parentNode}return!1})(r,i)||Hr(i))return U.none();if(i.hasChildNodes()&&!Xo(i)){s=i;const t=new Uo(i,r);do{if(lr(s)||Hr(s)){a=!1;break}if(Zo(s)&&s.data.length>0){l=u?0:s.data.length,i=s,a=!0;break}if(d[s.nodeName.toLowerCase()]&&!dr(s)){l=e.nodeIndex(s),i=s.parentNode,u||l++,a=!0;break}}while(s=u?t.next():t.prev())}}}return t&&(Zo(i)&&0===l&&wp(e,c,t,!0,i).each((e=>{i=e.container(),l=e.offset(),a=!0})),Vo(i)&&(s=i.childNodes[l],s||(s=i.childNodes[l-1]),!s||!sr(s)||((e,t)=>{var n;return"A"===(null===(n=e.previousSibling)||void 0===n?void 0:n.nodeName)})(s)||xp(e,s,!1)||xp(e,s,!0)||wp(e,c,t,!0,s).each((e=>{i=e.container(),l=e.offset(),a=!0})))),u&&!t&&Zo(i)&&l===i.data.length&&wp(e,c,t,!1,i).each((e=>{i=e.container(),l=e.offset(),a=!0})),a&&i?U.some(Ii(i,l)):U.none()},Sp=(e,t)=>{const n=t.collapsed,o=t.cloneRange(),r=Ii.fromRangeStart(t);return Cp(e,n,!0,o).each((e=>{n&&Ii.isAbove(r,e)||o.setStart(e.container(),e.offset())})),n||Cp(e,n,!1,o).each((e=>{o.setEnd(e.container(),e.offset())})),n&&o.collapse(!0),hp(t,o)?U.none():U.some(o)},_p=(e,t)=>e.splitText(t),kp=e=>{let t=e.startContainer,n=e.startOffset,o=e.endContainer,r=e.endOffset;if(t===o&&Zo(t)){if(n>0&&n<t.data.length)if(o=_p(t,n),t=o.previousSibling,r>n){r-=n;const e=_p(o,r).previousSibling;t=o=e,r=e.data.length,n=0}else r=0}else if(Zo(t)&&n>0&&n<t.data.length&&(t=_p(t,n),n=0),Zo(o)&&r>0&&r<o.data.length){const e=_p(o,r).previousSibling;o=e,r=e.data.length}return{startContainer:t,startOffset:n,endContainer:o,endOffset:r}},Ep=e=>({walk:(t,n)=>Mm(e,t,n),split:kp,expand:(t,n={type:"word"})=>{if("word"===n.type){const n=Bm(e,t,[{inline:"span"}]),o=e.createRng();return o.setStart(n.startContainer,n.startOffset),o.setEnd(n.endContainer,n.endOffset),o}return t},normalize:t=>Sp(e,t).fold(z,(e=>(t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),!0)))});Ep.compareRanges=hp,Ep.getCaretRangeFromPoint=gp,Ep.getSelectedNode=fi,Ep.getNode=gi;const Op=((e,t)=>{const n=t=>{const n=(e=>{const t=e.dom;return Jn(e)?t.getBoundingClientRect().height:t.offsetHeight})(t);if(n<=0||null===n){const n=uo(t,e);return parseFloat(n)||0}return n},o=(e,t)=>ee(t,((t,n)=>{const o=uo(e,n),r=void 0===o?0:parseInt(o,10);return isNaN(r)?t:t+r}),0);return{set:(t,n)=>{if(!E(n)&&!n.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+n);const o=t.dom;ao(o)&&(o.style[e]=n+"px")},get:n,getOuter:n,aggregate:o,max:(e,t,n)=>{const r=o(e,n);return t>r?t-r:0}}})("height"),Tp=()=>wn(document),Ap=(e,t)=>e.view(t).fold(N([]),(t=>{const n=e.owner(t),o=Ap(e,n);return[t].concat(o)}));var Rp=Object.freeze({__proto__:null,view:e=>{var t;return(e.dom===document?U.none():U.from(null===(t=e.dom.defaultView)||void 0===t?void 0:t.frameElement)).map(wn)},owner:e=>An(e)});const Np=e=>"textarea"===Wt(e),Dp=(e,t)=>{const n=(e=>{const t=e.dom.ownerDocument,n=t.body,o=t.defaultView,r=t.documentElement;if(n===e.dom)return No(n.offsetLeft,n.offsetTop);const s=Do(null==o?void 0:o.pageYOffset,r.scrollTop),a=Do(null==o?void 0:o.pageXOffset,r.scrollLeft),i=Do(r.clientTop,n.clientTop),l=Do(r.clientLeft,n.clientLeft);return Bo(e).translate(a-l,s-i)})(e),o=(e=>Op.get(e))(e);return{element:e,bottom:n.top+o,height:o,pos:n,cleanup:t}},Bp=(e,t,n,o)=>{Lp(e,((r,s)=>Ip(e,t,n,o)),n)},Mp=(e,t,n,o,r)=>{const s={elm:o.element.dom,alignToTop:r};((e,t)=>e.dispatch("ScrollIntoView",t).isDefaultPrevented())(e,s)||(n(t,Mo(t).top,o,r),((e,t)=>{e.dispatch("AfterScrollIntoView",t)})(e,s))},Ip=(e,t,n,o)=>{const r=wn(e.getBody()),s=wn(e.getDoc());r.dom.offsetWidth;const a=((e,t)=>{const n=((e,t)=>{const n=Fn(e);if(0===n.length||Np(e))return{element:e,offset:t};if(t<n.length&&!Np(n[t]))return{element:n[t],offset:0};{const o=n[n.length-1];return Np(o)?{element:e,offset:t}:"img"===Wt(o)?{element:o,offset:1}:Yt(o)?{element:o,offset:vr(o).length}:{element:o,offset:Fn(o).length}}})(e,t),o=bn('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>');return ho(n.element,o),Dp(o,(()=>So(o)))})(wn(n.startContainer),n.startOffset);Mp(e,s,t,a,o),a.cleanup()},Pp=(e,t,n,o)=>{const r=wn(e.getDoc());Mp(e,r,n,(e=>Dp(wn(e),T))(t),o)},Lp=(e,t,n)=>{const o=n.startContainer,r=n.startOffset,s=n.endContainer,a=n.endOffset;t(wn(o),wn(s));const i=e.dom.createRng();i.setStart(o,r),i.setEnd(s,a),e.selection.setRng(n)},Fp=(e,t)=>e.element.dom.scrollIntoView({block:t?"start":"end"}),zp=(e,t,n,o)=>{const r=t+e,s=n.pos.top,a=n.bottom,i=a-s>=t;s<e?Fp(n,!1!==o):s>r?Fp(n,i?!1!==o:!0===o):a>r&&!i&&Fp(n,!0===o)},jp=(e,t,n,o)=>{const r=Rn(e).dom.innerHeight;zp(t,r,n,o)},Up=(e,t,n,o)=>{const r=Rn(e).dom.innerHeight;zp(t,r,n,o);const s=(e=>{const t=Tp(),n=Mo(t),o=((e,t)=>{const n=t.owner(e);return Ap(t,n)})(e,Rp),r=Bo(e),s=Z(o,((e,t)=>{const n=Bo(t);return{left:e.left+n.left,top:e.top+n.top}}),{left:0,top:0});return No(s.left+r.left+n.left,s.top+r.top+n.top)})(n.element),a=Lo(window);s.top<a.y?Io(n.element,!1!==o):s.top>a.bottom&&Io(n.element,!0===o)},Hp=(e,t,n)=>Bp(e,jp,t,n),$p=(e,t,n)=>Pp(e,t,jp,n),Vp=(e,t,n)=>Bp(e,Up,t,n),Wp=(e,t,n)=>Pp(e,t,Up,n),qp=(e,t,n)=>{(e.inline?Hp:Vp)(e,t,n)},Gp=e=>e.dom.focus(),Kp=e=>{const t=qn(e).dom;return e.dom===t.activeElement},Yp=(e=Tp())=>U.from(e.dom.activeElement).map(wn),Xp=(e,t)=>{const n=Yt(t)?vr(t).length:Fn(t).length+1;return e>n?n:e<0?0:e},Jp=e=>cp.range(e.start,Xp(e.soffset,e.start),e.finish,Xp(e.foffset,e.finish)),Qp=(e,t)=>!$o(t.dom)&&(On(e,t)||En(e,t)),Zp=e=>t=>Qp(e,t.start)&&Qp(e,t.finish),ef=e=>cp.range(wn(e.startContainer),e.startOffset,wn(e.endContainer),e.endOffset),tf=e=>{const t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),U.some(t)}catch(e){return U.none()}},nf=e=>{const t=(e=>e.inline||Bt.browser.isFirefox())(e)?(n=wn(e.getBody()),(e=>{const t=e.getSelection();return(t&&0!==t.rangeCount?U.from(t.getRangeAt(0)):U.none()).map(ef)})(Rn(n).dom).filter(Zp(n))):U.none();var n;e.bookmark=t.isSome()?t:e.bookmark},of=e=>(e.bookmark?e.bookmark:U.none()).bind((t=>{return n=wn(e.getBody()),o=t,U.from(o).filter(Zp(n)).map(Jp);var n,o})).bind(tf),rf={isEditorUIElement:e=>{const t=e.className.toString();return-1!==t.indexOf("tox-")||-1!==t.indexOf("mce-")}},sf={setEditorTimeout:(e,t,n)=>((e,t)=>(E(t)||(t=0),setTimeout(e,t)))((()=>{e.removed||t()}),n),setEditorInterval:(e,t,n)=>{const o=((e,t)=>(E(t)||(t=0),setInterval(e,t)))((()=>{e.removed?clearInterval(o):t()}),n);return o}};let af;const lf=Ra.DOM,cf=e=>{const t=e.classList;return void 0!==t&&(t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body"))},df=(e,t)=>{const n=fc(e),o=lf.getParent(t,(t=>(e=>Vo(e)&&rf.isEditorUIElement(e))(t)||!!n&&e.dom.is(t,n)));return null!==o},uf=e=>{try{const t=qn(wn(e.getElement()));return Yp(t).fold((()=>document.body),(e=>e.dom))}catch(e){return document.body}},mf=(e,t)=>{const n=t.editor;(e=>{const t=Ua((()=>{nf(e)}),0);e.on("init",(()=>{e.inline&&((e,t)=>{const n=()=>{t.throttle()};Ra.DOM.bind(document,"mouseup",n),e.on("remove",(()=>{Ra.DOM.unbind(document,"mouseup",n)}))})(e,t),((e,t)=>{((e,t)=>{e.on("mouseup touchend",(e=>{t.throttle()}))})(e,t),e.on("keyup NodeChange AfterSetSelectionRange",(t=>{(e=>"nodechange"===e.type&&e.selectionChange)(t)||nf(e)}))})(e,t)})),e.on("remove",(()=>{t.cancel()}))})(n);const o=(e,t)=>{ed(e)&&!0!==e.inline&&t(wn(e.getContainer()),"tox-edit-focus")};n.on("focusin",(()=>{const t=e.focusedEditor;cf(uf(n))&&o(n,pn),t!==n&&(t&&t.dispatch("blur",{focusedEditor:n}),e.setActive(n),e.focusedEditor=n,n.dispatch("focus",{blurredEditor:t}),n.focus(!0))})),n.on("focusout",(()=>{sf.setEditorTimeout(n,(()=>{const t=e.focusedEditor;cf(uf(n))&&t===n||o(n,gn),df(n,uf(n))||t!==n||(n.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)}))})),af||(af=t=>{const n=e.activeEditor;n&&Yn(t).each((t=>{const o=t;o.ownerDocument===document&&(o===document.body||df(n,o)||e.focusedEditor!==n||(n.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null))}))},lf.bind(document,"focusin",af))},pf=(e,t)=>{e.focusedEditor===t.editor&&(e.focusedEditor=null),!e.activeEditor&&af&&(lf.unbind(document,"focusin",af),af=null)},ff=(e,t)=>{((e,t)=>(e=>e.collapsed?U.from(gi(e.startContainer,e.startOffset)).map(wn):U.none())(t).bind((t=>Or(t)?U.some(t):On(e,t)?U.none():U.some(e))))(wn(e.getBody()),t).bind((e=>fu(e.dom))).fold((()=>{e.selection.normalize()}),(t=>e.selection.setRng(t.toRange())))},gf=e=>{if(e.setActive)try{e.setActive()}catch(n){e.focus()}else e.focus()},hf=e=>e.inline?(e=>{const t=e.getBody();return t&&(n=wn(t),Kp(n)||(o=n,Yp(qn(o)).filter((e=>o.dom.contains(e.dom)))).isSome());var n,o})(e):(e=>_(e.iframeElement)&&Kp(wn(e.iframeElement)))(e),vf=e=>e.editorManager.setActive(e),bf=(e,t,n,o,r)=>{const s=n?t.startContainer:t.endContainer,a=n?t.startOffset:t.endOffset;return U.from(s).map(wn).map((e=>o&&t.collapsed?e:zn(e,r(e,a)).getOr(e))).bind((e=>Kt(e)?U.some(e):Nn(e).filter(Kt))).map((e=>e.dom)).getOr(e)},yf=(e,t,n=!1)=>bf(e,t,!0,n,((e,t)=>Math.min(Hn(e),t))),xf=(e,t,n=!1)=>bf(e,t,!1,n,((e,t)=>t>0?t-1:t)),wf=(e,t)=>{const n=e;for(;e&&Zo(e)&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n},Cf=(e,t)=>K(t,(t=>{const n=e.dispatch("GetSelectionRange",{range:t});return n.range!==t?n.range:t})),Sf=["img","br"],_f=e=>{const t=br(e).filter((e=>0!==e.trim().length||e.indexOf(fr)>-1)).isSome();return t||q(Sf,Wt(e))||(e=>{return Kt(t=e)&&Vt(t.dom)&&"false"===nn(e,"contenteditable");var t})(e)},kf="[data-mce-autocompleter]",Ef=(e,t)=>{if(Of(wn(e.getBody())).isNone()){const o=bn('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());yo(o,wn(t.extractContents())),t.insertNode(o.dom),Nn(o).each((e=>e.dom.normalize())),(n=o,((e,t)=>{const n=e=>{const o=Fn(e);for(let r=o.length-1;r>=0;r--){const e=o[r];if(t(e))return U.some(e);const s=n(e);if(s.isSome())return s}return U.none()};return n(e)})(n,_f)).map((t=>{e.selection.setCursorLocation(t.dom,(e=>"img"===Wt(e)?1:br(e).fold((()=>Fn(e).length),(e=>e.length)))(t))}))}var n},Of=e=>no(e,kf),Tf={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Af=(e,t,n)=>{const o=n?"lastChild":"firstChild",r=n?"prev":"next";if(e[o])return e[o];if(e!==t){let n=e[r];if(n)return n;for(let o=e.parent;o&&o!==t;o=o.parent)if(n=o[r],n)return n}},Rf=e=>{var t;const n=null!==(t=e.value)&&void 0!==t?t:"";if(!ls(n))return!1;const o=e.parent;return!o||"span"===o.name&&!o.attr("style")||!/^[ ]+$/.test(n)},Nf=e=>{const t="a"===e.name&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class Df{constructor(e,t){this.name=e,this.type=t,1===t&&(this.attributes=[],this.attributes.map={})}static create(e,t){const n=new Df(e,Tf[e]||1);return t&&be(t,((e,t)=>{n.attr(t,e)})),n}replace(e){const t=this;return e.parent&&e.remove(),t.insert(e,t),t.remove(),t}attr(e,t){const n=this;if(!h(e))return _(e)&&be(e,((e,t)=>{n.attr(t,e)})),n;const o=n.attributes;if(o){if(void 0!==t){if(null===t){if(e in o.map){delete o.map[e];let t=o.length;for(;t--;)if(o[t].name===e)return o.splice(t,1),n}return n}if(e in o.map){let n=o.length;for(;n--;)if(o[n].name===e){o[n].value=t;break}}else o.push({name:e,value:t});return o.map[e]=t,n}return o.map[e]}}clone(){const e=this,t=new Df(e.name,e.type),n=e.attributes;if(n){const e=[];e.map={};for(let t=0,o=n.length;t<o;t++){const o=n[t];"id"!==o.name&&(e[e.length]={name:o.name,value:o.value},e.map[o.name]=o.value)}t.attributes=e}return t.value=e.value,t}wrap(e){const t=this;return t.parent&&(t.parent.insert(e,t),e.append(t)),t}unwrap(){const e=this;for(let t=e.firstChild;t;){const n=t.next;e.insert(t,e,!0),t=n}e.remove()}remove(){const e=this,t=e.parent,n=e.next,o=e.prev;return t&&(t.firstChild===e?(t.firstChild=n,n&&(n.prev=null)):o&&(o.next=n),t.lastChild===e?(t.lastChild=o,o&&(o.next=null)):n&&(n.prev=o),e.parent=e.next=e.prev=null),e}append(e){const t=this;e.parent&&e.remove();const n=t.lastChild;return n?(n.next=e,e.prev=n,t.lastChild=e):t.lastChild=t.firstChild=e,e.parent=t,e}insert(e,t,n){e.parent&&e.remove();const o=t.parent||this;return n?(t===o.firstChild?o.firstChild=e:t.prev&&(t.prev.next=e),e.prev=t.prev,e.next=t,t.prev=e):(t===o.lastChild?o.lastChild=e:t.next&&(t.next.prev=e),e.next=t.next,e.prev=t,t.next=e),e.parent=o,e}getAll(e){const t=this,n=[];for(let o=t.firstChild;o;o=Af(o,t))o.name===e&&n.push(o);return n}children(){const e=[];for(let t=this.firstChild;t;t=t.next)e.push(t);return e}empty(){const e=this;if(e.firstChild){const t=[];for(let o=e.firstChild;o;o=Af(o,e))t.push(o);let n=t.length;for(;n--;){const e=t[n];e.parent=e.firstChild=e.lastChild=e.next=e.prev=null}}return e.firstChild=e.lastChild=null,e}isEmpty(e,t={},n){var o;const r=this;let s=r.firstChild;if(Nf(r))return!1;if(s)do{if(1===s.type){if(s.attr("data-mce-bogus"))continue;if(e[s.name])return!1;if(Nf(s))return!1}if(8===s.type)return!1;if(3===s.type&&!Rf(s))return!1;if(3===s.type&&s.parent&&t[s.parent.name]&&ls(null!==(o=s.value)&&void 0!==o?o:""))return!1;if(n&&n(s))return!1}while(s=Af(s,r));return!0}walk(e){return Af(this,null,e)}}const Bf=(e,t,n=0)=>{const o=e.toLowerCase();if(-1!==o.indexOf("[if ",n)&&((e,t)=>/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(e.substr(t)))(o,n)){const e=o.indexOf("[endif]",n);return o.indexOf(">",e)}if(t){const e=o.indexOf(">",n);return-1!==e?e:o.length}{const t=/--!?>/g;t.lastIndex=n;const r=t.exec(e);return r?r.index+r[0].length:o.length}},Mf=(e,t,n)=>{const o=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,r=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,s=e.getVoidElements();let a=1,i=n;for(;0!==a;)for(o.lastIndex=i;;){const e=o.exec(t);if(null===e)return i;if("!"===e[1]){i=qe(e[2],"--")?Bf(t,!1,e.index+3):Bf(t,!0,e.index+1);break}{r.lastIndex=o.lastIndex;const n=r.exec(t);if(x(n)||n.index!==o.lastIndex)continue;"/"===e[1]?a-=1:Oe(s,e[2])||(a+=1),i=o.lastIndex+n[0].length;break}}return i},If=(e,t)=>{const n=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,o=e.schema;let r=((e,t)=>{const n=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return t.replace(n,"")})(e.getTempAttrs(),t);const s=o.getVoidElements();let a;for(;a=n.exec(r);){const e=n.lastIndex,t=a[0].length;let i;i=s[a[1]]?e:Mf(o,r,e),r=r.substring(0,e-t)+r.substring(i),n.lastIndex=e-t}return Lr(r)},Pf=If,Lf=e=>{const t=zo(e,"[data-mce-bogus]");Y(t,(e=>{"all"===nn(e,"data-mce-bogus")?So(e):Sr(e)?(ho(e,xn(pr)),So(e)):_o(e)}))},Ff=e=>{const t=zo(e,"input");Y(t,(e=>{sn(e,"name")}))},zf=(e,t,n)=>{let o;return o="raw"===t.format?Lt.trim(Pf(e.serializer,n.innerHTML)):"text"===t.format?((e,t)=>{const n=e.getDoc(),o=qn(wn(e.getBody())),r=yn("div",n);en(r,"data-mce-bogus","all"),co(r,{position:"fixed",left:"-9999999px",top:"0"}),Oo(r,t.innerHTML),Lf(r),Ff(r);const s=(e=>$n(e)?e:wn(An(e).dom.body))(o);yo(s,r);const a=Lr(r.dom.innerText);return So(r),a})(e,n):"tree"===t.format?e.serializer.serialize(n,t):((e,t)=>{const n=Ol(e),o=new RegExp(`^(<${n}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${n}>[\r\n]*|<br \\/>[\r\n]*)$`);return t.replace(o,"")})(e,e.serializer.serialize(n,t)),"text"!==t.format&&!Ar(wn(n))&&h(o)?Lt.trim(o):o},jf=Lt.makeMap,Uf=e=>{const t=[],n=(e=e||{}).indent,o=jf(e.indent_before||""),r=jf(e.indent_after||""),s=Js.getEncodeFunc(e.entity_encoding||"raw",e.entities),a="xhtml"!==e.element_format;return{start:(e,i,l)=>{if(n&&o[e]&&t.length>0){const e=t[t.length-1];e.length>0&&"\n"!==e&&t.push("\n")}if(t.push("<",e),i)for(let n=0,o=i.length;n<o;n++){const e=i[n];t.push(" ",e.name,'="',s(e.value,!0),'"')}if(t[t.length]=!l||a?">":" />",l&&n&&r[e]&&t.length>0){const e=t[t.length-1];e.length>0&&"\n"!==e&&t.push("\n")}},end:e=>{let o;t.push("</",e,">"),n&&r[e]&&t.length>0&&(o=t[t.length-1],o.length>0&&"\n"!==o&&t.push("\n"))},text:(e,n)=>{e.length>0&&(t[t.length]=n?e:s(e))},cdata:e=>{t.push("<![CDATA[",e,"]]>")},comment:e=>{t.push("\x3c!--",e,"--\x3e")},pi:(e,o)=>{o?t.push("<?",e," ",s(o),"?>"):t.push("<?",e,"?>"),n&&t.push("\n")},doctype:e=>{t.push("<!DOCTYPE",e,">",n?"\n":"")},reset:()=>{t.length=0},getContent:()=>t.join("").replace(/\n$/,"")}},Hf=(e={},t=da())=>{const n=Uf(e);return e.validate=!("validate"in e)||e.validate,{serialize:o=>{const r=e.validate,s={3:e=>{var t;n.text(null!==(t=e.value)&&void 0!==t?t:"",e.raw)},8:e=>{var t;n.comment(null!==(t=e.value)&&void 0!==t?t:"")},7:e=>{n.pi(e.name,e.value)},10:e=>{var t;n.doctype(null!==(t=e.value)&&void 0!==t?t:"")},4:e=>{var t;n.cdata(null!==(t=e.value)&&void 0!==t?t:"")},11:e=>{let t=e;if(t=t.firstChild)do{a(t)}while(t=t.next)}};n.reset();const a=e=>{var o;const i=s[e.type];if(i)i(e);else{const s=e.name,i=s in t.getVoidElements();let l=e.attributes;if(r&&l&&l.length>1){const n=[];n.map={};const o=t.getElementRule(e.name);if(o){for(let e=0,t=o.attributesOrder.length;e<t;e++){const t=o.attributesOrder[e];if(t in l.map){const e=l.map[t];n.map[t]=e,n.push({name:t,value:e})}}for(let e=0,t=l.length;e<t;e++){const t=l[e].name;if(!(t in n.map)){const e=l.map[t];n.map[t]=e,n.push({name:t,value:e})}}l=n}}if(n.start(s,l,i),!i){let t=e.firstChild;if(t){"pre"!==s&&"textarea"!==s||3!==t.type||"\n"!==(null===(o=t.value)||void 0===o?void 0:o[0])||n.text("\n",!0);do{a(t)}while(t=t.next)}n.end(s)}}};return 1!==o.type||e.inner?3===o.type?s[3](o):s[11](o):a(o),n.getContent()}}},$f=new Set;Y(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],(e=>{$f.add(e)}));const Vf=["font","text-decoration","text-emphasis"],Wf=(e,t)=>he(e.parseStyle(e.getAttrib(t,"style"))),qf=(e,t,n)=>{const o=Wf(e,t),r=Wf(e,n),s=o=>{var r,s;const a=null!==(r=e.getStyle(t,o))&&void 0!==r?r:"",i=null!==(s=e.getStyle(n,o))&&void 0!==s?s:"";return Qe(a)&&Qe(i)&&a!==i};return G(o,(e=>{const t=t=>G(t,(t=>t===e));if(!t(r)&&t(Vf)){const e=Q(r,(e=>G(Vf,(t=>qe(e,t)))));return G(e,s)}return s(e)}))},Gf=(e,t,n)=>U.from(n.container()).filter(Zo).exists((o=>{const r=e?0:-1;return t(o.data.charAt(n.offset()+r))})),Kf=M(Gf,!0,Du),Yf=M(Gf,!1,Du),Xf=e=>{const t=e.container();return Zo(t)&&(0===t.data.length||Pr(t.data)&&jm.isBookmarkNode(t.parentNode))},Jf=(e,t)=>n=>Id(e?0:-1,n).filter(t).isSome(),Qf=e=>ar(e)&&"block"===uo(wn(e),"display"),Zf=e=>lr(e)&&!(e=>Vo(e)&&"all"===e.getAttribute("data-mce-bogus"))(e),eg=Jf(!0,Qf),tg=Jf(!1,Qf),ng=Jf(!0,ur),og=Jf(!1,ur),rg=Jf(!0,Xo),sg=Jf(!1,Xo),ag=Jf(!0,Zf),ig=Jf(!1,Zf),lg=(e,t)=>((e,t,n)=>On(t,e)?Bn(e,(e=>n(e)||En(e,t))).slice(0,-1):[])(e,t,z),cg=(e,t)=>[e].concat(lg(e,t)),dg=(e,t,n)=>du(e,t,n,Xf),ug=(e,t)=>ne(cg(wn(t.container()),e),wr),mg=(e,t,n)=>dg(e,t.dom,n).forall((e=>ug(t,n).fold((()=>!Md(e,n,t.dom)),(o=>!Md(e,n,t.dom)&&On(o,wn(e.container())))))),pg=(e,t,n)=>ug(t,n).fold((()=>dg(e,t.dom,n).forall((e=>!Md(e,n,t.dom)))),(t=>dg(e,t.dom,n).isNone())),fg=M(pg,!1),gg=M(pg,!0),hg=M(mg,!1),vg=M(mg,!0),bg=e=>Vd(e).exists(Sr),yg=(e,t,n)=>{const o=Q(cg(wn(n.container()),t),wr),r=me(o).getOr(t);return lu(e,r.dom,n).filter(bg)},xg=(e,t)=>Vd(t).exists(Sr)||yg(!0,e,t).isSome(),wg=(e,t)=>(e=>U.from(e.getNode(!0)).map(wn))(t).exists(Sr)||yg(!1,e,t).isSome(),Cg=M(yg,!1),Sg=M(yg,!0),_g=e=>Ii.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),kg=(e,t)=>{const n=Q(cg(wn(t.container()),e),wr);return me(n).getOr(e)},Eg=(e,t)=>_g(t)?Yf(t):Yf(t)||pu(kg(e,t).dom,t).exists(Yf),Og=(e,t)=>_g(t)?Kf(t):Kf(t)||mu(kg(e,t).dom,t).exists(Kf),Tg=e=>Vd(e).bind((e=>eo(e,Kt))).exists((e=>(e=>q(["pre","pre-wrap"],e))(uo(e,"white-space")))),Ag=(e,t)=>n=>{return o=new Uo(n,e)[t](),_(o)&&lr(o)&&Sd(o);var o},Rg=(e,t)=>!Tg(t)&&(fg(e,t)||hg(e,t)||wg(e,t)||Eg(e,t)||((e,t)=>{const n=pu(e.dom,t).getOr(t),o=Ag(e.dom,"prev");return t.isAtStart()&&(o(t.container())||o(n.container()))})(e,t)),Ng=(e,t)=>!Tg(t)&&(gg(e,t)||vg(e,t)||xg(e,t)||Og(e,t)||((e,t)=>{const n=mu(e.dom,t).getOr(t),o=Ag(e.dom,"next");return t.isAtEnd()&&(o(t.container())||o(n.container()))})(e,t)),Dg=(e,t)=>Rg(e,t)||Ng(e,(e=>{const t=e.container(),n=e.offset();return Zo(t)&&n<t.data.length?Ii(t,n+1):e})(t)),Bg=(e,t)=>Nu(e.charAt(t)),Mg=(e,t)=>Du(e.charAt(t)),Ig=(e,t,n)=>{const o=t.data,r=Ii(t,0);return n||!Bg(o,0)||Dg(e,r)?!!(n&&Mg(o,0)&&Rg(e,r))&&(t.data=fr+o.slice(1),!0):(t.data=" "+o.slice(1),!0)},Pg=(e,t,n)=>{const o=t.data,r=Ii(t,o.length-1);return n||!Bg(o,o.length-1)||Dg(e,r)?!!(n&&Mg(o,o.length-1)&&Ng(e,r))&&(t.data=o.slice(0,-1)+fr,!0):(t.data=o.slice(0,-1)+" ",!0)},Lg=(e,t)=>{const n=t.container();if(!Zo(n))return U.none();if((e=>{const t=e.container();return Zo(t)&&We(t.data,fr)})(t)){const o=Ig(e,n,!1)||(e=>{const t=e.data,n=(e=>{const t=e.split("");return K(t,((e,n)=>Nu(e)&&n>0&&n<t.length-1&&Bu(t[n-1])&&Bu(t[n+1])?" ":e)).join("")})(t);return n!==t&&(e.data=n,!0)})(n)||Pg(e,n,!1);return jt(o,t)}if(Dg(e,t)){const o=Ig(e,n,!0)||Pg(e,n,!0);return jt(o,t)}return U.none()},Fg=(e,t,n)=>{if(0===n)return;const o=wn(e),r=Zn(o,wr).getOr(o),s=e.data.slice(t,t+n),a=t+n>=e.data.length&&Ng(r,Ii(e,e.data.length)),i=0===t&&Rg(r,Ii(e,0));e.replaceData(t,n,ds(s,4,i,a))},zg=(e,t)=>{const n=e.data.slice(t),o=n.length-Xe(n).length;Fg(e,t,o)},jg=(e,t)=>{const n=e.data.slice(0,t),o=n.length-Je(n).length;Fg(e,t-o,o)},Ug=(e,t,n,o=!0)=>{const r=Je(e.data).length,s=o?e:t,a=o?t:e;return o?s.appendData(a.data):s.insertData(0,a.data),So(wn(a)),n&&zg(s,r),s},Hg=(e,t)=>((e,t)=>{const n=e.container(),o=e.offset();return!Ii.isTextPosition(e)&&n===t.parentNode&&o>Ii.before(t).offset()})(t,e)?Ii(t.container(),t.offset()-1):t,$g=e=>{return rs(e.previousSibling)?U.some((t=e.previousSibling,Zo(t)?Ii(t,t.data.length):Ii.after(t))):e.previousSibling?gu(e.previousSibling):U.none();var t},Vg=e=>{return rs(e.nextSibling)?U.some((t=e.nextSibling,Zo(t)?Ii(t,0):Ii.before(t))):e.nextSibling?fu(e.nextSibling):U.none();var t},Wg=(e,t,n)=>((e,t,n)=>e?((e,t)=>Vg(t).orThunk((()=>$g(t))).orThunk((()=>((e,t)=>mu(e,Ii.after(t)).orThunk((()=>pu(e,Ii.before(t)))))(e,t))))(t,n):((e,t)=>$g(t).orThunk((()=>Vg(t))).orThunk((()=>((e,t)=>U.from(t.previousSibling?t.previousSibling:t.parentNode).bind((t=>pu(e,Ii.before(t)))).orThunk((()=>mu(e,Ii.after(t)))))(e,t))))(t,n))(e,t,n).map(M(Hg,n)),qg=(e,t,n)=>{n.fold((()=>{e.focus()}),(n=>{e.selection.setRng(n.toRange(),t)}))},Gg=(e,t)=>t&&Oe(e.schema.getBlockElements(),Wt(t)),Kg=e=>{if(gs(e)){const t=bn('<br data-mce-bogus="1">');return Co(e),yo(e,t),U.some(Ii.before(t.dom))}return U.none()},Yg=(e,t,n,o=!0)=>{const r=Wg(t,e.getBody(),n.dom),s=Zn(n,M(Gg,e),(a=e.getBody(),e=>e.dom===a));var a;const i=((e,t,n)=>{const o=Mn(e).filter(Yt),r=In(e).filter(Yt);return So(e),(s=o,a=r,i=t,l=(e,t,o)=>{const r=e.dom,s=t.dom,a=r.data.length;return Ug(r,s,n),o.container()===s?Ii(r,a):o},s.isSome()&&a.isSome()&&i.isSome()?U.some(l(s.getOrDie(),a.getOrDie(),i.getOrDie())):U.none()).orThunk((()=>(n&&(o.each((e=>jg(e.dom,e.dom.length))),r.each((e=>zg(e.dom,0)))),t)));var s,a,i,l})(n,r,((e,t)=>Oe(e.schema.getTextInlineElements(),Wt(t)))(e,n));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):s.bind(Kg).fold((()=>{o&&qg(e,t,i)}),(n=>{o&&qg(e,t,U.some(n))}))},Xg=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,Jg=(e,t)=>_n(wn(t),Zl(e))&&!Os(e.schema,t)&&e.dom.isEditable(t),Qg=(e,t,n)=>{const o=((e,t,n)=>Q(Ra.DOM.getParents(n.container(),"*",t),e))(e,t,n);return U.from(o[o.length-1])},Zg=(e,t)=>{const n=t.container(),o=t.offset();return e?Ur(n)?Zo(n.nextSibling)?Ii(n.nextSibling,0):Ii.after(n):Vr(t)?Ii(n,o+1):t:Ur(n)?Zo(n.previousSibling)?Ii(n.previousSibling,n.previousSibling.data.length):Ii.before(n):Wr(t)?Ii(n,o-1):t},eh=M(Zg,!0),th=M(Zg,!1),nh=(e,t)=>{const n=e=>e.stopImmediatePropagation();e.on("beforeinput input",n,!0),e.getDoc().execCommand(t),e.off("beforeinput input",n)},oh=e=>nh(e,"Delete"),rh=e=>_r(e)||Er(e),sh=(e,t)=>On(e,t)?eo(t,rh,(e=>t=>Ft(Nn(t),e,En))(e)):U.none(),ah=(e,t=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!t})},ih=e=>{var t;return(8===qt(t=e)||"#comment"===Wt(t)?Mn(e):Un(e)).bind(ih).orThunk((()=>U.some(e)))},lh=(e,t,n,o=!0)=>{var r;t.deleteContents();const s=ih(n).getOr(n),a=wn(null!==(r=e.dom.getParent(s.dom,e.dom.isBlock))&&void 0!==r?r:n.dom);if(a.dom===e.getBody()?ah(e,o):gs(a)&&(Br(a),o&&e.selection.setCursorLocation(a.dom,0)),!En(n,a)){const e=Ft(Nn(a),n)?[]:Nn(i=a).map(Fn).map((e=>Q(e,(e=>!En(i,e))))).getOr([]);Y(e.concat(Fn(n)),(e=>{En(e,a)||On(e,a)||!gs(e)||So(e)}))}var i},ch=e=>zo(e,"td,th"),dh=(e,t)=>({start:e,end:t}),uh=al([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),mh=(e,t)=>oo(wn(e),"td,th",t),ph=e=>!En(e.start,e.end),fh=(e,t)=>Vu(e.start,t).bind((n=>Vu(e.end,t).bind((e=>jt(En(n,e),n))))),gh=e=>t=>fh(t,e).map((e=>((e,t,n)=>({rng:e,table:t,cells:n}))(t,e,ch(e)))),hh=(e,t,n,o)=>{if(n.collapsed||!e.forall(ph))return U.none();if(t.isSameTable){const t=e.bind(gh(o));return U.some({start:t,end:t})}{const e=mh(n.startContainer,o),t=mh(n.endContainer,o),r=e.bind((e=>t=>Vu(t,e).bind((e=>pe(ch(e)).map((e=>dh(t,e))))))(o)).bind(gh(o)),s=t.bind((e=>t=>Vu(t,e).bind((e=>me(ch(e)).map((e=>dh(e,t))))))(o)).bind(gh(o));return U.some({start:r,end:s})}},vh=(e,t)=>oe(e,(e=>En(e,t))),bh=e=>zt(vh(e.cells,e.rng.start),vh(e.cells,e.rng.end),((t,n)=>e.cells.slice(t,n+1))),yh=(e,t)=>{const{startTable:n,endTable:o}=t,r=e.cloneRange();return n.each((e=>r.setStartAfter(e.dom))),o.each((e=>r.setEndBefore(e.dom))),r},xh=(e,t)=>{const n=(e=>t=>En(e,t))(e),o=((e,t)=>{const n=mh(e.startContainer,t),o=mh(e.endContainer,t);return zt(n,o,dh)})(t,n),s=((e,t)=>{const n=e=>Vu(wn(e),t),o=n(e.startContainer),r=n(e.endContainer),s=o.isSome(),a=r.isSome(),i=zt(o,r,En).getOr(!1);return{startTable:o,endTable:r,isStartInTable:s,isEndInTable:a,isSameTable:i,isMultiTable:!i&&s&&a}})(t,n);return((e,t,n)=>e.exists((e=>((e,t)=>!ph(e)&&fh(e,t).exists((e=>{const t=e.dom.rows;return 1===t.length&&1===t[0].cells.length})))(e,n)&&Gu(e.start,t))))(o,t,n)?o.map((e=>uh.singleCellTable(t,e.start))):s.isMultiTable?((e,t,n,o)=>hh(e,t,n,o).bind((({start:e,end:o})=>{const r=e.bind(bh).getOr([]),s=o.bind(bh).getOr([]);if(r.length>0&&s.length>0){const e=yh(n,t);return U.some(uh.multiTable(r,s,e))}return U.none()})))(o,s,t,n):((e,t,n,o)=>hh(e,t,n,o).bind((({start:e,end:t})=>e.or(t))).bind((e=>{const{isSameTable:o}=t,s=bh(e).getOr([]);if(o&&e.cells.length===s.length)return U.some(uh.fullTable(e.table));if(s.length>0){if(o)return U.some(uh.partialTable(s,U.none()));{const e=yh(n,t);return U.some(uh.partialTable(s,U.some(r(r({},t),{},{rng:e}))))}}return U.none()})))(o,s,t,n)},wh=e=>Y(e,(e=>{sn(e,"contenteditable"),Br(e)})),Ch=(e,t,n,o)=>{const r=n.cloneRange();o?(r.setStart(n.startContainer,n.startOffset),r.setEndAfter(t.dom.lastChild)):(r.setStartBefore(t.dom.firstChild),r.setEnd(n.endContainer,n.endOffset)),Eh(e,r,t,!1).each((e=>e()))},Sh=e=>{const t=$u(e),n=wn(e.selection.getNode());cr(n.dom)&&gs(n)?e.selection.setCursorLocation(n.dom,0):e.selection.collapse(!0),t.length>1&&G(t,(e=>En(e,n)))&&en(n,"data-mce-selected","1")},_h=(e,t,n)=>U.some((()=>{const o=e.selection.getRng(),r=n.bind((({rng:n,isStartInTable:r})=>{const s=((e,t)=>U.from(e.dom.getParent(t,e.dom.isBlock)).map(wn))(e,r?n.endContainer:n.startContainer);n.deleteContents(),((e,t,n)=>{n.each((n=>{t?So(n):(Br(n),e.selection.setCursorLocation(n.dom,0))}))})(e,r,s.filter(gs));const a=r?t[0]:t[t.length-1];return Ch(e,a,o,r),gs(a)?U.none():U.some(r?t.slice(1):t.slice(0,-1))})).getOr(t);wh(r),Sh(e)})),kh=(e,t,n,o)=>U.some((()=>{const r=e.selection.getRng(),s=t[0],a=n[n.length-1];Ch(e,s,r,!0),Ch(e,a,r,!1);const i=gs(s)?t:t.slice(1),l=gs(a)?n:n.slice(0,-1);wh(i.concat(l)),o.deleteContents(),Sh(e)})),Eh=(e,t,n,o=!0)=>U.some((()=>{lh(e,t,n,o)})),Oh=(e,t)=>U.some((()=>Yg(e,!1,t))),Th=(e,t)=>ne(cg(t,e),Tr),Ah=(e,t)=>ne(cg(t,e),Qt("caption")),Rh=(e,t)=>U.some((()=>{Br(t),e.selection.setCursorLocation(t.dom,0)})),Nh=(e,t)=>e?rg(t):sg(t),Dh=(e,t,n)=>{const o=wn(e.getBody());return Ah(o,n).fold((()=>((e,t,n,o)=>{const r=Ii.fromRangeStart(e.selection.getRng());return Th(n,o).bind((o=>gs(o)?Rh(e,o):((e,t,n,o,r)=>cu(n,e.getBody(),r).bind((e=>Th(t,wn(e.getNode())).bind((e=>En(e,o)?U.none():U.some(T))))))(e,n,t,o,r)))})(e,t,o,n).orThunk((()=>jt(((e,t)=>{const n=Ii.fromRangeStart(e.selection.getRng());return Nh(t,n)||lu(t,e.getBody(),n).exists((e=>Nh(t,e)))})(e,t),T)))),(n=>((e,t,n,o)=>{const r=Ii.fromRangeStart(e.selection.getRng());return gs(o)?Rh(e,o):((e,t,n,o,r)=>cu(n,e.getBody(),r).fold((()=>U.some(T)),(s=>((e,t,n,o)=>fu(e.dom).bind((r=>gu(e.dom).map((e=>t?n.isEqual(r)&&o.isEqual(e):n.isEqual(e)&&o.isEqual(r))))).getOr(!0))(o,n,r,s)?((e,t)=>Rh(e,t))(e,o):((e,t,n)=>Ah(e,wn(n.getNode())).fold((()=>U.some(T)),(e=>jt(!En(e,t),T))))(t,o,s))))(e,n,t,o,r)})(e,t,o,n)))},Bh=(e,t)=>{const n=wn(e.selection.getStart(!0)),o=$u(e);return e.selection.isCollapsed()&&0===o.length?Dh(e,t,n):((e,t,n)=>{const o=wn(e.getBody()),r=e.selection.getRng();return 0!==n.length?_h(e,n,U.none()):((e,t,n,o)=>Ah(t,o).fold((()=>((e,t,n)=>xh(t,n).bind((t=>t.fold(M(Eh,e),M(Oh,e),M(_h,e),M(kh,e)))))(e,t,n)),(t=>((e,t)=>Rh(e,t))(e,t))))(e,o,r,t)})(e,n,o)},Mh=(e,t)=>{let n=t;for(;n&&n!==e;){if(ir(n)||lr(n))return n;n=n.parentNode}return null},Ih=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],Ph=Lt.each,Lh=e=>{const t=e.dom,n=new Set(e.serializer.getTempAttrs()),o=e=>G(Ih,(t=>qe(e,t)))||n.has(e);return{compare:(e,n)=>{if(e.nodeName!==n.nodeName||e.nodeType!==n.nodeType)return!1;const r=e=>{const n={};return Ph(t.getAttribs(e),(r=>{const s=r.nodeName.toLowerCase();"style"===s||o(s)||(n[s]=t.getAttrib(e,s))})),n},s=(e,t)=>{for(const n in e)if(Oe(e,n)){const o=t[n];if(C(o))return!1;if(e[n]!==o)return!1;delete t[n]}for(const n in t)if(Oe(t,n))return!1;return!0};if(Vo(e)&&Vo(n)){if(!s(r(e),r(n)))return!1;if(!s(t.parseStyle(t.getAttrib(e,"style")),t.parseStyle(t.getAttrib(n,"style"))))return!1}return!Ru(e)&&!Ru(n)},isAttributeInternal:o}},Fh=(e,t,n,o)=>{const r=n.name;for(let s=0,a=e.length;s<a;s++){const t=e[s];if(t.name===r){const e=o.nodes[r];e?e.nodes.push(n):o.nodes[r]={filter:t,nodes:[n]}}}if(n.attributes)for(let s=0,a=t.length;s<a;s++){const e=t[s],r=e.name;if(r in n.attributes.map){const t=o.attributes[r];t?t.nodes.push(n):o.attributes[r]={filter:e,nodes:[n]}}}},zh=(e,t)=>{const n=(e,n)=>{be(e,(e=>{const o=fe(e.nodes);Y(e.filter.callbacks,(r=>{for(let t=o.length-1;t>=0;t--){const r=o[t];(n?void 0!==r.attr(e.filter.name):r.name===e.filter.name)&&!S(r.parent)||o.splice(t,1)}o.length>0&&r(o,e.filter.name,t)}))}))};n(e.nodes,!1),n(e.attributes,!0)},jh=(e,t,n,o={})=>{const r=((e,t,n)=>{const o={nodes:{},attributes:{}};return n.firstChild&&((n,r)=>{let s=n;for(;s=s.walk();)Fh(e,t,s,o)})(n),o})(e,t,n);zh(r,o)},Uh=(e,t,n)=>{if(e.insert&&t(n)){const e=new Df("br",1);e.attr("data-mce-bogus","1"),n.empty().append(e)}else n.empty().append(new Df("#text",3)).value=fr},Hh=(e,t)=>{const n=null==e?void 0:e.firstChild;return _(n)&&n===e.lastChild&&n.name===t},$h=(e,t,n,o)=>o.isEmpty(t,n,(t=>((e,t)=>{const n=e.getElementRule(t.name);return!0===(null==n?void 0:n.paddEmpty)})(e,t))),Vh=e=>{let t;for(let n=e;n;n=n.parent){const e=n.attr("contenteditable");if("false"===e)break;"true"===e&&(t=n)}return U.from(t)},Wh=(e,t,n=e.parent)=>{if(t.getSpecialElements()[e.name])e.empty().remove();else{const o=e.children();for(const e of o)n&&!t.isValidChild(n.name,e.name)&&Wh(e,t,n);e.unwrap()}},qh=(e,t,n,o=T)=>{const r=t.getTextBlockElements(),s=t.getNonEmptyElements(),a=t.getWhitespaceElements(),i=Lt.makeMap("tr,td,th,tbody,thead,tfoot,table"),l=new Set,c=e=>e!==n&&!i[e.name];for(let d=0;d<e.length;d++){const n=e[d];let i,u,m;if(!n.parent||l.has(n))continue;if(r[n.name]&&"li"===n.parent.name){let e=n.next;for(;e&&r[e.name];)e.name="li",l.add(e),n.parent.insert(e,n.parent),e=e.next;n.unwrap();continue}const p=[n];for(i=n.parent;i&&!t.isValidChild(i.name,n.name)&&c(i);i=i.parent)p.push(i);if(i&&p.length>1)if(t.isValidChild(i.name,n.name)){p.reverse(),u=p[0].clone(),o(u);let e=u;for(let n=0;n<p.length-1;n++){t.isValidChild(e.name,p[n].name)&&n>0?(m=p[n].clone(),o(m),e.append(m)):m=e;for(let e=p[n].firstChild;e&&e!==p[n+1];){const t=e.next;m.append(e),e=t}e=m}$h(t,s,a,u)?i.insert(n,p[0],!0):(i.insert(u,p[0],!0),i.insert(n,u)),i=p[0],($h(t,s,a,i)||Hh(i,"br"))&&i.empty().remove()}else Wh(n,t);else if(n.parent){if("li"===n.name){let e=n.prev;if(e&&("ul"===e.name||"ol"===e.name)){e.append(n);continue}if(e=n.next,e&&("ul"===e.name||"ol"===e.name)&&e.firstChild){e.insert(n,e.firstChild,!0);continue}const t=new Df("ul",1);o(t),n.wrap(t);continue}if(t.isValidChild(n.parent.name,"div")&&t.isValidChild("div",n.name)){const e=new Df("div",1);o(e),n.wrap(e)}else Wh(n,t)}}},Gh=(e,t,n=t.parent)=>!(!n||!e.children[t.name]||e.isValidChild(n.name,t.name))||!(!n||"a"!==t.name||!((e,t)=>{let n=e;for(;n;){if("a"===n.name)return!0;n=n.parent}return!1})(n)),Kh=e=>e.collapsed?e:(e=>{const t=Ii.fromRangeStart(e),n=Ii.fromRangeEnd(e),o=e.commonAncestorContainer;return lu(!1,o,n).map((r=>!Md(t,n,o)&&Md(t,r,o)?((e,t,n,o)=>{const r=document.createRange();return r.setStart(e,t),r.setEnd(n,o),r})(t.container(),t.offset(),r.container(),r.offset()):e)).getOr(e)})(e),Yh=(e,t)=>{let n=t.firstChild,o=t.lastChild;return n&&"meta"===n.name&&(n=n.next),o&&"mce_marker"===o.attr("id")&&(o=o.prev),((e,t)=>{const n=e.getNonEmptyElements();return _(t)&&(t.isEmpty(n)||((e,t)=>e.getBlockElements()[t.name]&&(e=>_(e.firstChild)&&e.firstChild===e.lastChild)(t)&&(e=>"br"===e.name||e.value===fr)(t.firstChild))(e,t))})(e,o)&&(o=null==o?void 0:o.prev),!(!n||n!==o||"ul"!==n.name&&"ol"!==n.name)},Xh=e=>{return e.length>0&&(!(n=e[e.length-1]).firstChild||_(null==(t=n)?void 0:t.firstChild)&&t.firstChild===t.lastChild&&(e=>e.data===fr||sr(e))(t.firstChild))?e.slice(0,-1):e;var t,n},Jh=(e,t)=>{const n=e.getParent(t,e.isBlock);return n&&"LI"===n.nodeName?n:null},Qh=(e,t)=>{const n=Ii.after(e),o=ru(t).prev(n);return o?o.toRange():null},Zh=(e,t,n,o)=>{const r=((e,t,n)=>{const o=t.serialize(n);return(e=>{var t,n;const o=e.firstChild,r=e.lastChild;return o&&"META"===o.nodeName&&(null===(t=o.parentNode)||void 0===t||t.removeChild(o)),r&&"mce_marker"===r.id&&(null===(n=r.parentNode)||void 0===n||n.removeChild(r)),e})(e.createFragment(o))})(t,e,o),s=Jh(t,n.startContainer),a=Xh((i=r.firstChild,Q(null!==(l=null==i?void 0:i.childNodes)&&void 0!==l?l:[],(e=>"LI"===e.nodeName))));var i,l;const c=t.getRoot(),d=e=>{const o=Ii.fromRangeStart(n),r=ru(t.getRoot()),a=1===e?r.prev(o):r.next(o),i=null==a?void 0:a.getNode();return!i||Jh(t,i)!==s};return s?d(1)?((e,t,n)=>{const o=e.parentNode;return o&&Lt.each(t,(t=>{o.insertBefore(t,e)})),((e,t)=>{const n=Ii.before(e),o=ru(t).next(n);return o?o.toRange():null})(e,n)})(s,a,c):d(2)?((e,t,n,o)=>(o.insertAfter(t.reverse(),e),Qh(t[0],n)))(s,a,c,t):((e,t,n,o)=>{const r=((e,t)=>{const n=t.cloneRange(),o=t.cloneRange();return n.setStartBefore(e),o.setEndAfter(e),[n.cloneContents(),o.cloneContents()]})(e,o),s=e.parentNode;return s&&(s.insertBefore(r[0],e),Lt.each(t,(t=>{s.insertBefore(t,e)})),s.insertBefore(r[1],e),s.removeChild(e)),Qh(t[t.length-1],n)})(s,a,c,n):null},ev=["pre"],tv=cr,nv=(e,t,n)=>{var o,r;const s=e.selection,a=e.dom,i=e.parser,l=n.merge,c=Hf({validate:!0},e.schema),d='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';-1===t.indexOf("{$caret}")&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,d);let u=s.getRng();const m=u.startContainer,p=e.getBody();m===p&&s.isCollapsed()&&a.isBlock(p.firstChild)&&((e,t)=>_(t)&&!e.schema.getVoidElements()[t.nodeName])(e,p.firstChild)&&a.isEmpty(p.firstChild)&&(u=a.createRng(),u.setStart(p.firstChild,0),u.setEnd(p.firstChild,0),s.setRng(u)),s.isCollapsed()||(e=>{const t=e.dom,n=Kh(e.selection.getRng());e.selection.setRng(n);const o=t.getParent(n.startContainer,tv);((e,t,n)=>!!_(n)&&n===e.getParent(t.endContainer,tv)&&Gu(wn(n),t))(t,n,o)?Eh(e,n,wn(o)):n.startContainer===n.endContainer&&n.endOffset-n.startOffset==1&&Zo(n.startContainer.childNodes[n.startOffset])?n.deleteContents():e.getDoc().execCommand("Delete",!1)})(e);const f=s.getNode(),g={context:f.nodeName.toLowerCase(),data:n.data,insert:!0},h=i.parse(t,g);if(!0===n.paste&&Yh(e.schema,h)&&((e,t)=>!!Jh(e,t))(a,f))return u=Zh(c,a,s.getRng(),h),u&&s.setRng(u),t;!0===n.paste&&((e,t,n,o)=>{var r;const s=t.firstChild,a=t.lastChild,i=s===("bookmark"===a.attr("data-mce-type")?a.prev:a),l=q(ev,s.name);if(i&&l){const t="false"!==s.attr("contenteditable"),a=(null===(r=e.getParent(n,e.isBlock))||void 0===r?void 0:r.nodeName.toLowerCase())===s.name,i=U.from(Mh(o,n)).forall(ir);return t&&a&&i}return!1})(a,h,f,e.getBody())&&(null===(o=h.firstChild)||void 0===o||o.unwrap()),(e=>{let t=e;for(;t=t.walk();)1===t.type&&t.attr("data-mce-fragment","1")})(h);let v=h.lastChild;if(v&&"mce_marker"===v.attr("id")){const t=v;for(v=v.prev;v;v=v.walk(!0))if(3===v.type||!a.isBlock(v.name)){v.parent&&e.schema.isValidChild(v.parent.name,"span")&&v.parent.insert(t,v,"br"===v.name);break}}if(e._selectionOverrides.showBlockCaretContainer(f),g.invalid){e.selection.setContent(d);let n,o=s.getNode();const l=e.getBody();for(or(o)?o=n=l:n=o;n&&n!==l;)o=n,n=n.parentNode;t=o===l?l.innerHTML:a.getOuterHTML(o);const u=i.parse(t),m=(e=>{for(let t=e;t;t=t.walk())if("mce_marker"===t.attr("id"))return U.some(t);return U.none()})(u),p=m.bind(Vh).getOr(u);m.each((e=>e.replace(h)));const f=h.children(),g=null!==(r=h.parent)&&void 0!==r?r:u;h.unwrap();const v=Q(f,(t=>Gh(e.schema,t,g)));qh(v,e.schema,p),jh(i.getNodeFilters(),i.getAttributeFilters(),u),t=c.serialize(u),o===l?a.setHTML(l,t):a.setOuterHTML(o,t)}else t=c.serialize(h),((e,t,n)=>{var o;if("all"===n.getAttribute("data-mce-bogus"))null===(o=n.parentNode)||void 0===o||o.insertBefore(e.dom.createFragment(t),n);else{const o=n.firstChild,r=n.lastChild;!o||o===r&&"BR"===o.nodeName?e.dom.setHTML(n,t):e.selection.setContent(t,{no_events:!0})}})(e,t,f);var b;return((e,t)=>{const n=e.schema.getTextInlineElements(),o=e.dom;if(t){const t=e.getBody(),r=Lh(e);Lt.each(o.select("*[data-mce-fragment]"),(e=>{if(_(n[e.nodeName.toLowerCase()])&&((e,t)=>ae(Wf(e,t),(e=>!(e=>$f.has(e))(e))))(o,e))for(let n=e.parentElement;_(n)&&n!==t&&!qf(o,e,n);n=n.parentElement)if(r.compare(n,e)){o.remove(e,!0);break}}))}})(e,l),((e,t)=>{var n,o,r;let s;const a=e.dom,i=e.selection;if(!t)return;i.scrollIntoView(t);const l=Mh(e.getBody(),t);if(l&&"false"===a.getContentEditable(l))return a.remove(t),void i.select(l);let c=a.createRng();const d=t.previousSibling;if(Zo(d)){c.setStart(d,null!==(o=null===(n=d.nodeValue)||void 0===n?void 0:n.length)&&void 0!==o?o:0);const e=t.nextSibling;Zo(e)&&(d.appendData(e.data),null===(r=e.parentNode)||void 0===r||r.removeChild(e))}else c.setStartBefore(t),c.setEndBefore(t);const u=a.getParent(t,a.isBlock);a.remove(t),u&&a.isEmpty(u)&&(Co(wn(u)),c.setStart(u,0),c.setEnd(u,0),tv(u)||(e=>!!e.getAttribute("data-mce-fragment"))(u)||!(s=(t=>{let n=Ii.fromRangeStart(t);return n=ru(e.getBody()).next(n),null==n?void 0:n.toRange()})(c))?a.add(u,a.create("br",{"data-mce-bogus":"1"})):(c=s,a.remove(u))),i.setRng(c)})(e,a.get("mce_marker")),b=e.getBody(),Lt.each(b.getElementsByTagName("*"),(e=>{e.removeAttribute("data-mce-fragment")})),((e,t)=>{U.from(e.getParent(t,"td,th")).map(wn).each(Mr)})(a,s.getStart()),((e,t,n)=>{const o=Bn(wn(n),(e=>En(e,wn(t))));ue(o,o.length-2).filter(Kt).fold((()=>Cs(e,t)),(t=>Cs(e,t.dom)))})(e.schema,e.getBody(),s.getStart()),t},ov=e=>e instanceof Df,rv=(e,t,n)=>{e.dom.setHTML(e.getBody(),t),!0!==n&&(e=>{hf(e)&&fu(e.getBody()).each((t=>{const n=t.getNode(),o=Xo(n)?fu(n).getOr(t):t;e.selection.setRng(o.toRange())}))})(e)},sv=(e,t)=>((e,t)=>{const n=e.dom;return n.parentNode?((e,t)=>ne(e.dom.childNodes,(e=>t(wn(e)))).map(wn))(wn(n.parentNode),(n=>!En(e,n)&&t(n))):U.none()})(e,t).isSome(),av=e=>k(e)?e:z,iv=(e,t,n)=>{const o=t(e),r=av(n);return o.orThunk((()=>r(e)?U.none():((e,t,n)=>{let o=e.dom;const r=av(n);for(;o.parentNode;){o=o.parentNode;const e=wn(o),n=t(e);if(n.isSome())return n;if(r(e))break}return U.none()})(e,t,r)))},lv=cm,cv=(e,t,n)=>{const o=e.formatter.get(n);if(o)for(let r=0;r<o.length;r++){const n=o[r];if(hm(n)&&!1===n.inherit&&e.dom.is(t,n.selector))return!0}return!1},dv=(e,t,n,o,r)=>{const s=e.dom.getRoot();if(t===s)return!1;const a=e.dom.getParent(t,(t=>!!cv(e,t,n)||t.parentNode===s||!!pv(e,t,n,o,!0)));return!!pv(e,a,n,o,r)},uv=(e,t,n)=>!(!vm(n)||!lv(t,n.inline))||!(!gm(n)||!lv(t,n.block))||!!hm(n)&&Vo(t)&&e.is(t,n.selector),mv=(e,t,n,o,r,s)=>{const a=n[o],i="attributes"===o;if(k(n.onmatch))return n.onmatch(t,n,o);if(a)if(Re(a)){for(let l=0;l<a.length;l++)if(i?e.getAttrib(t,a[l]):um(e,t,a[l]))return!0}else for(const l in a)if(Oe(a,l)){const o=i?e.getAttrib(t,l):um(e,t,l),c=lm(a[l],s),d=S(o)||Ze(o);if(d&&S(c))continue;if(r&&d&&!n.exact)return!1;if((!r||n.exact)&&!lv(o,dm(c,l)))return!1}return!0},pv=(e,t,n,o,r)=>{const s=e.formatter.get(n),a=e.dom;if(s&&Vo(t))for(let i=0;i<s.length;i++){const n=s[i];if(uv(e.dom,t,n)&&mv(a,t,n,"attributes",r,o)&&mv(a,t,n,"styles",r,o)){const r=n.classes;if(r)for(let n=0;n<r.length;n++)if(!e.dom.hasClass(t,lm(r[n],o)))return;return n}}},fv=(e,t,n,o,r)=>{if(o)return dv(e,o,t,n,r);if(o=e.selection.getNode(),dv(e,o,t,n,r))return!0;const s=e.selection.getStart();return!(s===o||!dv(e,s,t,n,r))},gv=Ir,hv=e=>(e=>{const t=[];let n=e;for(;n;){if(Zo(n)&&n.data!==gv||n.childNodes.length>1)return[];Vo(n)&&t.push(n),n=n.firstChild}return t})(e).length>0,vv=e=>{if(e){const t=new Uo(e,e);for(let e=t.current();e;e=t.next())if(Zo(e))return e}return null},bv=e=>{const t=yn("span");return tn(t,{id:hu,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&yo(t,xn(gv)),t},yv=(e,t,n=!0)=>{const o=e.dom,r=e.selection;if(hv(t))Yg(e,!1,wn(t),n);else{const e=r.getRng(),n=o.getParent(t,o.isBlock),s=e.startContainer,a=e.startOffset,i=e.endContainer,l=e.endOffset,c=(e=>{const t=vv(e);return t&&t.data.charAt(0)===gv&&t.deleteData(0,1),t})(t);o.remove(t,!0),s===c&&a>0&&e.setStart(c,a-1),i===c&&l>0&&e.setEnd(c,l-1),n&&o.isEmpty(n)&&Br(wn(n)),r.setRng(e)}},xv=(e,t,n=!0)=>{const o=e.dom,r=e.selection;if(t)yv(e,t,n);else if(!(t=bu(e.getBody(),r.getStart())))for(;t=o.get(hu);)yv(e,t,!1)},wv=(e,t)=>(e.appendChild(t),t),Cv=(e,t)=>{var n;const o=Z(e,((e,t)=>wv(e,t.cloneNode(!1))),t),r=null!==(n=o.ownerDocument)&&void 0!==n?n:document;return wv(o,r.createTextNode(gv))},Sv=(e,t,n,o)=>{const r=e.dom,s=e.selection;let a=!1;const i=e.formatter.get(t);if(!i)return;const d=s.getRng(),u=d.startContainer,m=d.startOffset;let p=u;Zo(u)&&(m!==u.data.length&&(a=!0),p=p.parentNode);const f=[];let g;for(;p;){if(pv(e,p,t,n,o)){g=p;break}p.nextSibling&&(a=!0),f.push(p),p=p.parentNode}if(g)if(a){const a=s.getBookmark();d.collapse(!0);let l=Bm(r,d,i,!0);l=kp(l),e.formatter.remove(t,n,l,o),s.moveToBookmark(a)}else{const a=bu(e.getBody(),g),i=bv(!1).dom;((e,t,n)=>{var o,r;const s=e.dom,a=s.getParent(n,M(rm,e.schema));a&&s.isEmpty(a)?null===(o=n.parentNode)||void 0===o||o.replaceChild(t,n):((e=>{const t=zo(e,"br"),n=Q((e=>{const t=[];let n=e.dom;for(;n;)t.push(wn(n)),n=n.lastChild;return t})(e).slice(-1),Sr);t.length===n.length&&Y(n,So)})(wn(n)),s.isEmpty(n)?null===(r=n.parentNode)||void 0===r||r.replaceChild(t,n):s.insertAfter(t,n))})(e,i,null!=a?a:g);const d=((e,t,n,o,r,s)=>{const a=e.formatter,i=e.dom,d=Q(he(a.get()),(e=>e!==o&&!We(e,"removeformat"))),u=((e,t,n)=>ee(n,((n,o)=>{const r=((e,t)=>fm(e,t,(e=>{const t=e=>k(e)||e.length>1&&"%"===e.charAt(0);return G(["styles","attributes"],(n=>Ee(e,n).exists((e=>{const n=y(e)?e:ke(e);return G(n,t)}))))})))(e,o);return e.formatter.matchNode(t,o,{},r)?n.concat([o]):n}),[]))(e,n,d);if(Q(u,(t=>!((e,t,n)=>{const o=["inline","block","selector","attributes","styles","classes"],r=e=>Se(e,((e,t)=>G(o,(e=>e===t))));return fm(e,t,(t=>{const o=r(t);return fm(e,n,(e=>{const t=r(e);return((e,t,n=c)=>l(n).eq(e,t))(o,t)}))}))})(e,t,o))).length>0){const e=n.cloneNode(!1);return i.add(t,e),a.remove(o,r,e,s),i.remove(e),U.some(e)}return U.none()})(e,i,g,t,n,o),u=Cv(f.concat(d.toArray()),i);a&&yv(e,a,!1),s.setCursorLocation(u,1),r.isEmpty(g)&&r.remove(g)}},_v=e=>{const t=bv(!1),n=Cv(e,t.dom);return{caretContainer:t,caretPosition:Ii(n,0)}},kv=(e,t)=>{const{caretContainer:n,caretPosition:o}=_v(t);return ho(wn(e),n),So(wn(e)),o},Ev=(e,t)=>{const n=e.schema.getTextInlineElements();return Oe(n,Wt(t))&&!vu(t.dom)&&!Yo(t.dom)},Ov=e=>vu(e.dom)&&hv(e.dom),Tv={},Av=qo(["pre"]);Tv.pre||(Tv.pre=[]),Tv.pre.push((e=>{if(!e.selection.getRng().collapsed){const t=e.selection.getSelectedBlocks(),n=Q(Q(t,Av),(e=>t=>{const n=t.previousSibling;return Av(n)&&q(e,n)})(t));Y(n,(e=>{((e,t)=>{const n=wn(t),o=An(n).dom;So(n),wo(wn(e),[yn("br",o),yn("br",o),...Fn(n)])})(e.previousSibling,e)}))}}));const Rv=["fontWeight","fontStyle","color","fontSize","fontFamily"],Nv=(e,t)=>{const n=e.get(t);return y(n)?ne(n,(e=>vm(e)&&"span"===e.inline&&(e=>v(e.styles)&&G(he(e.styles),(e=>q(Rv,e))))(e))):U.none()},Dv=(e,t)=>pu(t,Ii.fromRangeStart(e)).isNone(),Bv=(e,t)=>!1===mu(t,Ii.fromRangeEnd(e)).exists((e=>!sr(e.getNode())||mu(t,e).isSome())),Mv=e=>t=>mr(t)&&e.isEditable(t),Iv=e=>Q(e.getSelectedBlocks(),Mv(e.dom)),Pv=Lt.each,Lv=e=>Vo(e)&&!Ru(e)&&!vu(e)&&!Yo(e),Fv=(e,t)=>{for(let n=e;n;n=n[t]){if(Zo(n)&&Qe(n.data))return e;if(Vo(n)&&!Ru(n))return n}return e},zv=(e,t,n)=>{const o=Lh(e),r=Vo(t)&&em(t),s=Vo(n)&&em(n);if(r&&s){const r=Fv(t,"previousSibling"),s=Fv(n,"nextSibling");if(o.compare(r,s)){for(let e=r.nextSibling;e&&e!==s;){const t=e;e=e.nextSibling,r.appendChild(t)}return e.dom.remove(s),Lt.each(Lt.grep(s.childNodes),(e=>{r.appendChild(e)})),r}}return n},jv=(e,t,n,o)=>{var r;if(o&&!1!==t.merge_siblings){const t=null!==(r=zv(e,om(o),o))&&void 0!==r?r:o;zv(e,t,om(t,!0))}},Uv=(e,t,n)=>{Pv(e.childNodes,(e=>{Lv(e)&&(t(e)&&n(e),e.hasChildNodes()&&Uv(e,t,n))}))},Hv=(e,t)=>n=>!(!n||!um(e,n,t)),$v=(e,t,n)=>o=>{e.setStyle(o,t,n),""===o.getAttribute("style")&&o.removeAttribute("style"),((e,t)=>{"SPAN"===t.nodeName&&0===e.getAttribs(t).length&&e.remove(t,!0)})(e,o)},Vv=al([{keep:[]},{rename:["name"]},{removed:[]}]),Wv=/^(src|href|style)$/,qv=Lt.each,Gv=cm,Kv=(e,t,n)=>e.isChildOf(t,n)&&t!==n&&!e.isBlock(n),Yv=(e,t,n)=>{let o=t[n?"startContainer":"endContainer"],r=t[n?"startOffset":"endOffset"];if(Vo(o)){const e=o.childNodes.length-1;!n&&r&&r--,o=o.childNodes[r>e?e:r]}return Zo(o)&&n&&r>=o.data.length&&(o=new Uo(o,e.getBody()).next()||o),Zo(o)&&!n&&0===r&&(o=new Uo(o,e.getBody()).prev()||o),o},Xv=(e,t)=>{const n=t?"firstChild":"lastChild",o=e[n];return(e=>/^(TR|TH|TD)$/.test(e.nodeName))(e)&&o?"TR"===e.nodeName&&o[n]||o:e},Jv=(e,t,n,o)=>{var r;const s=e.create(n,o);return null===(r=t.parentNode)||void 0===r||r.insertBefore(s,t),s.appendChild(t),s},Qv=(e,t,n,o,r)=>{const s=wn(t),a=wn(e.create(o,r)),i=n?Ln(s):Pn(s);return wo(a,i),n?(ho(s,a),bo(a,s)):(vo(s,a),yo(a,s)),a.dom},Zv=(e,t,n)=>{const o=t.parentNode;let r;const s=e.dom,a=Ol(e);gm(n)&&o===s.getRoot()&&(n.list_block&&Gv(t,n.list_block)||Y(fe(t.childNodes),(t=>{sm(e,a,t.nodeName.toLowerCase())?r?r.appendChild(t):(r=Jv(s,t,a),s.setAttribs(r,Tl(e))):r=null}))),(e=>hm(e)&&vm(e)&&Ft(Ee(e,"mixed"),!0))(n)&&!Gv(n.inline,t)||s.remove(t,!0)},eb=(e,t,n)=>E(e)?{name:t,value:null}:{name:e,value:lm(t,n)},tb=(e,t)=>{""===e.getAttrib(t,"style")&&(t.removeAttribute("style"),t.removeAttribute("data-mce-style"))},nb=(e,t,n,o,r)=>{let s=!1;qv(n.styles,((a,i)=>{const{name:l,value:c}=eb(i,a,o),d=dm(c,l);(n.remove_similar||x(c)||!Vo(r)||Gv(um(e,r,l),d))&&e.setStyle(t,l,""),s=!0})),s&&tb(e,t)},ob=(e,t,n,o,r)=>{const s=e.dom,a=Lh(e),i=e.schema;if(vm(t)&&ks(i,t.inline)&&Os(i,o)&&o.parentElement===e.getBody())return Zv(e,o,t),Vv.removed();if(!t.ceFalseOverride&&o&&"false"===s.getContentEditableParent(o))return Vv.keep();if(o&&!uv(s,o,t)&&!((e,t)=>t.links&&"A"===e.nodeName)(o,t))return Vv.keep();const l=o,c=t.preserve_attributes;if(vm(t)&&"all"===t.remove&&y(c)){const e=Q(s.getAttribs(l),(e=>q(c,e.name.toLowerCase())));if(s.removeAllAttribs(l),Y(e,(e=>s.setAttrib(l,e.name,e.value))),e.length>0)return Vv.rename("span")}if("all"!==t.remove){nb(s,l,t,n,r),qv(t.attributes,((e,o)=>{const{name:a,value:i}=eb(o,e,n);if(t.remove_similar||x(i)||!Vo(r)||Gv(s.getAttrib(r,a),i)){if("class"===a){const e=s.getAttrib(l,a);if(e){let t="";if(Y(e.split(/\s+/),(e=>{/mce\-\w+/.test(e)&&(t+=(t?" ":"")+e)})),t)return void s.setAttrib(l,a,t)}}if(Wv.test(a)&&l.removeAttribute("data-mce-"+a),"style"===a&&qo(["li"])(l)&&"none"===s.getStyle(l,"list-style-type"))return l.removeAttribute(a),void s.setStyle(l,"list-style-type","none");"class"===a&&l.removeAttribute("className"),l.removeAttribute(a)}})),qv(t.classes,(e=>{e=lm(e,n),Vo(r)&&!s.hasClass(r,e)||s.removeClass(l,e)}));const e=s.getAttribs(l);for(let t=0;t<e.length;t++){const n=e[t].nodeName;if(!a.isAttributeInternal(n))return Vv.keep()}}return"none"!==t.remove?(Zv(e,l,t),Vv.removed()):Vv.keep()},rb=(e,t,n,o,r)=>ob(e,t,n,o,r).fold(z,(t=>(e.dom.rename(o,t),!0)),j),sb=(e,t,n,o)=>ob(e,t,n,o,o).fold(N(o),(t=>(e.dom.createFragment().appendChild(o),e.dom.rename(o,t))),N(null)),ab=(e,t,n,o,r)=>{const s=e.formatter.get(t),a=s[0],i=e.dom,l=e.selection,c=o=>{const i=((e,t,n,o,r)=>{let s;return t.parentNode&&Y(pm(e.dom,t.parentNode).reverse(),(t=>{if(!s&&Vo(t)&&"_start"!==t.id&&"_end"!==t.id){const a=pv(e,t,n,o,r);a&&!1!==a.split&&(s=t)}})),s})(e,o,t,n,r);return((e,t,n,o,r,s,a,i)=>{var l,c;let d,u;const m=e.dom;if(n){const s=n.parentNode;for(let n=o.parentNode;n&&n!==s;n=n.parentNode){let o=m.clone(n,!1);for(let n=0;n<t.length&&(o=sb(e,t[n],i,o),null!==o);n++);o&&(d&&o.appendChild(d),u||(u=o),d=o)}a.mixed&&m.isBlock(n)||(o=null!==(l=m.split(n,o))&&void 0!==l?l:o),d&&u&&(null===(c=r.parentNode)||void 0===c||c.insertBefore(d,r),u.appendChild(r),vm(a)&&jv(e,a,0,d))}return o})(e,s,i,o,o,0,a,n)},d=t=>G(s,(o=>rb(e,o,n,t,t))),u=t=>{const n=fe(t.childNodes),o=d(t)||G(s,(e=>uv(i,t,e))),r=t.parentNode;if(!o&&_(r)&&bm(a)&&d(r),a.deep&&n.length)for(let e=0;e<n.length;e++)u(n[e]);Y(["underline","line-through","overline"],(n=>{Vo(t)&&e.dom.getStyle(t,"text-decoration")===n&&t.parentNode&&mm(i,t.parentNode)===n&&rb(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:n}},void 0,t)}))},m=e=>{const t=i.get(e?"_start":"_end");if(t){let n=t[e?"firstChild":"lastChild"];return(e=>Ru(e)&&Vo(e)&&("_start"===e.id||"_end"===e.id))(n)&&(n=n[e?"firstChild":"lastChild"]),Zo(n)&&0===n.data.length&&(n=e?t.previousSibling||t.nextSibling:t.nextSibling||t.previousSibling),i.remove(t,!0),n}return null},p=t=>{let n,o,r=Bm(i,t,s,t.collapsed);if(a.split){if(r=kp(r),n=Yv(e,r,!0),o=Yv(e,r),n!==o){if(n=Xv(n,!0),o=Xv(o,!1),Kv(i,n,o)){const e=U.from(n.firstChild).getOr(n);return c(Qv(i,e,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void m(!0)}if(Kv(i,o,n)){const e=U.from(o.lastChild).getOr(o);return c(Qv(i,e,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void m(!1)}n=Jv(i,n,"span",{id:"_start","data-mce-type":"bookmark"}),o=Jv(i,o,"span",{id:"_end","data-mce-type":"bookmark"});const e=i.createRng();e.setStartAfter(n),e.setEndBefore(o),Mm(i,e,(e=>{Y(e,(e=>{Ru(e)||Ru(e.parentNode)||c(e)}))})),c(n),c(o),n=m(!0),o=m()}else n=o=c(n);r.startContainer=n.parentNode?n.parentNode:n,r.startOffset=i.nodeIndex(n),r.endContainer=o.parentNode?o.parentNode:o,r.endOffset=i.nodeIndex(o)+1}Mm(i,r,(e=>{Y(e,u)}))};if(o){if(Qu(o)){const e=i.createRng();e.setStartBefore(o),e.setEndAfter(o),p(e)}else p(o);Vm(e,t,o,n)}else l.isCollapsed()&&vm(a)&&!$u(e).length?Sv(e,t,n,r):(tm(e,(()=>Xu(e,p)),(o=>vm(a)&&fv(e,t,n,o))),e.nodeChanged()),((e,t,n)=>{"removeformat"===t?Y(Iv(e.selection),(t=>{Y(Rv,(n=>e.dom.setStyle(t,n,""))),tb(e.dom,t)})):Nv(e.formatter,t).each((t=>{Y(Iv(e.selection),(o=>nb(e.dom,o,t,n,null)))}))})(e,t,n),Vm(e,t,o,n)},ib=Lt.each,lb=Lt.each,cb=(e,t,n,o)=>{if(lb(n.styles,((n,r)=>{e.setStyle(t,r,lm(n,o))})),n.styles){const n=e.getAttrib(t,"style");n&&e.setAttrib(t,"data-mce-style",n)}},db=(e,t,n,o)=>{const r=e.formatter.get(t),s=r[0],a=!o&&e.selection.isCollapsed(),i=e.dom,l=e.selection,c=(e,t=s)=>{k(t.onformat)&&t.onformat(e,t,n,o),cb(i,e,t,n),lb(t.attributes,((t,o)=>{i.setAttrib(e,o,lm(t,n))})),lb(t.classes,(t=>{const o=lm(t,n);i.hasClass(e,o)||i.addClass(e,o)}))},d=(e,t)=>{let n=!1;return lb(e,(e=>!(!hm(e)||("false"!==i.getContentEditable(t)||e.ceFalseOverride)&&(!_(e.collapsed)||e.collapsed===a)&&i.is(t,e.selector)&&!vu(t)&&(c(t,e),n=!0,1)))),n},u=e=>{if(h(e)){const t=i.create(e);return c(t),t}return null},m=(o,a,i)=>{const l=[];let m=!0;const p=s.inline||s.block,f=u(p);Mm(o,a,(a=>{let u;const g=a=>{let h=!1,v=m,b=!1;const y=a.parentNode,x=y.nodeName.toLowerCase(),w=o.getContentEditable(a);_(w)&&(v=m,m="true"===w,h=!0,b=im(e,a));const C=m&&!h;if(sr(a)&&!((e,t,n,o)=>{if(mc(e)&&vm(t)&&n.parentNode){const t=la(e.schema),r=sv(wn(n),(e=>vu(e.dom)));return Te(t,o)&&gs(wn(n.parentNode),!1)&&!r}return!1})(e,s,a,x))return u=null,void(gm(s)&&o.remove(a));if((o=>(e=>gm(e)&&!0===e.wrapper)(s)&&pv(e,o,t,n))(a))u=null;else{if(((t,n,o)=>{const r=(e=>gm(e)&&!0!==e.wrapper)(s)&&rm(e.schema,t)&&sm(e,n,p);return o&&r})(a,x,C)){const e=o.rename(a,p);return c(e),l.push(e),void(u=null)}if(hm(s)){let e=d(r,a);if(!e&&_(y)&&bm(s)&&(e=d(r,y)),!vm(s)||e)return void(u=null)}_(f)&&((t,n,r,a)=>{const l=t.nodeName.toLowerCase(),c=sm(e,p,l)&&sm(e,n,p),d=!i&&Zo(t)&&Pr(t.data),u=vu(t),m=!vm(s)||!o.isBlock(t);return(r||a)&&c&&!d&&!u&&m})(a,x,C,b)?(u||(u=o.clone(f,!1),y.insertBefore(u,a),l.push(u)),b&&h&&(m=v),u.appendChild(a)):(u=null,Y(fe(a.childNodes),g),h&&(m=v),u=null)}};Y(a,g)})),!0===s.links&&Y(l,(e=>{const t=e=>{"A"===e.nodeName&&c(e,s),Y(fe(e.childNodes),t)};t(e)})),Y(l,(a=>{const i=(e=>{let t=0;return Y(e.childNodes,(e=>{(e=>_(e)&&Zo(e)&&0===e.length)(e)||Ru(e)||t++})),t})(a);!(l.length>1)&&o.isBlock(a)||0!==i?(vm(s)||gm(s)&&s.wrapper)&&(s.exact||1!==i||(a=(e=>{const t=ne(e.childNodes,Zu).filter((e=>"false"!==o.getContentEditable(e)&&uv(o,e,s)));return t.map((t=>{const n=o.clone(t,!1);return c(n),o.replace(n,e,!0),o.remove(t,!0),n})).getOr(e)})(a)),((e,t,n,o)=>{ib(t,(t=>{vm(t)&&ib(e.dom.select(t.inline,o),(o=>{Lv(o)&&rb(e,t,n,o,t.exact?o:null)})),((e,t,n)=>{if(t.clear_child_styles){const o=t.links?"*:not(a)":"*";Pv(e.select(o,n),(n=>{Lv(n)&&em(n)&&Pv(t.styles,((t,o)=>{e.setStyle(n,o,"")}))}))}})(e.dom,t,o)}))})(e,r,n,a),((e,t,n,o,r)=>{const s=r.parentNode;pv(e,s,n,o)&&rb(e,t,o,r)||t.merge_with_parents&&s&&e.dom.getParent(s,(s=>!!pv(e,s,n,o)&&(rb(e,t,o,r),!0)))})(e,s,t,n,a),((e,t,n,o)=>{if(t.styles&&t.styles.backgroundColor){const r=Hv(e,"fontSize");Uv(o,(e=>r(e)&&em(e)),$v(e,"backgroundColor",lm(t.styles.backgroundColor,n)))}})(o,s,n,a),((e,t,n,o)=>{const r=t=>{if(Vo(t)&&Vo(t.parentNode)&&em(t)){const n=mm(e,t.parentNode);e.getStyle(t,"color")&&n?e.setStyle(t,"text-decoration",n):e.getStyle(t,"text-decoration")===n&&e.setStyle(t,"text-decoration",null)}};t.styles&&(t.styles.color||t.styles.textDecoration)&&(Lt.walk(o,r,"childNodes"),r(o))})(o,s,0,a),((e,t,n,o)=>{if(vm(t)&&("sub"===t.inline||"sup"===t.inline)){const n=Hv(e,"fontSize");Uv(o,(e=>n(e)&&em(e)),$v(e,"fontSize",""));const r=Q(e.select("sup"===t.inline?"sub":"sup",o),em);e.remove(r,!0)}})(o,s,0,a),jv(e,s,0,a)):o.remove(a,!0)}))},p=Qu(o)?o:l.getNode();if("false"===i.getContentEditable(p)&&!im(e,p))return d(r,o=p),void $m(e,t,o,n);if(s){if(o)if(Qu(o)){if(!d(r,o)){const e=i.createRng();e.setStartBefore(o),e.setEndAfter(o),m(i,Bm(i,e,r),!0)}}else m(i,o,!0);else a&&vm(s)&&!$u(e).length?((e,t,n)=>{let o;const r=e.selection,s=e.formatter.get(t);if(!s)return;const a=r.getRng();let i=a.startOffset;const l=a.startContainer.nodeValue;o=bu(e.getBody(),r.getStart());const c=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(l&&i>0&&i<l.length&&c.test(l.charAt(i))&&c.test(l.charAt(i-1))){const o=r.getBookmark();a.collapse(!0);let i=Bm(e.dom,a,s);i=kp(i),e.formatter.apply(t,n,i),r.moveToBookmark(o)}else{let s=o?vv(o):null;o&&(null==s?void 0:s.data)===gv||(d=e.getDoc(),u=bv(!0).dom,o=d.importNode(u,!0),s=o.firstChild,a.insertNode(o),i=1),e.formatter.apply(t,n,o),r.setCursorLocation(s,i)}var d,u})(e,t,n):(l.setRng(Kh(l.getRng())),tm(e,(()=>{Xu(e,((e,t)=>{const n=t?e:Bm(i,e,r);m(i,n,!1)}))}),j),e.nodeChanged()),Nv(e.formatter,t).each((t=>{Y((e=>Q((e=>{const t=e.getSelectedBlocks(),n=e.getRng();if(e.isCollapsed())return[];if(1===t.length)return Dv(n,t[0])&&Bv(n,t[0])?t:[];{const e=me(t).filter((e=>Dv(n,e))).toArray(),o=pe(t).filter((e=>Bv(n,e))).toArray(),r=t.slice(1,-1);return e.concat(r).concat(o)}})(e),Mv(e.dom)))(e.selection),(e=>cb(i,e,t,n)))}));((e,t)=>{Oe(Tv,e)&&Y(Tv[e],(e=>{e(t)}))})(t,e)}$m(e,t,o,n)},ub=e=>Oe(e,"vars"),mb=e=>e.selection.getStart(),pb=(e,t,n,o,r)=>te(t,(t=>{const s=e.formatter.matchNode(t,n,null!=r?r:{},o);return!C(s)}),(t=>!!cv(e,t,n)||!o&&_(e.formatter.matchNode(t,n,r,!0)))),fb=(e,t)=>{const n=null!=t?t:mb(e);return Q(pm(e.dom,n),(e=>Vo(e)&&!Yo(e)))},gb=(e,t,n)=>{const o=fb(e,t);be(n,((n,r)=>{const s=n=>{const s=pb(e,o,r,n.similar,ub(n)?n.vars:void 0),a=s.isSome();if(n.state.get()!==a){n.state.set(a);const e=s.getOr(t);ub(n)?n.callback(a,{node:e,format:r,parents:o}):Y(n.callbacks,(t=>t(a,{node:e,format:r,parents:o})))}};Y([n.withSimilar,n.withoutSimilar],s),Y(n.withVars,s)}))},hb=Lt.explode,vb=()=>{const e={};return{addFilter:(t,n)=>{Y(hb(t),(t=>{Oe(e,t)||(e[t]={name:t,callbacks:[]}),e[t].callbacks.push(n)}))},getFilters:()=>ke(e),removeFilter:(t,n)=>{Y(hb(t),(t=>{if(Oe(e,t))if(_(n)){const o=e[t],r=Q(o.callbacks,(e=>e!==n));r.length>0?o.callbacks=r:delete e[t]}else delete e[t]}))}}},bb=(e,t,n)=>{var o;const r=ua();t.convert_fonts_to_spans&&((e,t,n)=>{e.addNodeFilter("font",(e=>{Y(e,(e=>{const o=t.parse(e.attr("style")),r=e.attr("color"),s=e.attr("face"),a=e.attr("size");r&&(o.color=r),s&&(o["font-family"]=s),a&&et(a).each((e=>{o["font-size"]=n[e-1]})),e.name="span",e.attr("style",t.serialize(o)),((e,t)=>{Y(["color","face","size"],(t=>{e.attr(t,null)}))})(e)}))}))})(e,r,Lt.explode(null!==(o=t.font_size_legacy_values)&&void 0!==o?o:"")),((e,t,n)=>{e.addNodeFilter("strike",(e=>{const o="html4"!==t.type;Y(e,(e=>{if(o)e.name="s";else{const t=n.parse(e.attr("style"));t["text-decoration"]="line-through",e.name="span",e.attr("style",n.serialize(t))}}))}))})(e,n,r)},yb=e=>{const[t,...n]=e.split(","),o=n.join(","),r=/data:([^/]+\/[^;]+)(;.+)?/.exec(t);if(r){const e=";base64"===r[2],t=e?(e=>{const t=/([a-z0-9+\/=\s]+)/i.exec(e);return t?t[1]:""})(o):decodeURIComponent(o);return U.some({type:r[1],data:t,base64Encoded:e})}return U.none()},xb=(e,t,n=!0)=>{let o=t;if(n)try{o=atob(t)}catch(e){return U.none()}const r=new Uint8Array(o.length);for(let s=0;s<r.length;s++)r[s]=o.charCodeAt(s);return U.some(new Blob([r],{type:e}))},wb=e=>new Promise(((t,n)=>{const o=new FileReader;o.onloadend=()=>{t(o.result)},o.onerror=()=>{var e;n(null===(e=o.error)||void 0===e?void 0:e.message)},o.readAsDataURL(e)}));let Cb=0;const Sb=(e,t,n)=>yb(e).bind((({data:e,type:o,base64Encoded:r})=>{if(t&&!r)return U.none();{const t=r?e:btoa(e);return n(t,o)}})),_b=(e,t,n)=>{const o=e.create("blobid"+Cb++,t,n);return e.add(o),o},kb=(e,t,n=!1)=>Sb(t,n,((t,n)=>U.from(e.getByData(t,n)).orThunk((()=>xb(n,t).map((n=>_b(e,n,t)))))));function Eb(e){return Eb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eb(e)}function Ob(e,t){return Ob=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ob(e,t)}function Tb(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Ab(e,t,n){return Ab=Tb()?Reflect.construct:function(e,t,n){var o=[null];o.push.apply(o,t);var r=new(Function.bind.apply(e,o));return n&&Ob(r,n.prototype),r},Ab.apply(null,arguments)}function Rb(e){return function(e){if(Array.isArray(e))return Nb(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Nb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Nb(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var Db=Object.hasOwnProperty,Bb=Object.setPrototypeOf,Mb=Object.isFrozen,Ib=Object.getPrototypeOf,Pb=Object.getOwnPropertyDescriptor,Lb=Object.freeze,Fb=Object.seal,zb=Object.create,jb="undefined"!=typeof Reflect&&Reflect,Ub=jb.apply,Hb=jb.construct;Ub||(Ub=function(e,t,n){return e.apply(t,n)}),Lb||(Lb=function(e){return e}),Fb||(Fb=function(e){return e}),Hb||(Hb=function(e,t){return Ab(e,Rb(t))});var $b,Vb=ey(Array.prototype.forEach),Wb=ey(Array.prototype.pop),qb=ey(Array.prototype.push),Gb=ey(String.prototype.toLowerCase),Kb=ey(String.prototype.match),Yb=ey(String.prototype.replace),Xb=ey(String.prototype.indexOf),Jb=ey(String.prototype.trim),Qb=ey(RegExp.prototype.test),Zb=($b=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Hb($b,t)});function ey(e){return function(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return Ub(e,t,o)}}function ty(e,t){Bb&&Bb(e,null);for(var n=t.length;n--;){var o=t[n];if("string"==typeof o){var r=Gb(o);r!==o&&(Mb(t)||(t[n]=r),o=r)}e[o]=!0}return e}function ny(e){var t,n=zb(null);for(t in e)Ub(Db,e,[t])&&(n[t]=e[t]);return n}function oy(e,t){for(;null!==e;){var n=Pb(e,t);if(n){if(n.get)return ey(n.get);if("function"==typeof n.value)return ey(n.value)}e=Ib(e)}return function(e){return console.warn("fallback value for",e),null}}var ry=Lb(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),sy=Lb(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),ay=Lb(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),iy=Lb(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),ly=Lb(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),cy=Lb(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),dy=Lb(["#text"]),uy=Lb(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),my=Lb(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),py=Lb(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),fy=Lb(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),gy=Fb(/\{\{[\w\W]*|[\w\W]*\}\}/gm),hy=Fb(/<%[\w\W]*|[\w\W]*%>/gm),vy=Fb(/^data-[\-\w.\u00B7-\uFFFF]/),by=Fb(/^aria-[\-\w]+$/),yy=Fb(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),xy=Fb(/^(?:\w+script|data):/i),wy=Fb(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Cy=Fb(/^html$/i),Sy=function(){return"undefined"==typeof window?null:window},_y=function(e,t){if("object"!==Eb(e)||"function"!=typeof e.createPolicy)return null;var n=null,o="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(o)&&(n=t.currentScript.getAttribute(o));var r="dompurify"+(n?"#"+n:"");try{return e.createPolicy(r,{createHTML:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+r+" could not be created."),null}},ky=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sy(),n=function(t){return e(t)};if(n.version="2.3.8",n.removed=[],!t||!t.document||9!==t.document.nodeType)return n.isSupported=!1,n;var o=t.document,r=t.document,s=t.DocumentFragment,a=t.HTMLTemplateElement,i=t.Node,l=t.Element,c=t.NodeFilter,d=t.NamedNodeMap,u=void 0===d?t.NamedNodeMap||t.MozNamedAttrMap:d,m=t.HTMLFormElement,p=t.DOMParser,f=t.trustedTypes,g=l.prototype,h=oy(g,"cloneNode"),v=oy(g,"nextSibling"),b=oy(g,"childNodes"),y=oy(g,"parentNode");if("function"==typeof a){var x=r.createElement("template");x.content&&x.content.ownerDocument&&(r=x.content.ownerDocument)}var w=_y(f,o),C=w?w.createHTML(""):"",S=r,_=S.implementation,k=S.createNodeIterator,E=S.createDocumentFragment,O=S.getElementsByTagName,T=o.importNode,A={};try{A=ny(r).documentMode?r.documentMode:{}}catch(e){}var R={};n.isSupported="function"==typeof y&&_&&void 0!==_.createHTMLDocument&&9!==A;var N,D,B=gy,M=hy,I=vy,P=by,L=xy,F=wy,z=yy,j=null,U=ty({},[].concat(Rb(ry),Rb(sy),Rb(ay),Rb(ly),Rb(dy))),H=null,$=ty({},[].concat(Rb(uy),Rb(my),Rb(py),Rb(fy))),V=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),W=null,q=null,G=!0,K=!0,Y=!1,X=!1,J=!1,Q=!1,Z=!1,ee=!1,te=!1,ne=!1,oe=!0,re=!0,se=!1,ae={},ie=null,le=ty({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ce=null,de=ty({},["audio","video","img","source","image","track"]),ue=null,me=ty({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),pe="http://www.w3.org/1998/Math/MathML",fe="http://www.w3.org/2000/svg",ge="http://www.w3.org/1999/xhtml",he=ge,ve=!1,be=["application/xhtml+xml","text/html"],ye="text/html",xe=null,we=r.createElement("form"),Ce=function(e){return e instanceof RegExp||e instanceof Function},Se=function(e){xe&&xe===e||(e&&"object"===Eb(e)||(e={}),e=ny(e),j="ALLOWED_TAGS"in e?ty({},e.ALLOWED_TAGS):U,H="ALLOWED_ATTR"in e?ty({},e.ALLOWED_ATTR):$,ue="ADD_URI_SAFE_ATTR"in e?ty(ny(me),e.ADD_URI_SAFE_ATTR):me,ce="ADD_DATA_URI_TAGS"in e?ty(ny(de),e.ADD_DATA_URI_TAGS):de,ie="FORBID_CONTENTS"in e?ty({},e.FORBID_CONTENTS):le,W="FORBID_TAGS"in e?ty({},e.FORBID_TAGS):{},q="FORBID_ATTR"in e?ty({},e.FORBID_ATTR):{},ae="USE_PROFILES"in e&&e.USE_PROFILES,G=!1!==e.ALLOW_ARIA_ATTR,K=!1!==e.ALLOW_DATA_ATTR,Y=e.ALLOW_UNKNOWN_PROTOCOLS||!1,X=e.SAFE_FOR_TEMPLATES||!1,J=e.WHOLE_DOCUMENT||!1,ee=e.RETURN_DOM||!1,te=e.RETURN_DOM_FRAGMENT||!1,ne=e.RETURN_TRUSTED_TYPE||!1,Z=e.FORCE_BODY||!1,oe=!1!==e.SANITIZE_DOM,re=!1!==e.KEEP_CONTENT,se=e.IN_PLACE||!1,z=e.ALLOWED_URI_REGEXP||z,he=e.NAMESPACE||ge,e.CUSTOM_ELEMENT_HANDLING&&Ce(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(V.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&Ce(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(V.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(V.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),N=N=-1===be.indexOf(e.PARSER_MEDIA_TYPE)?ye:e.PARSER_MEDIA_TYPE,D="application/xhtml+xml"===N?function(e){return e}:Gb,X&&(K=!1),te&&(ee=!0),ae&&(j=ty({},Rb(dy)),H=[],!0===ae.html&&(ty(j,ry),ty(H,uy)),!0===ae.svg&&(ty(j,sy),ty(H,my),ty(H,fy)),!0===ae.svgFilters&&(ty(j,ay),ty(H,my),ty(H,fy)),!0===ae.mathMl&&(ty(j,ly),ty(H,py),ty(H,fy))),e.ADD_TAGS&&(j===U&&(j=ny(j)),ty(j,e.ADD_TAGS)),e.ADD_ATTR&&(H===$&&(H=ny(H)),ty(H,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&ty(ue,e.ADD_URI_SAFE_ATTR),e.FORBID_CONTENTS&&(ie===le&&(ie=ny(ie)),ty(ie,e.FORBID_CONTENTS)),re&&(j["#text"]=!0),J&&ty(j,["html","head","body"]),j.table&&(ty(j,["tbody"]),delete W.tbody),Lb&&Lb(e),xe=e)},_e=ty({},["mi","mo","mn","ms","mtext"]),ke=ty({},["foreignobject","desc","title","annotation-xml"]),Ee=ty({},["title","style","font","a","script"]),Oe=ty({},sy);ty(Oe,ay),ty(Oe,iy);var Te=ty({},ly);ty(Te,cy);var Ae=function(e){var t=y(e);t&&t.tagName||(t={namespaceURI:ge,tagName:"template"});var n=Gb(e.tagName),o=Gb(t.tagName);return e.namespaceURI===fe?t.namespaceURI===ge?"svg"===n:t.namespaceURI===pe?"svg"===n&&("annotation-xml"===o||_e[o]):Boolean(Oe[n]):e.namespaceURI===pe?t.namespaceURI===ge?"math"===n:t.namespaceURI===fe?"math"===n&&ke[o]:Boolean(Te[n]):e.namespaceURI===ge&&!(t.namespaceURI===fe&&!ke[o])&&!(t.namespaceURI===pe&&!_e[o])&&!Te[n]&&(Ee[n]||!Oe[n])},Re=function(e){qb(n.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){try{e.outerHTML=C}catch(t){e.remove()}}},Ne=function(e,t){try{qb(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){qb(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!H[e])if(ee||te)try{Re(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},De=function(e){var t,n;if(Z)e="<remove></remove>"+e;else{var o=Kb(e,/^[\r\n\t ]+/);n=o&&o[0]}"application/xhtml+xml"===N&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var s=w?w.createHTML(e):e;if(he===ge)try{t=(new p).parseFromString(s,N)}catch(e){}if(!t||!t.documentElement){t=_.createDocument(he,"template",null);try{t.documentElement.innerHTML=ve?"":s}catch(e){}}var a=t.body||t.documentElement;return e&&n&&a.insertBefore(r.createTextNode(n),a.childNodes[0]||null),he===ge?O.call(t,J?"html":"body")[0]:J?t.documentElement:a},Be=function(e){return k.call(e.ownerDocument||e,e,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT,null,!1)},Me=function(e){return e instanceof m&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof u)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore)},Ie=function(e){return"object"===Eb(i)?e instanceof i:e&&"object"===Eb(e)&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},Pe=function(e,t,o){R[e]&&Vb(R[e],(function(e){e.call(n,t,o,xe)}))},Le=function(e){var t;if(Pe("beforeSanitizeElements",e,null),Me(e))return Re(e),!0;if(Qb(/[\u0080-\uFFFF]/,e.nodeName))return Re(e),!0;var o=D(e.nodeName);if(Pe("uponSanitizeElement",e,{tagName:o,allowedTags:j}),e.hasChildNodes()&&!Ie(e.firstElementChild)&&(!Ie(e.content)||!Ie(e.content.firstElementChild))&&Qb(/<[/\w]/g,e.innerHTML)&&Qb(/<[/\w]/g,e.textContent))return Re(e),!0;if("select"===o&&Qb(/<template/i,e.innerHTML))return Re(e),!0;if(!j[o]||W[o]){if(!W[o]&&ze(o)){if(V.tagNameCheck instanceof RegExp&&Qb(V.tagNameCheck,o))return!1;if(V.tagNameCheck instanceof Function&&V.tagNameCheck(o))return!1}if(re&&!ie[o]){var r=y(e)||e.parentNode,s=b(e)||e.childNodes;if(s&&r)for(var a=s.length-1;a>=0;--a)r.insertBefore(h(s[a],!0),v(e))}return Re(e),!0}return e instanceof l&&!Ae(e)?(Re(e),!0):"noscript"!==o&&"noembed"!==o||!Qb(/<\/no(script|embed)/i,e.innerHTML)?(X&&3===e.nodeType&&(t=e.textContent,t=Yb(t,B," "),t=Yb(t,M," "),e.textContent!==t&&(qb(n.removed,{element:e.cloneNode()}),e.textContent=t)),Pe("afterSanitizeElements",e,null),!1):(Re(e),!0)},Fe=function(e,t,n){if(oe&&("id"===t||"name"===t)&&(n in r||n in we))return!1;if(K&&!q[t]&&Qb(I,t));else if(G&&Qb(P,t));else if(!H[t]||q[t]){if(!(ze(e)&&(V.tagNameCheck instanceof RegExp&&Qb(V.tagNameCheck,e)||V.tagNameCheck instanceof Function&&V.tagNameCheck(e))&&(V.attributeNameCheck instanceof RegExp&&Qb(V.attributeNameCheck,t)||V.attributeNameCheck instanceof Function&&V.attributeNameCheck(t))||"is"===t&&V.allowCustomizedBuiltInElements&&(V.tagNameCheck instanceof RegExp&&Qb(V.tagNameCheck,n)||V.tagNameCheck instanceof Function&&V.tagNameCheck(n))))return!1}else if(ue[t]);else if(Qb(z,Yb(n,F,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==Xb(n,"data:")||!ce[e])if(Y&&!Qb(L,Yb(n,F,"")));else if(n)return!1;return!0},ze=function(e){return e.indexOf("-")>0},je=function(e){var t,n,o,r;Pe("beforeSanitizeAttributes",e,null);var s=e.attributes;if(s){var a={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:H};for(r=s.length;r--;){var i=t=s[r],l=i.name,c=i.namespaceURI;n="value"===l?t.value:Jb(t.value),o=D(l);var d=n;if(a.attrName=o,a.attrValue=n,a.keepAttr=!0,a.forceKeepAttr=void 0,Pe("uponSanitizeAttribute",e,a),n=a.attrValue,!a.forceKeepAttr)if(a.keepAttr)if(Qb(/\/>/i,n))Ne(l,e);else{X&&(n=Yb(n,B," "),n=Yb(n,M," "));var u=D(e.nodeName);if(Fe(u,o,n)){if(n!==d)try{c?e.setAttributeNS(c,l,n):e.setAttribute(l,n)}catch(t){Ne(l,e)}}else Ne(l,e)}else Ne(l,e)}Pe("afterSanitizeAttributes",e,null)}},Ue=function e(t){var n,o=Be(t);for(Pe("beforeSanitizeShadowDOM",t,null);n=o.nextNode();)Pe("uponSanitizeShadowNode",n,null),Le(n)||(n.content instanceof s&&e(n.content),je(n));Pe("afterSanitizeShadowDOM",t,null)};return n.sanitize=function(e,r){var a,l,c,d,u;if((ve=!e)&&(e="\x3c!--\x3e"),"string"!=typeof e&&!Ie(e)){if("function"!=typeof e.toString)throw Zb("toString is not a function");if("string"!=typeof(e=e.toString()))throw Zb("dirty is not a string, aborting")}if(!n.isSupported){if("object"===Eb(t.toStaticHTML)||"function"==typeof t.toStaticHTML){if("string"==typeof e)return t.toStaticHTML(e);if(Ie(e))return t.toStaticHTML(e.outerHTML)}return e}if(Q||Se(r),n.removed=[],"string"==typeof e&&(se=!1),se){if(e.nodeName){var m=D(e.nodeName);if(!j[m]||W[m])throw Zb("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof i)1===(l=(a=De("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===l.nodeName||"HTML"===l.nodeName?a=l:a.appendChild(l);else{if(!ee&&!X&&!J&&-1===e.indexOf("<"))return w&&ne?w.createHTML(e):e;if(!(a=De(e)))return ee?null:ne?C:""}a&&Z&&Re(a.firstChild);for(var p=Be(se?e:a);c=p.nextNode();)3===c.nodeType&&c===d||Le(c)||(c.content instanceof s&&Ue(c.content),je(c),d=c);if(d=null,se)return e;if(ee){if(te)for(u=E.call(a.ownerDocument);a.firstChild;)u.appendChild(a.firstChild);else u=a;return H.shadowroot&&(u=T.call(o,u,!0)),u}var f=J?a.outerHTML:a.innerHTML;return J&&j["!doctype"]&&a.ownerDocument&&a.ownerDocument.doctype&&a.ownerDocument.doctype.name&&Qb(Cy,a.ownerDocument.doctype.name)&&(f="<!DOCTYPE "+a.ownerDocument.doctype.name+">\n"+f),X&&(f=Yb(f,B," "),f=Yb(f,M," ")),w&&ne?w.createHTML(f):f},n.setConfig=function(e){Se(e),Q=!0},n.clearConfig=function(){xe=null,Q=!1},n.isValidAttribute=function(e,t,n){xe||Se({});var o=D(e),r=D(t);return Fe(o,r,n)},n.addHook=function(e,t){"function"==typeof t&&(R[e]=R[e]||[],qb(R[e],t))},n.removeHook=function(e){if(R[e])return Wb(R[e])},n.removeHooks=function(e){R[e]&&(R[e]=[])},n.removeAllHooks=function(){R={}},n}();const Ey=Lt.each,Oy=Lt.trim,Ty=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],Ay={ftp:21,http:80,https:443,mailto:25},Ry=["img","video"],Ny=(e,t,n)=>{const o=(e=>{try{return decodeURIComponent(e)}catch(t){return unescape(e)}})(t).replace(/\s/g,"");return!e.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(o)||!e.allow_html_data_urls&&(/^data:image\//i.test(o)?((e,t)=>_(e)?!e:!_(t)||!q(Ry,t))(e.allow_svg_data_urls,n)&&/^data:image\/svg\+xml/i.test(o):/^data:/i.test(o)))};class Dy{constructor(e,t={}){this.path="",this.directory="",e=Oy(e),this.settings=t;const n=t.base_uri,o=this;if(/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))return void(o.source=e);const r=0===e.indexOf("//");if(0!==e.indexOf("/")||r||(e=(n&&n.protocol||"http")+"://mce_host"+e),!/^[\w\-]*:?\/\//.test(e)){const t=n?n.path:new Dy(document.location.href).directory;if(""===(null==n?void 0:n.protocol))e="//mce_host"+o.toAbsPath(t,e);else{const r=/([^#?]*)([#?]?.*)/.exec(e);r&&(e=(n&&n.protocol||"http")+"://mce_host"+o.toAbsPath(t,r[1])+r[2])}}e=e.replace(/@@/g,"(mce_at)");const s=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);s&&Ey(Ty,((e,t)=>{let n=s[t];n&&(n=n.replace(/\(mce_at\)/g,"@@")),o[e]=n})),n&&(o.protocol||(o.protocol=n.protocol),o.userInfo||(o.userInfo=n.userInfo),o.port||"mce_host"!==o.host||(o.port=n.port),o.host&&"mce_host"!==o.host||(o.host=n.host),o.source=""),r&&(o.protocol="")}static parseDataUri(e){let t;const n=decodeURIComponent(e).split(","),o=/data:([^;]+)/.exec(n[0]);return o&&(t=o[1]),{type:t,data:n[1]}}static isDomSafe(e,t,n={}){if(n.allow_script_urls)return!0;{const o=Js.decode(e).replace(/[\s\u0000-\u001F]+/g,"");return!Ny(n,o,t)}}static getDocumentBaseUrl(e){var t;let n;return n=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?null!==(t=e.href)&&void 0!==t?t:"":e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(n)&&(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/")),n}setPath(e){const t=/^(.*?)\/?(\w+)?$/.exec(e);t&&(this.path=t[0],this.directory=t[1],this.file=t[2]),this.source="",this.getURI()}toRelative(e){if("./"===e)return e;const t=new Dy(e,{base_uri:this});if("mce_host"!==t.host&&this.host!==t.host&&t.host||this.port!==t.port||this.protocol!==t.protocol&&""!==t.protocol)return t.getURI();const n=this.getURI(),o=t.getURI();if(n===o||"/"===n.charAt(n.length-1)&&n.substr(0,n.length-1)===o)return n;let r=this.toRelPath(this.path,t.path);return t.query&&(r+="?"+t.query),t.anchor&&(r+="#"+t.anchor),r}toAbsolute(e,t){const n=new Dy(e,{base_uri:this});return n.getURI(t&&this.isSameOrigin(n))}isSameOrigin(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;const t=this.protocol?Ay[this.protocol]:null;if(t&&(this.port||t)==(e.port||t))return!0}return!1}toRelPath(e,t){let n,o,r=0,s="";const a=e.substring(0,e.lastIndexOf("/")).split("/"),i=t.split("/");if(a.length>=i.length)for(n=0,o=a.length;n<o;n++)if(n>=i.length||a[n]!==i[n]){r=n+1;break}if(a.length<i.length)for(n=0,o=i.length;n<o;n++)if(n>=a.length||a[n]!==i[n]){r=n+1;break}if(1===r)return t;for(n=0,o=a.length-(r-1);n<o;n++)s+="../";for(n=r-1,o=i.length;n<o;n++)s+=n!==r-1?"/"+i[n]:i[n];return s}toAbsPath(e,t){let n=0;const o=/\/$/.test(t)?"/":"",r=e.split("/"),s=t.split("/"),a=[];Ey(r,(e=>{e&&a.push(e)}));const i=[];for(let d=s.length-1;d>=0;d--)0!==s[d].length&&"."!==s[d]&&(".."!==s[d]?n>0?n--:i.push(s[d]):n++);const l=a.length-n;let c;return c=l<=0?ie(i).join("/"):a.slice(0,l).join("/")+"/"+ie(i).join("/"),0!==c.indexOf("/")&&(c="/"+c),o&&c.lastIndexOf("/")!==c.length-1&&(c+=o),c}getURI(e=!1){let t;return this.source&&!e||(t="",e||(this.protocol?t+=this.protocol+"://":t+="//",this.userInfo&&(t+=this.userInfo+"@"),this.host&&(t+=this.host),this.port&&(t+=":"+this.port)),this.path&&(t+=this.path),this.query&&(t+="?"+this.query),this.anchor&&(t+="#"+this.anchor),this.source=t),this.source}}const By=Lt.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),My="data-mce-type";let Iy=0;const Py=(e,t,n,o)=>{var r,s,a,i;const l=t.validate,c=n.getSpecialElements();8===e.nodeType&&!t.allow_conditional_comments&&/^\[if/i.test(null!==(r=e.nodeValue)&&void 0!==r?r:"")&&(e.nodeValue=" "+e.nodeValue);const d=null!==(s=null==o?void 0:o.tagName)&&void 0!==s?s:e.nodeName.toLowerCase();if(1!==e.nodeType||"body"===d)return;const u=wn(e),m=rn(u,My),p=nn(u,"data-mce-bogus");if(!m&&h(p))return void("all"===p?So(u):_o(u));const f=n.getElementRule(d);if(!l||f){if(_(o)&&(o.allowedTags[d]=!0),l&&f&&!m){if(Y(null!==(a=f.attributesForced)&&void 0!==a?a:[],(e=>{en(u,e.name,"{$uid}"===e.value?"mce_"+Iy++:e.value)})),Y(null!==(i=f.attributesDefault)&&void 0!==i?i:[],(e=>{rn(u,e.name)||en(u,e.name,"{$uid}"===e.value?"mce_"+Iy++:e.value)})),f.attributesRequired&&!G(f.attributesRequired,(e=>rn(u,e))))return void _o(u);if(f.removeEmptyAttrs&&(e=>{const t=e.dom.attributes;return null==t||0===t.length})(u))return void _o(u);f.outputName&&f.outputName!==d&&((e,t)=>{const n=((e,t)=>{const n=yn(t),o=an(e);return tn(n,o),n})(e,t);vo(e,n);const o=Fn(e);wo(n,o),So(e)})(u,f.outputName)}}else Oe(c,d)?So(u):_o(u)},Ly=(e,t,n,o,r)=>!(o in By&&Ny(e,r,n))&&(!e.validate||t.isValid(n,o)||qe(o,"data-")||qe(o,"aria-")),Fy=(e,t)=>e.hasAttribute(My)&&("id"===t||"class"===t||"style"===t),zy=(e,t)=>e in t.getBoolAttrs(),jy=(e,t,n)=>{const{attributes:o}=e;for(let r=o.length-1;r>=0;r--){const s=o[r],a=s.name,i=s.value;Ly(t,n,e.tagName.toLowerCase(),a,i)||Fy(e,a)?zy(a,n)&&e.setAttribute(a,a):e.removeAttribute(a)}},Uy=(e,t)=>{const n=ky();return n.addHook("uponSanitizeElement",((n,o)=>{Py(n,e,t,o)})),n.addHook("uponSanitizeAttribute",((n,o)=>{const r=n.tagName.toLowerCase(),{attrName:s,attrValue:a}=o;o.keepAttr=Ly(e,t,r,s,a),o.keepAttr?(o.allowedAttributes[s]=!0,zy(s,t)&&(o.attrValue=s),e.allow_svg_data_urls&&qe(a,"data:image/svg+xml")&&(o.forceKeepAttr=!0)):Fy(n,s)&&(o.forceKeepAttr=!0)})),n},Hy=Lt.makeMap,$y=Lt.extend,Vy=(e,t,n)=>{const o=e.name,r=o in n&&"title"!==o&&"textarea"!==o,s=t.childNodes;for(let a=0,i=s.length;a<i;a++){const t=s[a],o=new Df(t.nodeName.toLowerCase(),t.nodeType);if(Vo(t)){const e=t.attributes;for(let t=0,n=e.length;t<n;t++){const n=e[t];o.attr(n.name,n.value)}}else Zo(t)?(o.value=t.data,r&&(o.raw=!0)):(nr(t)||er(t)||tr(t))&&(o.value=t.data);Vy(o,t,n),e.append(o)}},Wy=(e={},t=da())=>{const n=vb(),o=vb(),s=r({validate:!0,root_name:"body",sanitize:!0},e),a=new DOMParser,i=((e,t)=>{if(e.sanitize){const n=Uy(e,t);return(t,o)=>{n.sanitize(t,((e,t)=>{const n={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]};return n.PARSER_MEDIA_TYPE=t,e.allow_script_urls?n.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(n.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),n})(e,o)),n.removed=[]}}return(n,o)=>{const r=document.createNodeIterator(n,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let s;for(;s=r.nextNode();)Py(s,e,t),Vo(s)&&jy(s,e,t)}})(s,t),l=n.addFilter,c=n.getFilters,d=n.removeFilter,u=o.addFilter,m=o.getFilters,p=o.removeFilter,f=(e,n)=>{const o=h(n.attr(My)),r=1===n.type&&!Oe(e,n.name)&&!((e,t)=>1===t.type&&ks(e,t.name)&&h(t.attr(hs)))(t,n);return 3===n.type||r&&!o},g={schema:t,addAttributeFilter:u,getAttributeFilters:m,removeAttributeFilter:p,addNodeFilter:l,getNodeFilters:c,removeNodeFilter:d,parse:(e,n={})=>{var o;const r=s.validate,l=null!==(o=n.context)&&void 0!==o?o:s.root_name,d=((e,n,o="html")=>{const r="xhtml"===o?"application/xhtml+xml":"text/html",s=Oe(t.getSpecialElements(),n.toLowerCase()),l=s?`<${n}>${e}</${n}>`:e,c="xhtml"===o?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${l}</body></html>`:`<body>${l}</body>`,d=a.parseFromString(c,r).body;return i(d,r),s?d.firstChild:d})(e,l,n.format);Cs(t,d);const u=new Df(l,11);Vy(u,d,t.getSpecialElements()),d.innerHTML="";const[p,g]=((e,t,n,o)=>{const r=n.validate,s=t.getNonEmptyElements(),a=t.getWhitespaceElements(),i=$y(Hy("script,style,head,html,body,title,meta,param"),t.getBlockElements()),l=la(t),c=/[ \t\r\n]+/g,d=/^[ \t\r\n]+/,u=/[ \t\r\n]+$/,m=e=>{let t=e.parent;for(;_(t);){if(t.name in a)return!0;t=t.parent}return!1},p=e=>e.name in i&&!As(t,e),f=(t,n)=>{const r=n?t.prev:t.next;return!_(r)&&!S(t.parent)&&p(t.parent)&&(t.parent!==e||!0===o.isRootContent)};return[e=>{var t;if(3===e.type&&!m(e)){let n=null!==(t=e.value)&&void 0!==t?t:"";n=n.replace(c," "),(((e,t)=>_(e)&&(t(e)||"br"===e.name))(e.prev,p)||f(e,!0))&&(n=n.replace(d,"")),0===n.length?e.remove():e.value=n}},e=>{var n;if(1===e.type){const n=t.getElementRule(e.name);if(r&&n){const r=$h(t,s,a,e);n.paddInEmptyBlock&&r&&(e=>{let n=e;for(;_(n);){if(n.name in l)return $h(t,s,a,n);n=n.parent}return!1})(e)?Uh(o,p,e):n.removeEmpty&&r?p(e)?e.remove():e.unwrap():n.paddEmpty&&(r||(e=>{var t;return Hh(e,"#text")&&(null===(t=null==e?void 0:e.firstChild)||void 0===t?void 0:t.value)===fr})(e))&&Uh(o,p,e)}}else if(3===e.type&&!m(e)){let t=null!==(n=e.value)&&void 0!==n?n:"";(e.next&&p(e.next)||f(e,!1))&&(t=t.replace(u,"")),0===t.length?e.remove():e.value=t}}]})(u,t,s,n),h=[],v=r?e=>((e,n)=>{Gh(t,e)&&n.push(e)})(e,h):T,b={nodes:{},attributes:{}},y=e=>Fh(c(),m(),e,b);if(((e,t,n)=>{const o=[];for(let r=e,s=r;r;s=r,r=r.walk()){const n=r;Y(t,(e=>e(n))),S(n.parent)&&n!==e?r=s:o.push(n)}for(let r=o.length-1;r>=0;r--){const e=o[r];Y(n,(t=>t(e)))}})(u,[p,y],[g,v]),h.reverse(),r&&h.length>0)if(n.context){const{pass:e,fail:o}=J(h,(e=>e.parent===u));qh(o,t,u,y),n.invalid=e.length>0}else qh(h,t,u,y);const x=((e,t)=>{var n;const o=null!==(n=t.forced_root_block)&&void 0!==n?n:e.forced_root_block;return!1===o?"":!0===o?"p":o})(s,n);return x&&("body"===u.name||n.isRootContent)&&((e,n)=>{const o=$y(Hy("script,style,head,html,body,title,meta,param"),t.getBlockElements()),r=/^[ \t\r\n]+/,a=/[ \t\r\n]+$/;let i=e.firstChild,l=null;const c=e=>{var t,n;e&&(i=e.firstChild,i&&3===i.type&&(i.value=null===(t=i.value)||void 0===t?void 0:t.replace(r,"")),i=e.lastChild,i&&3===i.type&&(i.value=null===(n=i.value)||void 0===n?void 0:n.replace(a,"")))};if(t.isValidChild(e.name,n.toLowerCase())){for(;i;){const t=i.next;f(o,i)?(l||(l=new Df(n,1),l.attr(s.forced_root_block_attrs),e.insert(l,i)),l.append(i)):(c(l),l=null),i=t}c(l)}})(u,x),n.invalid||zh(b,n),u}};return((e,t)=>{const n=e.schema;t.remove_trailing_brs&&e.addNodeFilter("br",((e,t,o)=>{const r=Lt.extend({},n.getBlockElements()),s=n.getNonEmptyElements(),a=n.getWhitespaceElements();r.body=1;const i=e=>e.name in r&&As(n,e);for(let l=0,c=e.length;l<c;l++){let t=e[l],c=t.parent;if(c&&r[c.name]&&t===c.lastChild){let e=t.prev;for(;e;){const n=e.name;if("span"!==n||"bookmark"!==e.attr("data-mce-type")){"br"===n&&(t=null);break}e=e.prev}if(t&&(t.remove(),$h(n,s,a,c))){const e=n.getElementRule(c.name);e&&(e.removeEmpty?c.remove():e.paddEmpty&&Uh(o,i,c))}}else{let e=t;for(;c&&c.firstChild===e&&c.lastChild===e&&(e=c,!r[c.name]);)c=c.parent;if(e===c){const e=new Df("#text",3);e.value=fr,t.replace(e)}}}})),e.addAttributeFilter("href",(e=>{let n=e.length;const o=e=>{const t=e?Lt.trim(e):"";return/\b(noopener)\b/g.test(t)?t:(e=>e.split(" ").filter((e=>e.length>0)).concat(["noopener"]).sort().join(" "))(t)};if(!t.allow_unsafe_link_target)for(;n--;){const t=e[n];"a"===t.name&&"_blank"===t.attr("target")&&t.attr("rel",o(t.attr("rel")))}})),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",(e=>{let t,n,o,r,s=e.length;for(;s--;)if(r=e[s],"a"===r.name&&r.firstChild&&!r.attr("href"))for(o=r.parent,t=r.lastChild;t&&o;)n=t.prev,o.insert(t,r),t=n})),t.fix_list_elements&&e.addNodeFilter("ul,ol",(e=>{let t,n,o=e.length;for(;o--;)if(t=e[o],n=t.parent,n&&("ul"===n.name||"ol"===n.name))if(t.prev&&"li"===t.prev.name)t.prev.append(t);else{const e=new Df("li",1);e.attr("style","list-style-type: none"),t.wrap(e)}}));const o=n.getValidClasses();t.validate&&o&&e.addAttributeFilter("class",(e=>{var t;let n=e.length;for(;n--;){const r=e[n],s=null!==(t=r.attr("class"))&&void 0!==t?t:"",a=Lt.explode(s," ");let i="";for(let e=0;e<a.length;e++){const t=a[e];let n=!1,s=o["*"];s&&s[t]&&(n=!0),s=o[r.name],!n&&s&&s[t]&&(n=!0),n&&(i&&(i+=" "),i+=t)}i.length||(i=null),r.attr("class",i)}})),((e,t)=>{const{blob_cache:n}=t;if(n){const t=e=>{const t=e.attr("src");(e=>e.attr("src")===Bt.transparentSrc||_(e.attr("data-mce-placeholder")))(e)||(e=>_(e.attr("data-mce-bogus")))(e)||S(t)||kb(n,t,!0).each((t=>{e.attr("src",t.blobUri())}))};e.addAttributeFilter("src",(e=>Y(e,t)))}})(e,t)})(g,s),((e,t,n)=>{t.inline_styles&&bb(e,t,n)})(g,s,t),g},qy=(e,t,n)=>{const o=(e=>ov(e)?Hf({validate:!1}).serialize(e):e)(e),s=t(o);if(s.isDefaultPrevented())return s;if(ov(e)){if(s.content!==o){const t=Wy({validate:!1,forced_root_block:!1,sanitize:n}).parse(s.content,{context:e.name});return r(r({},s),{},{content:t})}return r(r({},s),{},{content:e})}return s},Gy=(e,t)=>{if(t.no_events)return sl.value(t);{const n=((e,t)=>e.dispatch("BeforeGetContent",t))(e,t);return n.isDefaultPrevented()?sl.error(qm(e,r({content:""},n)).content):sl.value(n)}},Ky=(e,t,n)=>{if(n.no_events)return t;{const o=qy(t,(t=>qm(e,r(r({},n),{},{content:t}))),td(e));return o.content}},Yy=(e,t)=>{if(t.no_events)return sl.value(t);{const n=qy(t.content,(n=>((e,t)=>e.dispatch("BeforeSetContent",t))(e,r(r({},t),{},{content:n}))),td(e));return n.isDefaultPrevented()?(Wm(e,n),sl.error(void 0)):sl.value(n)}},Xy=(e,t,n)=>{n.no_events||Wm(e,r(r({},n),{},{content:t}))},Jy=(e,t,n)=>({element:e,width:t,rows:n}),Qy=(e,t)=>({element:e,cells:t}),Zy=(e,t)=>({x:e,y:t}),ex=(e,t)=>on(e,t).bind(et).getOr(1),tx=(e,t,n)=>{const o=e.rows;return!!(o[n]?o[n].cells:[])[t]},nx=e=>ee(e,((e,t)=>t.cells.length>e?t.cells.length:e),0),ox=(e,t)=>{const n=e.rows;for(let o=0;o<n.length;o++){const e=n[o].cells;for(let n=0;n<e.length;n++)if(En(e[n],t))return U.some(Zy(n,o))}return U.none()},rx=(e,t,n,o,r)=>{const s=[],a=e.rows;for(let i=n;i<=r;i++){const e=a[i].cells,n=t<o?e.slice(t,o+1):e.slice(o,t+1);s.push(Qy(a[i].element,n))}return s},sx=e=>((e,t)=>{const n=oi(e.element),o=yn("tbody");return wo(o,t),yo(n,o),n})(e,(e=>K(e.rows,(e=>{const t=K(e.cells,(e=>{const t=ri(e);return sn(t,"colspan"),sn(t,"rowspan"),t})),n=oi(e.element);return wo(n,t),n})))(e)),ax=(e,t)=>{const n=wn(t.commonAncestorContainer),o=cg(n,e),r=Q(o,Nr),s=((e,t)=>ne(e,(e=>"li"===Wt(e)&&Gu(e,t))).fold(N([]),(t=>(e=>ne(e,(e=>"ul"===Wt(e)||"ol"===Wt(e))))(e).map((e=>{const t=yn(Wt(e)),n=Se(fo(e),((e,t)=>qe(t,"list-style")));return co(t,n),[yn("li"),t]})).getOr([]))))(o,t),a=r.concat(s.length?s:(e=>Er(e)?Nn(e).filter(kr).fold(N([]),(t=>[e,t])):kr(e)?[e]:[])(n));return K(a,oi)},ix=()=>pp([]),lx=(e,t)=>((e,t)=>to(t,"table",M(En,e)))(e,t[0]).bind((e=>{const n=t[0],o=t[t.length-1],r=(e=>{const t=Jy(oi(e),0,[]);return Y(zo(e,"tr"),((e,n)=>{Y(zo(e,"td,th"),((o,r)=>{((e,t,n,o,r)=>{const s=ex(r,"rowspan"),a=ex(r,"colspan"),i=e.rows;for(let l=n;l<n+s;l++){i[l]||(i[l]=Qy(ri(o),[]));for(let e=t;e<t+a;e++)i[l].cells[e]=l===n&&e===t?r:oi(r)}})(t,((e,t,n)=>{for(;tx(e,t,n);)t++;return t})(t,r,n),n,e,o)}))})),Jy(t.element,nx(t.rows),t.rows)})(e);return((e,t,n)=>ox(e,t).bind((t=>ox(e,n).map((n=>((e,t,n)=>{const o=t.x,r=t.y,s=n.x,a=n.y,i=r<a?rx(e,o,r,s,a):rx(e,o,a,s,r);return Jy(e.element,nx(i),i)})(e,t,n))))))(r,n,o).map((e=>pp([sx(e)])))})).getOrThunk(ix),cx=(e,t)=>{const n=Hu(t,e);return n.length>0?lx(e,n):((e,t)=>t.length>0&&t[0].collapsed?ix():((e,t)=>((e,t)=>{const n=ee(t,((e,t)=>(yo(t,e),t)),e);return t.length>0?pp([n]):n})(wn(t.cloneContents()),ax(e,t)))(e,t[0]))(e,t)},dx=(e,t)=>t>=0&&t<e.length&&Du(e.charAt(t)),ux=e=>Lr(e.innerText),mx=e=>Vo(e)?e.outerHTML:Zo(e)?Js.encodeRaw(e.data,!1):nr(e)?"\x3c!--"+e.data+"--\x3e":"",px=(e,t)=>(((e,t)=>{let n=0;Y(e,(e=>{0===e[0]?n++:1===e[0]?(((e,t,n)=>{const o=(e=>{let t;const n=document.createElement("div"),o=document.createDocumentFragment();for(e&&(n.innerHTML=e);t=n.firstChild;)o.appendChild(t);return o})(t);if(e.hasChildNodes()&&n<e.childNodes.length){const t=e.childNodes[n];e.insertBefore(o,t)}else e.appendChild(o)})(t,e[1],n),n++):2===e[0]&&((e,t)=>{if(e.hasChildNodes()&&t<e.childNodes.length){const n=e.childNodes[t];e.removeChild(n)}})(t,n)}))})(((e,t)=>{const n=e.length+t.length+2,o=new Array(n),r=new Array(n),s=(n,o,r,a,l)=>{const c=i(n,o,r,a);if(null===c||c.start===o&&c.diag===o-a||c.end===n&&c.diag===n-r){let s=n,i=r;for(;s<o||i<a;)s<o&&i<a&&e[s]===t[i]?(l.push([0,e[s]]),++s,++i):o-n>a-r?(l.push([2,e[s]]),++s):(l.push([1,t[i]]),++i)}else{s(n,c.start,r,c.start-c.diag,l);for(let t=c.start;t<c.end;++t)l.push([0,e[t]]);s(c.end,o,c.end-c.diag,a,l)}},a=(n,o,r,s)=>{let a=n;for(;a-o<s&&a<r&&e[a]===t[a-o];)++a;return((e,t,n)=>({start:e,end:t,diag:n}))(n,a,o)},i=(n,s,i,l)=>{const c=s-n,d=l-i;if(0===c||0===d)return null;const u=c-d,m=d+c,p=(m%2==0?m:m+1)/2;let f,g,h,v,b;for(o[1+p]=n,r[1+p]=s+1,f=0;f<=p;++f){for(g=-f;g<=f;g+=2){for(h=g+p,g===-f||g!==f&&o[h-1]<o[h+1]?o[h]=o[h+1]:o[h]=o[h-1]+1,v=o[h],b=v-n+i-g;v<s&&b<l&&e[v]===t[b];)o[h]=++v,++b;if(u%2!=0&&u-f<=g&&g<=u+f&&r[h-u]<=o[h])return a(r[h-u],g+n-i,s,l)}for(g=u-f;g<=u+f;g+=2){for(h=g+p-u,g===u-f||g!==u+f&&r[h+1]<=r[h-1]?r[h]=r[h+1]-1:r[h]=r[h-1],v=r[h]-1,b=v-n+i-g;v>=n&&b>=i&&e[v]===t[b];)r[h]=v--,b--;if(u%2==0&&-f<=g&&g<=f&&r[h]<=o[h+u])return a(r[h],g+n-i,s,l)}}return null},l=[];return s(0,e.length,0,t.length,l),l})(K(fe(t.childNodes),mx),e),t),t),fx=Fe((()=>document.implementation.createHTMLDocument("undo"))),gx=e=>{const t=(n=e.getBody(),Q(K(fe(n.childNodes),mx),(e=>e.length>0)));var n;const o=se(t,(t=>{const n=If(e.serializer,t);return n.length>0?[n]:[]})),r=o.join("");return(e=>-1!==e.indexOf("</iframe>"))(r)?(e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}))(o):(e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}))(r)},hx=(e,t,n)=>{const o=n?t.beforeBookmark:t.bookmark;"fragmented"===t.type?px(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:!_(o)||!xu(o)||!o.isFakeCaret}),o&&(e.selection.moveToBookmark(o),e.selection.scrollIntoView())},vx=e=>"fragmented"===e.type?e.fragments.join(""):e.content,bx=e=>{const t=yn("body",fx());return Oo(t,vx(e)),Y(zo(t,"*[data-mce-bogus]"),_o),Eo(t)},yx=(e,t)=>!(!e||!t)&&(!!((e,t)=>vx(e)===vx(t))(e,t)||((e,t)=>bx(e)===bx(t))(e,t)),xx=e=>0===e.get(),wx=(e,t,n)=>{xx(n)&&(e.typing=t)},Cx=(e,t)=>{e.typing&&(wx(e,!1,t),e.add())},Sx=e=>({init:{bindEvents:T},undoManager:{beforeChange:(t,n)=>((e,t,n)=>{xx(t)&&n.set(nl(e.selection))})(e,t,n),add:(t,n,o,r,s,a)=>((e,t,n,o,r,s,a)=>{const i=gx(e),l=Lt.extend(s||{},i);if(!xx(o)||e.removed)return null;const c=t.data[n.get()];if(e.dispatch("BeforeAddUndo",{level:l,lastLevel:c,originalEvent:a}).isDefaultPrevented())return null;if(c&&yx(c,l))return null;t.data[n.get()]&&r.get().each((e=>{t.data[n.get()].beforeBookmark=e}));const d=xc(e);if(d&&t.data.length>d){for(let e=0;e<t.data.length-1;e++)t.data[e]=t.data[e+1];t.data.length--,n.set(t.data.length)}l.bookmark=nl(e.selection),n.get()<t.data.length-1&&(t.data.length=n.get()+1),t.data.push(l),n.set(t.data.length-1);const u={level:l,lastLevel:c,originalEvent:a};return n.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",u),e.dispatch("change",u)):e.dispatch("AddUndo",u),l})(e,t,n,o,r,s,a),undo:(t,n,o)=>((e,t,n,o)=>{let r;return t.typing&&(t.add(),t.typing=!1,wx(t,!1,n)),o.get()>0&&(o.set(o.get()-1),r=t.data[o.get()],hx(e,r,!0),e.setDirty(!0),e.dispatch("Undo",{level:r})),r})(e,t,n,o),redo:(t,n)=>((e,t,n)=>{let o;return t.get()<n.length-1&&(t.set(t.get()+1),o=n[t.get()],hx(e,o,!1),e.setDirty(!0),e.dispatch("Redo",{level:o})),o})(e,t,n),clear:(t,n)=>((e,t,n)=>{t.data=[],n.set(0),t.typing=!1,e.dispatch("ClearUndos")})(e,t,n),reset:e=>(e=>{e.clear(),e.add()})(e),hasUndo:(t,n)=>((e,t,n)=>n.get()>0||t.typing&&t.data[0]&&!yx(gx(e),t.data[0]))(e,t,n),hasRedo:(e,t)=>((e,t)=>t.get()<e.data.length-1&&!e.typing)(e,t),transact:(e,t,n)=>((e,t,n)=>(Cx(e,t),e.beforeChange(),e.ignore(n),e.add()))(e,t,n),ignore:(e,t)=>((e,t)=>{try{e.set(e.get()+1),t()}finally{e.set(e.get()-1)}})(e,t),extra:(t,n,o,r)=>((e,t,n,o,r)=>{if(t.transact(o)){const o=t.data[n.get()].bookmark,s=t.data[n.get()-1];hx(e,s,!0),t.transact(r)&&(t.data[n.get()-1].beforeBookmark=o)}})(e,t,n,o,r)},formatter:{match:(t,n,o,r)=>fv(e,t,n,o,r),matchAll:(t,n)=>((e,t,n)=>{const o=[],r={},s=e.selection.getStart();return e.dom.getParent(s,(s=>{for(let a=0;a<t.length;a++){const i=t[a];!r[i]&&pv(e,s,i,n)&&(r[i]=!0,o.push(i))}}),e.dom.getRoot()),o})(e,t,n),matchNode:(t,n,o,r)=>pv(e,t,n,o,r),canApply:t=>((e,t)=>{const n=e.formatter.get(t),o=e.dom;if(n){const t=e.selection.getStart(),r=pm(o,t);for(let e=n.length-1;e>=0;e--){const t=n[e];if(!hm(t))return!0;for(let e=r.length-1;e>=0;e--)if(o.is(r[e],t.selector))return!0}}return!1})(e,t),closest:t=>((e,t)=>{const n=t=>En(t,wn(e.getBody()));return U.from(e.selection.getStart(!0)).bind((o=>iv(wn(o),(n=>ge(t,(t=>((t,n)=>pv(e,t.dom,n)?U.some(n):U.none())(n,t)))),n))).getOrNull()})(e,t),apply:(t,n,o)=>db(e,t,n,o),remove:(t,n,o,r)=>ab(e,t,n,o,r),toggle:(t,n,o)=>((e,t,n,o)=>{const r=e.formatter.get(t);r&&(!fv(e,t,n,o)||"toggle"in r[0]&&!r[0].toggle?db(e,t,n,o):ab(e,t,n,o))})(e,t,n,o),formatChanged:(t,n,o,s,a)=>((e,t,n,o,s,a)=>(((e,t,n,o,r,s)=>{const a=t.get();Y(n.split(","),(t=>{const n=Ee(a,t).getOrThunk((()=>{const e={withSimilar:{state:Ba(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Ba(!1),similar:!1,callbacks:[]},withVars:[]};return a[t]=e,e})),i=()=>{const n=fb(e);return pb(e,n,t,r,s).isSome()};if(C(s)){const e=r?n.withSimilar:n.withoutSimilar;e.callbacks.push(o),1===e.callbacks.length&&e.state.set(i())}else n.withVars.push({state:Ba(i()),similar:r,vars:s,callback:o})})),t.set(a)})(e,t,n,o,s,a),{unbind:()=>((e,t,n)=>{const o=e.get();Y(t.split(","),(e=>Ee(o,e).each((t=>{o[e]={withSimilar:r(r({},t.withSimilar),{},{callbacks:Q(t.withSimilar.callbacks,(e=>e!==n))}),withoutSimilar:r(r({},t.withoutSimilar),{},{callbacks:Q(t.withoutSimilar.callbacks,(e=>e!==n))}),withVars:Q(t.withVars,(e=>e.callback!==n))}})))),e.set(o)})(t,n,o)}))(e,t,n,o,s,a)},editor:{getContent:t=>((e,t)=>U.from(e.getBody()).fold(N("tree"===t.format?new Df("body",11):""),(n=>zf(e,t,n))))(e,t),setContent:(t,n)=>((e,t,n)=>U.from(e.getBody()).map((o=>ov(t)?((e,t,n,o)=>{jh(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),n);const r=Hf({validate:!1},e.schema).serialize(n),s=Ar(wn(t))?r:Lt.trim(r);return rv(e,s,o.no_selection),{content:n,html:s}})(e,o,t,n):((e,t,n,o)=>{if(0===n.length||/^\s+$/.test(n)){const r='<br data-mce-bogus="1">';"TABLE"===t.nodeName?n="<tr><td>"+r+"</td></tr>":/^(UL|OL)$/.test(t.nodeName)&&(n="<li>"+r+"</li>");const s=Ol(e);return e.schema.isValidChild(t.nodeName.toLowerCase(),s.toLowerCase())?(n=r,n=e.dom.createHTML(s,Tl(e),n)):n||(n=r),rv(e,n,o.no_selection),{content:n,html:n}}{"raw"!==o.format&&(n=Hf({validate:!1},e.schema).serialize(e.parser.parse(n,{isRootContent:!0,insert:!0})));const r=Ar(wn(t))?n:Lt.trim(n);return rv(e,r,o.no_selection),{content:r,html:r}}})(e,o,t,n))).getOr({content:t,html:ov(n.content)?"":n.content}))(e,t,n),insertContent:(t,n)=>nv(e,t,n),addVisual:t=>((e,t)=>{const n=e.dom,o=_(t)?t:e.getBody();Y(n.select("table,a",o),(t=>{switch(t.nodeName){case"TABLE":const o=Tc(e),r=n.getAttrib(t,"border");r&&"0"!==r||!e.hasVisual?n.removeClass(t,o):n.addClass(t,o);break;case"A":if(!n.getAttrib(t,"href")){const o=n.getAttrib(t,"name")||t.id,r=Ac(e);o&&e.hasVisual?n.addClass(t,r):n.removeClass(t,r)}}})),e.dispatch("VisualAid",{element:t,hasVisual:e.hasVisual})})(e,t)},selection:{getContent:(t,n)=>((e,t,n={})=>{const o=((e,t)=>r(r({},e),{},{format:t,get:!0,selection:!0,getInner:!0}))(n,t);return Gy(e,o).fold(D,(t=>{const n=((e,t)=>{if("text"===t.format)return(e=>U.from(e.selection.getRng()).map((t=>{var n;const o=U.from(e.dom.getParent(t.commonAncestorContainer,e.dom.isBlock)),r=e.getBody(),s=(e=>e.map((e=>e.nodeName)).getOr("div").toLowerCase())(o),a=wn(t.cloneContents());Lf(a),Ff(a);const i=e.dom.add(r,s,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},a.dom),l=ux(i),c=Lr(null!==(n=i.textContent)&&void 0!==n?n:"");if(e.dom.remove(i),dx(c,0)||dx(c,c.length-1)){const e=o.getOr(r),t=ux(e),n=t.indexOf(l);return-1===n?l:(dx(t,n-1)?" ":"")+l+(dx(t,n+l.length)?" ":"")}return l})).getOr(""))(e);{const n=((e,t)=>{const n=e.selection.getRng(),o=e.dom.create("body"),r=e.selection.getSel(),s=Cf(e,Uu(r)),a=t.contextual?cx(wn(e.getBody()),s).dom:n.cloneContents();return a&&o.appendChild(a),e.selection.serializer.serialize(o,t)})(e,t);return"tree"===t.format?n:e.selection.isCollapsed()?"":n}})(e,t);return Ky(e,n,t)}))})(e,t,n)},autocompleter:{addDecoration:t=>Ef(e,t),removeDecoration:()=>((e,t)=>Of(t).each((t=>{const n=e.selection.getBookmark();_o(t),e.selection.moveToBookmark(n)})))(e,wn(e.getBody()))},raw:{getModel:()=>U.none()}}),_x=e=>Oe(e.plugins,"rtc"),kx=e=>e.rtcInstance?e.rtcInstance:Sx(e),Ex=e=>{const t=e.rtcInstance;if(t)return t;throw new Error("Failed to get RTC instance not yet initialized.")},Ox=e=>Ex(e).init.bindEvents(),Tx=e=>0===e.dom.length?(So(e),U.none()):U.some(e),Ax=(e,t,n,o)=>{e.bind((e=>((o?jg:zg)(e.dom,o?e.dom.length:0),t.filter(Yt).map((t=>((e,t,n,o)=>{const r=e.dom,s=t.dom,a=o?r.length:s.length;o?(Ug(r,s,!1,!o),n.setStart(s,a)):(Ug(s,r,!1,!o),n.setEnd(s,a))})(e,t,n,o)))))).orThunk((()=>{const e=((e,t)=>e.filter((e=>jm.isBookmarkNode(e.dom))).bind(t?In:Mn))(t,o).or(t).filter(Yt);return e.map((e=>((e,t)=>{Nn(e).each((n=>{const o=e.dom;t&&Rg(n,Ii(o,0))?zg(o,0):!t&&Ng(n,Ii(o,o.length))&&jg(o,o.length)}))})(e,o)))}))},Rx=(e,t,n)=>{if(Oe(e,t)){const o=Q(e[t],(e=>e!==n));0===o.length?delete e[t]:e[t]=o}},Nx=e=>!(!e||!e.ownerDocument)&&On(wn(e.ownerDocument),wn(e)),Dx=(e,t,n,o)=>{let s,a;const{selectorChangedWithUnbind:i}=((e,t)=>{let n,o;const r=(t,n)=>ne(n,(n=>e.is(n,t))),s=t=>e.getParents(t,void 0,e.getRoot());return{selectorChangedWithUnbind:(e,a)=>(n||(n={},o={},t.on("NodeChange",(e=>{const t=e.element,a=s(t),i={};be(n,((e,t)=>{r(t,a).each((n=>{o[t]||(Y(e,(e=>{e(!0,{node:n,selector:t,parents:a})})),o[t]=e),i[t]=e}))})),be(o,((e,n)=>{i[n]||(delete o[n],Y(e,(e=>{e(!1,{node:t,selector:n,parents:a})})))}))}))),n[e]||(n[e]=[]),n[e].push(a),r(e,s(t.selection.getStart())).each((()=>{o[e]=n[e]})),{unbind:()=>{Rx(n,e,a),Rx(o,e,a)}})}})(e,o),l=(e,t)=>((e,t,n={})=>{const o=((e,t)=>r(r({format:"html"},e),{},{set:!0,selection:!0,content:t}))(n,t);Yy(e,o).each((t=>{const n=((e,t)=>{if("raw"!==t.format){const n=e.selection.getRng(),o=e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock),s=o?{context:o.nodeName.toLowerCase()}:{},a=e.parser.parse(t.content,r(r({forced_root_block:!1},s),t));return Hf({validate:!1},e.schema).serialize(a)}return t.content})(e,t),o=e.selection.getRng();((e,t)=>{const n=U.from(t.firstChild).map(wn),o=U.from(t.lastChild).map(wn);e.deleteContents(),e.insertNode(t);const r=n.bind(Mn).filter(Yt).bind(Tx),s=o.bind(In).filter(Yt).bind(Tx);Ax(r,n,e,!0),Ax(s,o,e,!1),e.collapse(!1)})(o,o.createContextualFragment(n)),e.selection.setRng(o),qp(e,o),Xy(e,n,t)}))})(o,e,t),c=e=>{const t=u();t.collapse(!!e),m(t)},d=()=>t.getSelection?t.getSelection():t.document.selection,u=()=>{let n;const r=(e,t,n)=>{try{return t.compareBoundaryPoints(e,n)}catch(e){return-1}},i=t.document;if(_(o.bookmark)&&!hf(o)){const e=of(o);if(e.isSome())return e.map((e=>Cf(o,[e])[0])).getOr(i.createRange())}try{const e=d();e&&!$o(e.anchorNode)&&(n=e.rangeCount>0?e.getRangeAt(0):i.createRange(),n=Cf(o,[n])[0])}catch(e){}if(n||(n=i.createRange()),or(n.startContainer)&&n.collapsed){const t=e.getRoot();n.setStart(t,0),n.setEnd(t,0)}return s&&a&&(0===r(n.START_TO_START,n,s)&&0===r(n.END_TO_END,n,s)?n=a:(s=null,a=null)),n},m=(e,t)=>{if(!(e=>!!e&&Nx(e.startContainer)&&Nx(e.endContainer))(e))return;const n=d();if(e=o.dispatch("SetSelectionRange",{range:e,forward:t}).range,n){a=e;try{n.removeAllRanges(),n.addRange(e)}catch(e){}!1===t&&n.extend&&(n.collapse(e.endContainer,e.endOffset),n.extend(e.startContainer,e.startOffset)),s=n.rangeCount>0?n.getRangeAt(0):null}if(!e.collapsed&&e.startContainer===e.endContainer&&(null==n?void 0:n.setBaseAndExtent)&&e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()){const t=e.startContainer.childNodes[e.startOffset];t&&"IMG"===t.nodeName&&(n.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset),n.anchorNode===e.startContainer&&n.focusNode===e.endContainer||n.setBaseAndExtent(t,0,t,1))}o.dispatch("AfterSetSelectionRange",{range:e,forward:t})},p=()=>{const t=d(),n=null==t?void 0:t.anchorNode,o=null==t?void 0:t.focusNode;if(!t||!n||!o||$o(n)||$o(o))return!0;const r=e.createRng(),s=e.createRng();try{r.setStart(n,t.anchorOffset),r.collapse(!0),s.setStart(o,t.focusOffset),s.collapse(!0)}catch(e){return!0}return r.compareBoundaryPoints(r.START_TO_START,s)<=0},f={dom:e,win:t,serializer:n,editor:o,expand:(t={type:"word"})=>m(Ep(e).expand(u(),t)),collapse:c,setCursorLocation:(t,n)=>{const r=e.createRng();_(t)&&_(n)?(r.setStart(t,n),r.setEnd(t,n),m(r),c(!1)):(Ku(e,r,o.getBody(),!0),m(r))},getContent:e=>((e,t={})=>((e,t,n)=>Ex(e).selection.getContent(t,n))(e,t.format?t.format:"html",t))(o,e),setContent:l,getBookmark:(e,t)=>g.getBookmark(e,t),moveToBookmark:e=>g.moveToBookmark(e),select:(t,n)=>(((e,t,n)=>U.from(t).bind((t=>U.from(t.parentNode).map((o=>{const r=e.nodeIndex(t),s=e.createRng();return s.setStart(o,r),s.setEnd(o,r+1),n&&(Ku(e,s,t,!0),Ku(e,s,t,!1)),s})))))(e,t,n).each(m),t),isCollapsed:()=>{const e=u(),t=d();return!(!e||e.item)&&(e.compareEndPoints?0===e.compareEndPoints("StartToEnd",e):!t||e.collapsed)},isEditable:()=>{const t=u(),n=o.getBody().querySelectorAll('[data-mce-selected="1"]');return n.length>0?ae(n,(t=>e.isEditable(t.parentElement))):t.startContainer===t.endContainer?e.isEditable(t.startContainer):e.isEditable(t.startContainer)&&e.isEditable(t.endContainer)},isForward:p,setNode:t=>(l(e.getOuterHTML(t)),t),getNode:()=>((e,t)=>{if(!t)return e;let n=t.startContainer,o=t.endContainer;const r=t.startOffset,s=t.endOffset;let a=t.commonAncestorContainer;t.collapsed||(n===o&&s-r<2&&n.hasChildNodes()&&(a=n.childNodes[r]),Zo(n)&&Zo(o)&&(n=n.length===r?wf(n.nextSibling,!0):n.parentNode,o=0===s?wf(o.previousSibling,!1):o.parentNode,n&&n===o&&(a=n)));const i=Zo(a)?a.parentNode:a;return Vo(i)?i:e})(o.getBody(),u()),getSel:d,setRng:m,getRng:u,getStart:e=>yf(o.getBody(),u(),e),getEnd:e=>xf(o.getBody(),u(),e),getSelectedBlocks:(t,n)=>((e,t,n,o)=>{const r=[],s=e.getRoot(),a=e.getParent(n||yf(s,t,t.collapsed),e.isBlock),i=e.getParent(o||xf(s,t,t.collapsed),e.isBlock);if(a&&a!==s&&r.push(a),a&&i&&a!==i){let t;const n=new Uo(a,s);for(;(t=n.next())&&t!==i;)e.isBlock(t)&&r.push(t)}return i&&a!==i&&i!==s&&r.push(i),r})(e,u(),t,n),normalize:()=>{const t=u(),n=d();if(!(Uu(n).length>1)&&Yu(o)){const n=Sp(e,t);return n.each((e=>{m(e,p())})),n.getOr(t)}return t},selectorChanged:(e,t)=>(i(e,t),f),selectorChangedWithUnbind:i,getScrollContainer:()=>{let t,n=e.getRoot();for(;n&&"BODY"!==n.nodeName;){if(n.scrollHeight>n.clientHeight){t=n;break}n=n.parentNode}return t},scrollIntoView:(e,t)=>{_(e)?((e,t,n)=>{(e.inline?$p:Wp)(e,t,n)})(o,e,t):qp(o,u(),t)},placeCaretAt:(e,t)=>m(gp(e,t,o.getDoc())),getBoundingClientRect:()=>{const e=u();return e.collapsed?Ii.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},destroy:()=>{t=s=a=null,h.destroy()}},g=jm(f),h=Zm(f,o);return f.bookmarkManager=g,f.controlSelection=h,f},Bx=(e,t,n)=>{-1===Lt.inArray(t,n)&&(e.addAttributeFilter(n,((e,t)=>{let n=e.length;for(;n--;)e[n].attr(t,null)})),t.push(n))},Mx=(e,t)=>{const n=["data-mce-selected"],o=t&&t.dom?t.dom:Ra.DOM,s=t&&t.schema?t.schema:da(e);e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs=!("remove_trailing_brs"in e)||e.remove_trailing_brs;const a=Wy(e,s);return((e,t,n)=>{e.addAttributeFilter("data-mce-tabindex",((e,t)=>{let n=e.length;for(;n--;){const o=e[n];o.attr("tabindex",o.attr("data-mce-tabindex")),o.attr(t,null)}})),e.addAttributeFilter("src,href,style",((e,o)=>{const r="data-mce-"+o,s=t.url_converter,a=t.url_converter_scope;let i=e.length;for(;i--;){const t=e[i];let l=t.attr(r);void 0!==l?(t.attr(o,l.length>0?l:null),t.attr(r,null)):(l=t.attr(o),"style"===o?l=n.serializeStyle(n.parseStyle(l),t.name):s&&(l=s.call(a,l,o,t.name)),t.attr(o,l.length>0?l:null))}})),e.addAttributeFilter("class",(e=>{let t=e.length;for(;t--;){const n=e[t];let o=n.attr("class");o&&(o=o.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),n.attr("class",o.length>0?o:null))}})),e.addAttributeFilter("data-mce-type",((e,t,n)=>{let o=e.length;for(;o--;){const t=e[o];if("bookmark"===t.attr("data-mce-type")&&!n.cleanup){const e=U.from(t.firstChild).exists((e=>{var t;return!Pr(null!==(t=e.value)&&void 0!==t?t:"")}));e?t.unwrap():t.remove()}}})),e.addNodeFilter("noscript",(e=>{var t;let n=e.length;for(;n--;){const o=e[n].firstChild;o&&(o.value=Js.decode(null!==(t=o.value)&&void 0!==t?t:""))}})),e.addNodeFilter("script,style",((e,n)=>{var o;const r=e=>e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let s=e.length;for(;s--;){const a=e[s],i=a.firstChild,l=null!==(o=null==i?void 0:i.value)&&void 0!==o?o:"";if("script"===n){const e=a.attr("type");e&&a.attr("type","mce-no/type"===e?null:e.replace(/^mce\-/,"")),"xhtml"===t.element_format&&i&&l.length>0&&(i.value="// <![CDATA[\n"+r(l)+"\n// ]]>")}else"xhtml"===t.element_format&&i&&l.length>0&&(i.value="\x3c!--\n"+r(l)+"\n--\x3e")}})),e.addNodeFilter("#comment",(e=>{let o=e.length;for(;o--;){const r=e[o],s=r.value;t.preserve_cdata&&0===(null==s?void 0:s.indexOf("[CDATA["))?(r.name="#cdata",r.type=4,r.value=n.decode(s.replace(/^\[CDATA\[|\]\]$/g,""))):0===(null==s?void 0:s.indexOf("mce:protected "))&&(r.name="#text",r.type=3,r.raw=!0,r.value=unescape(s).substr(14))}})),e.addNodeFilter("xml:namespace,input",((e,t)=>{let n=e.length;for(;n--;){const o=e[n];7===o.type?o.remove():1===o.type&&("input"!==t||o.attr("type")||o.attr("type","text"))}})),e.addAttributeFilter("data-mce-type",(t=>{Y(t,(t=>{"format-caret"===t.attr("data-mce-type")&&(t.isEmpty(e.schema.getNonEmptyElements())?t.remove():t.unwrap())}))})),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",((e,t)=>{let n=e.length;for(;n--;)e[n].attr(t,null)}))})(a,e,o),{schema:s,addNodeFilter:a.addNodeFilter,addAttributeFilter:a.addAttributeFilter,serialize:(n,i={})=>{const l=r({format:"html"},i),c=((e,t,n)=>((e,t)=>_(e)&&e.hasEventListeners("PreProcess")&&!t.no_events)(e,n)?((e,t,n)=>{let o;const s=e.dom;let a=t.cloneNode(!0);const i=document.implementation;if(i.createHTMLDocument){const e=i.createHTMLDocument("");Lt.each("BODY"===a.nodeName?a.childNodes:[a],(t=>{e.body.appendChild(e.importNode(t,!0))})),a="BODY"!==a.nodeName?e.body.firstChild:e.body,o=s.doc,s.doc=e}return((e,t)=>{e.dispatch("PreProcess",t)})(e,r(r({},n),{},{node:a})),o&&(s.doc=o),a})(e,t,n):t)(t,n,l),d=((e,t,n)=>{const o=Lr(n.getInner?t.innerHTML:e.getOuterHTML(t));return n.selection||Ar(wn(t))?o:Lt.trim(o)})(o,c,l),u=((e,t,n)=>{const o=n.selection?r({forced_root_block:!1},n):n,s=e.parse(t,o);return(e=>{const t=e=>"br"===(null==e?void 0:e.name),n=e.lastChild;if(t(n)){const e=n.prev;t(e)&&(n.remove(),e.remove())}})(s),s})(a,d,l);return"tree"===l.format?u:((e,t,n,o,s)=>{const a=((e,t,n)=>Hf(e,t).serialize(n))(t,n,o);return((e,t,n)=>{if(!t.no_events&&e){const o=((e,t)=>e.dispatch("PostProcess",t))(e,r(r({},t),{},{content:n}));return o.content}return n})(e,s,a)})(t,e,s,u,l)},addRules:s.addValidElements,setRules:s.setValidElements,addTempAttr:M(Bx,a,n),getTempAttrs:N(n),getNodeFilters:a.getNodeFilters,getAttributeFilters:a.getAttributeFilters,removeNodeFilter:a.removeNodeFilter,removeAttributeFilter:a.removeAttributeFilter}},Ix=(e,t)=>{const n=Mx(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},Px=(e,t,n={})=>{const o=((e,t)=>r(r({format:"html"},e),{},{set:!0,content:t}))(n,t);return Yy(e,o).map((t=>{const n=((e,t,n)=>kx(e).editor.setContent(t,n))(e,t.content,t);return Xy(e,n.html,t),n.content})).getOr(t)},Lx="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),Fx="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),zx="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),jx=[{name:"template",replacedWith:"Advanced Template"}],Ux=(e,t)=>{const n=Q(t,(t=>Oe(e,t)));return de(n)},Hx=e=>{const t=Ux(e,Lx),n=e.forced_root_block;return!1!==n&&""!==n||t.push("forced_root_block (false only)"),de(t)},$x=e=>Ux(e,Fx),Vx=(e,t)=>{const n=Lt.makeMap(e.plugins," "),o=Q(t,(e=>Oe(n,e)));return de(o)},Wx=e=>Vx(e,zx),qx=e=>Vx(e,jx.map((e=>e.name))),Gx=e=>ne(jx,(t=>t.name===e)).fold((()=>e),(t=>`${e}, replaced by ${t.replacedWith}`)),Kx=Ra.DOM,Yx=e=>U.from(e).each((e=>e.destroy())),Xx=(()=>{const e={};return{add:(t,n)=>{e[t]=n},get:t=>e[t]?e[t]:{icons:{}},has:t=>Oe(e,t)}})(),Jx=Fa.ModelManager,Qx=(e,t)=>t.dom[e],Zx=(e,t)=>parseInt(uo(t,e),10),ew=M(Qx,"clientWidth"),tw=M(Qx,"clientHeight"),nw=M(Zx,"margin-top"),ow=M(Zx,"margin-left"),rw=e=>{const t=[],n=()=>{const t=e.theme;return t&&t.getNotificationManagerImpl?t.getNotificationManagerImpl():(()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}})()},o=()=>U.from(t[0]),s=()=>{Y(t,(e=>{e.reposition()}))},a=e=>{oe(t,(t=>t===e)).each((e=>{t.splice(e,1)}))},i=(i,l=!0)=>e.removed||!(e=>{return(t=e.inline?e.getBody():e.getContentAreaContainer(),U.from(t).map(wn)).map(Jn).getOr(!1);var t})(e)?{}:(l&&e.dispatch("BeforeOpenNotification",{notification:i}),ne(t,(e=>{return t=n().getArgs(e),o=i,!(t.type!==o.type||t.text!==o.text||t.progressBar||t.timeout||o.progressBar||o.timeout);var t,o})).getOrThunk((()=>{e.editorManager.setActive(e);const l=n().open(i,(()=>{a(l),s(),o().fold((()=>e.focus()),(e=>Gp(wn(e.getEl()))))}));return(e=>{t.push(e)})(l),s(),e.dispatch("OpenNotification",{notification:r({},l)}),l}))),l=N(t);return(e=>{e.on("SkinLoaded",(()=>{const t=rc(e);t&&i({text:t,type:"warning",timeout:0},!1),s()})),e.on("show ResizeEditor ResizeWindow NodeChange",(()=>{requestAnimationFrame(s)})),e.on("remove",(()=>{Y(t.slice(),(e=>{n().close(e)}))}))})(e),{open:i,close:()=>{o().each((e=>{n().close(e),a(e),s()}))},getNotifications:l}},sw=Fa.PluginManager,aw=Fa.ThemeManager,iw=e=>{let t=[];const n=()=>{const t=e.theme;return t&&t.getWindowManagerImpl?t.getWindowManagerImpl():(()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}})()},o=(e,t)=>(...n)=>t?t.apply(e,n):void 0,r=n=>{(t=>{e.dispatch("CloseWindow",{dialog:t})})(n),t=Q(t,(e=>e!==n)),0===t.length&&e.focus()},s=n=>{e.editorManager.setActive(e),nf(e),e.ui.show();const o=n();return(n=>{t.push(n),(t=>{e.dispatch("OpenWindow",{dialog:t})})(n)})(o),o};return e.on("remove",(()=>{Y(t,(e=>{n().close(e)}))})),{open:(e,t)=>s((()=>n().open(e,t,r))),openUrl:e=>s((()=>n().openUrl(e,r))),alert:(e,t,r)=>{const s=n();s.alert(e,o(r||s,t))},confirm:(e,t,r)=>{const s=n();s.confirm(e,o(r||s,t))},close:()=>{U.from(t[t.length-1]).each((e=>{n().close(e),r(e)}))}}},lw=(e,t)=>{e.notificationManager.open({type:"error",text:t})},cw=(e,t)=>{e._skinLoaded?lw(e,t):e.on("SkinLoaded",(()=>{lw(e,t)}))},dw=(e,t,n)=>{Hm(e,t,{message:n}),console.error(n)},uw=(e,t,n)=>n?`Failed to load ${e}: ${n} from url ${t}`:`Failed to load ${e} url: ${t}`,mw=(e,...t)=>{const n=window.console;n&&(n.error?n.error(e,...t):n.log(e,...t))},pw=(e,t)=>{const n=e.editorManager.baseURL+"/skins/content",o=`content${e.editorManager.suffix}.css`;return K(t,(t=>(e=>/^[a-z0-9\-]+$/i.test(e))(t)&&!e.inline?`${n}/${t}/${o}`:e.documentBaseURI.toAbsolute(t)))},fw=(e,t)=>{const n={};return{findAll:(o,r=j)=>{const s=Q((e=>e?fe(e.getElementsByTagName("img")):[])(o),(t=>{const n=t.src;return!t.hasAttribute("data-mce-bogus")&&!t.hasAttribute("data-mce-placeholder")&&!(!n||n===Bt.transparentSrc)&&(qe(n,"blob:")?!e.isUploaded(n)&&r(t):!!qe(n,"data:")&&r(t))})),a=K(s,(e=>{const o=e.src;if(Oe(n,o))return n[o].then((t=>h(t)?t:{image:e,blobInfo:t.blobInfo}));{const r=((e,t)=>{const n=()=>Promise.reject("Invalid data URI");if(qe(t,"blob:")){const s=e.getByUri(t);return _(s)?Promise.resolve(s):(o=t,qe(o,"blob:")?(e=>fetch(e).then((e=>e.ok?e.blob():Promise.reject())).catch((()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"}))))(o):qe(o,"data:")?(r=o,new Promise(((e,t)=>{yb(r).bind((({type:e,data:t,base64Encoded:n})=>xb(e,t,n))).fold((()=>t("Invalid data URI")),e)}))):Promise.reject("Unknown URI format")).then((t=>wb(t).then((o=>Sb(o,!1,(n=>U.some(_b(e,t,n)))).getOrThunk(n)))))}var o,r;return qe(t,"data:")?kb(e,t).fold(n,(e=>Promise.resolve(e))):Promise.reject("Unknown image data format")})(t,o).then((t=>(delete n[o],{image:e,blobInfo:t}))).catch((e=>(delete n[o],e)));return n[o]=r,r}}));return Promise.all(a)}}},gw=()=>{let e={};const t=(e,t)=>({status:e,resultUri:t}),n=t=>t in e;return{hasBlobUri:n,getResultUri:t=>{const n=e[t];return n?n.resultUri:null},isPending:t=>!!n(t)&&1===e[t].status,isUploaded:t=>!!n(t)&&2===e[t].status,markPending:n=>{e[n]=t(1,null)},markUploaded:(n,o)=>{e[n]=t(2,o)},removeFailed:t=>{delete e[t]},destroy:()=>{e={}}}};let hw=0;const vw=(e,t)=>{const n={},o=(e,n)=>new Promise(((o,r)=>{const s=new XMLHttpRequest;s.open("POST",t.url),s.withCredentials=t.credentials,s.upload.onprogress=e=>{n(e.loaded/e.total*100)},s.onerror=()=>{r("Image upload failed due to a XHR Transport error. Code: "+s.status)},s.onload=()=>{if(s.status<200||s.status>=300)return void r("HTTP Error: "+s.status);const e=JSON.parse(s.responseText);var n,a;e&&h(e.location)?o((n=t.basePath,a=e.location,n?n.replace(/\/$/,"")+"/"+a.replace(/^\//,""):a)):r("Invalid JSON: "+s.responseText)};const a=new FormData;a.append("file",e.blob(),e.filename()),s.send(a)})),r=k(t.handler)?t.handler:o,s=(e,t)=>({url:t,blobInfo:e,status:!0}),a=(e,t)=>({url:"",blobInfo:e,status:!1,error:t}),i=(e,t)=>{Lt.each(n[e],(e=>{e(t)})),delete n[e]};return{upload:(l,c)=>t.url||r!==o?((t,o)=>(t=Lt.grep(t,(t=>!e.isUploaded(t.blobUri()))),Promise.all(Lt.map(t,(t=>e.isPending(t.blobUri())?(e=>{const t=e.blobUri();return new Promise((e=>{n[t]=n[t]||[],n[t].push(e)}))})(t):((t,n,o)=>(e.markPending(t.blobUri()),new Promise((r=>{let l,c;try{const d=()=>{l&&(l.close(),c=T)},u=n=>{d(),e.markUploaded(t.blobUri(),n),i(t.blobUri(),s(t,n)),r(s(t,n))},m=n=>{d(),e.removeFailed(t.blobUri()),i(t.blobUri(),a(t,n)),r(a(t,n))};c=e=>{e<0||e>100||U.from(l).orThunk((()=>U.from(o).map(L))).each((t=>{l=t,t.progressBar.value(e)}))},n(t,c).then(u,(e=>{m(h(e)?{message:e}:e)}))}catch(e){r(a(t,e))}}))))(t,r,o))))))(l,c):new Promise((e=>{e([])}))}},bw=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),yw=(e,t)=>vw(t,{url:zl(e),basePath:jl(e),credentials:Ul(e),handler:Hl(e)}),xw=e=>{const t=(()=>{let e=[];const t=e=>{if(!e.blob||!e.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const t=e.id||"blobid"+hw+++(()=>{const e=()=>Math.round(4294967295*Math.random()).toString(36);return"s"+(new Date).getTime().toString(36)+e()+e()+e()})(),n=e.name||t,o=e.blob;var r;return{id:N(t),name:N(n),filename:N(e.filename||n+"."+(r=o.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[r.toLowerCase()]||"dat")),blob:N(o),base64:N(e.base64),blobUri:N(e.blobUri||URL.createObjectURL(o)),uri:N(e.uri)}},n=t=>ne(e,t).getOrUndefined(),o=e=>n((t=>t.id()===e));return{create:(e,n,o,r,s)=>{if(h(e))return t({id:e,name:r,filename:s,blob:n,base64:o});if(v(e))return t(e);throw new Error("Unknown input type")},add:t=>{o(t.id())||e.push(t)},get:o,getByUri:e=>n((t=>t.blobUri()===e)),getByData:(e,t)=>n((n=>n.base64()===e&&n.blob().type===t)),findFirst:n,removeByUri:t=>{e=Q(e,(e=>e.blobUri()!==t||(URL.revokeObjectURL(e.blobUri()),!1)))},destroy:()=>{Y(e,(e=>{URL.revokeObjectURL(e.blobUri())})),e=[]}}})();let n,o;const r=gw(),s=[],a=t=>n=>e.selection?t(n):[],i=(e,t,n)=>{let o=0;do{o=e.indexOf(t,o),-1!==o&&(e=e.substring(0,o)+n+e.substr(o+t.length),o+=n.length-t.length+1)}while(-1!==o);return e},l=(e,t,n)=>{const o=`src="${n}"${n===Bt.transparentSrc?' data-mce-placeholder="1"':""}`;return e=i(e,`src="${t}"`,o),i(e,'data-mce-src="'+t+'"','data-mce-src="'+n+'"')},c=(t,n)=>{Y(e.undoManager.data,(e=>{"fragmented"===e.type?e.fragments=K(e.fragments,(e=>l(e,t,n))):e.content=l(e.content,t,n)}))},d=()=>(n||(n=yw(e,r)),p().then(a((o=>{const r=K(o,(e=>e.blobInfo));return n.upload(r,bw(e)).then(a((n=>{const r=[];let s=!1;const a=K(n,((n,a)=>{const{blobInfo:i,image:l}=o[a];let d=!1;return n.status&&Pl(e)?(n.url&&!We(l.src,n.url)&&(s=!0),t.removeByUri(l.src),_x(e)||((t,n)=>{const o=e.convertURL(n,"src");var r;c(t.src,n),tn(wn(t),{src:Il(e)?(r=n,r+(-1===r.indexOf("?")?"?":"&")+(new Date).getTime()):n,"data-mce-src":o})})(l,n.url)):n.error&&(n.error.remove&&(c(l.src,Bt.transparentSrc),r.push(l),d=!0),((e,t)=>{cw(e,La.translate(["Failed to upload image: {0}",t]))})(e,n.error.message)),{element:l,status:n.status,uploadUri:n.url,blobInfo:i,removed:d}}));return r.length>0&&!_x(e)?e.undoManager.transact((()=>{Y(r,(n=>{e.dom.remove(n),t.removeByUri(n.src)}))})):s&&e.undoManager.dispatchChange(),a})))})))),u=()=>Ml(e)?d():Promise.resolve([]),m=e=>ae(s,(t=>t(e))),p=()=>(o||(o=fw(r,t)),o.findAll(e.getBody(),m).then(a((t=>{const n=Q(t,(t=>h(t)?(cw(e,t),!1):"blob"!==t.uriType));return _x(e)||Y(n,(e=>{c(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute("data-mce-src")})),n})))),f=n=>n.replace(/src="(blob:[^"]+)"/g,((n,o)=>{const s=r.getResultUri(o);if(s)return'src="'+s+'"';let a=t.getByUri(o);return a||(a=ee(e.editorManager.get(),((e,t)=>e||t.editorUpload&&t.editorUpload.blobCache.getByUri(o)),void 0)),a?'src="data:'+a.blob().type+";base64,"+a.base64()+'"':n}));return e.on("SetContent",(()=>{Ml(e)?u():p()})),e.on("RawSaveContent",(e=>{e.content=f(e.content)})),e.on("GetContent",(e=>{e.source_view||"raw"===e.format||"tree"===e.format||(e.content=f(e.content))})),e.on("PostRender",(()=>{e.parser.addNodeFilter("img",(e=>{Y(e,(e=>{const n=e.attr("src");if(!n||t.getByUri(n))return;const o=r.getResultUri(n);o&&e.attr("src",o)}))}))})),{blobCache:t,addFilter:e=>{s.push(e)},uploadImages:d,uploadImagesAuto:u,scanForImages:p,destroy:()=>{t.destroy(),r.destroy(),o=n=null}}},ww={remove_similar:!0,inherit:!1},Cw=r({selector:"td,th"},ww),Sw={tablecellbackgroundcolor:r({styles:{backgroundColor:"%value"}},Cw),tablecellverticalalign:r({styles:{"vertical-align":"%value"}},Cw),tablecellbordercolor:r({styles:{borderColor:"%value"}},Cw),tablecellclass:r({classes:["%value"]},Cw),tableclass:r({selector:"table",classes:["%value"]},ww),tablecellborderstyle:r({styles:{borderStyle:"%value"}},Cw),tablecellborderwidth:r({styles:{borderWidth:"%value"}},Cw)},_w=N(Sw),kw=Lt.each,Ew=Ra.DOM,Ow=e=>_(e)&&v(e),Tw=(e,t)=>{const n=t&&t.schema||da({}),o=e=>{const t=h(e)?{name:e,classes:[],attrs:{}}:e,n=Ew.create(t.name);return((e,t)=>{t.classes.length>0&&Ew.addClass(e,t.classes.join(" ")),Ew.setAttribs(e,t.attrs)})(n,t),n},r=(e,t,s)=>{let a;const i=t[0],l=Ow(i)?i.name:void 0,c=((e,t)=>{const o=n.getElementRule(e.nodeName.toLowerCase()),r=null==o?void 0:o.parentsRequired;return!(!r||!r.length)&&(t&&q(r,t)?t:r[0])})(e,l);if(c)l===c?(a=i,t=t.slice(1)):a=c;else if(i)a=i,t=t.slice(1);else if(!s)return e;const d=a?o(a):Ew.create("div");d.appendChild(e),s&&Lt.each(s,(t=>{const n=o(t);d.insertBefore(n,e)}));const u=Ow(a)?a.siblings:void 0;return r(d,t,u)},s=Ew.create("div");if(e.length>0){const t=e[0],n=o(t),a=Ow(t)?t.siblings:void 0;s.appendChild(r(n,e.slice(1),a))}return s},Aw=e=>{let t="div";const n={name:t,classes:[],attrs:{},selector:e=Lt.trim(e)};return"*"!==e&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,((e,t,o,r,s)=>{switch(t){case"#":n.attrs.id=o;break;case".":n.classes.push(o);break;case":":-1!==Lt.inArray("checked disabled enabled read-only required".split(" "),o)&&(n.attrs[o]=o)}if("["===r){const e=s.match(/([\w\-]+)(?:\=\"([^\"]+))?/);e&&(n.attrs[e[1]]=e[2])}return""}))),n.name=t||"div",n},Rw=(e,t)=>{let n="",o=uc(e);if(""===o)return"";const r=e=>h(e)?e.replace(/%(\w+)/g,""):"",s=(t,n)=>Ew.getStyle(null!=n?n:e.getBody(),t,!0);if(h(t)){const n=e.formatter.get(t);if(!n)return"";t=n[0]}if("preview"in t){const e=t.preview;if(!1===e)return"";o=e||o}let a,i=t.block||t.inline||"span";const l=(c=t.selector,h(c)?(c=(c=c.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Lt.map(c.split(/(?:>|\s+(?![^\[\]]+\]))/),(e=>{const t=Lt.map(e.split(/(?:~\+|~|\+)/),Aw),n=t.pop();return t.length&&(n.siblings=t),n})).reverse()):[]);var c;l.length>0?(l[0].name||(l[0].name=i),i=t.selector,a=Tw(l,e)):a=Tw([i],e);const d=Ew.select(i,a)[0]||a.firstChild;kw(t.styles,((e,t)=>{const n=r(e);n&&Ew.setStyle(d,t,n)})),kw(t.attributes,((e,t)=>{const n=r(e);n&&Ew.setAttrib(d,t,n)})),kw(t.classes,(e=>{const t=r(e);Ew.hasClass(d,t)||Ew.addClass(d,t)})),e.dispatch("PreviewFormats"),Ew.setStyles(a,{position:"absolute",left:-65535}),e.getBody().appendChild(a);const u=s("fontSize"),m=/px$/.test(u)?parseInt(u,10):0;return kw(o.split(" "),(e=>{let t=s(e,d);if(!("background-color"===e&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(t)&&(t=s(e),"#ffffff"===ju(t).toLowerCase())||"color"===e&&"#000000"===ju(t).toLowerCase())){if("font-size"===e&&/em|%$/.test(t)){if(0===m)return;t=parseFloat(t)/(/%$/.test(t)?100:1)*m+"px"}"border"===e&&t&&(n+="padding:0 2px;"),n+=e+":"+t+";"}})),e.dispatch("AfterPreviewFormats"),Ew.remove(a),n},Nw=e=>{const t=(e=>{const t={},n=(e,o)=>{e&&(h(e)?(y(o)||(o=[o]),Y(o,(e=>{C(e.deep)&&(e.deep=!hm(e)),C(e.split)&&(e.split=!hm(e)||vm(e)),C(e.remove)&&hm(e)&&!vm(e)&&(e.remove="none"),hm(e)&&vm(e)&&(e.mixed=!0,e.block_expand=!0),h(e.classes)&&(e.classes=e.classes.split(/\s+/))})),t[e]=o):be(e,((e,t)=>{n(t,e)})))};return n((e=>{const t=e.dom,n=e.schema.type,o={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:e=>{t.setStyle(e,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:e=>{t.setStyle(e,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const e={inline:"span",styles:{textDecoration:"line-through"},exact:!0},t={inline:"strike",remove:"all",preserve_attributes:["class","style"]},o={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==n?[o,e,t]:[e,o,t]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(e,t,n)=>Vo(e)&&e.hasAttribute("href"),onformat:(e,n,o)=>{Lt.each(o,((n,o)=>{t.setAttrib(e,o,n)}))}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":e=>{var t;return null!==(t=null==e?void 0:e.customValue)&&void 0!==t?t:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Lt.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),(e=>{o[e]={block:e,remove:"all"}})),o})(e)),n(_w()),n(dc(e)),{get:e=>_(e)?t[e]:t,has:e=>Oe(t,e),register:n,unregister:e=>(e&&t[e]&&delete t[e],t)}})(e),n=Ba({});return(e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])})(e),(e=>{e.on("mouseup keydown",(t=>{((e,t)=>{const n=e.selection,o=e.getBody();xv(e,null,!1),8!==t&&46!==t||!n.isCollapsed()||n.getStart().innerHTML!==gv||xv(e,bu(o,n.getStart())),37!==t&&39!==t||xv(e,bu(o,n.getStart()))})(e,t.keyCode)}))})(e),_x(e)||((e,t)=>{e.set({}),t.on("NodeChange",(n=>{gb(t,n.element,e.get())})),t.on("FormatApply FormatRemove",(n=>{const o=U.from(n.node).map((e=>Qu(e)?e:e.startContainer)).bind((e=>Vo(e)?U.some(e):U.from(e.parentElement))).getOrThunk((()=>mb(t)));gb(t,o,e.get())}))})(n,e),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:(t,n,o)=>{((e,t,n,o)=>{Ex(e).formatter.apply(t,n,o)})(e,t,n,o)},remove:(t,n,o,r)=>{((e,t,n,o,r)=>{Ex(e).formatter.remove(t,n,o,r)})(e,t,n,o,r)},toggle:(t,n,o)=>{((e,t,n,o)=>{Ex(e).formatter.toggle(t,n,o)})(e,t,n,o)},match:(t,n,o,r)=>((e,t,n,o,r)=>Ex(e).formatter.match(t,n,o,r))(e,t,n,o,r),closest:t=>((e,t)=>Ex(e).formatter.closest(t))(e,t),matchAll:(t,n)=>((e,t,n)=>Ex(e).formatter.matchAll(t,n))(e,t,n),matchNode:(t,n,o,r)=>((e,t,n,o,r)=>Ex(e).formatter.matchNode(t,n,o,r))(e,t,n,o,r),canApply:t=>((e,t)=>Ex(e).formatter.canApply(t))(e,t),formatChanged:(t,o,r,s)=>((e,t,n,o,r,s)=>Ex(e).formatter.formatChanged(t,n,o,r,s))(e,n,t,o,r,s),getCssText:M(Rw,e)}},Dw=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},Bw=e=>{const t=ja(),n=Ba(0),o=Ba(0),r={data:[],typing:!1,beforeChange:()=>{((e,t,n)=>{Ex(e).undoManager.beforeChange(t,n)})(e,n,t)},add:(s,a)=>((e,t,n,o,r,s,a)=>Ex(e).undoManager.add(t,n,o,r,s,a))(e,r,o,n,t,s,a),dispatchChange:()=>{e.setDirty(!0);const t=gx(e);t.bookmark=nl(e.selection),e.dispatch("change",{level:t,lastLevel:ue(r.data,o.get()).getOrUndefined()})},undo:()=>((e,t,n,o)=>Ex(e).undoManager.undo(t,n,o))(e,r,n,o),redo:()=>((e,t,n)=>Ex(e).undoManager.redo(t,n))(e,o,r.data),clear:()=>{((e,t,n)=>{Ex(e).undoManager.clear(t,n)})(e,r,o)},reset:()=>{((e,t)=>{Ex(e).undoManager.reset(t)})(e,r)},hasUndo:()=>((e,t,n)=>Ex(e).undoManager.hasUndo(t,n))(e,r,o),hasRedo:()=>((e,t,n)=>Ex(e).undoManager.hasRedo(t,n))(e,r,o),transact:t=>((e,t,n,o)=>Ex(e).undoManager.transact(t,n,o))(e,r,n,t),ignore:t=>{((e,t,n)=>{Ex(e).undoManager.ignore(t,n)})(e,n,t)},extra:(t,n)=>{((e,t,n,o,r)=>{Ex(e).undoManager.extra(t,n,o,r)})(e,r,o,t,n)}};return _x(e)||((e,t,n)=>{const o=Ba(!1),r=e=>{wx(t,!1,n),t.add({},e)};e.on("init",(()=>{t.add()})),e.on("BeforeExecCommand",(e=>{const o=e.command;Dw(o)||(Cx(t,n),t.beforeChange())})),e.on("ExecCommand",(e=>{const t=e.command;Dw(t)||r(e)})),e.on("ObjectResizeStart cut",(()=>{t.beforeChange()})),e.on("SaveContent ObjectResized blur",r),e.on("dragend",r),e.on("keyup",(n=>{const s=n.keyCode;n.isDefaultPrevented()||((s>=33&&s<=36||s>=37&&s<=40||45===s||n.ctrlKey)&&(r(),e.nodeChanged()),46!==s&&8!==s||e.nodeChanged(),o.get()&&t.typing&&!yx(gx(e),t.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),o.set(!1),e.nodeChanged()))})),e.on("keydown",(e=>{const s=e.keyCode;if(e.isDefaultPrevented())return;if(s>=33&&s<=36||s>=37&&s<=40||45===s)return void(t.typing&&r(e));const a=e.ctrlKey&&!e.altKey||e.metaKey;!(s<16||s>20)||224===s||91===s||t.typing||a||(t.beforeChange(),wx(t,!0,n),t.add({},e),o.set(!0))})),e.on("mousedown",(e=>{t.typing&&r(e)})),e.on("input",(e=>{var t;e.inputType&&("insertReplacementText"===e.inputType||"insertText"===(t=e).inputType&&null===t.data||(e=>"insertFromPaste"===e.inputType||"insertFromDrop"===e.inputType)(e))&&r(e)})),e.on("AddUndo Undo Redo ClearUndos",(t=>{t.isDefaultPrevented()||e.nodeChanged()}))})(e,r,n),(e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")})(e),r},Mw=[9,27,Km.HOME,Km.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,Km.DOWN,Km.UP,Km.LEFT,Km.RIGHT].concat(Bt.browser.isFirefox()?[224]:[]),Iw="data-mce-placeholder",Pw=e=>"keydown"===e.type||"keyup"===e.type,Lw=e=>{const t=e.keyCode;return t===Km.BACKSPACE||t===Km.DELETE},Fw=(e,t)=>({from:e,to:t}),zw=(e,t)=>{const n=wn(e),o=wn(t.container());return sh(n,o).map((e=>((e,t)=>({block:e,position:t}))(e,t)))},jw=(e,t)=>eo(t,(e=>Tr(e)||ir(e.dom)),(t=>En(t,e))).filter(Kt).getOr(e),Uw=e=>{const t=(e=>{const t=Fn(e);return oe(t,wr).fold(N(t),(e=>t.slice(0,e)))})(e);return Y(t,So),t},Hw=(e,t)=>{const n=cg(t,e);return ne(n.reverse(),(e=>gs(e))).each(So)},$w=(e,t,n,o)=>{if(gs(n))return Br(n),fu(n.dom);0===Q(Pn(o),(e=>!gs(e))).length&&gs(t)&&ho(o,yn("br"));const r=pu(n.dom,Ii.before(o.dom));return Y(Uw(t),(e=>{ho(o,e)})),Hw(e,t),r},Vw=(e,t,n)=>{if(gs(n)){if(gs(t)){const e=e=>{const t=(e,n)=>jn(e).fold((()=>n),(e=>Cr(e)?t(e,n.concat(oi(e))):n));return t(e,[])},o=Z(e(n),((e,t)=>(xo(e,t),t)),Dr());Co(t),yo(t,o)}return So(n),fu(t.dom)}const o=gu(n.dom);return Y(Uw(t),(e=>{yo(n,e)})),Hw(e,t),o},Ww=(e,t)=>{uu(e,t.dom).bind((e=>U.from(e.getNode()))).map(wn).filter(Sr).each(So)},qw=(e,t,n)=>(Ww(!0,t),Ww(!1,n),((e,t)=>On(t,e)?((e,t)=>{const n=cg(t,e);return U.from(n[n.length-1])})(t,e):U.none())(t,n).fold(M(Vw,e,t,n),M($w,e,t,n))),Gw=(e,t,n,o)=>t?qw(e,o,n):qw(e,n,o),Kw=(e,t)=>{const n=wn(e.getBody()),o=((e,t,n)=>n.collapsed?((e,t,n)=>{const o=zw(e,Ii.fromRangeStart(n)),r=o.bind((n=>lu(t,e,n.position).bind((n=>zw(e,n).map((n=>((e,t,n)=>sr(n.position.getNode())&&!gs(n.block)?uu(!1,n.block.dom).bind((o=>o.isEqual(n.position)?lu(t,e,o).bind((t=>zw(e,t))):U.some(n))).getOr(n):n)(e,t,n)))))));return zt(o,r,Fw).filter((t=>(e=>!En(e.from.block,e.to.block))(t)&&((e,t)=>{const n=wn(e);return En(jw(n,t.from.block),jw(n,t.to.block))})(e,t)&&(e=>!1===lr(e.from.block.dom)&&!1===lr(e.to.block.dom))(t)&&(e=>{const t=e=>_r(e)||_s(e.dom);return t(e.from.block)&&t(e.to.block)})(t)))})(e,t,n):U.none())(n.dom,t,e.selection.getRng()).map((o=>()=>{Gw(n,t,o.from.block,o.to.block).each((t=>{e.selection.setRng(t.toRange())}))}));return o},Yw=(e,t)=>{const n=wn(t),o=M(En,e);return Zn(n,Tr,o).isSome()},Xw=e=>{const t=wn(e.getBody());return((e,t)=>{const n=pu(e.dom,Ii.fromRangeStart(t)).isNone(),o=mu(e.dom,Ii.fromRangeEnd(t)).isNone();return!((e,t)=>Yw(e,t.startContainer)||Yw(e,t.endContainer))(e,t)&&n&&o})(t,e.selection.getRng())?(e=>U.some((()=>{e.setContent(""),e.selection.setCursorLocation()})))(e):((e,t)=>{const n=t.getRng();return zt(sh(e,wn(n.startContainer)),sh(e,wn(n.endContainer)),((o,r)=>En(o,r)?U.none():U.some((()=>{n.deleteContents(),Gw(e,!0,o,r).each((e=>{t.setRng(e.toRange())}))})))).getOr(U.none())})(t,e.selection)},Jw=(e,t)=>e.selection.isCollapsed()?U.none():Xw(e),Qw=(e,t,n,o,r)=>U.from(t._selectionOverrides.showCaret(e,n,o,r)),Zw=(e,t)=>e.dispatch("BeforeObjectSelected",{target:t}).isDefaultPrevented()?U.none():U.some((e=>{const t=e.ownerDocument.createRange();return t.selectNode(e),t})(t)),eC=(e,t,n)=>t.collapsed?((e,t,n)=>{const o=Ud(1,e.getBody(),t),r=Ii.fromRangeStart(o),s=r.getNode();if(bd(s))return Qw(1,e,s,!r.isAtEnd(),!1);const a=r.getNode(!0);if(bd(a))return Qw(1,e,a,!1,!1);const i=Mh(e.dom.getRoot(),r.getNode());return bd(i)?Qw(1,e,i,!1,n):U.none()})(e,t,n).getOr(t):t,tC=e=>ag(e)||ng(e),nC=e=>ig(e)||og(e),oC=(e,t,n,o,r,s)=>{Qw(o,e,s.getNode(!r),r,!0).each((n=>{if(t.collapsed){const e=t.cloneRange();r?e.setEnd(n.startContainer,n.startOffset):e.setStart(n.endContainer,n.endOffset),e.deleteContents()}else t.deleteContents();e.selection.setRng(n)})),((e,t)=>{Zo(t)&&0===t.data.length&&e.remove(t)})(e.dom,n)},rC=(e,t)=>((e,t)=>{const n=e.selection.getRng();if(!Zo(n.commonAncestorContainer))return U.none();const o=t?Gd.Forwards:Gd.Backwards,r=ru(e.getBody()),s=M(Wd,t?r.next:r.prev),a=t?tC:nC,i=$d(o,e.getBody(),n),l=s(i),c=l?Zg(t,l):l;if(!c||!qd(i,c))return U.none();if(a(c))return U.some((()=>oC(e,n,i.getNode(),o,t,c)));const d=s(c);return d&&a(d)&&qd(c,d)?U.some((()=>oC(e,n,i.getNode(),o,t,d))):U.none()})(e,t),sC=(e,t)=>{const n=e.getBody();return t?fu(n).filter(ag):gu(n).filter(ig)},aC=e=>{const t=e.selection.getRng();return!t.collapsed&&(sC(e,!0).exists((e=>e.isEqual(Ii.fromRangeStart(t))))||sC(e,!1).exists((e=>e.isEqual(Ii.fromRangeEnd(t)))))},iC=al([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),lC=(e,t,n)=>lu(t,e,n).bind((o=>{return r=o.getNode(),_(r)&&(Tr(wn(r))||Er(wn(r)))||((e,t,n,o)=>{const r=t=>Cr(wn(t))&&!Md(n,o,e);return Hd(!t,n).fold((()=>Hd(t,o).fold(z,r)),r)})(e,t,n,o)?U.none():t&&lr(o.getNode())||!t&&lr(o.getNode(!0))?((e,t,n,o)=>{const r=o.getNode(!t);return sh(wn(e),wn(n.getNode())).map((e=>gs(e)?iC.remove(e.dom):iC.moveToElement(r))).orThunk((()=>U.some(iC.moveToElement(r))))})(e,t,n,o):t&&ig(n)||!t&&ag(n)?U.some(iC.moveToPosition(o)):U.none();var r})),cC=(e,t)=>U.from(Mh(e.getBody(),t)),dC=(e,t)=>{const n=e.selection.getNode();return cC(e,n).filter(lr).fold((()=>((e,t,n)=>{const o=Ud(t?1:-1,e,n),r=Ii.fromRangeStart(o),s=wn(e);return!t&&ig(r)?U.some(iC.remove(r.getNode(!0))):t&&ag(r)?U.some(iC.remove(r.getNode())):!t&&ag(r)&&wg(s,r)?Cg(s,r).map((e=>iC.remove(e.getNode()))):t&&ig(r)&&xg(s,r)?Sg(s,r).map((e=>iC.remove(e.getNode()))):((e,t,n)=>((e,t)=>{const n=t.getNode(!e),o=e?"after":"before";return Vo(n)&&n.getAttribute("data-mce-caret")===o})(t,n)?((e,t)=>S(t)?U.none():e&&lr(t.nextSibling)?U.some(iC.moveToElement(t.nextSibling)):!e&&lr(t.previousSibling)?U.some(iC.moveToElement(t.previousSibling)):U.none())(t,n.getNode(!t)).orThunk((()=>lC(e,t,n))):lC(e,t,n).bind((t=>((e,t,n)=>n.fold((e=>U.some(iC.remove(e))),(e=>U.some(iC.moveToElement(e))),(n=>Md(t,n,e)?U.none():U.some(iC.moveToPosition(n)))))(e,n,t))))(e,t,r)})(e.getBody(),t,e.selection.getRng()).map((n=>()=>n.fold(((e,t)=>n=>(e._selectionOverrides.hideFakeCaret(),Yg(e,t,wn(n)),!0))(e,t),((e,t)=>n=>{const o=t?Ii.before(n):Ii.after(n);return e.selection.setRng(o.toRange()),!0})(e,t),(e=>t=>(e.selection.setRng(t.toRange()),!0))(e))))),(()=>U.some(T)))},uC=e=>{const t=e.dom,n=e.selection,o=Mh(e.getBody(),n.getNode());if(ir(o)&&t.isBlock(o)&&t.isEmpty(o)){const e=t.create("br",{"data-mce-bogus":"1"});t.setHTML(o,""),o.appendChild(e),n.setRng(Ii.before(e).toRange())}return!0},mC=(e,t)=>e.selection.isCollapsed()?dC(e,t):((e,t)=>{const n=e.selection.getNode();return lr(n)&&!cr(n)?cC(e,n.parentNode).filter(lr).fold((()=>U.some((()=>{var n;n=wn(e.getBody()),Y(zo(n,".mce-offscreen-selection"),So),Yg(e,t,wn(e.selection.getNode())),ah(e)}))),(()=>U.some(T))):aC(e)?U.some((()=>{lh(e,e.selection.getRng(),wn(e.getBody()))})):U.none()})(e,t),pC=(e,t)=>e.selection.isCollapsed()?((e,t)=>{const n=Ii.fromRangeStart(e.selection.getRng());return lu(t,e.getBody(),n).filter((e=>t?eg(e):tg(e))).bind((e=>Id(t?0:-1,e))).map((t=>()=>e.selection.select(t)))})(e,t):U.none(),fC=Zo,gC=e=>fC(e)&&e.data[0]===Ir,hC=e=>fC(e)&&e.data[e.data.length-1]===Ir,vC=e=>{var t;return(null!==(t=e.ownerDocument)&&void 0!==t?t:document).createTextNode(Ir)},bC=(e,t)=>e?(e=>{var t;if(fC(e.previousSibling))return hC(e.previousSibling)||e.previousSibling.appendData(Ir),e.previousSibling;if(fC(e))return gC(e)||e.insertData(0,Ir),e;{const n=vC(e);return null===(t=e.parentNode)||void 0===t||t.insertBefore(n,e),n}})(t):(e=>{var t,n;if(fC(e.nextSibling))return gC(e.nextSibling)||e.nextSibling.insertData(0,Ir),e.nextSibling;if(fC(e))return hC(e)||e.appendData(Ir),e;{const o=vC(e);return e.nextSibling?null===(t=e.parentNode)||void 0===t||t.insertBefore(o,e.nextSibling):null===(n=e.parentNode)||void 0===n||n.appendChild(o),o}})(t),yC=M(bC,!0),xC=M(bC,!1),wC=(e,t)=>Zo(e.container())?bC(t,e.container()):bC(t,e.getNode()),CC=(e,t)=>{const n=t.get();return n&&e.container()===n&&Ur(n)},SC=(e,t)=>t.fold((t=>{ud(e.get());const n=yC(t);return e.set(n),U.some(Ii(n,n.length-1))}),(t=>fu(t).map((t=>{if(CC(t,e)){const t=e.get();return Ii(t,1)}{ud(e.get());const n=wC(t,!0);return e.set(n),Ii(n,1)}}))),(t=>gu(t).map((t=>{if(CC(t,e)){const t=e.get();return Ii(t,t.length-1)}{ud(e.get());const n=wC(t,!1);return e.set(n),Ii(n,n.length-1)}}))),(t=>{ud(e.get());const n=xC(t);return e.set(n),U.some(Ii(n,1))})),_C=(e,t)=>{for(let n=0;n<e.length;n++){const o=e[n].apply(null,t);if(o.isSome())return o}return U.none()},kC=al([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),EC=(e,t)=>Bd(t,e)||e,OC=(e,t,n)=>{const o=eh(n),r=EC(t,o.container());return Qg(e,r,o).fold((()=>mu(r,o).bind(M(Qg,e,r)).map((e=>kC.before(e)))),U.none)},TC=(e,t)=>null===bu(e,t),AC=(e,t,n)=>Qg(e,t,n).filter(M(TC,t)),RC=(e,t,n)=>{const o=th(n);return AC(e,t,o).bind((e=>pu(e,o).isNone()?U.some(kC.start(e)):U.none()))},NC=(e,t,n)=>{const o=eh(n);return AC(e,t,o).bind((e=>mu(e,o).isNone()?U.some(kC.end(e)):U.none()))},DC=(e,t,n)=>{const o=th(n),r=EC(t,o.container());return Qg(e,r,o).fold((()=>pu(r,o).bind(M(Qg,e,r)).map((e=>kC.after(e)))),U.none)},BC=e=>{return t=IC(e),!("rtl"===Ra.DOM.getStyle(t,"direction",!0)||(e=>Xg.test(e))(null!==(n=t.textContent)&&void 0!==n?n:""));var t,n},MC=(e,t,n)=>_C([OC,RC,NC,DC],[e,t,n]).filter(BC),IC=e=>e.fold(D,D,D,D),PC=e=>e.fold(N("before"),N("start"),N("end"),N("after")),LC=e=>e.fold(kC.before,kC.before,kC.after,kC.after),FC=e=>e.fold(kC.start,kC.start,kC.end,kC.end),zC=(e,t,n,o,r,s)=>zt(Qg(t,n,o),Qg(t,n,r),((t,o)=>t!==o&&((e,t,n)=>{const o=Bd(t,e),r=Bd(n,e);return _(o)&&o===r})(n,t,o)?kC.after(e?t:o):s)).getOr(s),jC=(e,t)=>e.fold(j,(e=>{return o=t,!(PC(n=e)===PC(o)&&IC(n)===IC(o));var n,o})),UC=(e,t)=>e?t.fold(A(U.some,kC.start),U.none,A(U.some,kC.after),U.none):t.fold(U.none,A(U.some,kC.before),U.none,A(U.some,kC.end)),HC=(e,t,n)=>{const o=e?1:-1;return t.setRng(Ii(n.container(),n.offset()+o).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0};var $C;!function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"}($C||($C={}));const VC=(e,t)=>e===Gd.Backwards?ie(t):t,WC=(e,t,n)=>e===Gd.Forwards?t.next(n):t.prev(n),qC=(e,t,n,o)=>sr(o.getNode(t===Gd.Forwards))?$C.Br:!1===Md(n,o)?$C.Block:$C.Wrap,GC=(e,t,n,o)=>{const r=ru(n);let s=o;const a=[];for(;s;){const n=WC(t,r,s);if(!n)break;if(sr(n.getNode(!1)))return t===Gd.Forwards?{positions:VC(t,a).concat([n]),breakType:$C.Br,breakAt:U.some(n)}:{positions:VC(t,a),breakType:$C.Br,breakAt:U.some(n)};if(n.isVisible()){if(e(s,n)){const e=qC(0,t,s,n);return{positions:VC(t,a),breakType:e,breakAt:U.some(n)}}a.push(n),s=n}else s=n}return{positions:VC(t,a),breakType:$C.Eol,breakAt:U.none()}},KC=(e,t,n,o)=>t(n,o).breakAt.map((o=>{const r=t(n,o).positions;return e===Gd.Backwards?r.concat(o):[o].concat(r)})).getOr([]),YC=(e,t)=>ee(e,((e,n)=>e.fold((()=>U.some(n)),(o=>zt(me(o.getClientRects()),me(n.getClientRects()),((e,r)=>{const s=Math.abs(t-e.left);return Math.abs(t-r.left)<=s?n:o})).or(e)))),U.none()),XC=(e,t)=>me(t.getClientRects()).bind((t=>YC(e,t.left))),JC=M(GC,Ii.isAbove,-1),QC=M(GC,Ii.isBelow,1),ZC=M(KC,-1,JC),eS=M(KC,1,QC),tS=(e,t)=>XC(ZC(e,t),t),nS=(e,t)=>XC(eS(e,t),t),oS=lr,rS=(e,t)=>Math.abs(e.left-t),sS=(e,t)=>Math.abs(e.right-t),aS=(e,t)=>Ie(e,((e,n)=>{const o=Math.min(rS(e,t),sS(e,t)),r=Math.min(rS(n,t),sS(n,t));return r===o&&Te(n,"node")&&oS(n.node)||r<o?n:e})),iS=e=>{const t=t=>K(t,(t=>{const n=li(t);return n.node=e,n}));if(Vo(e))return t(e.getClientRects());if(Zo(e)){const n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}return[]},lS=e=>se(e,iS);var cS;!function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"}(cS||(cS={}));const dS=(e,t,n,o,r,s)=>{let a=0;const i=[],l=o=>{let s=lS([o]);-1===e&&(s=s.reverse());for(let e=0;e<s.length;e++){const o=s[e];if(!n(o,c)){if(i.length>0&&t(o,Le(i))&&a++,o.line=a,r(o))return!0;i.push(o)}}return!1},c=Le(s.getClientRects());if(!c)return i;const d=s.getNode();return d&&(l(d),((e,t,n,o)=>{let r=o;for(;r=Dd(r,e,as,t);)if(n(r))return})(e,o,l,d)),i},uS=M(dS,cS.Up,ui,mi),mS=M(dS,cS.Down,mi,ui),pS=e=>Le(e.getClientRects()),fS=e=>t=>((e,t)=>t.line>e)(e,t),gS=e=>t=>((e,t)=>t.line===e)(e,t),hS=(e,t)=>{e.selection.setRng(t),qp(e,e.selection.getRng())},vS=(e,t,n)=>U.some(eC(e,t,n)),bS=(e,t,n,o,r,s)=>{const a=t===Gd.Forwards,i=ru(e.getBody()),l=M(Wd,a?i.next:i.prev),c=a?o:r;if(!n.collapsed){const o=fi(n);if(s(o))return Qw(t,e,o,t===Gd.Backwards,!1);if(aC(e)){const e=n.cloneRange();return e.collapse(t===Gd.Backwards),U.from(e)}}const d=$d(t,e.getBody(),n);if(c(d))return Zw(e,d.getNode(!a));let u=l(d);const m=Yr(n);if(!u)return m?U.some(n):U.none();if(u=Zg(a,u),c(u))return Qw(t,e,u.getNode(!a),a,!1);const p=l(u);return p&&c(p)&&qd(u,p)?Qw(t,e,p.getNode(!a),a,!1):m?vS(e,u.toRange(),!1):U.none()},yS=(e,t,n,o,r,s)=>{const a=$d(t,e.getBody(),n),i=Le(a.getClientRects()),l=t===cS.Down,c=e.getBody();if(!i)return U.none();if(aC(e)){const e=l?Ii.fromRangeEnd(n):Ii.fromRangeStart(n);return(l?nS:tS)(c,e).orThunk((()=>U.from(e))).map((e=>e.toRange()))}const d=(l?mS:uS)(c,fS(1),a),u=Q(d,gS(1)),m=i.left,p=aS(u,m);if(p&&s(p.node)){const n=Math.abs(m-p.left),o=Math.abs(m-p.right);return Qw(t,e,p.node,n<o,!1)}let f;if(f=o(a)?a.getNode():r(a)?a.getNode(!0):fi(n),f){const n=((e,t,n,o)=>{const r=ru(t);let s,a,i,l;const c=[];let d=0;1===e?(s=r.next,a=mi,i=ui,l=Ii.after(o)):(s=r.prev,a=ui,i=mi,l=Ii.before(o));const u=pS(l);do{if(!l.isVisible())continue;const e=pS(l);if(i(e,u))continue;c.length>0&&a(e,Le(c))&&d++;const t=li(e);if(t.position=l,t.line=d,n(t))return c;c.push(t)}while(l=s(l));return c})(t,c,fS(1),f);let o=aS(Q(n,gS(1)),m);if(o)return vS(e,o.position.toRange(),!1);if(o=Le(Q(n,gS(0))),o)return vS(e,o.position.toRange(),!1)}return 0===u.length?xS(e,l).filter(l?r:o).map((t=>eC(e,t.toRange(),!1))):U.none()},xS=(e,t)=>{const n=e.selection.getRng(),o=t?Ii.fromRangeEnd(n):Ii.fromRangeStart(n),r=(s=o.container(),a=e.getBody(),Zn(wn(s),(e=>xd(e.dom)),(e=>e.dom===a)).map((e=>e.dom)).getOr(a));var s,a;if(t){const e=QC(r,o);return pe(e.positions)}{const e=JC(r,o);return me(e.positions)}},wS=(e,t,n)=>xS(e,t).filter(n).exists((t=>(e.selection.setRng(t.toRange()),!0))),CS=(e,t)=>{const n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},SS=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},_S=(e,t,n)=>SC(t,n).map((t=>(CS(e,t),n))),kS=(e,t,n)=>{const o=e.getBody(),r=((e,t,n)=>{const o=Ii.fromRangeStart(e);if(e.collapsed)return o;{const r=Ii.fromRangeEnd(e);return n?pu(t,r).getOr(r):mu(t,o).getOr(o)}})(e.selection.getRng(),o,n);return((e,t,n,o)=>{const r=Zg(e,o),s=MC(t,n,r);return MC(t,n,r).bind(M(UC,e)).orThunk((()=>((e,t,n,o,r)=>{const s=Zg(e,r);return lu(e,n,s).map(M(Zg,e)).fold((()=>o.map(LC)),(r=>MC(t,n,r).map(M(zC,e,t,n,s,r)).filter(M(jC,o)))).filter(BC)})(e,t,n,s,o)))})(n,M(Jg,e),o,r).bind((n=>_S(e,t,n)))},ES=(e,t,n)=>!!cc(e)&&kS(e,t,n).isSome(),OS=(e,t,n)=>!!cc(t)&&((e,t)=>{const n=t.selection.getRng(),o=e?Ii.fromRangeEnd(n):Ii.fromRangeStart(n);return!!(e=>k(e.selection.getSel().modify))(t)&&(e&&Vr(o)?HC(!0,t.selection,o):!(e||!Wr(o))&&HC(!1,t.selection,o))})(e,t),TS=e=>{const t=Ba(null),n=M(Jg,e);return e.on("NodeChange",(o=>{cc(e)&&(((e,t,n)=>{const o=K(zo(wn(t.getRoot()),'*[data-mce-selected="inline-boundary"]'),(e=>e.dom)),r=Q(o,e),s=Q(n,e);Y(le(r,s),M(SS,!1)),Y(le(s,r),M(SS,!0))})(n,e.dom,o.parents),((e,t)=>{const n=t.get();if(e.selection.isCollapsed()&&!e.composing&&n){const o=Ii.fromRangeStart(e.selection.getRng());Ii.isTextPosition(o)&&!(e=>Vr(e)||Wr(e))(o)&&(CS(e,dd(n,o)),t.set(null))}})(e,t),((e,t,n,o)=>{if(t.selection.isCollapsed()){const r=Q(o,e);Y(r,(o=>{const r=Ii.fromRangeStart(t.selection.getRng());MC(e,t.getBody(),r).bind((e=>_S(t,n,e)))}))}})(n,e,t,o.parents))})),t},AS=M(OS,!0),RS=M(OS,!1),NS=(e,t,n)=>{if(cc(e)){const o=xS(e,t).getOrThunk((()=>{const n=e.selection.getRng();return t?Ii.fromRangeEnd(n):Ii.fromRangeStart(n)}));return MC(M(Jg,e),e.getBody(),o).exists((t=>{const o=LC(t);return SC(n,o).exists((t=>(CS(e,t),!0)))}))}return!1},DS=(e,t)=>n=>SC(t,n).map((t=>()=>CS(e,t))),BS=(e,t,n,o)=>{const r=e.getBody(),s=M(Jg,e);e.undoManager.ignore((()=>{e.selection.setRng(((e,t)=>{const n=document.createRange();return n.setStart(e.container(),e.offset()),n.setEnd(t.container(),t.offset()),n})(n,o)),oh(e),MC(s,r,Ii.fromRangeStart(e.selection.getRng())).map(FC).bind(DS(e,t)).each(F)})),e.nodeChanged()},MS=(e,t,n)=>{if(e.selection.isCollapsed()&&cc(e)){const o=Ii.fromRangeStart(e.selection.getRng());return((e,t,n,o)=>{const r=((e,t)=>Bd(t,e)||e)(e.getBody(),o.container()),s=M(Jg,e),a=MC(s,r,o);return a.bind((e=>n?e.fold(N(U.some(FC(e))),U.none,N(U.some(LC(e))),U.none):e.fold(U.none,N(U.some(LC(e))),U.none,N(U.some(FC(e)))))).map(DS(e,t)).getOrThunk((()=>{const i=cu(n,r,o),l=i.bind((e=>MC(s,r,e)));return zt(a,l,(()=>Qg(s,r,o).bind((t=>(e=>zt(fu(e),gu(e),((t,n)=>{const o=Zg(!0,t),r=Zg(!1,n);return mu(e,o).forall((e=>e.isEqual(r)))})).getOr(!0))(t)?U.some((()=>{Yg(e,n,wn(t))})):U.none())))).getOrThunk((()=>l.bind((()=>i.map((r=>()=>{n?BS(e,t,o,r):BS(e,t,r,o)}))))))}))})(e,t,n,o)}return U.none()},IS=(e,t)=>{const n=wn(e.getBody()),o=wn(e.selection.getStart()),r=cg(o,n);return oe(r,t).fold(N(r),(e=>r.slice(0,e)))},PS=(e,t)=>{const n=M(Ev,e);return se(t,(e=>n(e)?[e.dom]:[]))},LS=e=>{const t=(e=>IS(e,wr))(e);return PS(e,t)},FS=(e,t)=>{const n=(e=>IS(e,(e=>wr(e)||(e=>Hn(e)>1)(e))))(e);return pe(n).bind((o=>{const r=Ii.fromRangeStart(e.selection.getRng());return((e,t,n)=>zt(fu(n),gu(n),((o,r)=>{const s=Zg(!0,o),a=Zg(!1,r),i=Zg(!1,t);return e?mu(n,i).exists((e=>e.isEqual(a)&&t.isEqual(s))):pu(n,i).exists((e=>e.isEqual(s)&&t.isEqual(a)))})).getOr(!0))(t,r,o.dom)&&!Ov(o)?U.some((()=>((e,t,n,o)=>{const r=PS(t,o);if(0===r.length)Yg(t,e,n);else{const e=kv(n.dom,r);t.selection.setRng(e.toRange())}})(t,e,o,n))):U.none()}))},zS=(e,t)=>{const n=e.selection.getStart(),o=((e,t)=>{const n=t.parentElement;return sr(t)&&!x(n)&&e.dom.isEmpty(n)})(e,n)||Ov(wn(n))?kv(n,t):((e,t)=>{const{caretContainer:n,caretPosition:o}=_v(t);return e.selection.getRng().insertNode(n.dom),o})(e,t);e.selection.setRng(o.toRange())},jS=e=>Zo(e.startContainer),US=e=>{const t=e.selection.getRng();return(e=>0===e.startOffset&&jS(e))(t)&&((e,t)=>{const n=t.startContainer.parentElement;return!x(n)&&Ev(e,wn(n))})(e,t)&&(e=>(e=>(e=>{const t=e.startContainer.parentNode,n=e.endContainer.parentNode;return!x(t)&&!x(n)&&t.isEqualNode(n)})(e)&&(e=>{const t=e.endContainer;return e.endOffset===(Zo(t)?t.length:t.childNodes.length)})(e))(e)||(e=>!e.endContainer.isEqualNode(e.commonAncestorContainer))(e))(t)},HS=(e,t)=>e.selection.isCollapsed()?FS(e,t):(e=>{if(US(e)){const t=LS(e);return U.some((()=>{oh(e),((e,t)=>{const n=le(t,LS(e));n.length>0&&zS(e,n)})(e,t)}))}return U.none()})(e),$S=e=>((e,t,n)=>Zn(e,(e=>vu(e.dom)),n).isSome())(e,0,wr),VS=e=>((e=>{const t=e.selection.getRng();return t.collapsed&&(jS(t)||e.dom.isEmpty(t.startContainer))&&!(e=>$S(wn(e.selection.getStart())))(e)})(e)&&zS(e,[]),!0),WS=(e,t,n)=>_(n)?U.some((()=>{e._selectionOverrides.hideFakeCaret(),Yg(e,t,wn(n))})):U.none(),qS=(e,t)=>e.selection.isCollapsed()?((e,t)=>{const n=t?ng:og,o=t?Gd.Forwards:Gd.Backwards,r=$d(o,e.getBody(),e.selection.getRng());return n(r)?WS(e,t,r.getNode(!t)):U.from(Zg(t,r)).filter((e=>n(e)&&qd(r,e))).bind((n=>WS(e,t,n.getNode(!t))))})(e,t):((e,t)=>{const n=e.selection.getNode();return ur(n)?WS(e,t,n):U.none()})(e,t),GS=e=>et(null!=e?e:"").getOr(0),KS=(e,t)=>(e||"table"===Wt(t)?"margin":"padding")+("rtl"===uo(t,"direction")?"-right":"-left"),YS=e=>{const t=JS(e);return!e.mode.isReadOnly()&&(t.length>1||((e,t)=>ae(t,(t=>{const n=KS(Gl(e),t),o=po(t,n).map(GS).getOr(0);return"false"!==e.dom.getContentEditable(t.dom)&&o>0})))(e,t))},XS=e=>kr(e)||Er(e),JS=e=>Q(ko(e.selection.getSelectedBlocks()),(e=>!XS(e)&&!(e=>Nn(e).exists(XS))(e)&&eo(e,(e=>ir(e.dom)||lr(e.dom))).exists((e=>ir(e.dom))))),QS=(e,t)=>{var n,o;const{dom:r}=e,s=Kl(e),a=null!==(o=null===(n=/[a-z%]+$/i.exec(s))||void 0===n?void 0:n[0])&&void 0!==o?o:"px",i=GS(s),l=Gl(e);Y(JS(e),(e=>{((e,t,n,o,r,s)=>{const a=KS(n,wn(s)),i=GS(e.getStyle(s,a));if("outdent"===t){const t=Math.max(0,i-o);e.setStyle(s,a,t?t+r:"")}else{const t=i+o+r;e.setStyle(s,a,t)}})(r,t,l,i,a,e.dom)}))},ZS=e=>QS(e,"outdent"),e_=e=>{if(e.selection.isCollapsed()&&YS(e)){const t=e.dom,n=e.selection.getRng(),o=Ii.fromRangeStart(n),r=t.getParent(n.startContainer,t.isBlock);if(null!==r&&fg(wn(r),o))return U.some((()=>ZS(e)))}return U.none()},t_=(e,t,n)=>ge([e_,mC,rC,(e,n)=>MS(e,t,n),Kw,Bh,pC,qS,Jw,HS],(t=>t(e,n))).filter((t=>e.selection.isEditable())),n_=(e,t)=>{e.addCommand("delete",(()=>{((e,t)=>{t_(e,t,!1).fold((()=>{oh(e),ah(e)}),F)})(e,t)})),e.addCommand("forwardDelete",(()=>{((e,t)=>{t_(e,t,!0).fold((()=>(e=>nh(e,"ForwardDelete"))(e)),F)})(e,t)}))},o_=e=>void 0===e.touches||1!==e.touches.length?U.none():U.some(e.touches[0]),r_=(e,t)=>Oe(e,t.nodeName),s_=(e,t)=>!!Zo(t)||!!Vo(t)&&!r_(e.getBlockElements(),t)&&!Ru(t)&&!Os(e,t),a_=(e,t)=>{if(Zo(t)){if(0===t.data.length)return!0;if(/^\s+$/.test(t.data)&&(!t.nextSibling||r_(e,t.nextSibling)))return!0}return!1},i_=e=>e.dom.create(Ol(e),Tl(e)),l_=e=>{const t=e.dom,n=e.selection,o=e.schema,r=o.getBlockElements(),s=n.getStart(),a=e.getBody();let i,l,c=!1;const d=Ol(e);if(!s||!Vo(s))return;const u=a.nodeName.toLowerCase();if(!o.isValidChild(u,d.toLowerCase())||((e,t,n)=>G(lg(wn(n),wn(t)),(t=>r_(e,t.dom))))(r,a,s))return;const m=n.getRng(),{startContainer:p,startOffset:f,endContainer:g,endOffset:h}=m,v=hf(e);let b=a.firstChild;for(;b;)if(Vo(b)&&Ss(o,b),s_(o,b)){if(a_(r,b)){l=b,b=b.nextSibling,t.remove(l);continue}i||(i=i_(e),a.insertBefore(i,b),c=!0),l=b,b=b.nextSibling,i.appendChild(l)}else i=null,b=b.nextSibling;c&&v&&(m.setStart(p,f),m.setEnd(g,h),n.setRng(m),e.nodeChanged())},c_=(e,t,n)=>{const o=wn(i_(e)),r=Dr();yo(o,r),n(t,o);const s=document.createRange();return s.setStartBefore(r.dom),s.setEndBefore(r.dom),s},d_=e=>t=>-1!==(" "+t.attr("class")+" ").indexOf(e),u_=(e,t,n)=>function(o){const r=arguments,s=r[r.length-2],a=s>0?t.charAt(s-1):"";if('"'===a)return o;if(">"===a){const e=t.lastIndexOf("<",s);if(-1!==e&&-1!==t.substring(e,s).indexOf('contenteditable="false"'))return o}return'<span class="'+n+'" data-mce-content="'+e.dom.encode(r[0])+'">'+e.dom.encode("string"==typeof r[1]?r[1]:r[0])+"</span>"},m_=(e,t)=>{t.hasAttribute("data-mce-caret")&&(Kr(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},p_=(e,t)=>{const n=(e=>no(wn(e.getBody()),"*[data-mce-caret]").map((e=>e.dom)).getOrNull())(e);if(n)return"compositionstart"===t.type?(t.preventDefault(),t.stopPropagation(),void m_(e,n)):void($r(n)&&(m_(e,n),e.undoManager.add()))},f_=lr,g_=(e,t,n)=>{const o=ru(e.getBody()),r=M(Wd,1===t?o.next:o.prev);if(n.collapsed){const o=e.dom.getParent(n.startContainer,"PRE");if(!o)return;if(!r(Ii.fromRangeStart(n))){const n=wn((e=>{const t=e.dom.create(Ol(e));return t.innerHTML='<br data-mce-bogus="1">',t})(e));1===t?vo(wn(o),n):ho(wn(o),n),e.selection.select(n.dom,!0),e.selection.collapse()}}},h_=(e,t)=>((e,t)=>{const n=t?Gd.Forwards:Gd.Backwards,o=e.selection.getRng();return((e,t,n)=>bS(t,e,n,ag,ig,f_))(n,e,o).orThunk((()=>(g_(e,n,o),U.none())))})(e,t).exists((t=>(hS(e,t),!0))),v_=(e,t)=>((e,t)=>{const n=t?1:-1,o=e.selection.getRng();return((e,t,n)=>yS(t,e,n,(e=>ag(e)||rg(e)),(e=>ig(e)||sg(e)),f_))(n,e,o).orThunk((()=>(g_(e,n,o),U.none())))})(e,t).exists((t=>(hS(e,t),!0))),b_=(e,t)=>wS(e,t,t?ig:ag),y_=(e,t)=>sC(e,!t).map((n=>{const o=n.toRange(),r=e.selection.getRng();return t?o.setStart(r.startContainer,r.startOffset):o.setEnd(r.endContainer,r.endOffset),o})).exists((t=>(hS(e,t),!0))),x_=e=>q(["figcaption"],Wt(e)),w_=(e,t)=>{const n=wn(e.getBody()),o=Ii.fromRangeStart(e.selection.getRng());return((e,t)=>{const n=M(En,t);return eo(wn(e.container()),wr,n).filter(x_)})(o,n).exists((()=>{if(((e,t,n)=>t?((e,t)=>QC(e,t).breakAt.isNone())(e.dom,n):((e,t)=>JC(e,t).breakAt.isNone())(e.dom,n))(n,t,o)){const o=c_(e,n,t?yo:bo);return e.selection.setRng(o),!0}return!1}))},C_=(e,t)=>!!e.selection.isCollapsed()&&w_(e,t),S_={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},__=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,k_=(e,...t)=>()=>e.apply(null,t),E_=(e,t)=>ne(((e,t)=>se((e=>K(e,(e=>r(r({},S_),e))))(e),(e=>__(e,t)?[e]:[])))(e,t),(e=>e.action())),O_=(e,t)=>ge(((e,t)=>se((e=>K(e,(e=>r(r({},S_),e))))(e),(e=>__(e,t)?[e]:[])))(e,t),(e=>e.action())),T_=(e,t)=>{const n=t?Gd.Forwards:Gd.Backwards,o=e.selection.getRng();return bS(e,n,o,ng,og,ur).exists((t=>(hS(e,t),!0)))},A_=(e,t)=>{const n=t?1:-1,o=e.selection.getRng();return yS(e,n,o,ng,og,ur).exists((t=>(hS(e,t),!0)))},R_=(e,t)=>wS(e,t,t?og:ng),N_=al([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),D_=r(r({},N_),{},{none:e=>N_.none(e)}),B_=(e,t,n)=>se(Fn(e),(e=>_n(e,t)?n(e)?[e]:[]:B_(e,t,n))),M_=(e,t)=>oo(e,"table",t),I_=(e,t,n,o,r=j)=>{const s=1===o;if(!s&&n<=0)return D_.first(e[0]);if(s&&n>=e.length-1)return D_.last(e[e.length-1]);{const s=n+o,a=e[s];return r(a)?D_.middle(t,a):I_(e,t,s,o,r)}},P_=(e,t)=>M_(e,t).bind((t=>{const n=B_(t,"th,td",j);return oe(n,(t=>En(e,t))).map((e=>({index:e,all:n})))})),L_=(e,t,n,o,r)=>{const s=zo(wn(n),"td,th,caption").map((e=>e.dom)),a=Q(((e,t)=>se(t,(t=>{const n=((e,t)=>({left:e.left-t,top:e.top-t,right:e.right+-2,bottom:e.bottom+-2,width:e.width+t,height:e.height+t}))(li(t.getBoundingClientRect()),-1);return[{x:n.left,y:e(n),cell:t},{x:n.right,y:e(n),cell:t}]})))(e,s),(e=>t(e,r)));return((e,t,n)=>ee(e,((e,o)=>e.fold((()=>U.some(o)),(e=>{const r=Math.sqrt(Math.abs(e.x-t)+Math.abs(e.y-n)),s=Math.sqrt(Math.abs(o.x-t)+Math.abs(o.y-n));return U.some(s<r?o:e)}))),U.none()))(a,o,r).map((e=>e.cell))},F_=M(L_,(e=>e.bottom),((e,t)=>e.y<t)),z_=M(L_,(e=>e.top),((e,t)=>e.y>t)),j_=(e,t,n)=>{const o=e(t,n);return(e=>e.breakType===$C.Wrap&&0===e.positions.length)(o)||!sr(n.getNode())&&(e=>e.breakType===$C.Br&&1===e.positions.length)(o)?!((e,t,n)=>n.breakAt.exists((n=>e(t,n).breakAt.isSome())))(e,t,o):o.breakAt.isNone()},U_=M(j_,JC),H_=M(j_,QC),$_=(e,t,n,o)=>{const r=e.selection.getRng(),s=t?1:-1;return!(!vd()||!((e,t,n)=>{const o=Ii.fromRangeStart(t);return uu(!e,n).exists((e=>e.isEqual(o)))})(t,r,n)||(Qw(s,e,n,!t,!1).each((t=>{hS(e,t)})),0))},V_=(e,t,n)=>{const o=((e,t)=>{const n=t.getNode(e);return Xo(n)?U.some(n):U.none()})(!!t,n),r=!1===t;o.fold((()=>hS(e,n.toRange())),(o=>uu(r,e.getBody()).filter((e=>e.isEqual(n))).fold((()=>hS(e,n.toRange())),(n=>((e,t,n)=>{t.undoManager.transact((()=>{const o=e?vo:ho,r=c_(t,wn(n),o);hS(t,r)}))})(t,e,o)))))},W_=(e,t,n,o)=>{const r=e.selection.getRng(),s=Ii.fromRangeStart(r),a=e.getBody();if(!t&&U_(o,s)){const o=((e,t,n)=>((e,t)=>me(t.getClientRects()).bind((t=>F_(e,t.left,t.top))).bind((e=>{return XC(gu(n=e).map((e=>JC(n,e).positions.concat(e))).getOr([]),t);var n})))(t,n).orThunk((()=>me(n.getClientRects()).bind((n=>YC(ZC(e,Ii.before(t)),n.left))))).getOr(Ii.before(t)))(a,n,s);return V_(e,t,o),!0}if(t&&H_(o,s)){const o=((e,t,n)=>((e,t)=>pe(t.getClientRects()).bind((t=>z_(e,t.left,t.top))).bind((e=>{return XC(fu(n=e).map((e=>[e].concat(QC(n,e).positions))).getOr([]),t);var n})))(t,n).orThunk((()=>me(n.getClientRects()).bind((n=>YC(eS(e,Ii.after(t)),n.left))))).getOr(Ii.after(t)))(a,n,s);return V_(e,t,o),!0}return!1},q_=(e,t,n)=>U.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind((o=>U.from(e.dom.getParent(o,"table")).map((r=>n(e,t,r,o))))).getOr(!1),G_=(e,t)=>q_(e,t,$_),K_=(e,t)=>q_(e,t,W_),Y_=(e,t,n)=>n.fold(U.none,U.none,((e,t)=>{return(n=t,((e,t)=>{const n=e=>{for(let o=0;o<e.childNodes.length;o++){const r=wn(e.childNodes[o]);if(t(r))return U.some(r);const s=n(e.childNodes[o]);if(s.isSome())return s}return U.none()};return n(e.dom)})(n,_f)).map((e=>(e=>{const t=cp.exact(e,0,e,0);return fp(t)})(e)));var n}),(n=>(e.execCommand("mceTableInsertRowAfter"),X_(e,t,n)))),X_=(e,t,n)=>{return Y_(e,t,(r=ro,P_(o=n,void 0).fold((()=>D_.none(o)),(e=>I_(e.all,o,e.index,1,r)))));var o,r},J_=(e,t,n)=>{return Y_(e,t,(r=ro,P_(o=n,void 0).fold((()=>D_.none()),(e=>I_(e.all,o,e.index,-1,r)))));var o,r},Q_=(e,t)=>{const n=["table","li","dl"],o=wn(e.getBody()),r=e=>{const t=Wt(e);return En(e,o)||q(n,t)},s=e.selection.getRng();return((e,t)=>((e,t,n=z)=>n(t)?U.none():q(e,Wt(t))?U.some(t):to(t,e.join(","),(e=>_n(e,"table")||n(e))))(["td","th"],e,t))(wn(t?s.endContainer:s.startContainer),r).map((n=>(M_(n,r).each((t=>{e.model.table.clearSelectedCells(t.dom)})),e.selection.collapse(!t),(t?X_:J_)(e,r,n).each((t=>{e.selection.setRng(t)})),!0))).getOr(!1)},Z_=(e,t)=>({container:e,offset:t}),ek=Ra.DOM,tk=e=>t=>e===t?-1:0,nk=(e,t,n)=>{if(Zo(e)&&t>=0)return U.some(Z_(e,t));{const o=ai(ek);return U.from(o.backwards(e,t,tk(e),n)).map((e=>Z_(e.container,e.container.data.length)))}},ok=(e,t,n)=>{if(!Zo(e))return U.none();const o=e.data;if(t>=0&&t<=o.length)return U.some(Z_(e,t));{const o=ai(ek);return U.from(o.backwards(e,t,tk(e),n)).bind((e=>{const o=e.container.data;return ok(e.container,t+o.length,n)}))}},rk=(e,t,n)=>{if(!Zo(e))return U.none();const o=e.data;if(t<=o.length)return U.some(Z_(e,t));{const r=ai(ek);return U.from(r.forwards(e,t,tk(e),n)).bind((e=>rk(e.container,t-o.length,n)))}},sk=(e,t,n,o,r)=>{const s=ai(e,(e=>t=>e.isBlock(t)||q(["BR","IMG","HR","INPUT"],t.nodeName)||"false"===e.getContentEditable(t))(e));return U.from(s.backwards(t,n,o,r))},ak=e=>Lr(e.toString().replace(/\u00A0/g," ")),ik=e=>""!==e&&-1!=="  \f\n\r\t\v".indexOf(e),lk=(e,t)=>e.substring(t.length),ck=(e,t,n,o=0)=>{return(r=wn(t.startContainer),oo(r,kf)).fold((()=>((e,t,n,o=0)=>{if(!(r=t).collapsed||!Zo(r.startContainer))return U.none();var r;const s={text:"",offset:0},a=e.getParent(t.startContainer,e.isBlock)||e.getRoot();return sk(e,t.startContainer,t.startOffset,((e,t,o)=>(s.text=o+s.text,s.offset+=t,((e,t,n)=>{let o;const r=n.charAt(0);for(o=t-1;o>=0;o--){const s=e.charAt(o);if(ik(s))return U.none();if(r===s&&We(e,n,o,t))break}return U.some(o)})(s.text,s.offset,n).getOr(t))),a).bind((e=>{const r=t.cloneRange();if(r.setStart(e.container,e.offset),r.setEnd(t.endContainer,t.endOffset),r.collapsed)return U.none();const s=ak(r);return 0!==s.lastIndexOf(n)||lk(s,n).length<o?U.none():U.some({text:lk(s,n),range:r,trigger:n})}))})(e,t,n,o)),(t=>{const o=e.createRng();o.selectNode(t.dom);const r=ak(o);return U.some({range:o,text:lk(r,n),trigger:n})}));var r},dk=e=>{if((e=>3===e.nodeType)(e))return Z_(e,e.data.length);{const t=e.childNodes;return t.length>0?dk(t[t.length-1]):Z_(e,t.length)}},uk=(e,t)=>{const n=e.childNodes;return n.length>0&&t<n.length?uk(n[t],0):n.length>0&&(e=>1===e.nodeType)(e)&&n.length===t?dk(n[n.length-1]):Z_(e,t)},mk=(e,t,n,o={})=>{var r;const s=t(),a=null!==(r=e.selection.getRng().startContainer.nodeValue)&&void 0!==r?r:"",i=Q(s.lookupByTrigger(n.trigger),(t=>n.text.length>=t.minChars&&t.matches.getOrThunk((()=>(e=>t=>{const n=uk(t.startContainer,t.startOffset);return!((e,t)=>{var n;const o=null!==(n=e.getParent(t.container,e.isBlock))&&void 0!==n?n:e.getRoot();return sk(e,t.container,t.offset,((e,t)=>0===t?-1:t),o).filter((e=>{const t=e.container.data.charAt(e.offset-1);return!ik(t)})).isSome()})(e,n)})(e.dom)))(n.range,a,n.text)));if(0===i.length)return U.none();const l=Promise.all(K(i,(e=>e.fetch(n.text,e.maxResults,o).then((t=>({matchText:n.text,items:t,columns:e.columns,onAction:e.onAction,highlightOn:e.highlightOn}))))));return U.some({lookupData:l,context:n})};var pk;!function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"}(pk||(pk={}));const fk=(e,t,n)=>e.stype===pk.Error?t(e.serror):n(e.svalue),gk=e=>({stype:pk.Value,svalue:e}),hk=e=>({stype:pk.Error,serror:e}),vk=fk,bk=e=>v(e)&&he(e).length>100?" removed due to size":JSON.stringify(e,null,2),yk=(e,t)=>hk([{path:e,getErrorInfo:t}]),xk=(e,t)=>({extract:(n,o)=>Ee(o,e).fold((()=>((e,t)=>yk(e,(()=>'Choice schema did not contain choice key: "'+t+'"')))(n,e)),(e=>((e,t,n,o)=>Ee(n,o).fold((()=>((e,t,n)=>yk(e,(()=>'The chosen schema: "'+n+'" did not exist in branches: '+bk(t))))(e,n,o)),(n=>n.extract(e.concat(["branch: "+o]),t))))(n,o,t,e))),toString:()=>"chooseOn("+e+"). Possible values: "+he(t)}),wk=e=>(...t)=>{if(0===t.length)throw new Error("Can't merge zero objects");const n={};for(let o=0;o<t.length;o++){const r=t[o];for(const t in r)Oe(r,t)&&(n[t]=e(n[t],r[t]))}return n},Ck=wk(((e,t)=>b(e)&&b(t)?Ck(e,t):t)),Sk=(wk(((e,t)=>t)),e=>({tag:"defaultedThunk",process:N(e)})),_k=e=>{const t=(e=>{const t=[],n=[];return Y(e,(e=>{fk(e,(e=>n.push(e)),(e=>t.push(e)))})),{values:t,errors:n}})(e);return t.errors.length>0?(n=t.errors,A(hk,re)(n)):gk(t.values);var n},kk=(e,t,n)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return n(e.newKey,e.instantiator)}},Ek=e=>({extract:(t,n)=>{return o=e(n),r=e=>((e,t)=>yk(e,N(t)))(t,e),o.stype===pk.Error?r(o.serror):o;var o,r},toString:N("val")}),Ok=Ek(gk),Tk=(e,t,n,o)=>o(Ee(e,t).getOrThunk((()=>n(e)))),Ak=(e,t,n,o,r)=>{const s=e=>r.extract(t.concat([o]),e),a=e=>e.fold((()=>gk(U.none())),(e=>{const n=r.extract(t.concat([o]),e);return s=n,a=U.some,s.stype===pk.Value?{stype:pk.Value,svalue:a(s.svalue)}:s;var s,a}));switch(e.tag){case"required":return((e,t,n,o)=>Ee(t,n).fold((()=>((e,t,n)=>yk(e,(()=>'Could not find valid *required* value for "'+t+'" in '+bk(n))))(e,n,t)),o))(t,n,o,s);case"defaultedThunk":return Tk(n,o,e.process,s);case"option":return((e,t,n)=>n(Ee(e,t)))(n,o,a);case"defaultedOptionThunk":return((e,t,n,o)=>o(Ee(e,t).map((t=>!0===t?n(e):t))))(n,o,e.process,a);case"mergeWithThunk":return Tk(n,o,N({}),(t=>{const o=Ck(e.process(n),t);return s(o)}))}},Rk=e=>({extract:(t,n)=>((e,t,n)=>{const o={},r=[];for(const s of n)kk(s,((n,s,a,i)=>{const l=Ak(a,e,t,n,i);vk(l,(e=>{r.push(...e)}),(e=>{o[s]=e}))}),((e,n)=>{o[e]=n(t)}));return r.length>0?hk(r):gk(o)})(t,n,e),toString:()=>{const t=K(e,(e=>kk(e,((e,t,n,o)=>e+" -> "+o.toString()),((e,t)=>"state("+e+")"))));return"obj{\n"+t.join("\n")+"}"}}),Nk=e=>({extract:(t,n)=>{const o=K(n,((n,o)=>e.extract(t.concat(["["+o+"]"]),n)));return _k(o)},toString:()=>"array("+e.toString()+")"}),Dk=(e,t,n)=>{return o=((e,t,n)=>((e,t)=>e.stype===pk.Error?{stype:pk.Error,serror:t(e.serror)}:e)(t.extract([e],n),(e=>({input:n,errors:e}))))(e,t,n),fk(o,sl.error,sl.value);var o},Bk=(e,t)=>xk(e,ye(t,Rk)),Mk=N(Ok),Ik=(e,t)=>Ek((n=>{const o=typeof n;return e(n)?gk(n):hk(`Expected type: ${t} but got: ${o}`)})),Pk=Ik(E,"number"),Lk=Ik(h,"string"),Fk=Ik(w,"boolean"),zk=Ik(k,"function"),jk=(e,t,n,o)=>({tag:"field",key:e,newKey:t,presence:n,prop:o}),Uk=(e,t)=>({tag:"custom",newKey:e,instantiator:t}),Hk=(e,t)=>jk(e,e,{tag:"required",process:{}},t),$k=e=>Hk(e,Lk),Vk=e=>Hk(e,zk),Wk=(e,t)=>jk(e,e,{tag:"option",process:{}},t),qk=e=>Wk(e,Lk),Gk=(e,t,n)=>jk(e,e,Sk(t),n),Kk=(e,t)=>Gk(e,t,Pk),Yk=(e,t,n)=>Gk(e,t,(e=>{return t=t=>q(e,t)?sl.value(t):sl.error(`Unsupported value: "${t}", choose one of "${e.join(", ")}".`),Ek((e=>t(e).fold(hk,gk)));var t})(n)),Xk=(e,t)=>Gk(e,t,Fk),Jk=(e,t)=>Gk(e,t,zk),Qk=$k("type"),Zk=Vk("fetch"),eE=Vk("onAction"),tE=Jk("onSetup",(()=>T)),nE=qk("text"),oE=qk("icon"),rE=qk("tooltip"),sE=qk("label"),aE=Xk("active",!1),iE=Xk("enabled",!0),lE=Xk("primary",!1),cE=e=>((e,t)=>Gk("type",t,Lk))(0,e),dE=Rk([Qk,$k("trigger"),Kk("minChars",1),((e,t)=>jk(e,e,Sk(1),Mk()))("columns"),Kk("maxResults",10),Wk("matches",zk),Zk,eE,(uE=Lk,Gk("highlightOn",[],Nk(uE)))]);var uE;const mE=[iE,rE,oE,nE,tE],pE=[aE].concat(mE),fE=[Jk("predicate",z),Yk("scope","node",["node","editor"]),Yk("position","selection",["node","selection","line"])],gE=mE.concat([cE("contextformbutton"),lE,eE,Uk("original",D)]),hE=pE.concat([cE("contextformbutton"),lE,eE,Uk("original",D)]),vE=mE.concat([cE("contextformbutton")]),bE=pE.concat([cE("contextformtogglebutton")]),yE=Bk("type",{contextformbutton:gE,contextformtogglebutton:hE});Rk([cE("contextform"),Jk("initValue",N("")),sE,((e,t)=>jk(e,e,{tag:"required",process:{}},Nk(t)))("commands",yE),Wk("launch",Bk("type",{contextformbutton:vE,contextformtogglebutton:bE}))].concat(fE));const xE=e=>{const t=e.ui.registry.getAll().popups,n=ye(t,(e=>{return(t=e,Dk("Autocompleter",dE,r({trigger:t.ch},t))).fold((e=>{throw new Error("Errors: \n"+(e=>{const t=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:N("... (only showing first ten failures)")}]):e;return K(t,(e=>"Failed path: ("+e.path.join(" > ")+")\n"+e.getErrorInfo()))})((t=e).errors).join("\n")+"\n\nInput object: "+bk(t.input));var t}),D);var t})),o=Ae(_e(n,(e=>e.trigger))),s=ke(n);return{dataset:n,triggers:o,lookupByTrigger:e=>Q(s,(t=>t.trigger===e))}},wE=e=>{const t=ja(),n=Ba(!1),o=t.isSet,s=()=>{o()&&((e=>{Ex(e).autocompleter.removeDecoration()})(e),(e=>{e.dispatch("AutocompleterEnd")})(e),n.set(!1),t.clear())},a=Fe((()=>xE(e))),i=i=>{(n=>t.get().map((t=>ck(e.dom,e.selection.getRng(),t.trigger).bind((t=>mk(e,a,t,n))))).getOrThunk((()=>((e,t)=>{const n=t(),o=e.selection.getRng();return((e,t,n)=>ge(n.triggers,(n=>ck(e,t,n))))(e.dom,o,n).bind((n=>mk(e,t,n)))})(e,a))))(i).fold(s,(a=>{(n=>{o()||(((e,t)=>{Ex(e).autocompleter.addDecoration(t)})(e,n.range),t.set({trigger:n.trigger,matchLength:n.text.length}))})(a.context),a.lookupData.then((o=>{t.get().map((i=>{const l=a.context;i.trigger===l.trigger&&(l.text.length-i.matchLength>=10?s():(t.set(r(r({},i),{},{matchLength:l.text.length})),n.get()?((e,t)=>{e.dispatch("AutocompleterUpdate",t)})(e,{lookupData:o}):(n.set(!0),((e,t)=>{e.dispatch("AutocompleterStart",t)})(e,{lookupData:o}))))}))}))}))};e.addCommand("mceAutocompleterReload",((e,t)=>{const n=v(t)?t.fetchOptions:{};i(n)})),e.addCommand("mceAutocompleterClose",s),((e,t)=>{const n=Ha(t.load,50);e.on("keypress compositionend",(e=>{27!==e.which&&n.throttle()})),e.on("keydown",(e=>{const o=e.which;8===o?n.throttle():27===o&&t.cancelIfNecessary()})),e.on("remove",n.cancel)})(e,{cancelIfNecessary:s,load:i})},CE=e=>(t,n,o={})=>{const s=t.getBody(),a={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:s,currentTarget:s,eventPhase:Event.AT_TARGET,originalTarget:s,explicitOriginalTarget:s,isTrusted:!1,srcElement:s,cancelable:!1,preventDefault:T,inputType:n},i=pa(new InputEvent(e));return t.dispatch(e,r(r(r({},i),a),o))},SE=CE("input"),_E=CE("beforeinput"),kE=(e,t)=>{const n=e.dom,o=e.schema.getMoveCaretBeforeOnEnterElements();if(!t)return;if(/^(LI|DT|DD)$/.test(t.nodeName)){const e=(e=>{for(;e;){if(Vo(e)||Zo(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null})(t.firstChild);e&&/^(UL|OL|DL)$/.test(e.nodeName)&&t.insertBefore(n.doc.createTextNode(fr),t.firstChild)}const r=n.createRng();if(t.normalize(),t.hasChildNodes()){const e=new Uo(t,t);let n,s=t;for(;n=e.current();){if(Zo(n)){r.setStart(n,0),r.setEnd(n,0);break}if(o[n.nodeName.toLowerCase()]){r.setStartBefore(n),r.setEndBefore(n);break}s=n,n=e.next()}n||(r.setStart(s,0),r.setEnd(s,0))}else sr(t)?t.nextSibling&&n.isBlock(t.nextSibling)?(r.setStartBefore(t),r.setEndBefore(t)):(r.setStartAfter(t),r.setEndAfter(t)):(r.setStart(t,0),r.setEnd(t,0));e.selection.setRng(r),qp(e,r)},EE=(e,t)=>{const n=e.getRoot();let o,r=t;for(;r!==n&&r&&"false"!==e.getContentEditable(r);)"true"===e.getContentEditable(r)&&(o=r),r=r.parentNode;return r!==n?o:n},OE=e=>U.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),TE=(e,t)=>{const n=null==e?void 0:e.parentNode;return _(n)&&n.nodeName===t},AE=e=>_(e)&&/^(OL|UL|LI)$/.test(e.nodeName),RE=e=>{const t=e.parentNode;return _(n=t)&&/^(LI|DT|DD)$/.test(n.nodeName)?t:e;var n},NE=(e,t,n)=>{let o=e[n?"firstChild":"lastChild"];for(;o&&!Vo(o);)o=o[n?"nextSibling":"previousSibling"];return o===t},DE=(e,t)=>t&&"A"===t.nodeName&&e.isEmpty(t),BE=e=>{e.innerHTML='<br data-mce-bogus="1">'},ME=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,IE=(e,t)=>_(t)&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.isEditable(t.parentNode)&&"false"!==e.getContentEditable(t),PE=(e,t,n)=>Zo(t)?e?1===n&&t.data.charAt(n-1)===Ir?0:n:n===t.data.length-1&&t.data.charAt(n)===Ir?t.data.length:n:n,LE=(e,t)=>{Ol(e).toLowerCase()===t.tagName.toLowerCase()&&((e,t,n)=>{const o=e.dom;U.from(n.style).map(o.parseStyle).each((e=>{const n=r(r({},fo(wn(t))),e);o.setStyles(t,n)}));const s=U.from(n.class).map((e=>e.split(/\s+/))),a=U.from(t.className).map((e=>Q(e.split(/\s+/),(e=>""!==e))));zt(s,a,((e,n)=>{const r=Q(n,(t=>!q(e,t))),s=[...e,...r];o.setAttrib(t,"class",s.join(" "))}));const i=["style","class"],l=Se(n,((e,t)=>!q(i,t)));o.setAttribs(t,l)})(e,t,Tl(e))},FE={insert:(e,t)=>{let n,o,r,s,a=!1;const i=e.dom,l=e.schema,c=l.getNonEmptyElements(),d=e.selection.getRng(),u=Ol(e),m=t=>{let o=n;const s=l.getTextInlineElements();let a;a=t||"TABLE"===r||"HR"===r?i.create(t||u):y.cloneNode(!1);let c=a;if(!1===Dl(e))i.setAttrib(a,"style",null),i.setAttrib(a,"class",null);else do{if(s[o.nodeName]){if(vu(o)||Ru(o))continue;const e=o.cloneNode(!1);i.setAttrib(e,"id",""),a.hasChildNodes()?(e.appendChild(a.firstChild),a.appendChild(e)):(c=e,a.appendChild(e))}}while((o=o.parentNode)&&o!==b);return LE(e,a),BE(c),a},p=e=>{const t=PE(e,n,o);if(Zo(n)&&(e?t>0:t<n.data.length))return!1;if(n.parentNode===y&&a&&!e)return!0;if(e&&Vo(n)&&n===y.firstChild)return!0;if(ME(n,"TABLE")||ME(n,"HR"))return a&&!e||!a&&e;const r=new Uo(n,y);let s;for(Zo(n)&&(e&&0===t?r.prev():e||t!==n.data.length||r.next());s=r.current();){if(Vo(s)){if(!s.getAttribute("data-mce-bogus")){const e=s.nodeName.toLowerCase();if(c[e]&&"br"!==e)return!1}}else if(Zo(s)&&!ls(s.data))return!1;e?r.prev():r.next()}return!0},f=()=>{let t;return t=/^(H[1-6]|PRE|FIGURE)$/.test(r)&&"HGROUP"!==x?m(u):m(),((e,t)=>{const n=Bl(e);return!S(t)&&(h(n)?q(Lt.explode(n),t.nodeName.toLowerCase()):n)})(e,s)&&IE(i,s)&&i.isEmpty(y)?t=i.split(s,y):i.insertAfter(t,y),kE(e,t),t};Sp(i,d).each((e=>{d.setStart(e.startContainer,e.startOffset),d.setEnd(e.endContainer,e.endOffset)})),n=d.startContainer,o=d.startOffset;const g=!(!t||!t.shiftKey),v=!(!t||!t.ctrlKey);Vo(n)&&n.hasChildNodes()&&(a=o>n.childNodes.length-1,n=n.childNodes[Math.min(o,n.childNodes.length-1)]||n,o=a&&Zo(n)?n.data.length:0);const b=EE(i,n);if(!b||((e,t)=>{const n=e.dom.getParent(t,"ol,ul,dl");return null!==n&&"false"===e.dom.getContentEditableParent(n)})(e,n))return;g||(n=((e,t,n,o,r)=>{var s,a;const i=e.dom,l=null!==(s=EE(i,o))&&void 0!==s?s:i.getRoot();let c=i.getParent(o,i.isBlock);if(!c||!IE(i,c)){if(c=c||l,!c.hasChildNodes()){const o=i.create(t);return LE(e,o),c.appendChild(o),n.setStart(o,0),n.setEnd(o,0),o}let s,d=o;for(;d&&d.parentNode!==c;)d=d.parentNode;for(;d&&!i.isBlock(d);)s=d,d=d.previousSibling;const u=null===(a=null==s?void 0:s.parentElement)||void 0===a?void 0:a.nodeName;if(s&&u&&e.schema.isValidChild(u,t.toLowerCase())){const a=s.parentNode,l=i.create(t);for(LE(e,l),a.insertBefore(l,s),d=s;d&&!i.isBlock(d);){const e=d.nextSibling;l.appendChild(d),d=e}n.setStart(o,r),n.setEnd(o,r)}}return o})(e,u,d,n,o));let y=i.getParent(n,i.isBlock)||i.getRoot();s=_(null==y?void 0:y.parentNode)?i.getParent(y.parentNode,i.isBlock):null,r=y?y.nodeName.toUpperCase():"";const x=s?s.nodeName.toUpperCase():"";if("LI"!==x||v||(y=s,s=s.parentNode,r=x),/^(LI|DT|DD)$/.test(r)&&Vo(s)&&i.isEmpty(y))return void((e,t,n,o,r)=>{const s=e.dom,a=e.selection.getRng(),i=n.parentNode;if(n===e.getBody()||!i)return;var l;AE(l=n)&&AE(l.parentNode)&&(r="LI");let c=t(r);if(NE(n,o,!0)&&NE(n,o,!1))if(TE(n,"LI")){const e=RE(n);s.insertAfter(c,e),(e=>{var t;return(null===(t=e.parentNode)||void 0===t?void 0:t.firstChild)===e})(n)?s.remove(e):s.remove(n)}else s.replace(c,n);else if(NE(n,o,!0))TE(n,"LI")?(s.insertAfter(c,RE(n)),c.appendChild(s.doc.createTextNode(" ")),c.appendChild(n)):i.insertBefore(c,n),s.remove(o);else if(NE(n,o,!1))s.insertAfter(c,RE(n)),s.remove(o);else{n=RE(n);const e=a.cloneRange();e.setStartAfter(o),e.setEndAfter(n);const t=e.extractContents();"LI"===r&&((e,t)=>e.firstChild&&"LI"===e.firstChild.nodeName)(t)?(c=t.firstChild,s.insertAfter(t,n)):(s.insertAfter(t,n),s.insertAfter(c,n)),s.remove(o)}kE(e,c)})(e,m,s,y,u);if(y===e.getBody()||!IE(i,y))return;const w=y.parentNode;let C;if(jr(y))C=Kr(y),i.isEmpty(y)&&BE(y),LE(e,C),kE(e,C);else if(p(!1))C=f();else if(p(!0)&&w)C=w.insertBefore(m(),y),kE(e,ME(y,"HR")?C:y);else{const t=(e=>{const t=e.cloneRange();return t.setStart(e.startContainer,PE(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,PE(!1,e.endContainer,e.endOffset)),t})(d).cloneRange();t.setEndAfter(y);const n=t.extractContents();(e=>{Y(Fo(wn(e),Yt),(e=>{const t=e.dom;t.nodeValue=Lr(t.data)}))})(n),(e=>{let t=e;do{Zo(t)&&(t.data=t.data.replace(/^[\r\n]+/,"")),t=t.firstChild}while(t)})(n),C=n.firstChild,i.insertAfter(n,y),((e,t,n)=>{var o;const r=[];if(!n)return;let s=n;for(;s=s.firstChild;){if(e.isBlock(s))return;Vo(s)&&!t[s.nodeName.toLowerCase()]&&r.push(s)}let a=r.length;for(;a--;)s=r[a],(!s.hasChildNodes()||s.firstChild===s.lastChild&&""===(null===(o=s.firstChild)||void 0===o?void 0:o.nodeValue)||DE(e,s))&&e.remove(s)})(i,c,C),((e,t)=>{t.normalize();const n=t.lastChild;(!n||Vo(n)&&/^(left|right)$/gi.test(e.getStyle(n,"float",!0)))&&e.add(t,"br")})(i,y),i.isEmpty(y)&&BE(y),C.normalize(),i.isEmpty(C)?(i.remove(C),f()):(LE(e,C),kE(e,C))}i.setAttrib(C,"id",""),e.dispatch("NewBlock",{newBlock:C})},fakeEventName:"insertParagraph"},zE=(e,t,n)=>{const o=e.dom.createRng();n?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)),e.selection.setRng(o),qp(e,o)},jE=(e,t)=>{const n=yn("br");ho(wn(t),n),e.undoManager.add()},UE=(e,t)=>{HE(e.getBody(),t)||vo(wn(t),yn("br"));const n=yn("br");vo(wn(t),n),zE(e,n.dom,!1),e.undoManager.add()},HE=(e,t)=>{return n=Ii.after(t),!!sr(n.getNode())||mu(e,Ii.after(t)).map((e=>sr(e.getNode()))).getOr(!1);var n},$E=e=>e&&"A"===e.nodeName&&"href"in e,VE=e=>e.fold(z,$E,$E,z),WE=(e,t)=>{t.fold(T,M(jE,e),M(UE,e),T)},qE={insert:(e,t)=>{const n=(e=>{const t=M(Jg,e),n=Ii.fromRangeStart(e.selection.getRng());return MC(t,e.getBody(),n).filter(VE)})(e);n.isSome()?n.each(M(WE,e)):((e,t)=>{const n=e.selection,o=e.dom,r=n.getRng();let s,a=!1;Sp(o,r).each((e=>{r.setStart(e.startContainer,e.startOffset),r.setEnd(e.endContainer,e.endOffset)}));let i=r.startOffset,l=r.startContainer;if(Vo(l)&&l.hasChildNodes()){const e=i>l.childNodes.length-1;l=l.childNodes[Math.min(i,l.childNodes.length-1)]||l,i=e&&Zo(l)?l.data.length:0}let c=o.getParent(l,o.isBlock);const d=c&&c.parentNode?o.getParent(c.parentNode,o.isBlock):null,u=d?d.nodeName.toUpperCase():"",m=!(!t||!t.ctrlKey);"LI"!==u||m||(c=d),Zo(l)&&i>=l.data.length&&(((e,t,n)=>{const o=new Uo(t,n);let r;const s=e.getNonEmptyElements();for(;r=o.next();)if(s[r.nodeName.toLowerCase()]||Zo(r)&&r.length>0)return!0;return!1})(e.schema,l,c||o.getRoot())||(s=o.create("br"),r.insertNode(s),r.setStartAfter(s),r.setEndAfter(s),a=!0)),s=o.create("br"),Li(o,r,s),zE(e,s,a),e.undoManager.add()})(e,t)},fakeEventName:"insertLineBreak"},GE=(e,t)=>OE(e).filter((e=>t.length>0&&_n(wn(e),t))).isSome(),KE=al([{br:[]},{block:[]},{none:[]}]),YE=(e,t)=>(e=>GE(e,Nl(e)))(e),XE=e=>(t,n)=>(e=>OE(e).filter((e=>Er(wn(e)))).isSome())(t)===e,JE=(e,t)=>(n,o)=>{const r=(e=>OE(e).fold(N(""),(e=>e.nodeName.toUpperCase())))(n)===e.toUpperCase();return r===t},QE=e=>{const t=EE(e.dom,e.selection.getStart());return S(t)},ZE=e=>JE("pre",e),eO=e=>(t,n)=>El(t)===e,tO=(e,t)=>(e=>GE(e,Rl(e)))(e),nO=(e,t)=>t,oO=e=>{const t=Ol(e),n=EE(e.dom,e.selection.getStart());return _(n)&&e.schema.isValidChild(n.nodeName,t)},rO=(e,t)=>(n,o)=>ee(e,((e,t)=>e&&t(n,o)),!0)?U.some(t):U.none(),sO=(e,t,n)=>{t.selection.isCollapsed()||(e=>{e.execCommand("delete")})(t),_(n)&&_E(t,e.fakeEventName).isDefaultPrevented()||(e.insert(t,n),_(n)&&SE(t,e.fakeEventName))},aO=(e,t)=>{const n=()=>sO(qE,e,t),o=()=>sO(FE,e,t),r=((e,t)=>_C([rO([YE],KE.none()),rO([ZE(!0),QE],KE.none()),rO([JE("summary",!0)],KE.br()),rO([ZE(!0),eO(!1),nO],KE.br()),rO([ZE(!0),eO(!1)],KE.block()),rO([ZE(!0),eO(!0),nO],KE.block()),rO([ZE(!0),eO(!0)],KE.br()),rO([XE(!0),nO],KE.br()),rO([XE(!0)],KE.block()),rO([tO],KE.br()),rO([nO],KE.br()),rO([oO],KE.block())],[e,!(!t||!t.shiftKey)]).getOr(KE.none()))(e,t);switch(Al(e)){case"linebreak":r.fold(n,n,T);break;case"block":r.fold(o,o,T);break;case"invert":r.fold(o,n,T);break;default:r.fold(n,o,T)}},iO=Et(),lO=e=>e.stopImmediatePropagation(),cO=e=>e.keyCode===Km.PAGE_UP||e.keyCode===Km.PAGE_DOWN,dO=(e,t,n)=>{n&&!e.get()?t.on("NodeChange",lO,!0):!n&&e.get()&&t.off("NodeChange",lO),e.set(n)},uO=(e,t)=>{const n=t.container(),o=t.offset();return Zo(n)?(n.insertData(o,e),U.some(Ii(n,o+e.length))):Vd(t).map((n=>{const o=xn(e);return t.isAtEnd()?vo(n,o):ho(n,o),Ii(o.dom,e.length)}))},mO=M(uO,fr),pO=M(uO," "),fO=(e,t)=>n=>((e,t)=>!Tg(t)&&(((e,t)=>((e,t)=>pu(e.dom,t).isNone())(e,t)||((e,t)=>mu(e.dom,t).isNone())(e,t)||fg(e,t)||gg(e,t)||wg(e,t)||xg(e,t))(e,t)||Eg(e,t)||Og(e,t)))(e,n)?mO(t):pO(t),gO=e=>{const t=Ii.fromRangeStart(e.selection.getRng()),n=wn(e.getBody());if(e.selection.isCollapsed()){const o=M(Jg,e),r=Ii.fromRangeStart(e.selection.getRng());return MC(o,e.getBody(),r).bind((e=>t=>t.fold((t=>pu(e.dom,Ii.before(t))),(e=>fu(e)),(e=>gu(e)),(t=>mu(e.dom,Ii.after(t)))))(n)).map((o=>()=>fO(n,t)(o).each((e=>t=>(e.selection.setRng(t.toRange()),e.nodeChanged(),!0))(e))))}return U.none()},hO=e=>od(e)?[{keyCode:Km.TAB,action:k_(Q_,e,!0)},{keyCode:Km.TAB,shiftKey:!0,action:k_(Q_,e,!1)}]:[],vO=e=>{if(e.addShortcut("Meta+P","","mcePrint"),wE(e),_x(e))return Ba(null);{const t=TS(e);return(e=>{e.on("keyup compositionstart",M(p_,e))})(e),((e,t)=>{e.on("keydown",(n=>{n.isDefaultPrevented()||((e,t,n)=>{const o=Bt.os.isMacOS()||Bt.os.isiOS();E_([{keyCode:Km.RIGHT,action:k_(h_,e,!0)},{keyCode:Km.LEFT,action:k_(h_,e,!1)},{keyCode:Km.UP,action:k_(v_,e,!1)},{keyCode:Km.DOWN,action:k_(v_,e,!0)},...o?[{keyCode:Km.UP,action:k_(y_,e,!1),metaKey:!0,shiftKey:!0},{keyCode:Km.DOWN,action:k_(y_,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:Km.RIGHT,action:k_(G_,e,!0)},{keyCode:Km.LEFT,action:k_(G_,e,!1)},{keyCode:Km.UP,action:k_(K_,e,!1)},{keyCode:Km.DOWN,action:k_(K_,e,!0)},{keyCode:Km.RIGHT,action:k_(T_,e,!0)},{keyCode:Km.LEFT,action:k_(T_,e,!1)},{keyCode:Km.UP,action:k_(A_,e,!1)},{keyCode:Km.DOWN,action:k_(A_,e,!0)},{keyCode:Km.RIGHT,action:k_(ES,e,t,!0)},{keyCode:Km.LEFT,action:k_(ES,e,t,!1)},{keyCode:Km.RIGHT,ctrlKey:!o,altKey:o,action:k_(AS,e,t)},{keyCode:Km.LEFT,ctrlKey:!o,altKey:o,action:k_(RS,e,t)},{keyCode:Km.UP,action:k_(C_,e,!1)},{keyCode:Km.DOWN,action:k_(C_,e,!0)}],n).each((e=>{n.preventDefault()}))})(e,t,n)}))})(e,t),((e,t)=>{let n=!1;e.on("keydown",(o=>{n=o.keyCode===Km.BACKSPACE,o.isDefaultPrevented()||((e,t,n)=>{const o=n.keyCode===Km.BACKSPACE?"deleteContentBackward":"deleteContentForward";O_([{keyCode:Km.BACKSPACE,action:k_(e_,e)},{keyCode:Km.BACKSPACE,action:k_(mC,e,!1)},{keyCode:Km.DELETE,action:k_(mC,e,!0)},{keyCode:Km.BACKSPACE,action:k_(rC,e,!1)},{keyCode:Km.DELETE,action:k_(rC,e,!0)},{keyCode:Km.BACKSPACE,action:k_(MS,e,t,!1)},{keyCode:Km.DELETE,action:k_(MS,e,t,!0)},{keyCode:Km.BACKSPACE,action:k_(Bh,e,!1)},{keyCode:Km.DELETE,action:k_(Bh,e,!0)},{keyCode:Km.BACKSPACE,action:k_(pC,e,!1)},{keyCode:Km.DELETE,action:k_(pC,e,!0)},{keyCode:Km.BACKSPACE,action:k_(qS,e,!1)},{keyCode:Km.DELETE,action:k_(qS,e,!0)},{keyCode:Km.BACKSPACE,action:k_(Jw,e,!1)},{keyCode:Km.DELETE,action:k_(Jw,e,!0)},{keyCode:Km.BACKSPACE,action:k_(Kw,e,!1)},{keyCode:Km.DELETE,action:k_(Kw,e,!0)},{keyCode:Km.BACKSPACE,action:k_(HS,e,!1)},{keyCode:Km.DELETE,action:k_(HS,e,!0)}],n).filter((t=>e.selection.isEditable())).each((t=>{n.preventDefault(),_E(e,o).isDefaultPrevented()||(t(),SE(e,o))}))})(e,t,o)})),e.on("keyup",(t=>{t.isDefaultPrevented()||((e,t,n)=>{const o=Et(),r=o.os,s=o.browser,a=r.isMacOS()?[{keyCode:Km.BACKSPACE,altKey:!0,action:k_(VS,e)},{keyCode:Km.DELETE,altKey:!0,action:k_(VS,e)}]:[{keyCode:Km.BACKSPACE,ctrlKey:!0,action:k_(VS,e)},{keyCode:Km.DELETE,ctrlKey:!0,action:k_(VS,e)}];r.isMacOS()&&n&&a.push({keyCode:s.isFirefox()?224:91,action:k_(VS,e)}),E_([{keyCode:Km.BACKSPACE,action:k_(uC,e)},{keyCode:Km.DELETE,action:k_(uC,e)},...a],t)})(e,t,n),n=!1}))})(e,t),(e=>{e.on("keydown",(t=>{t.keyCode===Km.ENTER&&((e,t)=>{var n;t.isDefaultPrevented()||(t.preventDefault(),(n=e.undoManager).typing&&(n.typing=!1,n.add()),e.undoManager.transact((()=>{aO(e,t)})))})(e,t)}))})(e),(e=>{e.on("keydown",(t=>{t.isDefaultPrevented()||((e,t)=>{O_([{keyCode:Km.SPACEBAR,action:k_(gO,e)}],t).each((n=>{t.preventDefault(),_E(e,"insertText",{data:" "}).isDefaultPrevented()||(n(),SE(e,"insertText",{data:" "}))}))})(e,t)}))})(e),(e=>{e.on("input",(t=>{t.isComposing||(e=>{const t=wn(e.getBody());e.selection.isCollapsed()&&Lg(t,Ii.fromRangeStart(e.selection.getRng())).each((t=>{e.selection.setRng(t.toRange())}))})(e)}))})(e),(e=>{e.on("keydown",(t=>{t.isDefaultPrevented()||((e,t)=>{E_([...hO(e)],t).each((e=>{t.preventDefault()}))})(e,t)}))})(e),((e,t)=>{e.on("keydown",(n=>{n.isDefaultPrevented()||((e,t,n)=>{const o=Bt.os.isMacOS()||Bt.os.isiOS();E_([{keyCode:Km.END,action:k_(b_,e,!0)},{keyCode:Km.HOME,action:k_(b_,e,!1)},...o?[]:[{keyCode:Km.HOME,action:k_(y_,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:Km.END,action:k_(y_,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:Km.END,action:k_(R_,e,!0)},{keyCode:Km.HOME,action:k_(R_,e,!1)},{keyCode:Km.END,action:k_(NS,e,!0,t)},{keyCode:Km.HOME,action:k_(NS,e,!1,t)}],n).each((e=>{n.preventDefault()}))})(e,t,n)}))})(e,t),((e,t)=>{if(iO.os.isMacOS())return;const n=Ba(!1);e.on("keydown",(t=>{cO(t)&&dO(n,e,!0)})),e.on("keyup",(o=>{o.isDefaultPrevented()||((e,t,n)=>{E_([{keyCode:Km.PAGE_UP,action:k_(NS,e,!1,t)},{keyCode:Km.PAGE_DOWN,action:k_(NS,e,!0,t)}],n)})(e,t,o),cO(o)&&n.get()&&(dO(n,e,!1),e.nodeChanged())}))})(e,t),t}};class bO{constructor(e){let t;this.lastPath=[],this.editor=e;const n=this;"onselectionchange"in e.getDoc()||e.on("NodeChange click mouseup keyup focus",(n=>{const o=e.selection.getRng(),r={startContainer:o.startContainer,startOffset:o.startOffset,endContainer:o.endContainer,endOffset:o.endOffset};"nodechange"!==n.type&&hp(r,t)||e.dispatch("SelectionChange"),t=r})),e.on("contextmenu",(()=>{e.dispatch("SelectionChange")})),e.on("SelectionChange",(()=>{const t=e.selection.getStart(!0);t&&Yu(e)&&!n.isSameElementPath(t)&&e.dom.isChildOf(t,e.getBody())&&e.nodeChanged({selectionChange:!0})})),e.on("mouseup",(t=>{!t.isDefaultPrevented()&&Yu(e)&&("IMG"===e.selection.getNode().nodeName?sf.setEditorTimeout(e,(()=>{e.nodeChanged()})):e.nodeChanged())}))}nodeChanged(e={}){const t=this.editor.selection;let n;if(this.editor.initialized&&t&&!wc(this.editor)&&!this.editor.mode.isReadOnly()){const o=this.editor.getBody();n=t.getStart(!0)||o,n.ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(n,o)||(n=o);const s=[];this.editor.dom.getParent(n,(e=>e===o||(s.push(e),!1))),this.editor.dispatch("NodeChange",r(r({},e),{},{element:n,parents:s}))}}isSameElementPath(e){let t;const n=this.editor,o=ie(n.dom.getParents(e,j,n.getBody()));if(o.length===this.lastPath.length){for(t=o.length;t>=0&&o[t]===this.lastPath[t];t--);if(-1===t)return this.lastPath=o,!0}return this.lastPath=o,!1}}const yO=N("x-tinymce/html"),xO="\x3c!-- x-tinymce/html --\x3e",wO=e=>xO+e,CO=e=>-1!==e.indexOf(xO),SO="%MCEPASTEBIN%",_O=e=>e.dom.get("mcepastebin"),kO=e=>_(e)&&"mcepastebin"===e.id,EO=e=>e===SO,OO=(e,t)=>(Lt.each(t,(t=>{e=g(t,RegExp)?e.replace(t,""):e.replace(t[0],t[1])})),e),TO=e=>OO(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(e,t,n)=>t||n?fr:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),AO=(e,t)=>({content:e,cancelled:t}),RO=(e,t)=>(e.insertContent(t,{merge:$c(e),paste:!0}),!0),NO=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),DO=(e,t,n)=>!(e.selection.isCollapsed()||!NO(t))&&((e,t,n)=>(e.undoManager.extra((()=>{n(e,t)}),(()=>{e.execCommand("mceInsertLink",!1,t)})),!0))(e,t,n),BO=(e,t,n)=>!!((e,t)=>NO(t)&&G(nd(e),(e=>Ge(t.toLowerCase(),`.${e.toLowerCase()}`))))(e,t)&&((e,t,n)=>(e.undoManager.extra((()=>{n(e,t)}),(()=>{e.insertContent('<img src="'+t+'">')})),!0))(e,t,n),MO=(e=>{let t=0;return()=>"mceclip"+t++})(),IO=(e,t,n,o)=>{const r=((e,t,n)=>((e,t,n)=>{const o=((e,t,n)=>e.dispatch("PastePreProcess",{content:t,internal:n}))(e,t,n),r=((e,t)=>{const n=Wy({sanitize:td(e)},e.schema);n.addNodeFilter("meta",(e=>{Lt.each(e,(e=>{e.remove()}))}));const o=n.parse(t,{forced_root_block:!1,isRootContent:!0});return Hf({validate:!0},e.schema).serialize(o)})(e,o.content);return e.hasEventListeners("PastePostProcess")&&!o.isDefaultPrevented()?((e,t,n)=>{const o=e.dom.create("div",{style:"display:none"},t),r=((e,t,n)=>e.dispatch("PastePostProcess",{node:t,internal:n}))(e,o,n);return AO(r.node.innerHTML,r.isDefaultPrevented())})(e,r,n):AO(r,o.isDefaultPrevented())})(e,t,n))(e,t,n);r.cancelled||((e,t,n)=>{n||!Vc(e)?RO(e,t):((e,t)=>{Lt.each([DO,BO,RO],(n=>!n(e,t,RO)))})(e,t)})(e,r.content,o)},PO=(e,t,n)=>{const o=n||CO(t);IO(e,(e=>e.replace(xO,""))(t),o,!1)},LO=(e,t)=>{const n=e.dom.encode(t).replace(/\r\n/g,"\n"),o=((e,t,n)=>{const o=e.split(/\n\n/),r=((e,t)=>{let n="<"+e;const o=_e(t,((e,t)=>t+'="'+Js.encodeAllRaw(e)+'"'));return o.length&&(n+=" "+o.join(" ")),n+">"})(t,n),s="</"+t+">",a=K(o,(e=>e.split(/\n/).join("<br />")));return 1===a.length?a[0]:K(a,(e=>r+e+s)).join("")})(ds(n,qc(e)),Ol(e),Tl(e));IO(e,o,!1,!0)},FO=e=>{const t={};if(e&&e.types)for(let n=0;n<e.types.length;n++){const o=e.types[n];try{t[o]=e.getData(o)}catch(e){t[o]=""}}return t},zO=(e,t)=>t in e&&e[t].length>0,jO=e=>zO(e,"text/html")||zO(e,"text/plain"),UO=(e,t,n)=>{const o="paste"===t.type?t.clipboardData:t.dataTransfer;var r;if(Fc(e)&&o){const s=((e,t)=>{const n=t.items?se(fe(t.items),(e=>"file"===e.kind?[e.getAsFile()]:[])):[],o=t.files?fe(t.files):[];return Q(n.length>0?n:o,(e=>{const t=nd(e);return e=>qe(e.type,"image/")&&G(t,(t=>(e=>{const t=e.toLowerCase(),n={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return Lt.hasOwn(n,t)?"image/"+n[t]:"image/"+t})(t)===e.type))})(e))})(e,o);if(s.length>0)return t.preventDefault(),(r=s,Promise.all(K(r,(e=>wb(e).then((t=>({file:e,uri:t}))))))).then((t=>{n&&e.selection.setRng(n),Y(t,(t=>{((e,t)=>{yb(t.uri).each((({data:n,type:o,base64Encoded:r})=>{const s=r?n:btoa(n),a=t.file,i=e.editorUpload.blobCache,l=i.getByData(s,o),c=null!=l?l:((e,t,n,o)=>{const r=MO(),s=Il(e)&&_(n.name),a=s?((e,t)=>{const n=t.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return _(n)?e.dom.encode(n[1]):void 0})(e,n.name):r,i=s?n.name:void 0,l=t.create(r,n,o,a,i);return t.add(l),l})(e,i,a,s);PO(e,`<img src="${c.blobUri()}">`,!1)}))})(e,t)}))})),!0}return!1},HO=(e,t,n,o)=>{let r=TO(n);const s=zO(t,yO())||CO(n),a=!s&&(e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e))(r),i=NO(r);(EO(r)||!r.length||a&&!i)&&(o=!0),(o||i)&&(r=zO(t,"text/plain")&&a?t["text/plain"]:(e=>{const t=da(),n=Wy({},t);let o="";const r=t.getVoidElements(),s=Lt.makeMap("script noscript style textarea video audio iframe object"," "),a=t.getBlockElements(),i=e=>{const n=e.name,l=e;if("br"!==n){if("wbr"!==n)if(r[n]&&(o+=" "),s[n])o+=" ";else{if(3===e.type&&(o+=e.value),!(e.name in t.getVoidElements())){let t=e.firstChild;if(t)do{i(t)}while(t=t.next)}a[n]&&l.next&&(o+="\n","p"===n&&(o+="\n"))}}else o+="\n"};return e=OO(e,[/<!\[[^\]]+\]>/g]),i(n.parse(e)),o})(r)),EO(r)||(o?LO(e,r):PO(e,r,s))},$O=(e,t,n)=>{((e,t,n)=>{let o;e.on("keydown",(e=>{(e=>Km.metaKeyPressed(e)&&86===e.keyCode||e.shiftKey&&45===e.keyCode)(e)&&!e.isDefaultPrevented()&&(o=e.shiftKey&&86===e.keyCode)})),e.on("paste",(r=>{if(r.isDefaultPrevented()||(e=>{var t,n;return Bt.os.isAndroid()&&0===(null===(n=null===(t=e.clipboardData)||void 0===t?void 0:t.items)||void 0===n?void 0:n.length)})(r))return;const s="text"===n.get()||o;o=!1;const a=FO(r.clipboardData);!jO(a)&&UO(e,r,t.getLastRng()||e.selection.getRng())||(zO(a,"text/html")?(r.preventDefault(),HO(e,a,a["text/html"],s)):zO(a,"text/plain")&&zO(a,"text/uri-list")?(r.preventDefault(),HO(e,a,a["text/plain"],s)):(t.create(),sf.setEditorTimeout(e,(()=>{const n=t.getHtml();t.remove(),HO(e,a,n,s)}),0)))}))})(e,t,n),(e=>{const t=e=>qe(e,"webkit-fake-url"),n=e=>qe(e,"data:");e.parser.addNodeFilter("img",((o,r,s)=>{if(!Fc(e)&&(e=>{var t;return!0===(null===(t=e.data)||void 0===t?void 0:t.paste)})(s))for(const a of o){const o=a.attr("src");h(o)&&!a.attr("data-mce-object")&&o!==Bt.transparentSrc&&(t(o)||!Gc(e)&&n(o))&&a.remove()}}))})(e)},VO=(e,t,n,o)=>{((e,t,n)=>{if(!e)return!1;try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",n),e.setData(yO(),t),!0}catch(e){return!1}})(e.clipboardData,t.html,t.text)?(e.preventDefault(),o()):n(t.html,o)},WO=e=>(t,n)=>{const{dom:o,selection:r}=e,s=o.create("div",{contenteditable:"false","data-mce-bogus":"all"}),a=o.create("div",{contenteditable:"true"},t);o.setStyles(s,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),s.appendChild(a),o.add(e.getBody(),s);const i=r.getRng();a.focus();const l=o.createRng();l.selectNodeContents(a),r.setRng(l),sf.setEditorTimeout(e,(()=>{r.setRng(i),o.remove(s),n()}),0)},qO=e=>({html:wO(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),GO=e=>!e.selection.isCollapsed()||(e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()))(e),KO=(e,t)=>{var n,o;return Ep.getCaretRangeFromPoint(null!==(n=t.clientX)&&void 0!==n?n:0,null!==(o=t.clientY)&&void 0!==o?o:0,e.getDoc())},YO=(e,t)=>{e.focus(),t&&e.selection.setRng(t)},XO=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,JO=e=>Lt.trim(e).replace(XO,ju).toLowerCase(),QO=(e,t,n)=>{const o=Uc(e);if(n||"all"===o||!Hc(e))return t;const r=o?o.split(/[, ]/):[];if(r&&"none"!==o){const n=e.dom,o=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,((e,t,s,a)=>{const i=n.parseStyle(n.decode(s)),l={};for(let d=0;d<r.length;d++){const e=i[r[d]];let t=e,s=n.getStyle(o,r[d],!0);/color/.test(r[d])&&(t=JO(t),s=JO(s)),s!==t&&(l[r[d]]=e)}const c=n.serializeStyle(l,"span");return c?t+' style="'+c+'"'+a:t+a}))}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,((e,t,n,o)=>t+' style="'+n+'"'+o)),t},ZO=e=>{const t=Ba(!1),n=Ba(Wc(e)?"text":"html"),o=(e=>{const t=Ba(null);return{create:()=>((e,t)=>{const{dom:n,selection:o}=e,r=e.getBody();t.set(o.getRng());const s=n.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},SO);Bt.browser.isFirefox()&&n.setStyle(s,"left","rtl"===n.getStyle(r,"direction",!0)?65535:-65535),n.bind(s,"beforedeactivate focusin focusout",(e=>{e.stopPropagation()})),s.focus(),o.select(s,!0)})(e,t),remove:()=>((e,t)=>{const n=e.dom;if(_O(e)){let o;const r=t.get();for(;o=_O(e);)n.remove(o),n.unbind(o);r&&e.selection.setRng(r)}t.set(null)})(e,t),getEl:()=>_O(e),getHtml:()=>(e=>{const t=e.dom,n=(e,n)=>{e.appendChild(n),t.remove(n,!0)},[o,...r]=Q(e.getBody().childNodes,kO);Y(r,(e=>{n(o,e)}));const s=t.select("div[id=mcepastebin]",o);for(let a=s.length-1;a>=0;a--){const e=t.create("div");o.insertBefore(e,s[a]),n(e,s[a])}return o?o.innerHTML:""})(e),getLastRng:t.get}})(e);(e=>{(Bt.browser.isChromium()||Bt.browser.isSafari())&&((e,t)=>{e.on("PastePreProcess",(n=>{n.content=t(e,n.content,n.internal)}))})(e,QO)})(e),((e,t)=>{e.addCommand("mceTogglePlainTextPaste",(()=>{((e,t)=>{"text"===t.get()?(t.set("html"),Gm(e,!1)):(t.set("text"),Gm(e,!0)),e.focus()})(e,t)})),e.addCommand("mceInsertClipboardContent",((t,n)=>{n.html&&PO(e,n.html,n.internal),n.text&&LO(e,n.text)}))})(e,n),(e=>{const t=t=>n=>{t(e,n)},n=zc(e);k(n)&&e.on("PastePreProcess",t(n));const o=jc(e);k(o)&&e.on("PastePostProcess",t(o))})(e),e.on("PreInit",(()=>{(e=>{e.on("cut",(e=>t=>{!t.isDefaultPrevented()&&GO(e)&&VO(t,qO(e),WO(e),(()=>{if(Bt.browser.isChromium()||Bt.browser.isFirefox()){const t=e.selection.getRng();sf.setEditorTimeout(e,(()=>{e.selection.setRng(t),e.execCommand("Delete")}),0)}else e.execCommand("Delete")}))})(e)),e.on("copy",(e=>t=>{!t.isDefaultPrevented()&&GO(e)&&VO(t,qO(e),WO(e),T)})(e))})(e),((e,t)=>{Lc(e)&&e.on("dragend dragover draggesture dragdrop drop drag",(e=>{e.preventDefault(),e.stopPropagation()})),Fc(e)||e.on("drop",(e=>{const t=e.dataTransfer;t&&(e=>G(e.files,(e=>/^image\//.test(e.type))))(t)&&e.preventDefault()})),e.on("drop",(n=>{if(n.isDefaultPrevented())return;const o=KO(e,n);if(S(o))return;const r=FO(n.dataTransfer),s=zO(r,yO());if((!jO(r)||(e=>{const t=e["text/plain"];return!!t&&0===t.indexOf("file://")})(r))&&UO(e,n,o))return;const a=r[yO()],i=a||r["text/html"]||r["text/plain"],l=((e,t,n,o)=>{const r=e.getParent(n,(e=>Os(t,e)));if(r&&Oe(o,"text/html")){const e=(new DOMParser).parseFromString(o["text/html"],"text/html").body;return!x(e.querySelector(r.nodeName.toLowerCase()))}return!1})(e.dom,e.schema,o.startContainer,r);t.get()&&!l||i&&(n.preventDefault(),sf.setEditorTimeout(e,(()=>{e.undoManager.transact((()=>{a&&e.execCommand("Delete"),YO(e,o);const t=TO(i);r["text/html"]?PO(e,t,s):LO(e,t)}))})))})),e.on("dragstart",(e=>{t.set(!0)})),e.on("dragover dragend",(n=>{Fc(e)&&!t.get()&&(n.preventDefault(),YO(e,KO(e,n))),"dragend"===n.type&&t.set(!1)}))})(e,t),$O(e,o,n)}))},eT=sr,tT=Zo,nT=e=>lr(e.dom),oT=e=>t=>En(wn(e),t),rT=(e,t)=>eo(wn(e),nT,oT(t)),sT=(e,t,n)=>{const o=new Uo(e,t),r=n?o.next.bind(o):o.prev.bind(o);let s=e;for(let a=n?e:r();a&&!eT(a);a=r())rs(a)&&(s=a);return s},aT=e=>{const t=((e,t)=>{const n=Ii.fromRangeStart(e).getNode(),o=((e,t)=>eo(wn(e),(e=>(e=>ir(e.dom))(e)||wr(e)),oT(t)).getOr(wn(t)).dom)(n,t),r=sT(n,o,!1),s=sT(n,o,!0),a=document.createRange();return rT(r,o).fold((()=>{tT(r)?a.setStart(r,0):a.setStartBefore(r)}),(e=>a.setStartBefore(e.dom))),rT(s,o).fold((()=>{tT(s)?a.setEnd(s,s.data.length):a.setEndAfter(s)}),(e=>a.setEndAfter(e.dom))),a})(e.selection.getRng(),e.getBody());e.selection.setRng(Kh(t))};var iT;!function(e){e.Before="before",e.After="after"}(iT||(iT={}));const lT=(e,t)=>Math.abs(e.left-t),cT=(e,t)=>Math.abs(e.right-t),dT=(e,t)=>(e=>ee(e,((e,t)=>e.fold((()=>U.some(t)),(e=>{const n=Math.min(t.left,e.left),o=Math.min(t.top,e.top),r=Math.max(t.right,e.right),s=Math.max(t.bottom,e.bottom);return U.some({top:o,right:r,bottom:s,left:n,width:r-n,height:s-o})}))),U.none()))(Q(e,(e=>{return(n=t)>=(o=e).top&&n<=o.bottom;var n,o}))).fold((()=>[[],e]),(t=>{const{pass:n,fail:o}=J(e,(e=>((e,t)=>{const n=((e,t)=>Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)))(e,t)/Math.min(e.height,t.height);return((e,t)=>e.top<t.bottom&&e.bottom>t.top)(e,t)&&n>.5})(e,t)));return[n,o]})),uT=(e,t,n)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),mT=(e,t,n)=>{const o=e=>rs(e.node)?U.some(e):Vo(e.node)?mT(fe(e.node.childNodes),t,n):U.none(),r=(e,r)=>{const s=de(e,((e,o)=>r(e,t,n)-r(o,t,n)));return((e,r)=>{if(e.length>=2){const s=o(e[0]).getOr(e[0]),a=o(e[1]).getOr(e[1]);if(Math.abs(r(s,t,n)-r(a,t,n))<2){if(Zo(s.node))return U.some(s);if(Zo(a.node))return U.some(a)}}return U.none()})(s,r).orThunk((()=>ge(s,o)))},[s,a]=dT(lS(e),n),{pass:i,fail:l}=J(a,(e=>e.top<n));return r(s,uT).orThunk((()=>r(l,pi))).orThunk((()=>r(i,pi)))},pT=(e,t,n)=>((e,t,n)=>{const o=wn(e),r=An(o),s=Cn(r,t,n).filter((e=>On(o,e))).getOr(o);return((e,t,n,o)=>{const r=(t,s)=>{const a=Q(t.dom.childNodes,I((e=>Vo(e)&&e.classList.contains("mce-drag-container"))));return s.fold((()=>mT(a,n,o)),(e=>{const t=Q(a,(t=>t!==e.dom));return mT(t,n,o)})).orThunk((()=>(En(t,e)?U.none():Dn(t)).bind((e=>r(e,U.some(t))))))};return r(t,U.none())})(o,s,t,n)})(e,t,n).filter((e=>yd(e.node))).map((e=>((e,t)=>({node:e.node,position:lT(e,t)<cT(e,t)?iT.Before:iT.After}))(e,t))),fT=e=>{var t,n;const o=e.getBoundingClientRect(),r=e.ownerDocument,s=r.documentElement,a=r.defaultView;return{top:o.top+(null!==(t=null==a?void 0:a.scrollY)&&void 0!==t?t:0)-s.clientTop,left:o.left+(null!==(n=null==a?void 0:a.scrollX)&&void 0!==n?n:0)-s.clientLeft}},gT=e=>({target:e,srcElement:e}),hT=e=>(t,n)=>((e,t,n)=>r(r({},t),{},{dataTransfer:null,type:e},n))(e,t,gT(n)),vT=hT("dragstart"),bT=hT("drop"),yT=e=>((e,t)=>{const n=P("Function not supported on simulated event.");return r({bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,srcElement:null,target:null,timeStamp:0,type:"dragend",composedPath:n,initEvent:n,preventDefault:T,stopImmediatePropagation:T,stopPropagation:T,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:n,initMouseEvent:n,getModifierState:n,dataTransfer:null},t)})(0,gT(e)),xT=hT("dragend"),wT=lr,CT=((...e)=>t=>{for(let n=0;n<e.length;n++)if(e[n](t))return!0;return!1})(wT,ir),ST=(e,t,n,o)=>{const r=e.dom,s=t.cloneNode(!0);r.setStyles(s,{width:n,height:o}),r.setAttrib(s,"data-mce-selected",null);const a=r.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return r.setStyles(a,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:o}),r.setStyles(s,{margin:0,boxSizing:"border-box"}),a.appendChild(s),a},_T=(e,t)=>n=>()=>{const o="left"===e?n.scrollX:n.scrollY;n.scroll({[e]:o+t,behavior:"smooth"})},kT=_T("left",-32),ET=_T("left",32),OT=_T("top",-32),TT=_T("top",32),AT=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},RT=(e,t)=>{const n=Ua(((e,n)=>((e,t,n)=>{e._selectionOverrides.hideFakeCaret(),pT(e.getBody(),t,n).fold((()=>e.selection.placeCaretAt(t,n)),(o=>{const r=e._selectionOverrides.showCaret(1,o.node,o.position===iT.Before,!1);r?e.selection.setRng(r):e.selection.placeCaretAt(t,n)}))})(t,e,n)),0);t.on("remove",n.cancel);const o=e;return r=>e.on((e=>{const s=Math.max(Math.abs(r.screenX-e.screenX),Math.abs(r.screenY-e.screenY));if(!e.dragging&&s>10){if(t.dispatch("dragstart",vT(r,e.element)).isDefaultPrevented())return;e.dragging=!0,t.focus()}if(e.dragging){const s=r.currentTarget===t.getDoc().documentElement,l=((e,t)=>({pageX:t.pageX-e.relX,pageY:t.pageY+5}))(e,((e,t)=>{return n=(e=>e.inline?fT(e.getBody()):{left:0,top:0})(e),o=(e=>{const t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}})(e),r=((e,t)=>{if(t.target.ownerDocument!==e.getDoc()){const n=fT(e.getContentAreaContainer()),o=(e=>{const t=e.getBody(),n=e.getDoc().documentElement,o={left:t.scrollLeft,top:t.scrollTop},r={left:t.scrollLeft||n.scrollLeft,top:t.scrollTop||n.scrollTop};return e.inline?o:r})(e);return{left:t.pageX-n.left+o.left,top:t.pageY-n.top+o.top}}return{left:t.pageX,top:t.pageY}})(e,t),{pageX:r.left-n.left+o.left,pageY:r.top-n.top+o.top};var n,o,r})(t,r));a=e.ghost,i=t.getBody(),a.parentNode!==i&&i.appendChild(a),((e,t,n,o,r,s,a,i,l,c,d,u)=>{let m=0,p=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+n>r&&(m=t.pageX+n-r),t.pageY+o>s&&(p=t.pageY+o-s),e.style.width=n-m+"px",e.style.height=o-p+"px";const f=l.clientHeight,g=l.clientWidth,h=a+l.getBoundingClientRect().top,v=i+l.getBoundingClientRect().left;d.on((e=>{e.intervalId.clear(),e.dragging&&u&&(a+8>=f?e.intervalId.set(TT(c)):a-8<=0?e.intervalId.set(OT(c)):i+8>=g?e.intervalId.set(ET(c)):i-8<=0?e.intervalId.set(kT(c)):h+16>=window.innerHeight?e.intervalId.set(TT(window)):h-16<=0?e.intervalId.set(OT(window)):v+16>=window.innerWidth?e.intervalId.set(ET(window)):v-16<=0&&e.intervalId.set(kT(window)))}))})(e.ghost,l,e.width,e.height,e.maxX,e.maxY,r.clientY,r.clientX,t.getContentAreaContainer(),t.getWin(),o,s),n.throttle(r.clientX,r.clientY)}var a,i}))},NT=(e,t,n)=>{e.on((e=>{if(e.intervalId.clear(),e.dragging){const o=n.fold((()=>yT(e.element)),(t=>xT(t,e.element)));t.dispatch("dragend",o)}})),DT(e)},DT=e=>{e.on((e=>{e.intervalId.clear(),AT(e.ghost)})),e.clear()},BT=e=>{const t=ja(),n=Ra.DOM,o=document,r=((e,t)=>n=>{if((e=>0===e.button)(n)){const o=ne(t.dom.getParents(n.target),CT).getOr(null);if(_(o)&&((e,t,n)=>wT(n)&&n!==t&&e.isEditable(n.parentElement))(t.dom,t.getBody(),o)){const r=t.dom.getPos(o),s=t.getBody(),a=t.getDoc().documentElement;e.set({element:o,dragging:!1,screenX:n.screenX,screenY:n.screenY,maxX:(t.inline?s.scrollWidth:a.offsetWidth)-2,maxY:(t.inline?s.scrollHeight:a.offsetHeight)-2,relX:n.pageX-r.x,relY:n.pageY-r.y,width:o.offsetWidth,height:o.offsetHeight,ghost:ST(t,o,o.offsetWidth,o.offsetHeight),intervalId:za(100)})}}})(t,e),s=RT(t,e),a=((e,t)=>n=>{e.on((e=>{var o;if(e.intervalId.clear(),e.dragging){if(((e,t,n)=>!S(t)&&t!==n&&!e.dom.isChildOf(t,n)&&e.dom.isEditable(t))(t,(e=>{const t=e.getSel();if(_(t)){const e=t.getRangeAt(0).startContainer;return Zo(e)?e.parentNode:e}return null})(t.selection),e.element)){const r=(e=>{const t=e.cloneNode(!0);return t.removeAttribute("data-mce-selected"),t})(e.element),s=null!==(o=t.getDoc().elementFromPoint(n.clientX,n.clientY))&&void 0!==o?o:t.getBody();t.dispatch("drop",bT(n,s)).isDefaultPrevented()||t.undoManager.transact((()=>{((e,t)=>{const n=e.getParent(t.parentNode,e.isBlock);AT(t),n&&n!==e.getRoot()&&e.isEmpty(n)&&Br(wn(n))})(t.dom,e.element),t.insertContent(t.dom.getOuterHTML(r)),t._selectionOverrides.hideFakeCaret()}))}t.dispatch("dragend",xT(n,t.getBody()))}})),DT(e)})(t,e),i=((e,t)=>n=>NT(e,t,U.some(n)))(t,e);e.on("mousedown",r),e.on("mousemove",s),e.on("mouseup",a),n.bind(o,"mousemove",s),n.bind(o,"mouseup",i),e.on("remove",(()=>{n.unbind(o,"mousemove",s),n.unbind(o,"mouseup",i)})),e.on("keydown",(n=>{n.keyCode===Km.ESC&&NT(t,e,U.none())}))},MT=lr,IT=(e,t)=>Mh(e.getBody(),t),PT=e=>{const t=e.selection,n=e.dom,o=e.getBody(),r=hd(e,o,n.isBlock,(()=>hf(e))),s="sel-"+n.uniqueId(),a="data-mce-selected";let i;const l=e=>e!==o&&(MT(e)||ur(e))&&n.isChildOf(e,o)&&n.isEditable(e.parentNode),c=(n,o,s,a=!0)=>e.dispatch("ShowCaret",{target:o,direction:n,before:s}).isDefaultPrevented()?null:(a&&t.scrollIntoView(o,-1===n),r.show(s,o)),d=e=>Hr(e)||qr(e)||Gr(e),u=e=>d(e.startContainer)||d(e.endContainer),m=t=>{const o=e.schema.getVoidElements(),r=n.createRng(),s=t.startContainer,a=t.startOffset,i=t.endContainer,l=t.endOffset;return Oe(o,s.nodeName.toLowerCase())?0===a?r.setStartBefore(s):r.setStartAfter(s):r.setStart(s,a),Oe(o,i.nodeName.toLowerCase())?0===l?r.setEndBefore(i):r.setEndAfter(i):r.setEnd(i,l),r},p=(r,d)=>{if(!r)return null;if(r.collapsed){if(!u(r)){const e=d?1:-1,t=$d(e,o,r),s=t.getNode(!d);if(_(s)){if(yd(s))return c(e,s,!!d&&!t.isAtEnd(),!1);if(Ur(s)&&lr(s.nextSibling)){const e=n.createRng();return e.setStart(s,0),e.setEnd(s,0),e}}const a=t.getNode(d);if(_(a)){if(yd(a))return c(e,a,!d&&!t.isAtEnd(),!1);if(Ur(a)&&lr(a.previousSibling)){const e=n.createRng();return e.setStart(a,1),e.setEnd(a,1),e}}}return null}let m=r.startContainer,p=r.startOffset;const f=r.endOffset;if(Zo(m)&&0===p&&MT(m.parentNode)&&(m=m.parentNode,p=n.nodeIndex(m),m=m.parentNode),!Vo(m))return null;if(f===p+1&&m===r.endContainer){const o=m.childNodes[p];if(l(o))return(o=>{const r=o.cloneNode(!0),l=e.dispatch("ObjectSelected",{target:o,targetClone:r});if(l.isDefaultPrevented())return null;const c=((o,r)=>{const a=wn(e.getBody()),i=e.getDoc(),l=no(a,"#"+s).getOrThunk((()=>{const e=bn('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',i);return en(e,"id",s),yo(a,e),e})),c=n.createRng();Co(l),wo(l,[xn(fr,i),wn(r),xn(fr,i)]),c.setStart(l.dom.firstChild,1),c.setEnd(l.dom.lastChild,0),co(l,{top:n.getPos(o,e.getBody()).y+"px"}),Gp(l);const d=t.getSel();return d&&(d.removeAllRanges(),d.addRange(c)),c})(o,l.targetClone),d=wn(o);return Y(zo(wn(e.getBody()),"*[data-mce-selected]"),(e=>{En(d,e)||sn(e,a)})),n.getAttrib(o,a)||o.setAttribute(a,"1"),i=o,g(),c})(o)}return null},f=()=>{i&&i.removeAttribute(a),no(wn(e.getBody()),"#"+s).each(So),i=null},g=()=>{r.hide()};return _x(e)||(e.on("click",(t=>{n.isEditable(t.target)||(t.preventDefault(),e.focus())})),e.on("blur NewBlock",f),e.on("ResizeWindow FullscreenStateChanged",r.reposition),e.on("tap",(t=>{const n=t.target,o=IT(e,n);MT(o)?(t.preventDefault(),Zw(e,o).each(p)):l(n)&&Zw(e,n).each(p)}),!0),e.on("mousedown",(r=>{const s=r.target;if(s!==o&&"HTML"!==s.nodeName&&!n.isChildOf(s,o))return;if(!((e,t,n)=>{const o=wn(e.getBody()),r=e.inline?o:wn(An(o).dom.documentElement),s=((e,t,n,o)=>{const r=(e=>e.dom.getBoundingClientRect())(t);return{x:n-(e?r.left+t.dom.clientLeft+ow(t):0),y:o-(e?r.top+t.dom.clientTop+nw(t):0)}})(e.inline,r,t,n);return((e,t,n)=>{const o=ew(e),r=tw(e);return t>=0&&n>=0&&t<=o&&n<=r})(r,s.x,s.y)})(e,r.clientX,r.clientY))return;f(),g();const a=IT(e,s);MT(a)?(r.preventDefault(),Zw(e,a).each(p)):pT(o,r.clientX,r.clientY).each((n=>{var o;r.preventDefault(),(o=c(1,n.node,n.position===iT.Before,!1))&&t.setRng(o),Vo(a)?a.focus():e.getBody().focus()}))})),e.on("keypress",(e=>{Km.modifierPressed(e)||MT(t.getNode())&&e.preventDefault()})),e.on("GetSelectionRange",(e=>{let t=e.range;if(i){if(!i.parentNode)return void(i=null);t=t.cloneRange(),t.selectNode(i),e.range=t}})),e.on("SetSelectionRange",(e=>{e.range=m(e.range);const t=p(e.range,e.forward);t&&(e.range=t)})),e.on("AfterSetSelectionRange",(e=>{const t=e.range,o=t.startContainer.parentElement;var r;u(t)||Vo(r=o)&&"mcepastebin"===r.id||g(),(e=>_(e)&&n.hasClass(e,"mce-offscreen-selection"))(o)||f()})),(e=>{BT(e),Ec(e)&&(e=>{const t=t=>{if(!t.isDefaultPrevented()){const n=t.dataTransfer;n&&(q(n.types,"Files")||n.files.length>0)&&(t.preventDefault(),"drop"===t.type&&cw(e,"Dropped file type is not supported"))}},n=n=>{df(e,n.target)&&t(n)},o=()=>{const o=Ra.DOM,r=e.dom,s=document,a=e.inline?e.getBody():e.getDoc(),i=["drop","dragover"];Y(i,(e=>{o.bind(s,e,n),r.bind(a,e,t)})),e.on("remove",(()=>{Y(i,(e=>{o.unbind(s,e,n),r.unbind(a,e,t)}))}))};e.on("init",(()=>{sf.setEditorTimeout(e,o,0)}))})(e)})(e),(e=>{const t=Ua((()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const t=e.selection.getRng();if(t.collapsed){const n=eC(e,t,!1);e.selection.setRng(n)}}}),0);e.on("focus",(()=>{t.throttle()})),e.on("blur",(()=>{t.cancel()}))})(e),(e=>{e.on("init",(()=>{e.on("focusin",(t=>{const n=t.target;if(ur(n)){const t=Mh(e.getBody(),n),o=lr(t)?t:n;e.selection.getNode()!==o&&Zw(e,o).each((t=>e.selection.setRng(t)))}}))}))})(e)),{showCaret:c,showBlockCaretContainer:e=>{e.hasAttribute("data-mce-caret")&&(Kr(e),t.scrollIntoView(e))},hideFakeCaret:g,destroy:()=>{r.destroy(),i=null}}},LT=(e,t)=>{let n=t;for(let o=e.previousSibling;Zo(o);o=o.previousSibling)n+=o.data.length;return n},FT=(e,t,n,o,r)=>{if(Zo(n)&&(o<0||o>n.data.length))return[];const s=r&&Zo(n)?[LT(n,o)]:[o];let a=n;for(;a!==t&&a.parentNode;)s.push(e.nodeIndex(a,r)),a=a.parentNode;return a===t?s.reverse():[]},zT=(e,t,n,o,r,s,a=!1)=>({start:FT(e,t,n,o,a),end:FT(e,t,r,s,a)}),jT=(e,t)=>{const n=t.slice(),o=n.pop();return E(o)?ee(n,((e,t)=>e.bind((e=>U.from(e.childNodes[t])))),U.some(e)).bind((e=>Zo(e)&&(o<0||o>e.data.length)?U.none():U.some({node:e,offset:o}))):U.none()},UT=(e,t)=>jT(e,t.start).bind((({node:n,offset:o})=>jT(e,t.end).map((({node:e,offset:t})=>{const r=document.createRange();return r.setStart(n,o),r.setEnd(e,t),r})))),HT=(e,t,n)=>{if(t&&e.isEmpty(t)&&!n(t)){const o=t.parentNode;e.remove(t),HT(e,o,n)}},$T=(e,t,n,o=!0)=>{const r=t.startContainer.parentNode,s=t.endContainer.parentNode;t.deleteContents(),o&&!n(t.startContainer)&&(Zo(t.startContainer)&&0===t.startContainer.data.length&&e.remove(t.startContainer),Zo(t.endContainer)&&0===t.endContainer.data.length&&e.remove(t.endContainer),HT(e,r,n),r!==s&&HT(e,s,n))},VT=(e,t)=>U.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),WT=(e,t,n)=>{const o=e.dynamicPatternsLookup({text:n,block:t});return r(r({},e),{},{blockPatterns:dl(o).concat(e.blockPatterns),inlinePatterns:ul(o).concat(e.inlinePatterns)})},qT=(e,t,n,o)=>{const r=e.createRng();return r.setStart(t,0),r.setEnd(n,o),r.toString()},GT=(e,t,n)=>{((e,t,n)=>{if(Zo(e)&&0>=e.length)return U.some(Z_(e,0));{const t=ai(ek);return U.from(t.forwards(e,0,tk(e),n)).map((e=>Z_(e.container,0)))}})(t,0,t).each((o=>{const r=o.container;rk(r,n.start.length,t).each((n=>{const o=e.createRng();o.setStart(r,0),o.setEnd(n.container,n.offset),$T(e,o,(e=>e===t))}));const s=wn(r),a=vr(s);/^\s[^\s]/.test(a)&&((e,t)=>{hr.set(e,t)})(s,a.slice(1))}))},KT=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),YT=(e,t)=>{const n=e.createRng();return n.setStartAfter(t.start),n.setEndBefore(t.end),n},XT=(e,t,n)=>{const o=UT(e.getRoot(),n).getOrDie("Unable to resolve path range"),r=o.startContainer,s=o.endContainer,a=0===o.endOffset?s:s.splitText(o.endOffset),i=0===o.startOffset?r:r.splitText(o.startOffset),l=i.parentNode;return{prefix:t,end:a.parentNode.insertBefore(KT(e,t+"-end"),a),start:l.insertBefore(KT(e,t+"-start"),i)}},JT=(e,t,n)=>{HT(e,e.get(t.prefix+"-end"),n),HT(e,e.get(t.prefix+"-start"),n)},QT=e=>0===e.start.length,ZT=(e,t,n,o)=>{const r=t.start;var s;return sk(e,o.container,o.offset,(s=r,(e,t)=>{const n=e.data.substring(0,t),o=n.lastIndexOf(s.charAt(s.length-1)),r=n.lastIndexOf(s);return-1!==r?r+s.length:-1!==o?o+1:-1}),n).bind((o=>{var s,a;const i=null!==(a=null===(s=n.textContent)||void 0===s?void 0:s.indexOf(r))&&void 0!==a?a:-1;if(-1!==i&&o.offset>=i+r.length){const t=e.createRng();return t.setStart(o.container,o.offset-r.length),t.setEnd(o.container,o.offset),U.some(t)}{const s=o.offset-r.length;return ok(o.container,s,n).map((t=>{const n=e.createRng();return n.setStart(t.container,t.offset),n.setEnd(o.container,o.offset),n})).filter((e=>e.toString()===r)).orThunk((()=>ZT(e,t,n,Z_(o.container,0))))}}))},eA=(e,t,n,o)=>{const r=e.dom,s=r.getRoot(),a=n.pattern,i=n.position.container,l=n.position.offset;return ok(i,l-n.pattern.end.length,t).bind((c=>{const d=zT(r,s,c.container,c.offset,i,l,o);if(QT(a))return U.some({matches:[{pattern:a,startRng:d,endRng:d}],position:c});{const i=tA(e,n.remainingPatterns,c.container,c.offset,t,o),l=i.getOr({matches:[],position:c}),u=l.position,m=((e,t,n,o,r,s=!1)=>{if(0===t.start.length&&!s){const t=e.createRng();return t.setStart(n,o),t.setEnd(n,o),U.some(t)}return nk(n,o,r).bind((n=>ZT(e,t,r,n).bind((e=>{var t;if(s){if(e.endContainer===n.container&&e.endOffset===n.offset)return U.none();if(0===n.offset&&(null===(t=e.endContainer.textContent)||void 0===t?void 0:t.length)===e.endOffset)return U.none()}return U.some(e)}))))})(r,a,u.container,u.offset,t,i.isNone());return m.map((e=>{const t=((e,t,n,o=!1)=>zT(e,t,n.startContainer,n.startOffset,n.endContainer,n.endOffset,o))(r,s,e,o);return{matches:l.matches.concat([{pattern:a,startRng:t,endRng:d}]),position:Z_(e.startContainer,e.startOffset)}}))}}))},tA=(e,t,n,o,r,s)=>{const a=e.dom;return nk(n,o,a.getRoot()).bind((i=>{const l=qT(a,r,n,o);for(let a=0;a<t.length;a++){const c=t[a];if(!Ge(l,c.end))continue;const d=t.slice();d.splice(a,1);const u=eA(e,r,{pattern:c,remainingPatterns:d,position:i},s);if(u.isNone()&&o>0)return tA(e,t,n,o-1,r,s);if(u.isSome())return u}return U.none()}))},nA=(e,t,n)=>{e.selection.setRng(n),"inline-format"===t.type?Y(t.format,(t=>{e.formatter.apply(t)})):e.execCommand(t.cmd,!1,t.value)},oA=(e,t,n,o,r,s)=>{var a;return((e,t)=>{const n=ae(e,(e=>G(t,(t=>e.pattern.start===t.pattern.start&&e.pattern.end===t.pattern.end))));return e.length===t.length?n?e:t:e.length>t.length?e:t})(tA(e,r.inlinePatterns,n,o,t,s).fold((()=>[]),(e=>e.matches)),tA(e,(a=r.inlinePatterns,de(a,((e,t)=>t.end.length-e.end.length))),n,o,t,s).fold((()=>[]),(e=>e.matches)))},rA=(e,t)=>{if(0===t.length)return;const n=e.dom,o=e.selection.getBookmark(),s=((e,t)=>{const n=ti("mce_textpattern"),o=Z(t,((t,o)=>{const s=XT(e,n+`_end${t.length}`,o.endRng);return t.concat([r(r({},o),{},{endMarker:s})])}),[]);return Z(o,((t,s)=>{const a=o.length-t.length-1,i=QT(s.pattern)?s.endMarker:XT(e,n+`_start${a}`,s.startRng);return t.concat([r(r({},s),{},{startMarker:i})])}),[])})(n,t);Y(s,(t=>{const o=n.getParent(t.startMarker.start,n.isBlock),r=e=>e===o;QT(t.pattern)?((e,t,n,o)=>{const r=YT(e.dom,n);$T(e.dom,r,o),nA(e,t,r)})(e,t.pattern,t.endMarker,r):((e,t,n,o,r)=>{const s=e.dom,a=YT(s,o),i=YT(s,n);$T(s,i,r),$T(s,a,r);const l={prefix:n.prefix,start:n.end,end:o.start},c=YT(s,l);nA(e,t,c)})(e,t.pattern,t.startMarker,t.endMarker,r),JT(n,t.endMarker,r),JT(n,t.startMarker,r)})),e.selection.moveToBookmark(o)},sA=(e,t)=>{const n=e.selection.getRng();return VT(e,n).map((o=>{var r;const s=Math.max(0,n.startOffset),a=WT(t,o,null!==(r=o.textContent)&&void 0!==r?r:""),i=oA(e,o,n.startContainer,s,a,!0),l=((e,t,n,o)=>{var r;const s=e.dom,a=Ol(e);if(!s.is(t,a))return[];const i=null!==(r=t.textContent)&&void 0!==r?r:"";return((e,t)=>{const n=(e=>de(e,((e,t)=>t.start.length-e.start.length)))(e),o=t.replace(fr," ");return ne(n,(e=>0===t.indexOf(e.start)||0===o.indexOf(e.start)))})(n.blockPatterns,i).map((e=>Lt.trim(i).length===e.start.length?[]:[{pattern:e,range:zT(s,s.getRoot(),t,0,t,0,!0)}])).getOr([])})(e,o,a);return(l.length>0||i.length>0)&&(e.undoManager.add(),e.undoManager.extra((()=>{e.execCommand("mceInsertNewLine")}),(()=>{e.insertContent(pr),rA(e,i),((e,t)=>{if(0===t.length)return;const n=e.selection.getBookmark();Y(t,(t=>((e,t)=>{const n=e.dom,o=t.pattern,r=UT(n.getRoot(),t.range).getOrDie("Unable to resolve path range");return VT(e,r).each((t=>{"block-format"===o.type?((e,t)=>{const n=t.get(e);return y(n)&&me(n).exists((e=>Oe(e,"block")))})(o.format,e.formatter)&&e.undoManager.transact((()=>{GT(e.dom,t,o),e.formatter.apply(o.format)})):"block-command"===o.type&&e.undoManager.transact((()=>{GT(e.dom,t,o),e.execCommand(o.cmd,!1,o.value)}))})),!0})(e,t))),e.selection.moveToBookmark(n)})(e,l);const t=e.selection.getRng(),n=nk(t.startContainer,t.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),n.each((t=>{const n=t.container;n.data.charAt(t.offset-1)===pr&&(n.deleteData(t.offset-1,1),HT(e.dom,n.parentNode,(t=>t===e.dom.getRoot())))}))})),!0)})).getOr(!1)},aA=(e,t,n)=>{for(let o=0;o<e.length;o++)if(n(e[o],t))return!0;return!1},iA=e=>{const t=Lt.each,n=Km.BACKSPACE,o=Km.DELETE,r=e.dom,s=e.selection,a=e.parser,i=Bt.browser,l=i.isFirefox(),c=i.isChromium()||i.isSafari(),d=Bt.deviceType.isiPhone()||Bt.deviceType.isiPad(),u=Bt.os.isMacOS()||Bt.os.isiOS(),m=(t,n)=>{try{e.getDoc().execCommand(t,!1,String(n))}catch(e){}},p=e=>e.isDefaultPrevented(),f=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},g=()=>{e.inline||r.bind(e.getDoc(),"mousedown mouseup",(t=>{let n;if(t.target===e.getDoc().documentElement)if(n=s.getRng(),e.getBody().focus(),"mousedown"===t.type){if(Hr(n.startContainer))return;s.placeCaretAt(t.clientX,t.clientY)}else s.setRng(n)}))},h=()=>{Range.prototype.getClientRects||e.on("mousedown",(t=>{if(!p(t)&&"HTML"===t.target.nodeName){const t=e.getBody();t.blur(),sf.setEditorTimeout(e,(()=>{t.focus()}))}}))},v=()=>{const t=Ac(e);e.on("click",(n=>{const o=n.target;/^(IMG|HR)$/.test(o.nodeName)&&r.isEditable(o.parentNode)&&(n.preventDefault(),e.selection.select(o),e.nodeChanged()),"A"===o.nodeName&&r.hasClass(o,t)&&0===o.childNodes.length&&r.isEditable(o.parentNode)&&(n.preventDefault(),s.select(o))}))},b=()=>{e.on("keydown",(e=>{if(!p(e)&&e.keyCode===n&&s.isCollapsed()&&0===s.getRng().startOffset){const t=s.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}return!0}))},y=()=>{Cc(e)||e.on("BeforeExecCommand mousedown",(()=>{m("StyleWithCSS",!1),m("enableInlineTableEditing",!1),ec(e)||m("enableObjectResizing",!1)}))},x=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},w=()=>{e.inline||e.on("keydown",(()=>{document.activeElement===document.body&&e.getWin().focus()}))},C=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",(t=>{let n;"HTML"===t.target.nodeName&&(n=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(n),e.selection.normalize(),e.nodeChanged())})))},S=()=>{u&&e.on("keydown",(t=>{!Km.metaKeyPressed(t)||t.shiftKey||37!==t.keyCode&&39!==t.keyCode||(t.preventDefault(),e.selection.getSel().modify("move",37===t.keyCode?"backward":"forward","lineboundary"))}))},_=()=>{e.on("click",(e=>{let t=e.target;do{if("A"===t.tagName)return void e.preventDefault()}while(t=t.parentNode)})),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},k=()=>{e.on("init",(()=>{e.dom.bind(e.getBody(),"submit",(e=>{e.preventDefault()}))}))},E=T;return _x(e)?(c&&(g(),v(),k(),f(),d&&(w(),C(),_())),l&&(h(),y(),x(),S())):(e.on("keydown",(t=>{if(p(t)||t.keyCode!==Km.BACKSPACE)return;let n=s.getRng();const o=n.startContainer,a=n.startOffset,i=r.getRoot();let l=o;if(n.collapsed&&0===a){for(;l.parentNode&&l.parentNode.firstChild===l&&l.parentNode!==i;)l=l.parentNode;"BLOCKQUOTE"===l.nodeName&&(e.formatter.toggle("blockquote",void 0,l),n=r.createRng(),n.setStart(o,0),n.setEnd(o,0),s.setRng(n))}})),(()=>{const t=e=>{const t=r.create("body"),n=e.cloneContents();return t.appendChild(n),s.serializer.serialize(t,{format:"html"})};e.on("keydown",(s=>{const a=s.keyCode;if(!p(s)&&(a===o||a===n)&&e.selection.isEditable()){const n=e.selection.isCollapsed(),o=e.getBody();if(n&&!r.isEmpty(o))return;if(!n&&!(n=>{const o=t(n),s=r.createRng();return s.selectNode(e.getBody()),o===t(s)})(e.selection.getRng()))return;s.preventDefault(),e.setContent(""),o.firstChild&&r.isBlock(o.firstChild)?e.selection.setCursorLocation(o.firstChild,0):e.selection.setCursorLocation(o,0),e.nodeChanged()}}))})(),Bt.windowsPhone||e.on("keyup focusin mouseup",(t=>{Km.modifierPressed(t)||(e=>{const t=e.getBody(),n=e.selection.getRng();return n.startContainer===n.endContainer&&n.startContainer===t&&0===n.startOffset&&n.endOffset===t.childNodes.length})(e)||s.normalize()}),!0),c&&(g(),v(),e.on("init",(()=>{m("DefaultParagraphSeparator",Ol(e))})),k(),b(),a.addNodeFilter("br",(e=>{let t=e.length;for(;t--;)"Apple-interchange-newline"===e[t].attr("class")&&e[t].remove()})),d?(w(),C(),_()):f()),l&&(e.on("keydown",(t=>{if(!p(t)&&t.keyCode===n){if(!e.getBody().getElementsByTagName("hr").length)return;if(s.isCollapsed()&&0===s.getRng().startOffset){const e=s.getNode(),n=e.previousSibling;if("HR"===e.nodeName)return r.remove(e),void t.preventDefault();n&&n.nodeName&&"hr"===n.nodeName.toLowerCase()&&(r.remove(n),t.preventDefault())}}})),h(),(()=>{const n=()=>{const n=r.getAttribs(s.getStart().cloneNode(!1));return()=>{const o=s.getStart();o!==e.getBody()&&(r.setAttrib(o,"style",null),t(n,(e=>{o.setAttributeNode(e.cloneNode(!0))})))}},o=()=>!s.isCollapsed()&&r.getParent(s.getStart(),r.isBlock)!==r.getParent(s.getEnd(),r.isBlock);e.on("keypress",(t=>{let r;return!(!(p(t)||8!==t.keyCode&&46!==t.keyCode)&&o()&&(r=n(),e.getDoc().execCommand("delete",!1),r(),t.preventDefault(),1))})),r.bind(e.getDoc(),"cut",(t=>{if(!p(t)&&o()){const t=n();sf.setEditorTimeout(e,(()=>{t()}))}}))})(),y(),e.on("SetContent ExecCommand",(e=>{"setcontent"!==e.type&&"mceInsertLink"!==e.command||t(r.select("a:not([data-mce-block])"),(e=>{var t;let n=e.parentNode;const o=r.getRoot();if((null==n?void 0:n.lastChild)===e){for(;n&&!r.isBlock(n);){if((null===(t=n.parentNode)||void 0===t?void 0:t.lastChild)!==n||n===o)return;n=n.parentNode}r.add(n,"br",{"data-mce-bogus":1})}}))})),x(),S(),b())),{refreshContentEditable:E,isHidden:()=>{if(!l||e.removed)return!1;const t=e.selection.getSel();return!t||!t.rangeCount||0===t.rangeCount}}},lA=Ra.DOM,cA=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,dA=e=>Se(e,(e=>!1===C(e))),uA=e=>{const t=e.options.get,n=e.editorUpload.blobCache;return dA({allow_conditional_comments:t("allow_conditional_comments"),allow_html_data_urls:t("allow_html_data_urls"),allow_svg_data_urls:t("allow_svg_data_urls"),allow_html_in_named_anchor:t("allow_html_in_named_anchor"),allow_script_urls:t("allow_script_urls"),allow_unsafe_link_target:t("allow_unsafe_link_target"),convert_fonts_to_spans:t("convert_fonts_to_spans"),fix_list_elements:t("fix_list_elements"),font_size_legacy_values:t("font_size_legacy_values"),forced_root_block:t("forced_root_block"),forced_root_block_attrs:t("forced_root_block_attrs"),preserve_cdata:t("preserve_cdata"),remove_trailing_brs:t("remove_trailing_brs"),inline_styles:t("inline_styles"),root_name:cA(e),sanitize:t("xss_sanitization"),validate:!0,blob_cache:n,document:e.getDoc()})},mA=e=>{const t=e.options.get;return dA({custom_elements:t("custom_elements"),extended_valid_elements:t("extended_valid_elements"),invalid_elements:t("invalid_elements"),invalid_styles:t("invalid_styles"),schema:t("schema"),valid_children:t("valid_children"),valid_classes:t("valid_classes"),valid_elements:t("valid_elements"),valid_styles:t("valid_styles"),verify_html:t("verify_html"),padd_empty_block_inline_children:t("format_empty_lines")})},pA=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,fA=e=>{const t=pA(e),n=Jl(e),o=e.contentCSS,r=()=>{t.unloadAll(o),e.inline||e.ui.styleSheetLoader.unloadAll(n)},s=()=>{e.removed?r():e.on("remove",r)};if(e.contentStyles.length>0){let t="";Lt.each(e.contentStyles,(e=>{t+=e+"\r\n"})),e.dom.addStyle(t)}const a=Promise.all(((e,t,n)=>{const o=[pA(e).loadAll(t)];return e.inline?o:o.concat([e.ui.styleSheetLoader.loadAll(n)])})(e,o,n)).then(s).catch(s),i=Xl(e);return i&&((e,t)=>{const n=wn(e.getBody()),o=Gn(qn(n)),r=yn("style");en(r,"type","text/css"),yo(r,xn(t)),yo(o,r),e.on("remove",(()=>{So(r)}))})(e,i),a},gA=e=>{!0!==e.removed&&((e=>{_x(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})})(e),(e=>{e.bindPendingEventDelegates(),e.initialized=!0,(e=>{e.dispatch("Init")})(e),e.focus(!0),(e=>{const t=e.dom.getRoot();e.inline||Yu(e)&&e.selection.getStart(!0)!==t||fu(t).each((t=>{const n=t.getNode(),o=Xo(n)?fu(n).getOr(t):t;e.selection.setRng(o.toRange())}))})(e),e.nodeChanged({initial:!0});const t=Dc(e);k(t)&&t.call(e,e),(e=>{const t=Mc(e);t&&sf.setEditorTimeout(e,(()=>{let n;n=!0===t?e:e.editorManager.get(t),n&&!n.destroyed&&(n.focus(),n.selection.scrollIntoView())}),100)})(e)})(e))},hA=e=>{const t=e.getElement();let n=e.getDoc();e.inline&&(lA.addClass(t,"mce-content-body"),e.contentDocument=n=document,e.contentWindow=window,e.bodyElement=t,e.contentAreaContainer=t);const o=e.getBody();o.disabled=!0,e.readonly=Cc(e),e.readonly||(e.inline&&"static"===lA.getStyle(o,"position",!0)&&(o.style.position="relative"),o.contentEditable="true"),o.disabled=!1,e.editorUpload=xw(e),e.schema=da(mA(e)),e.dom=Ra(n,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:$l(e),referrerPolicy:Vl(e),onSetAttrib:t=>{e.dispatch("SetAttrib",t)}}),e.parser=(e=>{const t=Wy(uA(e),e.schema);return t.addAttributeFilter("src,href,style,tabindex",((t,n)=>{const o=e.dom,r="data-mce-"+n;let s=t.length;for(;s--;){const a=t[s];let i=a.attr(n);if(i&&!a.attr(r)){if(0===i.indexOf("data:")||0===i.indexOf("blob:"))continue;"style"===n?(i=o.serializeStyle(o.parseStyle(i),a.name),i.length||(i=null),a.attr(r,i),a.attr(n,i)):"tabindex"===n?(a.attr(r,i),a.attr(n,null)):a.attr(r,e.convertURL(i,n,a.name))}}})),t.addNodeFilter("script",(e=>{let t=e.length;for(;t--;){const n=e[t],o=n.attr("type")||"no/type";0!==o.indexOf("mce-")&&n.attr("type","mce-"+o)}})),Zc(e)&&t.addNodeFilter("#cdata",(t=>{var n;let o=t.length;for(;o--;){const r=t[o];r.type=8,r.name="#comment",r.value="[CDATA["+e.dom.encode(null!==(n=r.value)&&void 0!==n?n:"")+"]]"}})),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",(t=>{let n=t.length;const o=e.schema.getNonEmptyElements();for(;n--;){const e=t[n];e.isEmpty(o)&&0===e.getAll("br").length&&e.append(new Df("br",1))}})),t})(e),e.serializer=Ix((e=>{const t=e.options.get;return r(r(r({},uA(e)),mA(e)),dA({url_converter:t("url_converter"),url_converter_scope:t("url_converter_scope"),element_format:t("element_format"),entities:t("entities"),entity_encoding:t("entity_encoding"),indent:t("indent"),indent_after:t("indent_after"),indent_before:t("indent_before")}))})(e),e),e.selection=Dx(e.dom,e.getWin(),e.serializer,e),e.annotator=zm(e),e.formatter=Nw(e),e.undoManager=Bw(e),e._nodeChangeDispatcher=new bO(e),e._selectionOverrides=PT(e),(e=>{const t=ja(),n=Ba(!1),o=Ha((t=>{e.dispatch("longpress",r(r({},t),{},{type:"longpress"})),n.set(!0)}),400);e.on("touchstart",(e=>{o_(e).each((r=>{o.cancel();const s={x:r.clientX,y:r.clientY,target:e.target};o.throttle(e),n.set(!1),t.set(s)}))}),!0),e.on("touchmove",(r=>{o.cancel(),o_(r).each((o=>{t.on((r=>{((e,t)=>{const n=Math.abs(e.clientX-t.x),o=Math.abs(e.clientY-t.y);return n>5||o>5})(o,r)&&(t.clear(),n.set(!1),e.dispatch("longpresscancel"))}))}))}),!0),e.on("touchend touchcancel",(s=>{o.cancel(),"touchcancel"!==s.type&&t.get().filter((e=>e.target.isEqualNode(s.target))).each((()=>{n.get()?s.preventDefault():e.dispatch("tap",r(r({},s),{},{type:"tap"}))}))}),!0)})(e),(e=>{(e=>{e.on("click",(t=>{e.dom.getParent(t.target,"details")&&t.preventDefault()}))})(e),(e=>{e.parser.addNodeFilter("details",(e=>{Y(e,(e=>{e.attr("data-mce-open",e.attr("open")),e.attr("open","open")}))})),e.serializer.addNodeFilter("details",(e=>{Y(e,(e=>{const t=e.attr("data-mce-open");e.attr("open",h(t)?t:null),e.attr("data-mce-open",null)}))}))})(e)})(e),(e=>{const t="contenteditable",n=" "+Lt.trim(Jc(e))+" ",o=" "+Lt.trim(Xc(e))+" ",r=d_(n),s=d_(o),a=Qc(e);a.length>0&&e.on("BeforeSetContent",(t=>{((e,t,n)=>{let o=t.length,r=n.content;if("raw"!==n.format){for(;o--;)r=r.replace(t[o],u_(e,r,Xc(e)));n.content=r}})(e,a,t)})),e.parser.addAttributeFilter("class",(e=>{let n=e.length;for(;n--;){const o=e[n];r(o)?o.attr(t,"true"):s(o)&&o.attr(t,"false")}})),e.serializer.addAttributeFilter(t,(e=>{let n=e.length;for(;n--;){const o=e[n];(r(o)||s(o))&&(a.length>0&&o.attr("data-mce-content")?(o.name="#text",o.type=3,o.raw=!0,o.value=o.attr("data-mce-content")):o.attr(t,null))}}))})(e),_x(e)||((e=>{e.on("mousedown",(t=>{t.detail>=3&&(t.preventDefault(),aT(e))}))})(e),(e=>{(e=>{const t=[",",".",";",":","!","?"],n=[32],o=()=>{return t=Kc(e),n=Yc(e),{inlinePatterns:ul(t),blockPatterns:dl(t),dynamicPatternsLookup:n};var t,n},r=()=>(e=>e.options.isSet("text_patterns_lookup"))(e);e.on("keydown",(t=>{if(13===t.keyCode&&!Km.modifierPressed(t)&&e.selection.isCollapsed()){const n=o();(n.inlinePatterns.length>0||n.blockPatterns.length>0||r())&&sA(e,n)&&t.preventDefault()}}),!0);const s=()=>{if(e.selection.isCollapsed()){const t=o();(t.inlinePatterns.length>0||r())&&((e,t)=>{const n=e.selection.getRng();VT(e,n).map((o=>{const r=Math.max(0,n.startOffset-1),s=qT(e.dom,o,n.startContainer,r),a=WT(t,o,s),i=oA(e,o,n.startContainer,r,a,!1);i.length>0&&e.undoManager.transact((()=>{rA(e,i)}))}))})(e,t)}};e.on("keyup",(e=>{aA(n,e,((e,t)=>e===t.keyCode&&!Km.modifierPressed(t)))&&s()})),e.on("keypress",(n=>{aA(t,n,((e,t)=>e.charCodeAt(0)===t.charCode))&&sf.setEditorTimeout(e,s)}))})(e)})(e));const s=vO(e);n_(e,s),(e=>{e.on("NodeChange",M(l_,e))})(e),(e=>{var t;const n=e.dom,o=Ol(e),r=null!==(t=nc(e))&&void 0!==t?t:"",s=(t,a)=>{if((e=>{if(Pw(e)){const t=e.keyCode;return!Lw(e)&&(Km.metaKeyPressed(e)||e.altKey||t>=112&&t<=123||q(Mw,t))}return!1})(t))return;const i=e.getBody(),l=!(e=>Pw(e)&&!(Lw(e)||"keyup"===e.type&&229===e.keyCode))(t)&&((e,t,n)=>{if(gs(wn(t),!1)){const o=t.firstElementChild;return!o||!e.getStyle(t.firstElementChild,"padding-left")&&!e.getStyle(t.firstElementChild,"padding-right")&&n===o.nodeName.toLowerCase()}return!1})(n,i,o);(""!==n.getAttrib(i,Iw)!==l||a)&&(n.setAttrib(i,Iw,l?r:null),n.setAttrib(i,"aria-placeholder",l?r:null),((e,t)=>{e.dispatch("PlaceholderToggle",{state:t})})(e,l),e.on(l?"keydown":"keyup",s),e.off(l?"keyup":"keydown",s))};Qe(r)&&e.on("init",(t=>{s(t,!0),e.on("change SetContent ExecCommand",s),e.on("paste",(t=>sf.setEditorTimeout(e,(()=>s(t)))))}))})(e),ZO(e);const a=(e=>{const t=e;return(e=>Ee(e.plugins,"rtc").bind((e=>U.from(e.setup))))(e).fold((()=>(t.rtcInstance=Sx(e),U.none())),(e=>(t.rtcInstance=(()=>{const e=N(null),t=N("");return{init:{bindEvents:T},undoManager:{beforeChange:T,add:e,undo:e,redo:e,clear:T,reset:T,hasUndo:z,hasRedo:z,transact:e,ignore:T,extra:T},formatter:{match:z,matchAll:N([]),matchNode:N(void 0),canApply:z,closest:t,apply:T,remove:T,toggle:T,formatChanged:N({unbind:T})},editor:{getContent:t,setContent:N({content:"",html:""}),insertContent:N(""),addVisual:T},selection:{getContent:t},autocompleter:{addDecoration:T,removeDecoration:T},raw:{getModel:N(U.none())}}})(),U.some((()=>e().then((e=>(t.rtcInstance=(e=>{const t=e=>v(e)?e:{},{init:n,undoManager:o,formatter:r,editor:s,selection:a,autocompleter:i,raw:l}=e;return{init:{bindEvents:n.bindEvents},undoManager:{beforeChange:o.beforeChange,add:o.add,undo:o.undo,redo:o.redo,clear:o.clear,reset:o.reset,hasUndo:o.hasUndo,hasRedo:o.hasRedo,transact:(e,t,n)=>o.transact(n),ignore:(e,t)=>o.ignore(t),extra:(e,t,n,r)=>o.extra(n,r)},formatter:{match:(e,n,o,s)=>r.match(e,t(n),s),matchAll:r.matchAll,matchNode:r.matchNode,canApply:e=>r.canApply(e),closest:e=>r.closest(e),apply:(e,n,o)=>r.apply(e,t(n)),remove:(e,n,o,s)=>r.remove(e,t(n)),toggle:(e,n,o)=>r.toggle(e,t(n)),formatChanged:(e,t,n,o,s)=>r.formatChanged(t,n,o,s)},editor:{getContent:e=>s.getContent(e),setContent:(e,t)=>({content:s.setContent(e,t),html:""}),insertContent:(e,t)=>(s.insertContent(e),""),addVisual:s.addVisual},selection:{getContent:(e,t)=>a.getContent(t)},autocompleter:{addDecoration:i.addDecoration,removeDecoration:i.removeDecoration},raw:{getModel:()=>U.some(l.getRawModel())}}})(e),e.rtc.isRemote))))))))})(e);(e=>{const t=e.getDoc(),n=e.getBody();(e=>{e.dispatch("PreInit")})(e),Ic(e)||(t.body.spellcheck=!1,lA.setAttrib(n,"spellcheck","false")),e.quirks=iA(e),(e=>{e.dispatch("PostRender")})(e);const o=Ql(e);void 0!==o&&(n.dir=o);const r=Pc(e);r&&e.on("BeforeSetContent",(e=>{Lt.each(r,(t=>{e.content=e.content.replace(t,(e=>"\x3c!--mce:protected "+escape(e)+"--\x3e"))}))})),e.on("SetContent",(()=>{e.addVisual(e.getBody())})),e.on("compositionstart compositionend",(t=>{e.composing="compositionstart"===t.type}))})(e),a.fold((()=>{fA(e).then((()=>gA(e)))}),(t=>{e.setProgressState(!0),fA(e).then((()=>{t().then((t=>{e.setProgressState(!1),gA(e),Ox(e)}),(t=>{e.notificationManager.open({type:"error",text:String(t)}),gA(e),Ox(e)}))}))}))},vA=j,bA=Ra.DOM,yA=Ra.DOM,xA=(e,t)=>({editorContainer:e,iframeContainer:t,api:{}}),wA=e=>{const t=e.getElement();return e.inline?xA(null):(e=>{const t=yA.create("div");return yA.insertAfter(t,e),xA(t,t)})(t)},CA=async e=>{e.dispatch("ScriptsLoaded"),(e=>{const t=Lt.trim(Ll(e)),n=e.ui.registry.getAll().icons,o=r(r({},Xx.get("default").icons),Xx.get(t).icons);be(o,((t,o)=>{Oe(n,o)||e.ui.registry.addIcon(o,t)}))})(e),(e=>{const t=sc(e);if(h(t)){const n=aw.get(t);e.theme=n(e,aw.urls[t])||{},k(e.theme.init)&&e.theme.init(e,aw.urls[t]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}})(e),(e=>{const t=ic(e),n=Jx.get(t);e.model=n(e,Jx.urls[t])})(e),(e=>{const t=[];Y(_c(e),(n=>{((e,t,n)=>{const o=sw.get(n),r=sw.urls[n]||e.documentBaseUrl.replace(/\/$/,"");if(n=Lt.trim(n),o&&-1===Lt.inArray(t,n)){if(e.plugins[n])return;try{const s=o(e,r)||{};e.plugins[n]=s,k(s.init)&&(s.init(e,r),t.push(n))}catch(t){((e,t,n)=>{const o=La.translate(["Failed to initialize plugin: {0}",t]);Hm(e,"PluginLoadError",{message:o}),mw(o,n),cw(e,o)})(e,n,t)}}})(e,t,(e=>e.replace(/^\-/,""))(n))}))})(e);const t=await(e=>{const t=e.getElement();return e.orgDisplay=t.style.display,h(sc(e))?(e=>{const t=e.theme.renderUI;return t?t():wA(e)})(e):k(sc(e))?(e=>{const t=e.getElement(),n=sc(e)(e,t);return n.editorContainer.nodeType&&(n.editorContainer.id=n.editorContainer.id||e.id+"_parent"),n.iframeContainer&&n.iframeContainer.nodeType&&(n.iframeContainer.id=n.iframeContainer.id||e.id+"_iframecontainer"),n.height=n.iframeHeight?n.iframeHeight:t.offsetHeight,n})(e):wA(e)})(e);((e,t)=>{const n={show:U.from(t.show).getOr(T),hide:U.from(t.hide).getOr(T),isEnabled:U.from(t.isEnabled).getOr(j),setEnabled:n=>{e.mode.isReadOnly()||U.from(t.setEnabled).each((e=>e(n)))}};e.ui=r(r({},e.ui),n)})(e,U.from(t.api).getOr({})),e.editorContainer=t.editorContainer,(e=>{e.contentCSS=e.contentCSS.concat((e=>pw(e,Yl(e)))(e),(e=>pw(e,Jl(e)))(e))})(e),e.inline?hA(e):((e,t)=>{((e,t)=>{const n=e.translate("Rich Text Area"),o=on(wn(e.getElement()),"tabindex").bind(et),r=((e,t,n,o)=>{const r=yn("iframe");return o.each((e=>en(r,"tabindex",e))),tn(r,n),tn(r,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t}),pn(r,"tox-edit-area__iframe"),r})(e.id,n,xl(e),o).dom;r.onload=()=>{r.onload=null,e.dispatch("load")},e.contentAreaContainer=t.iframeContainer,e.iframeElement=r,e.iframeHTML=(e=>{let t=wl(e)+"<html><head>";Cl(e)!==e.documentBaseUrl&&(t+='<base href="'+e.documentBaseURI.getURI()+'" />'),t+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const n=Sl(e),o=_l(e),r=e.translate(Rc(e));return kl(e)&&(t+='<meta http-equiv="Content-Security-Policy" content="'+kl(e)+'" />'),t+=`</head><body id="${n}" class="mce-content-body ${o}" data-id="${e.id}" aria-label="${r}"><br></body></html>`,t})(e),bA.add(t.iframeContainer,r)})(e,t),t.editorContainer&&(t.editorContainer.style.display=e.orgDisplay,e.hidden=bA.isHidden(t.editorContainer)),e.getElement().style.display="none",bA.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,(e=>{const t=e.iframeElement,n=(o=wn(t),To(o,"load",vA,(()=>{n.unbind(),e.contentDocument=t.contentDocument,hA(e)})));var o;if(Bt.browser.isFirefox()){const t=e.getDoc();t.open(),t.write(e.iframeHTML),t.close()}else t.srcdoc=e.iframeHTML})(e)})(e,{editorContainer:t.editorContainer,iframeContainer:t.iframeContainer})},SA=Ra.DOM,_A=e=>"-"===e.charAt(0),kA=(e,t,n)=>U.from(t).filter((e=>Qe(e)&&!Xx.has(e))).map((t=>({url:`${e.editorManager.baseURL}/icons/${t}/icons${n}.js`,name:U.some(t)}))),EA=(e,t)=>{const n=Da.ScriptLoader,o=()=>{!e.removed&&(e=>{const t=sc(e);return!h(t)||_(aw.get(t))})(e)&&(e=>{const t=ic(e);return _(Jx.get(t))})(e)&&CA(e)};((e,t)=>{const n=sc(e);if(h(n)&&!_A(n)&&!Oe(aw.urls,n)){const o=ac(e),r=o?e.documentBaseURI.toAbsolute(o):`themes/${n}/theme${t}.js`;aw.load(n,r).catch((()=>{((e,t,n)=>{dw(e,"ThemeLoadError",uw("theme",t,n))})(e,r,n)}))}})(e,t),((e,t)=>{const n=ic(e);if("plugin"!==n&&!Oe(Jx.urls,n)){const o=lc(e),r=h(o)?e.documentBaseURI.toAbsolute(o):`models/${n}/model${t}.js`;Jx.load(n,r).catch((()=>{((e,t,n)=>{dw(e,"ModelLoadError",uw("model",t,n))})(e,r,n)}))}})(e,t),((e,t)=>{const n=Wl(t),o=ql(t);if(!La.hasCode(n)&&"en"!==n){const r=Qe(o)?o:`${t.editorManager.baseURL}/langs/${n}.js`;e.add(r).catch((()=>{((e,t,n)=>{dw(e,"LanguageLoadError",uw("language",t,n))})(t,r,n)}))}})(n,e),((e,t,n)=>{const o=kA(t,"default",n),r=(e=>U.from(Fl(e)).filter(Qe).map((e=>({url:e,name:U.none()}))))(t).orThunk((()=>kA(t,Ll(t),"")));Y((e=>{const t=[],n=e=>{t.push(e)};for(let o=0;o<e.length;o++)e[o].each(n);return t})([o,r]),(n=>{e.add(n.url).catch((()=>{((e,t,n)=>{dw(e,"IconsLoadError",uw("icons",t,n))})(t,n.url,n.name.getOrUndefined())}))}))})(n,e,t),((e,t)=>{const n=(t,n)=>{sw.load(t,n).catch((()=>{((e,t,n)=>{dw(e,"PluginLoadError",uw("plugin",t,n))})(e,n,t)}))};be(kc(e),((t,o)=>{n(o,t),e.options.set("plugins",_c(e).concat(o))})),Y(_c(e),(e=>{!(e=Lt.trim(e))||sw.urls[e]||_A(e)||n(e,`plugins/${e}/plugin${t}.js`)}))})(e,t),n.loadQueue().then(o,o)},OA=Et().deviceType,TA=OA.isPhone(),AA=OA.isTablet(),RA=e=>{if(S(e))return[];{const t=y(e)?e:e.split(/[ ,]/),n=K(t,Ye);return Q(n,Qe)}},NA=(e,t)=>{const n=((t,n)=>{const o={},r={};return Ce(t,((t,n)=>q(e,n)),we(o),we(r)),{t:o,f:r}})(t);return o=n.t,r=n.f,{sections:N(o),options:N(r)};var o,r},DA=(e,t)=>Oe(e.sections(),t),BA=(e,t)=>r({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Ee(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},t?{menubar:!1}:{}),MA=(e,t)=>{var n;const o=null!==(n=t.external_plugins)&&void 0!==n?n:{};return e&&e.external_plugins?Lt.extend({},e.external_plugins,o):o},IA=(e,t,n,o,r)=>{var s;const a=e?{mobile:BA(null!==(s=r.mobile)&&void 0!==s?s:{},t)}:{},i=NA(["mobile"],Ck(a,r)),l=Lt.extend(n,o,i.options(),((e,t)=>e&&DA(t,"mobile"))(e,i)?((e,t,n={})=>{const o=e.sections(),r=Ee(o,t).getOr({});return Lt.extend({},n,r)})(i,"mobile"):{},{external_plugins:MA(o,i.options())});return((e,t,n,o)=>{const r=RA(n.forced_plugins),s=RA(o.plugins),a=((e,t)=>DA(e,t)?e.sections()[t]:{})(t,"mobile"),i=((e,t,n,o)=>e&&DA(t,"mobile")?o:n)(e,t,s,a.plugins?RA(a.plugins):s),l=((e,t)=>[...RA(e),...RA(t)])(r,i);return Lt.extend(o,{forced_plugins:r,plugins:l})})(e,i,o,l)},PA=e=>{(e=>{const t=t=>()=>{Y("left,center,right,justify".split(","),(n=>{t!==n&&e.formatter.remove("align"+n)})),"none"!==t&&((t,n)=>{e.formatter.toggle(t,void 0),e.nodeChanged()})("align"+t)};e.editorCommands.addCommands({JustifyLeft:t("left"),JustifyCenter:t("center"),JustifyRight:t("right"),JustifyFull:t("justify"),JustifyNone:t("none")})})(e),(e=>{const t=t=>()=>{const n=e.selection,o=n.isCollapsed()?[e.dom.getParent(n.getNode(),e.dom.isBlock)]:n.getSelectedBlocks();return G(o,(n=>_(e.formatter.matchNode(n,t))))};e.editorCommands.addCommands({JustifyLeft:t("alignleft"),JustifyCenter:t("aligncenter"),JustifyRight:t("alignright"),JustifyFull:t("alignjustify")},"state")})(e)},LA=(e,t)=>{const n=e.selection,o=e.dom;return/^ | $/.test(t)?((e,t,n)=>{const o=wn(e.getRoot());return n=Rg(o,Ii.fromRangeStart(t))?n.replace(/^ /,"&nbsp;"):n.replace(/^&nbsp;/," "),Ng(o,Ii.fromRangeEnd(t))?n.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):n.replace(/&nbsp;(<br( \/)?>)?$/," ")})(o,n.getRng(),t):t},FA=(e,t)=>{if(e.selection.isEditable()){const{content:n,details:o}=(e=>{if("string"!=typeof e){const t=Lt.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:t}}return{content:e,details:{}}})(t);Yy(e,r(r({},o),{},{content:LA(e,n),format:"html",set:!1,selection:!0})).each((t=>{const n=((e,t,n)=>kx(e).editor.insertContent(t,n))(e,t.content,o);Xy(e,n,t),e.addVisual()}))}},zA={"font-size":"size","font-family":"face"},jA=Qt("font"),UA=e=>(t,n)=>U.from(n).map(wn).filter(Kt).bind((n=>((e,t,n)=>iv(wn(n),(t=>(t=>po(t,e).orThunk((()=>jA(t)?Ee(zA,e).bind((e=>on(t,e))):U.none())))(t)),(e=>En(wn(t),e))))(e,t,n.dom).or(((e,t)=>U.from(Ra.DOM.getStyle(t,e,!0)))(e,n.dom)))).getOr(""),HA=UA("font-size"),$A=A((e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")),UA("font-family")),VA=e=>fu(e.getBody()).bind((e=>{const t=e.container();return U.from(Zo(t)?t.parentNode:t)})),WA=(e,t)=>((e,t)=>(e=>U.from(e.selection.getRng()).bind((t=>{const n=e.getBody();return t.startContainer===n&&0===t.startOffset?U.none():U.from(e.selection.getStart(!0))})))(e).orThunk(M(VA,e)).map(wn).filter(Kt).bind(t))(e,R(U.some,t)),qA=(e,t)=>{if(/^[0-9.]+$/.test(t)){const n=parseInt(t,10);if(n>=1&&n<=7){const o=(e=>Lt.explode(e.options.get("font_size_style_values")))(e),r=(e=>Lt.explode(e.options.get("font_size_classes")))(e);return r.length>0?r[n-1]||t:o[n-1]||t}return t}return t},GA=e=>{const t=e.split(/\s*,\s*/);return K(t,(e=>-1===e.indexOf(" ")||qe(e,'"')||qe(e,"'")?e:`'${e}'`)).join(",")},KA=e=>{PA(e),(e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":t=>{const n=e.getDoc();let o;try{n.execCommand(t)}catch(e){o=!0}if("paste"!==t||n.queryCommandEnabled(t)||(o=!0),o||!n.queryCommandSupported(t)){let t=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(Bt.os.isMacOS()||Bt.os.isiOS())&&(t=t.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:t,type:"error"})}}})})(e),(e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})})(e),(e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(t,n,o)=>{let r=0;e.dom.getParent(e.selection.getNode(),(t=>!Vo(t)||r++!==o||(e.selection.select(t),!1)),e.getBody())},mceSelectNode:(t,n,o)=>{e.selection.select(o)},selectAll:()=>{const t=e.dom.getParent(e.selection.getStart(),ir);if(t){const n=e.dom.createRng();n.selectNodeContents(t),e.selection.setRng(n)}}})})(e),(e=>{e.editorCommands.addCommands({mceCleanup:()=>{const t=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(t)},insertImage:(t,n,o)=>{FA(e,e.dom.createHTML("img",{src:o}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(t,n,o)=>{FA(e,e.dom.encode(o))},insertHTML:(t,n,o)=>{FA(e,o)},mceInsertContent:(t,n,o)=>{FA(e,o)},mceSetContent:(t,n,o)=>{e.setContent(o)},mceReplaceContent:(t,n,o)=>{e.execCommand("mceInsertContent",!1,o.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent("")}})})(e),(e=>{const t=(t,n,o)=>{const r=h(o)?{href:o}:o,s=e.dom.getParent(e.selection.getNode(),"a");v(r)&&h(r.href)&&(r.href=r.href.replace(/ /g,"%20"),s&&r.href||e.formatter.remove("link"),r.href&&e.formatter.apply("link",r,s))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isCollapsed()){const t=e.dom.getParent(e.selection.getStart(),"a");t&&e.dom.remove(t,!0)}else e.formatter.remove("link")},mceInsertLink:t,createLink:t})})(e),(e=>{e.editorCommands.addCommands({Indent:()=>{(e=>{QS(e,"indent")})(e)},Outdent:()=>{ZS(e)}}),e.editorCommands.addCommands({Outdent:()=>YS(e)},"state")})(e),(e=>{e.editorCommands.addCommands({insertParagraph:()=>{sO(FE,e)},mceInsertNewLine:(t,n,o)=>{aO(e,o)},InsertLineBreak:(t,n,o)=>{sO(qE,e)}})})(e),(e=>{(e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":t=>{e.getDoc().execCommand(t);const n=e.dom.getParent(e.selection.getNode(),"ol,ul");if(n){const t=n.parentNode;if(t&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(t.nodeName)){const o=e.selection.getBookmark();e.dom.split(t,n),e.selection.moveToBookmark(o)}}}})})(e),(e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":t=>{const n=e.dom.getParent(e.selection.getNode(),"ul,ol");return n&&("insertunorderedlist"===t&&"UL"===n.tagName||"insertorderedlist"===t&&"OL"===n.tagName)}},"state")})(e)})(e),(e=>{(e=>{const t=(t,n)=>{e.formatter.toggle(t,n),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":e=>{t(e)},"ForeColor,HiliteColor":(e,n,o)=>{t(e,{value:o})},BackColor:(e,n,o)=>{t("hilitecolor",{value:o})},FontName:(t,n,o)=>{((e,t)=>{const n=qA(e,t);e.formatter.toggle("fontname",{value:GA(n)}),e.nodeChanged()})(e,o)},FontSize:(t,n,o)=>{((e,t)=>{e.formatter.toggle("fontsize",{value:qA(e,t)}),e.nodeChanged()})(e,o)},LineHeight:(t,n,o)=>{((e,t)=>{e.formatter.toggle("lineheight",{value:String(t)}),e.nodeChanged()})(e,o)},Lang:(e,n,o)=>{var r;t(e,{value:o.code,customValue:null!==(r=o.customCode)&&void 0!==r?r:null})},RemoveFormat:t=>{e.formatter.remove(t)},mceBlockQuote:()=>{t("blockquote")},FormatBlock:(e,n,o)=>{t(h(o)?o:"p")},mceToggleFormat:(e,n,o)=>{t(o)}})})(e),(e=>{const t=t=>e.formatter.match(t);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":e=>t(e),mceBlockQuote:()=>t("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",(()=>(e=>WA(e,(t=>$A(e.getBody(),t.dom))).getOr(""))(e))),e.editorCommands.addQueryValueHandler("FontSize",(()=>(e=>WA(e,(t=>HA(e.getBody(),t.dom))).getOr(""))(e))),e.editorCommands.addQueryValueHandler("LineHeight",(()=>(e=>WA(e,(t=>{const n=wn(e.getBody()),o=iv(t,(e=>po(e,"line-height")),M(En,n));return o.getOrThunk((()=>{const e=parseFloat(uo(t,"line-height")),n=parseFloat(uo(t,"font-size"));return String(e/n)}))})).getOr(""))(e)))})(e)})(e),(e=>{e.editorCommands.addCommands({mceRemoveNode:(t,n,o)=>{const r=null!=o?o:e.selection.getNode();if(r!==e.getBody()){const t=e.selection.getBookmark();e.dom.remove(r,!0),e.selection.moveToBookmark(t)}},mcePrint:()=>{e.getWin().print()},mceFocus:(t,n,o)=>{((e,t)=>{e.removed||(t?vf(e):(e=>{const t=e.selection,n=e.getBody();let o=t.getRng();e.quirks.refreshContentEditable(),_(e.bookmark)&&!hf(e)&&of(e).each((t=>{e.selection.setRng(t),o=t}));const r=((e,t)=>e.dom.getParent(t,(t=>"true"===e.dom.getContentEditable(t))))(e,t.getNode());if(r&&e.dom.isChildOf(r,n))return gf(r),ff(e,o),void vf(e);e.inline||(Bt.browser.isOpera()||gf(n),e.getWin().focus()),(Bt.browser.isFirefox()||e.inline)&&(gf(n),ff(e,o)),vf(e)})(e))})(e,!0===o)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})})(e)},YA=["toggleview"],XA=e=>q(YA,e.toLowerCase());class JA{constructor(e){this.commands={state:{},exec:{},value:{}},this.editor=e}execCommand(e,t=!1,n,o){const r=this.editor,s=e.toLowerCase(),a=null==o?void 0:o.skip_focus;if(r.removed)return!1;if("mcefocus"!==s&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(s)||a?(e=>{of(e).each((t=>e.selection.setRng(t)))})(r):r.focus()),r.dispatch("BeforeExecCommand",{command:e,ui:t,value:n}).isDefaultPrevented())return!1;const i=this.commands.exec[s];return!!k(i)&&(i(s,t,n),r.dispatch("ExecCommand",{command:e,ui:t,value:n}),!0)}queryCommandState(e){if(!XA(e)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const t=e.toLowerCase(),n=this.commands.state[t];return!!k(n)&&n(t)}queryCommandValue(e){if(!XA(e)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const t=e.toLowerCase(),n=this.commands.value[t];return k(n)?n(t):""}addCommands(e,t="exec"){const n=this.commands;be(e,((e,o)=>{Y(o.toLowerCase().split(","),(o=>{n[t][o]=e}))}))}addCommand(e,t,n){const o=e.toLowerCase();this.commands.exec[o]=(e,o,r)=>t.call(null!=n?n:this.editor,o,r)}queryCommandSupported(e){const t=e.toLowerCase();return!!this.commands.exec[t]}addQueryStateHandler(e,t,n){this.commands.state[e.toLowerCase()]=()=>t.call(null!=n?n:this.editor)}addQueryValueHandler(e,t,n){this.commands.value[e.toLowerCase()]=()=>t.call(null!=n?n:this.editor)}}const QA="data-mce-contenteditable",ZA=(e,t,n)=>{try{e.getDoc().execCommand(t,!1,String(n))}catch(e){}},eR=(e,t)=>{e.dom.contentEditable=t?"true":"false"},tR=(e,t)=>{const n=wn(e.getBody());((e,t,n)=>{hn(e,t)&&!n?gn(e,t):n&&pn(e,t)})(n,"mce-content-readonly",t),t?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),(e=>{U.from(e.selection.getNode()).each((e=>{e.removeAttribute("data-mce-selected")}))})(e),e.readonly=!0,eR(n,!1),Y(zo(n,'*[contenteditable="true"]'),(e=>{en(e,QA,"true"),eR(e,!1)}))):(e.readonly=!1,eR(n,!0),Y(zo(n,'*[data-mce-contenteditable="true"]'),(e=>{sn(e,QA),eR(e,!0)})),ZA(e,"StyleWithCSS",!1),ZA(e,"enableInlineTableEditing",!1),ZA(e,"enableObjectResizing",!1),(e=>hf(e)||(e=>{const t=qn(wn(e.getElement()));return Yp(t).filter((t=>!cf(t.dom)&&df(e,t.dom))).isSome()})(e))(e)&&e.focus(),(e=>{e.selection.setRng(e.selection.getRng())})(e),e.nodeChanged())},nR=e=>e.readonly,oR=e=>{e.parser.addAttributeFilter("contenteditable",(t=>{nR(e)&&Y(t,(e=>{e.attr(QA,e.attr("contenteditable")),e.attr("contenteditable","false")}))})),e.serializer.addAttributeFilter(QA,(t=>{nR(e)&&Y(t,(e=>{e.attr("contenteditable",e.attr(QA))}))})),e.serializer.addTempAttr(QA)},rR=["copy"],sR=Lt.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class aR{constructor(e){this.bindings={},this.settings=e||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||z}static isNative(e){return!!sR[e.toLowerCase()]}fire(e,t){return this.dispatch(e,t)}dispatch(e,t){const n=e.toLowerCase(),o=fa(n,null!=t?t:{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(o);const r=this.bindings[n];if(r)for(let s=0,a=r.length;s<a;s++){const e=r[s];if(!e.removed){if(e.once&&this.off(n,e.func),o.isImmediatePropagationStopped())return o;if(!1===e.func.call(this.scope,o))return o.preventDefault(),o}}return o}on(e,t,n,o){if(!1===t&&(t=z),t){const r={func:t,removed:!1};o&&Lt.extend(r,o);const s=e.toLowerCase().split(" ");let a=s.length;for(;a--;){const e=s[a];let t=this.bindings[e];t||(t=[],this.toggleEvent(e,!0)),t=n?[r,...t]:[...t,r],this.bindings[e]=t}}return this}off(e,t){if(e){const n=e.toLowerCase().split(" ");let o=n.length;for(;o--;){const r=n[o];let s=this.bindings[r];if(!r)return be(this.bindings,((e,t)=>{this.toggleEvent(t,!1),delete this.bindings[t]})),this;if(s){if(t){const e=J(s,(e=>e.func===t));s=e.fail,this.bindings[r]=s,Y(e.pass,(e=>{e.removed=!0}))}else s.length=0;s.length||(this.toggleEvent(e,!1),delete this.bindings[r])}}}else be(this.bindings,((e,t)=>{this.toggleEvent(t,!1)})),this.bindings={};return this}once(e,t,n){return this.on(e,t,n,{once:!0})}has(e){e=e.toLowerCase();const t=this.bindings[e];return!(!t||0===t.length)}}const iR=e=>(e._eventDispatcher||(e._eventDispatcher=new aR({scope:e,toggleEvent:(t,n)=>{aR.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher),lR={fire(e,t,n){return this.dispatch(e,t,n)},dispatch(e,t,n){const o=this;if(o.removed&&"remove"!==e&&"detach"!==e)return fa(e.toLowerCase(),null!=t?t:{},o);const r=iR(o).dispatch(e,t);if(!1!==n&&o.parent){let t=o.parent();for(;t&&!r.isPropagationStopped();)t.dispatch(e,r,!1),t=t.parent?t.parent():void 0}return r},on(e,t,n){return iR(this).on(e,t,n)},off(e,t){return iR(this).off(e,t)},once(e,t){return iR(this).once(e,t)},hasEventListeners(e){return iR(this).has(e)}},cR=Ra.DOM;let dR;const uR=(e,t)=>{if("selectionchange"===t)return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(t))return e.getDoc().documentElement;const n=oc(e);return n?(e.eventRoot||(e.eventRoot=cR.select(n)[0]),e.eventRoot):e.getBody()},mR=(e,t,n)=>{(e=>!e.hidden&&!nR(e))(e)?e.dispatch(t,n):nR(e)&&((e,t)=>{if((e=>"click"===e.type)(t)&&!Km.metaKeyPressed(t)){const n=wn(t.target);((e,t)=>oo(t,"a",(t=>En(t,wn(e.getBody())))).bind((e=>on(e,"href"))))(e,n).each((n=>{if(t.preventDefault(),/^#/.test(n)){const t=e.dom.select(`${n},[name="${Ve(n,"#")}"]`);t.length&&e.selection.scrollIntoView(t[0],!0)}else window.open(n,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")}))}else(e=>q(rR,e.type))(t)&&e.dispatch(t.type,t)})(e,n)},pR=(e,t)=>{if(e.delegates||(e.delegates={}),e.delegates[t]||e.removed)return;const n=uR(e,t);if(oc(e)){if(dR||(dR={},e.editorManager.on("removeEditor",(()=>{e.editorManager.activeEditor||dR&&(be(dR,((t,n)=>{e.dom.unbind(uR(e,n))})),dR=null)}))),dR[t])return;const o=n=>{const o=n.target,r=e.editorManager.get();let s=r.length;for(;s--;){const e=r[s].getBody();(e===o||cR.isChildOf(o,e))&&mR(r[s],t,n)}};dR[t]=o,cR.bind(n,t,o)}else{const o=n=>{mR(e,t,n)};cR.bind(n,t,o),e.delegates[t]=o}},fR=r(r({},lR),{},{bindPendingEventDelegates(){const e=this;Lt.each(e._pendingNativeEvents,(t=>{pR(e,t)}))},toggleNativeEvent(e,t){const n=this;"focus"!==e&&"blur"!==e&&(n.removed||(t?n.initialized?pR(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&n.delegates&&(n.dom.unbind(uR(n,e),e,n.delegates[e]),delete n.delegates[e])))},unbindAllNativeEvents(){const e=this,t=e.getBody(),n=e.dom;e.delegates&&(be(e.delegates,((t,n)=>{e.dom.unbind(uR(e,n),n,t)})),delete e.delegates),!e.inline&&t&&n&&(t.onload=null,n.unbind(e.getWin()),n.unbind(e.getDoc())),n&&(n.unbind(t),n.unbind(e.getContainer()))}}),gR=e=>h(e)?{value:e.split(/[ ,]/),valid:!0}:O(e,h)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},hR=(e,t)=>e+(Ze(t.message)?"":`. ${t.message}`),vR=e=>e.valid,bR=(e,t,n="")=>{const o=t(e);return w(o)?o?{value:e,valid:!0}:{valid:!1,message:n}:o},yR=["design","readonly"],xR=(e,t,n,o)=>{const r=n[t.get()],s=n[o];try{s.activate()}catch(e){return void console.error(`problem while activating editor mode ${o}:`,e)}r.deactivate(),r.editorReadOnly!==s.editorReadOnly&&tR(e,s.editorReadOnly),t.set(o),((e,t)=>{e.dispatch("SwitchMode",{mode:t})})(e,o)},wR=Lt.each,CR=Lt.explode,SR={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},_R=Lt.makeMap("alt,ctrl,shift,meta,access"),kR=e=>{const t={},n=Bt.os.isMacOS()||Bt.os.isiOS();wR(CR(e.toLowerCase(),"+"),(e=>{(e=>e in _R)(e)?t[e]=!0:/^[0-9]{2,}$/.test(e)?t.keyCode=parseInt(e,10):(t.charCode=e.charCodeAt(0),t.keyCode=SR[e]||e.toUpperCase().charCodeAt(0))}));const o=[t.keyCode];let r;for(r in _R)t[r]?o.push(r):t[r]=!1;return t.id=o.join(","),t.access&&(t.alt=!0,n?t.ctrl=!0:t.shift=!0),t.meta&&(n?t.meta=!0:(t.ctrl=!0,t.meta=!1)),t};class ER{constructor(e){this.shortcuts={},this.pendingPatterns=[],this.editor=e;const t=this;e.on("keyup keypress keydown",(e=>{!t.hasModifier(e)&&!t.isFunctionKey(e)||e.isDefaultPrevented()||(wR(t.shortcuts,(n=>{t.matchShortcut(e,n)&&(t.pendingPatterns=n.subpatterns.slice(0),"keydown"===e.type&&t.executeShortcutAction(n))})),t.matchShortcut(e,t.pendingPatterns[0])&&(1===t.pendingPatterns.length&&"keydown"===e.type&&t.executeShortcutAction(t.pendingPatterns[0]),t.pendingPatterns.shift()))}))}add(e,t,n,o){const r=this,s=r.normalizeCommandFunc(n);return wR(CR(Lt.trim(e)),(e=>{const n=r.createShortcut(e,t,s,o);r.shortcuts[n.id]=n})),!0}remove(e){const t=this.createShortcut(e);return!!this.shortcuts[t.id]&&(delete this.shortcuts[t.id],!0)}normalizeCommandFunc(e){const t=this,n=e;return"string"==typeof n?()=>{t.editor.execCommand(n,!1,null)}:Lt.isArray(n)?()=>{t.editor.execCommand(n[0],n[1],n[2])}:n}createShortcut(e,t,n,o){const r=Lt.map(CR(e,">"),kR);return r[r.length-1]=Lt.extend(r[r.length-1],{func:n,scope:o||this.editor}),Lt.extend(r[0],{desc:this.editor.translate(t),subpatterns:r.slice(1)})}hasModifier(e){return e.altKey||e.ctrlKey||e.metaKey}isFunctionKey(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123}matchShortcut(e,t){return!!t&&t.ctrl===e.ctrlKey&&t.meta===e.metaKey&&t.alt===e.altKey&&t.shift===e.shiftKey&&!!(e.keyCode===t.keyCode||e.charCode&&e.charCode===t.charCode)&&(e.preventDefault(),!0)}executeShortcutAction(e){return e.func?e.func.call(e.scope):null}}const OR=()=>{const e=(()=>{const e={},t={},n={},o={},s={},a={},i={},l={},c=(e,t)=>(n,o)=>{e[n.toLowerCase()]=r(r({},o),{},{type:t})};return{addButton:c(e,"button"),addGroupToolbarButton:c(e,"grouptoolbarbutton"),addToggleButton:c(e,"togglebutton"),addMenuButton:c(e,"menubutton"),addSplitButton:c(e,"splitbutton"),addMenuItem:c(t,"menuitem"),addNestedMenuItem:c(t,"nestedmenuitem"),addToggleMenuItem:c(t,"togglemenuitem"),addAutocompleter:c(n,"autocompleter"),addContextMenu:c(s,"contextmenu"),addContextToolbar:c(a,"contexttoolbar"),addContextForm:c(a,"contextform"),addSidebar:c(i,"sidebar"),addView:c(l,"views"),addIcon:(e,t)=>o[e.toLowerCase()]=t,getAll:()=>({buttons:e,menuItems:t,icons:o,popups:n,contextMenus:s,contextToolbars:a,sidebars:i,views:l})}})();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},TR=Ra.DOM,AR=Lt.extend,RR=Lt.each;class NR{constructor(e,t,n){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this.editorManager=n,this.documentBaseUrl=n.documentBaseURL,AR(this,fR);const o=this;this.id=e,this.hidden=!1;const s=((e,t)=>IA(TA||AA,TA,t,e,t))(n.defaultOptions,t);this.options=((e,t)=>{const n={},o={},s=(e,t,n)=>{const r=bR(t,n);return vR(r)?(o[e]=r.value,!0):(console.warn(hR(`Invalid value passed for the ${e} option`,r)),!1)},a=e=>Oe(n,e);return{register:(e,a)=>{const i=(e=>h(e.processor))(a)?(e=>{const t=(()=>{switch(e){case"array":return y;case"boolean":return w;case"function":return k;case"number":return E;case"object":return v;case"string":return h;case"string[]":return gR;case"object[]":return e=>O(e,v);case"regexp":return e=>g(e,RegExp);default:return j}})();return n=>bR(n,t,`The value must be a ${e}.`)})(a.processor):a.processor,l=((e,t,n)=>{if(!C(t)){const o=bR(t,n);if(vR(o))return o.value;console.error(hR(`Invalid default value passed for the "${e}" option`,o))}})(e,a.default,i);n[e]=r(r({},a),{},{default:l,processor:i}),Ee(o,e).orThunk((()=>Ee(t,e))).each((t=>s(e,t,i)))},isRegistered:a,get:e=>Ee(o,e).orThunk((()=>Ee(n,e).map((e=>e.default)))).getOrUndefined(),set:(e,t)=>{if(a(e)){const o=n[e];return o.immutable?(console.error(`"${e}" is an immutable option and cannot be updated`),!1):s(e,t,o.processor)}return console.warn(`"${e}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:e=>{const t=a(e);return t&&delete o[e],t},isSet:e=>Oe(o,e)}})(0,s),(e=>{const t=e.options.register;t("id",{processor:"string",default:e.id}),t("selector",{processor:"string"}),t("target",{processor:"object"}),t("suffix",{processor:"string"}),t("cache_suffix",{processor:"string"}),t("base_url",{processor:"string"}),t("referrer_policy",{processor:"string",default:""}),t("language_load",{processor:"boolean",default:!0}),t("inline",{processor:"boolean",default:!1}),t("iframe_attrs",{processor:"object",default:{}}),t("doctype",{processor:"string",default:"<!DOCTYPE html>"}),t("document_base_url",{processor:"string",default:e.documentBaseUrl}),t("body_id",{processor:yl(e,"tinymce"),default:"tinymce"}),t("body_class",{processor:yl(e),default:""}),t("content_security_policy",{processor:"string",default:""}),t("br_in_pre",{processor:"boolean",default:!0}),t("forced_root_block",{processor:e=>{const t=h(e)&&Qe(e);return t?{value:e,valid:t}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),t("forced_root_block_attrs",{processor:"object",default:{}}),t("newline_behavior",{processor:e=>{const t=q(["block","linebreak","invert","default"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),t("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),t("no_newline_selector",{processor:"string",default:""}),t("keep_styles",{processor:"boolean",default:!0}),t("end_container_on_empty_block",{processor:e=>w(e)||h(e)?{valid:!0,value:e}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),t("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),t("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),t("font_size_classes",{processor:"string",default:""}),t("automatic_uploads",{processor:"boolean",default:!0}),t("images_reuse_filename",{processor:"boolean",default:!1}),t("images_replace_blob_uris",{processor:"boolean",default:!0}),t("icons",{processor:"string",default:""}),t("icons_url",{processor:"string",default:""}),t("images_upload_url",{processor:"string",default:""}),t("images_upload_base_path",{processor:"string",default:""}),t("images_upload_credentials",{processor:"boolean",default:!1}),t("images_upload_handler",{processor:"function"}),t("language",{processor:"string",default:"en"}),t("language_url",{processor:"string",default:""}),t("entity_encoding",{processor:"string",default:"named"}),t("indent",{processor:"boolean",default:!0}),t("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_use_margin",{processor:"boolean",default:!1}),t("indentation",{processor:"string",default:"40px"}),t("content_css",{processor:e=>{const t=!1===e||h(e)||O(e,h);return t?h(e)?{value:K(e.split(","),Ye),valid:t}:y(e)?{value:e,valid:t}:!1===e?{value:[],valid:t}:{value:e,valid:t}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:gc(e)?[]:["default"]}),t("content_style",{processor:"string"}),t("content_css_cors",{processor:"boolean",default:!1}),t("font_css",{processor:e=>{const t=h(e)||O(e,h);return t?{value:y(e)?e:K(e.split(","),Ye),valid:t}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),t("inline_boundaries",{processor:"boolean",default:!0}),t("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),t("object_resizing",{processor:e=>{const t=w(e)||h(e);return t?!1===e||pl.isiPhone()||pl.isiPad()?{value:"",valid:t}:{value:!0===e?"table,img,figure.image,div,video,iframe":e,valid:t}:{valid:!1,message:"Must be boolean or a string"}},default:!fl}),t("resize_img_proportional",{processor:"boolean",default:!0}),t("event_root",{processor:"object"}),t("service_message",{processor:"string"}),t("theme",{processor:e=>!1===e||h(e)||k(e),default:"silver"}),t("theme_url",{processor:"string"}),t("formats",{processor:"object"}),t("format_empty_lines",{processor:"boolean",default:!1}),t("format_noneditable_selector",{processor:"string",default:""}),t("preview_styles",{processor:e=>{const t=!1===e||h(e);return t?{value:!1===e?"":e,valid:t}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),t("custom_ui_selector",{processor:"string",default:""}),t("hidden_input",{processor:"boolean",default:!0}),t("submit_patch",{processor:"boolean",default:!0}),t("encoding",{processor:"string"}),t("add_form_submit_trigger",{processor:"boolean",default:!0}),t("add_unload_trigger",{processor:"boolean",default:!0}),t("custom_undo_redo_levels",{processor:"number",default:0}),t("disable_nodechange",{processor:"boolean",default:!1}),t("readonly",{processor:"boolean",default:!1}),t("plugins",{processor:"string[]",default:[]}),t("external_plugins",{processor:"object"}),t("forced_plugins",{processor:"string[]"}),t("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),t("model_url",{processor:"string"}),t("block_unsupported_drop",{processor:"boolean",default:!0}),t("visual",{processor:"boolean",default:!0}),t("visual_table_class",{processor:"string",default:"mce-item-table"}),t("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),t("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),t("setup",{processor:"function"}),t("init_instance_callback",{processor:"function"}),t("url_converter",{processor:"function",default:e.convertURL}),t("url_converter_scope",{processor:"object",default:e}),t("urlconverter_callback",{processor:"function"}),t("allow_conditional_comments",{processor:"boolean",default:!1}),t("allow_html_data_urls",{processor:"boolean",default:!1}),t("allow_svg_data_urls",{processor:"boolean"}),t("allow_html_in_named_anchor",{processor:"boolean",default:!1}),t("allow_script_urls",{processor:"boolean",default:!1}),t("allow_unsafe_link_target",{processor:"boolean",default:!1}),t("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),t("fix_list_elements",{processor:"boolean",default:!1}),t("preserve_cdata",{processor:"boolean",default:!1}),t("remove_trailing_brs",{processor:"boolean"}),t("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),t("element_format",{processor:"string",default:"html"}),t("entities",{processor:"string"}),t("schema",{processor:"string",default:"html5"}),t("convert_urls",{processor:"boolean",default:!0}),t("relative_urls",{processor:"boolean",default:!0}),t("remove_script_host",{processor:"boolean",default:!0}),t("custom_elements",{processor:"string"}),t("extended_valid_elements",{processor:"string"}),t("invalid_elements",{processor:"string"}),t("invalid_styles",{processor:bl}),t("valid_children",{processor:"string"}),t("valid_classes",{processor:bl}),t("valid_elements",{processor:"string"}),t("valid_styles",{processor:bl}),t("verify_html",{processor:"boolean",default:!0}),t("auto_focus",{processor:e=>h(e)||!0===e}),t("browser_spellcheck",{processor:"boolean",default:!1}),t("protect",{processor:"array"}),t("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),t("deprecation_warnings",{processor:"boolean",default:!0}),t("a11y_advanced_options",{processor:"boolean",default:!1}),t("api_key",{processor:"string"}),t("paste_block_drop",{processor:"boolean",default:!1}),t("paste_data_images",{processor:"boolean",default:!0}),t("paste_preprocess",{processor:"function"}),t("paste_postprocess",{processor:"function"}),t("paste_webkit_styles",{processor:"string",default:"none"}),t("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),t("paste_merge_formats",{processor:"boolean",default:!0}),t("smart_paste",{processor:"boolean",default:!0}),t("paste_as_text",{processor:"boolean",default:!1}),t("paste_tab_spaces",{processor:"number",default:4}),t("text_patterns",{processor:e=>O(e,v)||!1===e?{value:ml(!1===e?[]:e),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),t("text_patterns_lookup",{processor:e=>{return k(e)?{value:(t=e,e=>{const n=t(e);return ml(n)}),valid:!0}:{valid:!1,message:"Must be a single function"};var t},default:e=>[]}),t("noneditable_class",{processor:"string",default:"mceNonEditable"}),t("editable_class",{processor:"string",default:"mceEditable"}),t("noneditable_regexp",{processor:e=>O(e,hl)?{value:e,valid:!0}:hl(e)?{value:[e],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),t("table_tab_navigation",{processor:"boolean",default:!0}),t("highlight_on_focus",{processor:"boolean",default:!1}),t("xss_sanitization",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",(()=>{t("directionality",{processor:"string",default:La.isRtl()?"rtl":void 0}),t("placeholder",{processor:"string",default:gl.getAttrib(e.getElement(),"placeholder")})}))})(o);const a=this.options.get;a("deprecation_warnings")&&((e,t)=>{((e,t)=>{const n=Hx(e),o=Wx(t),r=o.length>0,s=n.length>0,a="mobile"===t.theme;if(r||s||a){const e="\n- ",t=a?`\n\nThemes:${e}mobile`:"",i=r?`\n\nPlugins:${e}${o.join(e)}`:"",l=s?`\n\nOptions:${e}${n.join(e)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+t+i+l)}})(e,t),((e,t)=>{const n=$x(e),o=qx(t),r=o.length>0,s=n.length>0;if(r||s){const e="\n- ",t=r?`\n\nPlugins:${e}${o.map(Gx).join(e)}`:"",a=s?`\n\nOptions:${e}${n.join(e)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+t+a)}})(e,t)})(t,s);const i=a("suffix");i&&(n.suffix=i),this.suffix=n.suffix;const l=a("base_url");l&&n._setBaseUrl(l),this.baseUri=n.baseURI;const c=Vl(o);c&&(Da.ScriptLoader._setReferrerPolicy(c),Ra.DOM.styleSheetLoader._setReferrerPolicy(c));const d=Sc(o);_(d)&&Ra.DOM.styleSheetLoader._setContentCssCors(d),Fa.languageLoad=a("language_load"),Fa.baseURL=n.baseURL,this.setDirty(!1),this.documentBaseURI=new Dy(Cl(o),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=gc(o),this.hasVisual=Oc(o),this.shortcuts=new ER(this),this.editorCommands=new JA(this),KA(this);const u=a("cache_suffix");u&&(Bt.cacheSuffix=u.replace(/^[\?\&]+/,"")),this.ui={registry:OR(),styleSheetLoader:void 0,show:T,hide:T,setEnabled:T,isEnabled:j},this.mode=(e=>{const t=Ba("design"),n=Ba({design:{activate:T,deactivate:T,editorReadOnly:!1},readonly:{activate:T,deactivate:T,editorReadOnly:!0}});return(e=>{e.serializer?oR(e):e.on("PreInit",(()=>{oR(e)}))})(e),(e=>{e.on("ShowCaret",(t=>{nR(e)&&t.preventDefault()})),e.on("ObjectSelected",(t=>{nR(e)&&t.preventDefault()}))})(e),{isReadOnly:()=>nR(e),set:o=>((e,t,n,o)=>{if(o!==n.get()){if(!Oe(t,o))throw new Error(`Editor mode '${o}' is invalid`);e.initialized?xR(e,n,t,o):e.on("init",(()=>xR(e,n,t,o)))}})(e,n.get(),t,o),get:()=>t.get(),register:(e,t)=>{n.set(((e,t,n)=>{if(q(yR,t))throw new Error(`Cannot override default mode ${t}`);return r(r({},e),{},{[t]:r(r({},n),{},{deactivate:()=>{try{n.deactivate()}catch(e){console.error(`problem while deactivating editor mode ${t}:`,e)}}})})})(n.get(),e,t))}}})(o),n.dispatch("SetupEditor",{editor:this});const m=Nc(o);k(m)&&m.call(o,o)}render(){(e=>{const t=e.id;La.setCode(Wl(e));const n=()=>{SA.unbind(window,"ready",n),e.render()};if(!xa.Event.domLoaded)return void SA.bind(window,"ready",n);if(!e.getElement())return;const o=wn(e.getElement()),r=an(o);e.on("remove",(()=>{X(o.dom.attributes,(e=>sn(o,e.name))),tn(o,r)})),e.ui.styleSheetLoader=((e,t)=>Ms.forElement(e,{contentCssCors:Sc(t),referrerPolicy:Vl(t)}))(o,e),gc(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const s=e.getElement().form||SA.getParent(t,"form");s&&(e.formElement=s,hc(e)&&!Qo(e.getElement())&&(SA.insertAfter(SA.create("input",{type:"hidden",name:t}),t),e.hasHiddenInput=!0),e.formEventDelegate=t=>{e.dispatch(t.type,t)},SA.bind(s,"submit reset",e.formEventDelegate),e.on("reset",(()=>{e.resetContent()})),!vc(e)||s.submit.nodeType||s.submit.length||s._mceOldSubmit||(s._mceOldSubmit=s.submit,s.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),s._mceOldSubmit(s)))),e.windowManager=iw(e),e.notificationManager=rw(e),(e=>"xml"===e.options.get("encoding"))(e)&&e.on("GetContent",(e=>{e.save&&(e.content=SA.encode(e.content))})),bc(e)&&e.on("submit",(()=>{e.initialized&&e.save()})),yc(e)&&(e._beforeUnload=()=>{!e.initialized||e.destroyed||e.isHidden()||e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),EA(e,e.suffix)})(this)}focus(e){this.execCommand("mceFocus",!1,e)}hasFocus(){return hf(this)}translate(e){return La.translate(e)}getParam(e,t,n){const o=this.options;return o.isRegistered(e)||(_(n)?o.register(e,{processor:n,default:t}):o.register(e,{processor:j,default:t})),o.isSet(e)||C(t)?o.get(e):t}hasPlugin(e,t){return!(!q(_c(this),e)||t&&void 0===sw.get(e))}nodeChanged(e){this._nodeChangeDispatcher.nodeChanged(e)}addCommand(e,t,n){this.editorCommands.addCommand(e,t,n)}addQueryStateHandler(e,t,n){this.editorCommands.addQueryStateHandler(e,t,n)}addQueryValueHandler(e,t,n){this.editorCommands.addQueryValueHandler(e,t,n)}addShortcut(e,t,n,o){this.shortcuts.add(e,t,n,o)}execCommand(e,t,n,o){return this.editorCommands.execCommand(e,t,n,o)}queryCommandState(e){return this.editorCommands.queryCommandState(e)}queryCommandValue(e){return this.editorCommands.queryCommandValue(e)}queryCommandSupported(e){return this.editorCommands.queryCommandSupported(e)}show(){const e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable="true":(TR.show(e.getContainer()),TR.hide(e.id)),e.load(),e.dispatch("show"))}hide(){const e=this;e.hidden||(e.save(),e.inline?(e.getBody().contentEditable="false",e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(TR.hide(e.getContainer()),TR.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(e,t){this.dispatch("ProgressState",{state:e,time:t})}load(e={}){const t=this,n=t.getElement();if(t.removed)return"";if(n){const o=r(r({},e),{},{load:!0}),s=Qo(n)?n.value:n.innerHTML,a=t.setContent(s,o);return o.no_events||t.dispatch("LoadContent",r(r({},o),{},{element:n})),a}return""}save(e={}){const t=this;let n=t.getElement();if(!n||!t.initialized||t.removed)return"";const o=r(r({},e),{},{save:!0,element:n});let s=t.getContent(o);const a=r(r({},o),{},{content:s});if(a.no_events||t.dispatch("SaveContent",a),"raw"===a.format&&t.dispatch("RawSaveContent",a),s=a.content,Qo(n))n.value=s;else{!e.is_removing&&t.inline||(n.innerHTML=s);const o=TR.getParent(t.id,"form");o&&RR(o.elements,(e=>e.name!==t.id||(e.value=s,!1)))}return a.element=o.element=n=null,!1!==a.set_dirty&&t.setDirty(!1),s}setContent(e,t){return Px(this,e,t)}getContent(e){return((e,t={})=>{const n=((e,t)=>r(r({},e),{},{format:t,get:!0,getInner:!0}))(t,t.format?t.format:"html");return Gy(e,n).fold(D,(t=>{const n=((e,t)=>kx(e).editor.getContent(t))(e,t);return Ky(e,n,t)}))})(this,e)}insertContent(e,t){t&&(e=AR({content:e},t)),this.execCommand("mceInsertContent",!1,e)}resetContent(e){void 0===e?Px(this,this.startContent,{format:"raw"}):Px(this,e),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(e){const t=!this.isNotDirty;this.isNotDirty=!e,e&&e!==t&&this.dispatch("dirty")}getContainer(){const e=this;return e.container||(e.container=e.editorContainer||TR.get(e.id+"_parent")),e.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=TR.get(this.id)),this.targetElm}getWin(){const e=this;if(!e.contentWindow){const t=e.iframeElement;t&&(e.contentWindow=t.contentWindow)}return e.contentWindow}getDoc(){const e=this;if(!e.contentDocument){const t=e.getWin();t&&(e.contentDocument=t.document)}return e.contentDocument}getBody(){var e,t;const n=this.getDoc();return null!==(t=null!==(e=this.bodyElement)&&void 0!==e?e:null==n?void 0:n.body)&&void 0!==t?t:null}convertURL(e,t,n){const o=this,r=o.options.get,s=Bc(o);return k(s)?s.call(o,e,n,!0,t):!r("convert_urls")||"link"===n||v(n)&&"LINK"===n.nodeName||0===e.indexOf("file:")||0===e.length?e:r("relative_urls")?o.documentBaseURI.toRelative(e):e=o.documentBaseURI.toAbsolute(e,r("remove_script_host"))}addVisual(e){((e,t)=>{((e,t)=>{Ex(e).editor.addVisual(t)})(e,t)})(this,e)}remove(){(e=>{if(!e.removed){const{_selectionOverrides:t,editorUpload:n}=e,o=e.getBody(),r=e.getElement();o&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&_(null==r?void 0:r.nextSibling)&&Kx.remove(r.nextSibling),(e=>{e.dispatch("remove")})(e),e.editorManager.remove(e),!e.inline&&o&&(e=>{Kx.setStyle(e.id,"display",e.orgDisplay)})(e),(e=>{e.dispatch("detach")})(e),Kx.remove(e.getContainer()),Yx(t),Yx(n),e.destroy()}})(this)}destroy(e){((e,t)=>{const{selection:n,dom:o}=e;e.destroyed||(t||e.removed?(t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),Yx(n),Yx(o)),(e=>{const t=e.formElement;t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,delete t._mceOldSubmit),Kx.unbind(t,"submit reset",e.formEventDelegate))})(e),(e=>{const t=e;t.contentAreaContainer=t.formElement=t.container=t.editorContainer=null,t.bodyElement=t.contentDocument=t.contentWindow=null,t.iframeElement=t.targetElm=null;const n=e.selection;if(n){const e=n.dom;t.selection=n.win=n.dom=e.doc=null}})(e),e.destroyed=!0):e.remove())})(this,e)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const DR=Ra.DOM,BR=Lt.each;let MR,IR=!1,PR=[];const LR=e=>{const t=e.type;BR(UR.get(),(n=>{switch(t){case"scroll":n.dispatch("ScrollWindow",e);break;case"resize":n.dispatch("ResizeWindow",e)}}))},FR=e=>{if(e!==IR){const t=Ra.DOM;e?(t.bind(window,"resize",LR),t.bind(window,"scroll",LR)):(t.unbind(window,"resize",LR),t.unbind(window,"scroll",LR)),IR=e}},zR=e=>{const t=PR;return PR=Q(PR,(t=>e!==t)),UR.activeEditor===e&&(UR.activeEditor=PR.length>0?PR[0]:null),UR.focusedEditor===e&&(UR.focusedEditor=null),t.length!==PR.length},jR="CSS1Compat"!==document.compatMode,UR=r(r({},lR),{},{baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"4.2",releaseDate:"2023-04-26",i18n:La,activeEditor:null,focusedEditor:null,setup(){const e=this;let t="",n="",o=Dy.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(o)&&(o=o.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(o)||(o+="/"));const r=window.tinymce||window.tinyMCEPreInit;if(r)t=r.base||r.baseURL,n=r.suffix;else{const e=document.getElementsByTagName("script");for(let o=0;o<e.length;o++){const r=e[o].src||"";if(""===r)continue;const s=r.substring(r.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(r)){-1!==s.indexOf(".min")&&(n=".min"),t=r.substring(0,r.lastIndexOf("/"));break}}if(!t&&document.currentScript){const e=document.currentScript.src;-1!==e.indexOf(".min")&&(n=".min"),t=e.substring(0,e.lastIndexOf("/"))}}var s;e.baseURL=new Dy(o).toAbsolute(t),e.documentBaseURL=o,e.baseURI=new Dy(e.baseURL),e.suffix=n,(s=e).on("AddEditor",M(mf,s)),s.on("RemoveEditor",M(pf,s))},overrideDefaults(e){const t=e.base_url;t&&this._setBaseUrl(t);const n=e.suffix;n&&(this.suffix=n),this.defaultOptions=e;const o=e.plugin_base_urls;void 0!==o&&be(o,((e,t)=>{Fa.PluginManager.urls[t]=e}))},init(e){const t=this;let n;const o=Lt.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let r=e=>{n=e};const s=()=>{let n=0;const a=[];let i;DR.unbind(window,"ready",s),(n=>{const o=e.onpageload;o&&o.apply(t,[])})(),i=((e,t)=>{const n=[],o=k(t)?e=>G(n,(n=>t(n,e))):e=>q(n,e);for(let r=0,s=e.length;r<s;r++){const t=e[r];o(t)||n.push(t)}return n})((e=>Bt.browser.isIE()||Bt.browser.isEdge()?(mw("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):jR?(mw("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):h(e.selector)?DR.select(e.selector):_(e.target)?[e.target]:[])(e)),Lt.each(i,(e=>{var n;(n=t.get(e.id))&&n.initialized&&!(n.getContainer()||n.getBody()).parentNode&&(zR(n),n.unbindAllNativeEvents(),n.destroy(!0),n.removed=!0)})),i=Lt.grep(i,(e=>!t.get(e.id))),0===i.length?r([]):BR(i,(s=>{((e,t)=>e.inline&&t.tagName.toLowerCase()in o)(e,s)?mw("Could not initialize inline editor on invalid inline target element",s):((e,o,s)=>{const l=new NR(e,o,t);a.push(l),l.on("init",(()=>{++n===i.length&&r(a)})),l.targetElm=l.targetElm||s,l.render()})((e=>{let t=e.id;return t||(t=Ee(e,"name").filter((e=>!DR.get(e))).getOrThunk(DR.uniqueId),e.setAttribute("id",t)),t})(s),e,s)}))};return DR.bind(window,"ready",s),new Promise((e=>{n?e(n):r=t=>{e(t)}}))},get(e){return 0===arguments.length?PR.slice(0):h(e)?ne(PR,(t=>t.id===e)).getOr(null):E(e)&&PR[e]?PR[e]:null},add(e){const t=this,n=t.get(e.id);return n===e||(null===n&&PR.push(e),FR(!0),t.activeEditor=e,t.dispatch("AddEditor",{editor:e}),MR||(MR=e=>{const n=t.dispatch("BeforeUnload");if(n.returnValue)return e.preventDefault(),e.returnValue=n.returnValue,n.returnValue},window.addEventListener("beforeunload",MR))),e},createEditor(e,t){return this.add(new NR(e,t,this))},remove(e){const t=this;let n;if(e){if(!h(e))return n=e,x(t.get(n.id))?null:(zR(n)&&t.dispatch("RemoveEditor",{editor:n}),0===PR.length&&window.removeEventListener("beforeunload",MR),n.remove(),FR(PR.length>0),n);BR(DR.select(e),(e=>{n=t.get(e.id),n&&t.remove(n)}))}else for(let o=PR.length-1;o>=0;o--)t.remove(PR[o])},execCommand(e,t,n){var o;const r=this,s=v(n)?null!==(o=n.id)&&void 0!==o?o:n.index:n;switch(e){case"mceAddEditor":if(!r.get(s)){const e=n.options;new NR(s,e,r).render()}return!0;case"mceRemoveEditor":{const e=r.get(s);return e&&e.remove(),!0}case"mceToggleEditor":{const e=r.get(s);return e?(e.isHidden()?e.show():e.hide(),!0):(r.execCommand("mceAddEditor",!1,n),!0)}}return!!r.activeEditor&&r.activeEditor.execCommand(e,t,n)},triggerSave:()=>{BR(PR,(e=>{e.save()}))},addI18n:(e,t)=>{La.add(e,t)},translate:e=>La.translate(e),setActive(e){const t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new Dy(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Dy(this.baseURL)}});UR.setup();const HR=(()=>{const e=ja();return{FakeClipboardItem:e=>({items:e,types:he(e),getType:t=>Ee(e,t).getOrUndefined()}),write:t=>{e.set(t)},read:()=>e.get().getOrUndefined(),clear:e.clear}})(),$R=Math.min,VR=Math.max,WR=Math.round,qR=(e,t,n)=>{let o=t.x,r=t.y;const s=e.w,a=e.h,i=t.w,l=t.h,c=(n||"").split("");return"b"===c[0]&&(r+=l),"r"===c[1]&&(o+=i),"c"===c[0]&&(r+=WR(l/2)),"c"===c[1]&&(o+=WR(i/2)),"b"===c[3]&&(r-=a),"r"===c[4]&&(o-=s),"c"===c[3]&&(r-=WR(a/2)),"c"===c[4]&&(o-=WR(s/2)),GR(o,r,s,a)},GR=(e,t,n,o)=>({x:e,y:t,w:n,h:o}),KR={inflate:(e,t,n)=>GR(e.x-t,e.y-n,e.w+2*t,e.h+2*n),relativePosition:qR,findBestRelativePosition:(e,t,n,o)=>{for(let r=0;r<o.length;r++){const s=qR(e,t,o[r]);if(s.x>=n.x&&s.x+s.w<=n.w+n.x&&s.y>=n.y&&s.y+s.h<=n.h+n.y)return o[r]}return null},intersect:(e,t)=>{const n=VR(e.x,t.x),o=VR(e.y,t.y),r=$R(e.x+e.w,t.x+t.w),s=$R(e.y+e.h,t.y+t.h);return r-n<0||s-o<0?null:GR(n,o,r-n,s-o)},clamp:(e,t,n)=>{let o=e.x,r=e.y,s=e.x+e.w,a=e.y+e.h;const i=t.x+t.w,l=t.y+t.h,c=VR(0,t.x-o),d=VR(0,t.y-r),u=VR(0,s-i),m=VR(0,a-l);return o+=c,r+=d,n&&(s+=c,a+=d,o-=u,r-=m),s-=u,a-=m,GR(o,r,s-o,a-r)},create:GR,fromClientRect:e=>GR(e.left,e.top,e.width,e.height)},YR=(()=>{const e={},t={};return{load:(n,o)=>{const r=`Script at URL "${o}" failed to load`,s=`Script at URL "${o}" did not call \`tinymce.Resource.add('${n}', data)\` within 1 second`;if(void 0!==e[n])return e[n];{const a=new Promise(((e,a)=>{const i=((e,t,n=1e3)=>{let o=!1,r=null;const s=e=>(...t)=>{o||(o=!0,null!==r&&(clearTimeout(r),r=null),e.apply(null,t))},a=s(e),i=s(t);return{start:(...e)=>{o||null!==r||(r=setTimeout((()=>i.apply(null,e)),n))},resolve:a,reject:i}})(e,a);t[n]=i.resolve,Da.ScriptLoader.loadScript(o).then((()=>i.start(s)),(()=>i.reject(r)))}));return e[n]=a,a}},add:(n,o)=>{void 0!==t[n]&&(t[n](o),delete t[n]),e[n]=Promise.resolve(o)},unload:t=>{delete e[t]}}})();let XR;try{const e="__storage_test__";XR=window.localStorage,XR.setItem(e,e),XR.removeItem(e)}catch(t){XR=(()=>{let e={},t=[];const n={getItem:t=>e[t]||null,setItem:(n,o)=>{t.push(n),e[n]=String(o)},key:e=>t[e],removeItem:n=>{t=t.filter((e=>e===n)),delete e[n]},clear:()=>{t=[],e={}},length:0};return Object.defineProperty(n,"length",{get:()=>t.length,configurable:!1,enumerable:!1}),n})()}const JR={geom:{Rect:KR},util:{Delay:sf,Tools:Lt,VK:Km,URI:Dy,EventDispatcher:aR,Observable:lR,I18n:La,LocalStorage:XR,ImageUploader:e=>{const t=gw(),n=yw(e,t);return{upload:(t,o=!0)=>n.upload(t,o?bw(e):void 0)}}},dom:{EventUtils:xa,TreeWalker:Uo,TextSeeker:ai,DOMUtils:Ra,ScriptLoader:Da,RangeUtils:Ep,Serializer:Ix,StyleSheetLoader:Bs,ControlSelection:Zm,BookmarkManager:jm,Selection:Dx,Event:xa.Event},html:{Styles:ua,Entities:Js,Node:Df,Schema:da,DomParser:Wy,Writer:Uf,Serializer:Hf},Env:Bt,AddOnManager:Fa,Annotator:zm,Formatter:Nw,UndoManager:Bw,EditorCommands:JA,WindowManager:iw,NotificationManager:rw,EditorObservable:fR,Shortcuts:ER,Editor:NR,FocusManager:rf,EditorManager:UR,DOM:Ra.DOM,ScriptLoader:Da.ScriptLoader,PluginManager:sw,ThemeManager:aw,ModelManager:Jx,IconManager:Xx,Resource:YR,FakeClipboard:HR,trim:Lt.trim,isArray:Lt.isArray,is:Lt.is,toArray:Lt.toArray,makeMap:Lt.makeMap,each:Lt.each,map:Lt.map,grep:Lt.grep,inArray:Lt.inArray,extend:Lt.extend,walk:Lt.walk,resolve:Lt.resolve,explode:Lt.explode,_addCacheSuffix:Lt._addCacheSuffix},QR=Lt.extend(UR,JR);(e=>{window.tinymce=e,window.tinyMCE=e})(QR),(t=>{try{e.exports=t}catch(t){}})(QR)}()},9662:function(e,t,n){var o=n(614),r=n(6330),s=TypeError;e.exports=function(e){if(o(e))return e;throw s(r(e)+" is not a function")}},9483:function(e,t,n){var o=n(4411),r=n(6330),s=TypeError;e.exports=function(e){if(o(e))return e;throw s(r(e)+" is not a constructor")}},6077:function(e,t,n){var o=n(614),r=String,s=TypeError;e.exports=function(e){if("object"==typeof e||o(e))return e;throw s("Can't set "+r(e)+" as a prototype")}},1223:function(e,t,n){var o=n(5112),r=n(30),s=n(3070).f,a=o("unscopables"),i=Array.prototype;void 0==i[a]&&s(i,a,{configurable:!0,value:r(null)}),e.exports=function(e){i[a][e]=!0}},1530:function(e,t,n){"use strict";var o=n(8710).charAt;e.exports=function(e,t,n){return t+(n?o(e,t).length:1)}},5787:function(e,t,n){var o=n(7976),r=TypeError;e.exports=function(e,t){if(o(t,e))return e;throw r("Incorrect invocation")}},9670:function(e,t,n){var o=n(111),r=String,s=TypeError;e.exports=function(e){if(o(e))return e;throw s(r(e)+" is not an object")}},3013:function(e){e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},260:function(e,t,n){"use strict";var o,r,s,a=n(3013),i=n(9781),l=n(7854),c=n(614),d=n(111),u=n(2597),m=n(648),p=n(6330),f=n(8880),g=n(8052),h=n(7045),v=n(7976),b=n(9518),y=n(7674),x=n(5112),w=n(9711),C=n(9909),S=C.enforce,_=C.get,k=l.Int8Array,E=k&&k.prototype,O=l.Uint8ClampedArray,T=O&&O.prototype,A=k&&b(k),R=E&&b(E),N=Object.prototype,D=l.TypeError,B=x("toStringTag"),M=w("TYPED_ARRAY_TAG"),I="TypedArrayConstructor",P=a&&!!y&&"Opera"!==m(l.opera),L=!1,F={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},z={BigInt64Array:8,BigUint64Array:8},j=function(e){if(!d(e))return!1;var t=m(e);return"DataView"===t||u(F,t)||u(z,t)},U=function(e){var t=b(e);if(d(t)){var n=_(t);return n&&u(n,I)?n[I]:U(t)}},H=function(e){if(!d(e))return!1;var t=m(e);return u(F,t)||u(z,t)},$=function(e){if(H(e))return e;throw D("Target is not a typed array")},V=function(e){if(c(e)&&(!y||v(A,e)))return e;throw D(p(e)+" is not a typed array constructor")},W=function(e,t,n,o){if(i){if(n)for(var r in F){var s=l[r];if(s&&u(s.prototype,e))try{delete s.prototype[e]}catch(a){try{s.prototype[e]=t}catch(c){}}}R[e]&&!n||g(R,e,n?t:P&&E[e]||t,o)}},q=function(e,t,n){var o,r;if(i){if(y){if(n)for(o in F)if(r=l[o],r&&u(r,e))try{delete r[e]}catch(s){}if(A[e]&&!n)return;try{return g(A,e,n?t:P&&A[e]||t)}catch(s){}}for(o in F)r=l[o],!r||r[e]&&!n||g(r,e,t)}};for(o in F)r=l[o],s=r&&r.prototype,s?S(s)[I]=r:P=!1;for(o in z)r=l[o],s=r&&r.prototype,s&&(S(s)[I]=r);if((!P||!c(A)||A===Function.prototype)&&(A=function(){throw D("Incorrect invocation")},P))for(o in F)l[o]&&y(l[o],A);if((!P||!R||R===N)&&(R=A.prototype,P))for(o in F)l[o]&&y(l[o].prototype,R);if(P&&b(T)!==R&&y(T,R),i&&!u(R,B))for(o in L=!0,h(R,B,{configurable:!0,get:function(){return d(this)?this[M]:void 0}}),F)l[o]&&f(l[o],M,o);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:P,TYPED_ARRAY_TAG:L&&M,aTypedArray:$,aTypedArrayConstructor:V,exportTypedArrayMethod:W,exportTypedArrayStaticMethod:q,getTypedArrayConstructor:U,isView:j,isTypedArray:H,TypedArray:A,TypedArrayPrototype:R}},3331:function(e,t,n){"use strict";var o=n(7854),r=n(1702),s=n(9781),a=n(3013),i=n(6530),l=n(8880),c=n(7045),d=n(9190),u=n(7293),m=n(5787),p=n(9303),f=n(7466),g=n(7067),h=n(1179),v=n(9518),b=n(7674),y=n(8006).f,x=n(1285),w=n(1589),C=n(8003),S=n(9909),_=i.PROPER,k=i.CONFIGURABLE,E="ArrayBuffer",O="DataView",T="prototype",A="Wrong length",R="Wrong index",N=S.getterFor(E),D=S.getterFor(O),B=S.set,M=o[E],I=M,P=I&&I[T],L=o[O],F=L&&L[T],z=Object.prototype,j=o.Array,U=o.RangeError,H=r(x),$=r([].reverse),V=h.pack,W=h.unpack,q=function(e){return[255&e]},G=function(e){return[255&e,e>>8&255]},K=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},Y=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},X=function(e){return V(e,23,4)},J=function(e){return V(e,52,8)},Q=function(e,t,n){c(e[T],t,{configurable:!0,get:function(){return n(this)[t]}})},Z=function(e,t,n,o){var r=g(n),s=D(e);if(r+t>s.byteLength)throw U(R);var a=s.bytes,i=r+s.byteOffset,l=w(a,i,i+t);return o?l:$(l)},ee=function(e,t,n,o,r,s){var a=g(n),i=D(e);if(a+t>i.byteLength)throw U(R);for(var l=i.bytes,c=a+i.byteOffset,d=o(+r),u=0;u<t;u++)l[c+u]=d[s?u:t-u-1]};if(a){var te=_&&M.name!==E;if(u((function(){M(1)}))&&u((function(){new M(-1)}))&&!u((function(){return new M,new M(1.5),new M(NaN),1!=M.length||te&&!k})))te&&k&&l(M,"name",E);else{I=function(e){return m(this,P),new M(g(e))},I[T]=P;for(var ne,oe=y(M),re=0;oe.length>re;)(ne=oe[re++])in I||l(I,ne,M[ne]);P.constructor=I}b&&v(F)!==z&&b(F,z);var se=new L(new I(2)),ae=r(F.setInt8);se.setInt8(0,2147483648),se.setInt8(1,2147483649),!se.getInt8(0)&&se.getInt8(1)||d(F,{setInt8:function(e,t){ae(this,e,t<<24>>24)},setUint8:function(e,t){ae(this,e,t<<24>>24)}},{unsafe:!0})}else I=function(e){m(this,P);var t=g(e);B(this,{type:E,bytes:H(j(t),0),byteLength:t}),s||(this.byteLength=t,this.detached=!1)},P=I[T],L=function(e,t,n){m(this,F),m(e,P);var o=N(e),r=o.byteLength,a=p(t);if(a<0||a>r)throw U("Wrong offset");if(n=void 0===n?r-a:f(n),a+n>r)throw U(A);B(this,{type:O,buffer:e,byteLength:n,byteOffset:a,bytes:o.bytes}),s||(this.buffer=e,this.byteLength=n,this.byteOffset=a)},F=L[T],s&&(Q(I,"byteLength",N),Q(L,"buffer",D),Q(L,"byteLength",D),Q(L,"byteOffset",D)),d(F,{getInt8:function(e){return Z(this,1,e)[0]<<24>>24},getUint8:function(e){return Z(this,1,e)[0]},getInt16:function(e){var t=Z(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=Z(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return Y(Z(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return Y(Z(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return W(Z(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return W(Z(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){ee(this,1,e,q,t)},setUint8:function(e,t){ee(this,1,e,q,t)},setInt16:function(e,t){ee(this,2,e,G,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){ee(this,2,e,G,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){ee(this,4,e,K,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){ee(this,4,e,K,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){ee(this,4,e,X,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){ee(this,8,e,J,t,arguments.length>2?arguments[2]:void 0)}});C(I,E),C(L,O),e.exports={ArrayBuffer:I,DataView:L}},1285:function(e,t,n){"use strict";var o=n(7908),r=n(1400),s=n(6244);e.exports=function(e){var t=o(this),n=s(t),a=arguments.length,i=r(a>1?arguments[1]:void 0,n),l=a>2?arguments[2]:void 0,c=void 0===l?n:r(l,n);while(c>i)t[i++]=e;return t}},7745:function(e,t,n){var o=n(6244);e.exports=function(e,t){var n=0,r=o(t),s=new e(r);while(r>n)s[n]=t[n++];return s}},8457:function(e,t,n){"use strict";var o=n(9974),r=n(6916),s=n(7908),a=n(3411),i=n(7659),l=n(4411),c=n(6244),d=n(6135),u=n(4121),m=n(1246),p=Array;e.exports=function(e){var t=s(e),n=l(this),f=arguments.length,g=f>1?arguments[1]:void 0,h=void 0!==g;h&&(g=o(g,f>2?arguments[2]:void 0));var v,b,y,x,w,C,S=m(t),_=0;if(!S||this===p&&i(S))for(v=c(t),b=n?new this(v):p(v);v>_;_++)C=h?g(t[_],_):t[_],d(b,_,C);else for(x=u(t,S),w=x.next,b=n?new this:[];!(y=r(w,x)).done;_++)C=h?a(x,g,[y.value,_],!0):y.value,d(b,_,C);return b.length=_,b}},1318:function(e,t,n){var o=n(5656),r=n(1400),s=n(6244),a=function(e){return function(t,n,a){var i,l=o(t),c=s(l),d=r(a,c);if(e&&n!=n){while(c>d)if(i=l[d++],i!=i)return!0}else for(;c>d;d++)if((e||d in l)&&l[d]===n)return e||d||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},9671:function(e,t,n){var o=n(9974),r=n(8361),s=n(7908),a=n(6244),i=function(e){var t=1==e;return function(n,i,l){var c,d,u=s(n),m=r(u),p=o(i,l),f=a(m);while(f-- >0)if(c=m[f],d=p(c,f,u),d)switch(e){case 0:return c;case 1:return f}return t?-1:void 0}};e.exports={findLast:i(0),findLastIndex:i(1)}},2092:function(e,t,n){var o=n(9974),r=n(1702),s=n(8361),a=n(7908),i=n(6244),l=n(5417),c=r([].push),d=function(e){var t=1==e,n=2==e,r=3==e,d=4==e,u=6==e,m=7==e,p=5==e||u;return function(f,g,h,v){for(var b,y,x=a(f),w=s(x),C=o(g,h),S=i(w),_=0,k=v||l,E=t?k(f,S):n||m?k(f,0):void 0;S>_;_++)if((p||_ in w)&&(b=w[_],y=C(b,_,x),e))if(t)E[_]=y;else if(y)switch(e){case 3:return!0;case 5:return b;case 6:return _;case 2:c(E,b)}else switch(e){case 4:return!1;case 7:c(E,b)}return u?-1:r||d?d:E}};e.exports={forEach:d(0),map:d(1),filter:d(2),some:d(3),every:d(4),find:d(5),findIndex:d(6),filterReject:d(7)}},9341:function(e,t,n){"use strict";var o=n(7293);e.exports=function(e,t){var n=[][e];return!!n&&o((function(){n.call(null,t||function(){return 1},1)}))}},3658:function(e,t,n){"use strict";var o=n(9781),r=n(3157),s=TypeError,a=Object.getOwnPropertyDescriptor,i=o&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=i?function(e,t){if(r(e)&&!a(e,"length").writable)throw s("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}},1589:function(e,t,n){var o=n(1400),r=n(6244),s=n(6135),a=Array,i=Math.max;e.exports=function(e,t,n){for(var l=r(e),c=o(t,l),d=o(void 0===n?l:n,l),u=a(i(d-c,0)),m=0;c<d;c++,m++)s(u,m,e[c]);return u.length=m,u}},206:function(e,t,n){var o=n(1702);e.exports=o([].slice)},4362:function(e,t,n){var o=n(1589),r=Math.floor,s=function(e,t){var n=e.length,l=r(n/2);return n<8?a(e,t):i(e,s(o(e,0,l),t),s(o(e,l),t),t)},a=function(e,t){var n,o,r=e.length,s=1;while(s<r){o=s,n=e[s];while(o&&t(e[o-1],n)>0)e[o]=e[--o];o!==s++&&(e[o]=n)}return e},i=function(e,t,n,o){var r=t.length,s=n.length,a=0,i=0;while(a<r||i<s)e[a+i]=a<r&&i<s?o(t[a],n[i])<=0?t[a++]:n[i++]:a<r?t[a++]:n[i++];return e};e.exports=s},7475:function(e,t,n){var o=n(3157),r=n(4411),s=n(111),a=n(5112),i=a("species"),l=Array;e.exports=function(e){var t;return o(e)&&(t=e.constructor,r(t)&&(t===l||o(t.prototype))?t=void 0:s(t)&&(t=t[i],null===t&&(t=void 0))),void 0===t?l:t}},5417:function(e,t,n){var o=n(7475);e.exports=function(e,t){return new(o(e))(0===t?0:t)}},1843:function(e,t,n){var o=n(6244);e.exports=function(e,t){for(var n=o(e),r=new t(n),s=0;s<n;s++)r[s]=e[n-s-1];return r}},1572:function(e,t,n){var o=n(6244),r=n(9303),s=RangeError;e.exports=function(e,t,n,a){var i=o(e),l=r(n),c=l<0?i+l:l;if(c>=i||c<0)throw s("Incorrect index");for(var d=new t(i),u=0;u<i;u++)d[u]=u===c?a:e[u];return d}},3411:function(e,t,n){var o=n(9670),r=n(9212);e.exports=function(e,t,n,s){try{return s?t(o(n)[0],n[1]):t(n)}catch(a){r(e,"throw",a)}}},7072:function(e,t,n){var o=n(5112),r=o("iterator"),s=!1;try{var a=0,i={next:function(){return{done:!!a++}},return:function(){s=!0}};i[r]=function(){return this},Array.from(i,(function(){throw 2}))}catch(l){}e.exports=function(e,t){if(!t&&!s)return!1;var n=!1;try{var o={};o[r]=function(){return{next:function(){return{done:n=!0}}}},e(o)}catch(l){}return n}},4326:function(e,t,n){var o=n(1702),r=o({}.toString),s=o("".slice);e.exports=function(e){return s(r(e),8,-1)}},648:function(e,t,n){var o=n(1694),r=n(614),s=n(4326),a=n(5112),i=a("toStringTag"),l=Object,c="Arguments"==s(function(){return arguments}()),d=function(e,t){try{return e[t]}catch(n){}};e.exports=o?s:function(e){var t,n,o;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=d(t=l(e),i))?n:c?s(t):"Object"==(o=s(t))&&r(t.callee)?"Arguments":o}},9920:function(e,t,n){var o=n(2597),r=n(3887),s=n(1236),a=n(3070);e.exports=function(e,t,n){for(var i=r(t),l=a.f,c=s.f,d=0;d<i.length;d++){var u=i[d];o(e,u)||n&&o(n,u)||l(e,u,c(t,u))}}},8544:function(e,t,n){var o=n(7293);e.exports=!o((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},6178:function(e){e.exports=function(e,t){return{value:e,done:t}}},8880:function(e,t,n){var o=n(9781),r=n(3070),s=n(9114);e.exports=o?function(e,t,n){return r.f(e,t,s(1,n))}:function(e,t,n){return e[t]=n,e}},9114:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},6135:function(e,t,n){"use strict";var o=n(4948),r=n(3070),s=n(9114);e.exports=function(e,t,n){var a=o(t);a in e?r.f(e,a,s(0,n)):e[a]=n}},7045:function(e,t,n){var o=n(6339),r=n(3070);e.exports=function(e,t,n){return n.get&&o(n.get,t,{getter:!0}),n.set&&o(n.set,t,{setter:!0}),r.f(e,t,n)}},8052:function(e,t,n){var o=n(614),r=n(3070),s=n(6339),a=n(3072);e.exports=function(e,t,n,i){i||(i={});var l=i.enumerable,c=void 0!==i.name?i.name:t;if(o(n)&&s(n,c,i),i.global)l?e[t]=n:a(t,n);else{try{i.unsafe?e[t]&&(l=!0):delete e[t]}catch(d){}l?e[t]=n:r.f(e,t,{value:n,enumerable:!1,configurable:!i.nonConfigurable,writable:!i.nonWritable})}return e}},9190:function(e,t,n){var o=n(8052);e.exports=function(e,t,n){for(var r in t)o(e,r,t[r],n);return e}},3072:function(e,t,n){var o=n(7854),r=Object.defineProperty;e.exports=function(e,t){try{r(o,e,{value:t,configurable:!0,writable:!0})}catch(n){o[e]=t}return t}},5117:function(e,t,n){"use strict";var o=n(6330),r=TypeError;e.exports=function(e,t){if(!delete e[t])throw r("Cannot delete property "+o(t)+" of "+o(e))}},9781:function(e,t,n){var o=n(7293);e.exports=!o((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4154:function(e){var t="object"==typeof document&&document.all,n="undefined"==typeof t&&void 0!==t;e.exports={all:t,IS_HTMLDDA:n}},317:function(e,t,n){var o=n(7854),r=n(111),s=o.document,a=r(s)&&r(s.createElement);e.exports=function(e){return a?s.createElement(e):{}}},7207:function(e){var t=TypeError,n=9007199254740991;e.exports=function(e){if(e>n)throw t("Maximum allowed index exceeded");return e}},3678:function(e){e.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},8324:function(e){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8509:function(e,t,n){var o=n(317),r=o("span").classList,s=r&&r.constructor&&r.constructor.prototype;e.exports=s===Object.prototype?void 0:s},8886:function(e,t,n){var o=n(8113),r=o.match(/firefox\/(\d+)/i);e.exports=!!r&&+r[1]},7871:function(e,t,n){var o=n(3823),r=n(5268);e.exports=!o&&!r&&"object"==typeof window&&"object"==typeof document},3823:function(e){e.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},256:function(e,t,n){var o=n(8113);e.exports=/MSIE|Trident/.test(o)},1528:function(e,t,n){var o=n(8113);e.exports=/ipad|iphone|ipod/i.test(o)&&"undefined"!=typeof Pebble},6833:function(e,t,n){var o=n(8113);e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(o)},5268:function(e,t,n){var o=n(4326);e.exports="undefined"!=typeof process&&"process"==o(process)},1036:function(e,t,n){var o=n(8113);e.exports=/web0s(?!.*chrome)/i.test(o)},8113:function(e){e.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},7392:function(e,t,n){var o,r,s=n(7854),a=n(8113),i=s.process,l=s.Deno,c=i&&i.versions||l&&l.version,d=c&&c.v8;d&&(o=d.split("."),r=o[0]>0&&o[0]<4?1:+(o[0]+o[1])),!r&&a&&(o=a.match(/Edge\/(\d+)/),(!o||o[1]>=74)&&(o=a.match(/Chrome\/(\d+)/),o&&(r=+o[1]))),e.exports=r},8008:function(e,t,n){var o=n(8113),r=o.match(/AppleWebKit\/(\d+)\./);e.exports=!!r&&+r[1]},748:function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},1060:function(e,t,n){var o=n(1702),r=Error,s=o("".replace),a=function(e){return String(r(e).stack)}("zxcasd"),i=/\n\s*at [^:]*:[^\n]*/,l=i.test(a);e.exports=function(e,t){if(l&&"string"==typeof e&&!r.prepareStackTrace)while(t--)e=s(e,i,"");return e}},5392:function(e,t,n){var o=n(8880),r=n(1060),s=n(2914),a=Error.captureStackTrace;e.exports=function(e,t,n,i){s&&(a?a(e,t):o(e,"stack",r(n,i)))}},2914:function(e,t,n){var o=n(7293),r=n(9114);e.exports=!o((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",r(1,7)),7!==e.stack)}))},7762:function(e,t,n){"use strict";var o=n(9781),r=n(7293),s=n(9670),a=n(30),i=n(6277),l=Error.prototype.toString,c=r((function(){if(o){var e=a(Object.defineProperty({},"name",{get:function(){return this===e}}));if("true"!==l.call(e))return!0}return"2: 1"!==l.call({message:1,name:2})||"Error"!==l.call({})}));e.exports=c?function(){var e=s(this),t=i(e.name,"Error"),n=i(e.message);return t?n?t+": "+n:t:n}:l},2109:function(e,t,n){var o=n(7854),r=n(1236).f,s=n(8880),a=n(8052),i=n(3072),l=n(9920),c=n(4705);e.exports=function(e,t){var n,d,u,m,p,f,g=e.target,h=e.global,v=e.stat;if(d=h?o:v?o[g]||i(g,{}):(o[g]||{}).prototype,d)for(u in t){if(p=t[u],e.dontCallGetSet?(f=r(d,u),m=f&&f.value):m=d[u],n=c(h?u:g+(v?".":"#")+u,e.forced),!n&&void 0!==m){if(typeof p==typeof m)continue;l(p,m)}(e.sham||m&&m.sham)&&s(p,"sham",!0),a(d,u,p,e)}}},7293:function(e){e.exports=function(e){try{return!!e()}catch(t){return!0}}},7007:function(e,t,n){"use strict";n(4916);var o=n(1470),r=n(8052),s=n(2261),a=n(7293),i=n(5112),l=n(8880),c=i("species"),d=RegExp.prototype;e.exports=function(e,t,n,u){var m=i(e),p=!a((function(){var t={};return t[m]=function(){return 7},7!=""[e](t)})),f=p&&!a((function(){var t=!1,n=/a/;return"split"===e&&(n={},n.constructor={},n.constructor[c]=function(){return n},n.flags="",n[m]=/./[m]),n.exec=function(){return t=!0,null},n[m](""),!t}));if(!p||!f||n){var g=o(/./[m]),h=t(m,""[e],(function(e,t,n,r,a){var i=o(e),l=t.exec;return l===s||l===d.exec?p&&!a?{done:!0,value:g(t,n,r)}:{done:!0,value:i(n,t,r)}:{done:!1}}));r(String.prototype,e,h[0]),r(d,m,h[1])}u&&l(d[m],"sham",!0)}},2104:function(e,t,n){var o=n(4374),r=Function.prototype,s=r.apply,a=r.call;e.exports="object"==typeof Reflect&&Reflect.apply||(o?a.bind(s):function(){return a.apply(s,arguments)})},9974:function(e,t,n){var o=n(1470),r=n(9662),s=n(4374),a=o(o.bind);e.exports=function(e,t){return r(e),void 0===t?e:s?a(e,t):function(){return e.apply(t,arguments)}}},4374:function(e,t,n){var o=n(7293);e.exports=!o((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},6916:function(e,t,n){var o=n(4374),r=Function.prototype.call;e.exports=o?r.bind(r):function(){return r.apply(r,arguments)}},6530:function(e,t,n){var o=n(9781),r=n(2597),s=Function.prototype,a=o&&Object.getOwnPropertyDescriptor,i=r(s,"name"),l=i&&"something"===function(){}.name,c=i&&(!o||o&&a(s,"name").configurable);e.exports={EXISTS:i,PROPER:l,CONFIGURABLE:c}},5668:function(e,t,n){var o=n(1702),r=n(9662);e.exports=function(e,t,n){try{return o(r(Object.getOwnPropertyDescriptor(e,t)[n]))}catch(s){}}},1470:function(e,t,n){var o=n(4326),r=n(1702);e.exports=function(e){if("Function"===o(e))return r(e)}},1702:function(e,t,n){var o=n(4374),r=Function.prototype,s=r.call,a=o&&r.bind.bind(s,s);e.exports=o?a:function(e){return function(){return s.apply(e,arguments)}}},5005:function(e,t,n){var o=n(7854),r=n(614),s=function(e){return r(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?s(o[e]):o[e]&&o[e][t]}},1246:function(e,t,n){var o=n(648),r=n(8173),s=n(8554),a=n(7497),i=n(5112),l=i("iterator");e.exports=function(e){if(!s(e))return r(e,l)||r(e,"@@iterator")||a[o(e)]}},4121:function(e,t,n){var o=n(6916),r=n(9662),s=n(9670),a=n(6330),i=n(1246),l=TypeError;e.exports=function(e,t){var n=arguments.length<2?i(e):t;if(r(n))return s(o(n,e));throw l(a(e)+" is not iterable")}},8044:function(e,t,n){var o=n(1702),r=n(3157),s=n(614),a=n(4326),i=n(1340),l=o([].push);e.exports=function(e){if(s(e))return e;if(r(e)){for(var t=e.length,n=[],o=0;o<t;o++){var c=e[o];"string"==typeof c?l(n,c):"number"!=typeof c&&"Number"!=a(c)&&"String"!=a(c)||l(n,i(c))}var d=n.length,u=!0;return function(e,t){if(u)return u=!1,t;if(r(this))return t;for(var o=0;o<d;o++)if(n[o]===e)return t}}}},8173:function(e,t,n){var o=n(9662),r=n(8554);e.exports=function(e,t){var n=e[t];return r(n)?void 0:o(n)}},647:function(e,t,n){var o=n(1702),r=n(7908),s=Math.floor,a=o("".charAt),i=o("".replace),l=o("".slice),c=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,d=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,o,u,m){var p=n+e.length,f=o.length,g=d;return void 0!==u&&(u=r(u),g=c),i(m,g,(function(r,i){var c;switch(a(i,0)){case"$":return"$";case"&":return e;case"`":return l(t,0,n);case"'":return l(t,p);case"<":c=u[l(i,1,-1)];break;default:var d=+i;if(0===d)return r;if(d>f){var m=s(d/10);return 0===m?r:m<=f?void 0===o[m-1]?a(i,1):o[m-1]+a(i,1):r}c=o[d-1]}return void 0===c?"":c}))}},7854:function(e,t,n){var o=function(e){return e&&e.Math==Math&&e};e.exports=o("object"==typeof globalThis&&globalThis)||o("object"==typeof window&&window)||o("object"==typeof self&&self)||o("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},2597:function(e,t,n){var o=n(1702),r=n(7908),s=o({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return s(r(e),t)}},3501:function(e){e.exports={}},842:function(e){e.exports=function(e,t){try{1==arguments.length?console.error(e):console.error(e,t)}catch(n){}}},490:function(e,t,n){var o=n(5005);e.exports=o("document","documentElement")},4664:function(e,t,n){var o=n(9781),r=n(7293),s=n(317);e.exports=!o&&!r((function(){return 7!=Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a}))},1179:function(e){var t=Array,n=Math.abs,o=Math.pow,r=Math.floor,s=Math.log,a=Math.LN2,i=function(e,i,l){var c,d,u,m=t(l),p=8*l-i-1,f=(1<<p)-1,g=f>>1,h=23===i?o(2,-24)-o(2,-77):0,v=e<0||0===e&&1/e<0?1:0,b=0;e=n(e),e!=e||e===1/0?(d=e!=e?1:0,c=f):(c=r(s(e)/a),u=o(2,-c),e*u<1&&(c--,u*=2),e+=c+g>=1?h/u:h*o(2,1-g),e*u>=2&&(c++,u/=2),c+g>=f?(d=0,c=f):c+g>=1?(d=(e*u-1)*o(2,i),c+=g):(d=e*o(2,g-1)*o(2,i),c=0));while(i>=8)m[b++]=255&d,d/=256,i-=8;c=c<<i|d,p+=i;while(p>0)m[b++]=255&c,c/=256,p-=8;return m[--b]|=128*v,m},l=function(e,t){var n,r=e.length,s=8*r-t-1,a=(1<<s)-1,i=a>>1,l=s-7,c=r-1,d=e[c--],u=127&d;d>>=7;while(l>0)u=256*u+e[c--],l-=8;n=u&(1<<-l)-1,u>>=-l,l+=t;while(l>0)n=256*n+e[c--],l-=8;if(0===u)u=1-i;else{if(u===a)return n?NaN:d?-1/0:1/0;n+=o(2,t),u-=i}return(d?-1:1)*n*o(2,u-t)};e.exports={pack:i,unpack:l}},8361:function(e,t,n){var o=n(1702),r=n(7293),s=n(4326),a=Object,i=o("".split);e.exports=r((function(){return!a("z").propertyIsEnumerable(0)}))?function(e){return"String"==s(e)?i(e,""):a(e)}:a},9587:function(e,t,n){var o=n(614),r=n(111),s=n(7674);e.exports=function(e,t,n){var a,i;return s&&o(a=t.constructor)&&a!==n&&r(i=a.prototype)&&i!==n.prototype&&s(e,i),e}},2788:function(e,t,n){var o=n(1702),r=n(614),s=n(5465),a=o(Function.toString);r(s.inspectSource)||(s.inspectSource=function(e){return a(e)}),e.exports=s.inspectSource},8340:function(e,t,n){var o=n(111),r=n(8880);e.exports=function(e,t){o(t)&&"cause"in t&&r(e,"cause",t.cause)}},9909:function(e,t,n){var o,r,s,a=n(4811),i=n(7854),l=n(111),c=n(8880),d=n(2597),u=n(5465),m=n(6200),p=n(3501),f="Object already initialized",g=i.TypeError,h=i.WeakMap,v=function(e){return s(e)?r(e):o(e,{})},b=function(e){return function(t){var n;if(!l(t)||(n=r(t)).type!==e)throw g("Incompatible receiver, "+e+" required");return n}};if(a||u.state){var y=u.state||(u.state=new h);y.get=y.get,y.has=y.has,y.set=y.set,o=function(e,t){if(y.has(e))throw g(f);return t.facade=e,y.set(e,t),t},r=function(e){return y.get(e)||{}},s=function(e){return y.has(e)}}else{var x=m("state");p[x]=!0,o=function(e,t){if(d(e,x))throw g(f);return t.facade=e,c(e,x,t),t},r=function(e){return d(e,x)?e[x]:{}},s=function(e){return d(e,x)}}e.exports={set:o,get:r,has:s,enforce:v,getterFor:b}},7659:function(e,t,n){var o=n(5112),r=n(7497),s=o("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||a[s]===e)}},3157:function(e,t,n){var o=n(4326);e.exports=Array.isArray||function(e){return"Array"==o(e)}},4067:function(e,t,n){var o=n(648);e.exports=function(e){var t=o(e);return"BigInt64Array"==t||"BigUint64Array"==t}},614:function(e,t,n){var o=n(4154),r=o.all;e.exports=o.IS_HTMLDDA?function(e){return"function"==typeof e||e===r}:function(e){return"function"==typeof e}},4411:function(e,t,n){var o=n(1702),r=n(7293),s=n(614),a=n(648),i=n(5005),l=n(2788),c=function(){},d=[],u=i("Reflect","construct"),m=/^\s*(?:class|function)\b/,p=o(m.exec),f=!m.exec(c),g=function(e){if(!s(e))return!1;try{return u(c,d,e),!0}catch(t){return!1}},h=function(e){if(!s(e))return!1;switch(a(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return f||!!p(m,l(e))}catch(t){return!0}};h.sham=!0,e.exports=!u||r((function(){var e;return g(g.call)||!g(Object)||!g((function(){e=!0}))||e}))?h:g},4705:function(e,t,n){var o=n(7293),r=n(614),s=/#|\.prototype\./,a=function(e,t){var n=l[i(e)];return n==d||n!=c&&(r(t)?o(t):!!t)},i=a.normalize=function(e){return String(e).replace(s,".").toLowerCase()},l=a.data={},c=a.NATIVE="N",d=a.POLYFILL="P";e.exports=a},5988:function(e,t,n){var o=n(111),r=Math.floor;e.exports=Number.isInteger||function(e){return!o(e)&&isFinite(e)&&r(e)===e}},8554:function(e){e.exports=function(e){return null===e||void 0===e}},111:function(e,t,n){var o=n(614),r=n(4154),s=r.all;e.exports=r.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:o(e)||e===s}:function(e){return"object"==typeof e?null!==e:o(e)}},1913:function(e){e.exports=!1},7850:function(e,t,n){var o=n(111),r=n(4326),s=n(5112),a=s("match");e.exports=function(e){var t;return o(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==r(e))}},2190:function(e,t,n){var o=n(5005),r=n(614),s=n(7976),a=n(3307),i=Object;e.exports=a?function(e){return"symbol"==typeof e}:function(e){var t=o("Symbol");return r(t)&&s(t.prototype,i(e))}},408:function(e,t,n){var o=n(9974),r=n(6916),s=n(9670),a=n(6330),i=n(7659),l=n(6244),c=n(7976),d=n(4121),u=n(1246),m=n(9212),p=TypeError,f=function(e,t){this.stopped=e,this.result=t},g=f.prototype;e.exports=function(e,t,n){var h,v,b,y,x,w,C,S=n&&n.that,_=!(!n||!n.AS_ENTRIES),k=!(!n||!n.IS_RECORD),E=!(!n||!n.IS_ITERATOR),O=!(!n||!n.INTERRUPTED),T=o(t,S),A=function(e){return h&&m(h,"normal",e),new f(!0,e)},R=function(e){return _?(s(e),O?T(e[0],e[1],A):T(e[0],e[1])):O?T(e,A):T(e)};if(k)h=e.iterator;else if(E)h=e;else{if(v=u(e),!v)throw p(a(e)+" is not iterable");if(i(v)){for(b=0,y=l(e);y>b;b++)if(x=R(e[b]),x&&c(g,x))return x;return new f(!1)}h=d(e,v)}w=k?e.next:h.next;while(!(C=r(w,h)).done){try{x=R(C.value)}catch(N){m(h,"throw",N)}if("object"==typeof x&&x&&c(g,x))return x}return new f(!1)}},9212:function(e,t,n){var o=n(6916),r=n(9670),s=n(8173);e.exports=function(e,t,n){var a,i;r(e);try{if(a=s(e,"return"),!a){if("throw"===t)throw n;return n}a=o(a,e)}catch(l){i=!0,a=l}if("throw"===t)throw n;if(i)throw a;return r(a),n}},3061:function(e,t,n){"use strict";var o=n(3383).IteratorPrototype,r=n(30),s=n(9114),a=n(8003),i=n(7497),l=function(){return this};e.exports=function(e,t,n,c){var d=t+" Iterator";return e.prototype=r(o,{next:s(+!c,n)}),a(e,d,!1,!0),i[d]=l,e}},1656:function(e,t,n){"use strict";var o=n(2109),r=n(6916),s=n(1913),a=n(6530),i=n(614),l=n(3061),c=n(9518),d=n(7674),u=n(8003),m=n(8880),p=n(8052),f=n(5112),g=n(7497),h=n(3383),v=a.PROPER,b=a.CONFIGURABLE,y=h.IteratorPrototype,x=h.BUGGY_SAFARI_ITERATORS,w=f("iterator"),C="keys",S="values",_="entries",k=function(){return this};e.exports=function(e,t,n,a,f,h,E){l(n,t,a);var O,T,A,R=function(e){if(e===f&&I)return I;if(!x&&e in B)return B[e];switch(e){case C:return function(){return new n(this,e)};case S:return function(){return new n(this,e)};case _:return function(){return new n(this,e)}}return function(){return new n(this)}},N=t+" Iterator",D=!1,B=e.prototype,M=B[w]||B["@@iterator"]||f&&B[f],I=!x&&M||R(f),P="Array"==t&&B.entries||M;if(P&&(O=c(P.call(new e)),O!==Object.prototype&&O.next&&(s||c(O)===y||(d?d(O,y):i(O[w])||p(O,w,k)),u(O,N,!0,!0),s&&(g[N]=k))),v&&f==S&&M&&M.name!==S&&(!s&&b?m(B,"name",S):(D=!0,I=function(){return r(M,this)})),f)if(T={values:R(S),keys:h?I:R(C),entries:R(_)},E)for(A in T)(x||D||!(A in B))&&p(B,A,T[A]);else o({target:t,proto:!0,forced:x||D},T);return s&&!E||B[w]===I||p(B,w,I,{name:f}),g[t]=I,T}},3383:function(e,t,n){"use strict";var o,r,s,a=n(7293),i=n(614),l=n(111),c=n(30),d=n(9518),u=n(8052),m=n(5112),p=n(1913),f=m("iterator"),g=!1;[].keys&&(s=[].keys(),"next"in s?(r=d(d(s)),r!==Object.prototype&&(o=r)):g=!0);var h=!l(o)||a((function(){var e={};return o[f].call(e)!==e}));h?o={}:p&&(o=c(o)),i(o[f])||u(o,f,(function(){return this})),e.exports={IteratorPrototype:o,BUGGY_SAFARI_ITERATORS:g}},7497:function(e){e.exports={}},6244:function(e,t,n){var o=n(7466);e.exports=function(e){return o(e.length)}},6339:function(e,t,n){var o=n(1702),r=n(7293),s=n(614),a=n(2597),i=n(9781),l=n(6530).CONFIGURABLE,c=n(2788),d=n(9909),u=d.enforce,m=d.get,p=String,f=Object.defineProperty,g=o("".slice),h=o("".replace),v=o([].join),b=i&&!r((function(){return 8!==f((function(){}),"length",{value:8}).length})),y=String(String).split("String"),x=e.exports=function(e,t,n){"Symbol("===g(p(t),0,7)&&(t="["+h(p(t),/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!a(e,"name")||l&&e.name!==t)&&(i?f(e,"name",{value:t,configurable:!0}):e.name=t),b&&n&&a(n,"arity")&&e.length!==n.arity&&f(e,"length",{value:n.arity});try{n&&a(n,"constructor")&&n.constructor?i&&f(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(r){}var o=u(e);return a(o,"source")||(o.source=v(y,"string"==typeof t?t:"")),e};Function.prototype.toString=x((function(){return s(this)&&m(this).source||c(this)}),"toString")},4758:function(e){var t=Math.ceil,n=Math.floor;e.exports=Math.trunc||function(e){var o=+e;return(o>0?n:t)(o)}},5948:function(e,t,n){var o,r,s,a,i,l=n(7854),c=n(9974),d=n(1236).f,u=n(261).set,m=n(8572),p=n(6833),f=n(1528),g=n(1036),h=n(5268),v=l.MutationObserver||l.WebKitMutationObserver,b=l.document,y=l.process,x=l.Promise,w=d(l,"queueMicrotask"),C=w&&w.value;if(!C){var S=new m,_=function(){var e,t;h&&(e=y.domain)&&e.exit();while(t=S.get())try{t()}catch(n){throw S.head&&o(),n}e&&e.enter()};p||h||g||!v||!b?!f&&x&&x.resolve?(a=x.resolve(void 0),a.constructor=x,i=c(a.then,a),o=function(){i(_)}):h?o=function(){y.nextTick(_)}:(u=c(u,l),o=function(){u(_)}):(r=!0,s=b.createTextNode(""),new v(_).observe(s,{characterData:!0}),o=function(){s.data=r=!r}),C=function(e){S.head||o(),S.add(e)}}e.exports=C},8523:function(e,t,n){"use strict";var o=n(9662),r=TypeError,s=function(e){var t,n;this.promise=new e((function(e,o){if(void 0!==t||void 0!==n)throw r("Bad Promise constructor");t=e,n=o})),this.resolve=o(t),this.reject=o(n)};e.exports.f=function(e){return new s(e)}},6277:function(e,t,n){var o=n(1340);e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:o(e)}},1574:function(e,t,n){"use strict";var o=n(9781),r=n(1702),s=n(6916),a=n(7293),i=n(1956),l=n(5181),c=n(5296),d=n(7908),u=n(8361),m=Object.assign,p=Object.defineProperty,f=r([].concat);e.exports=!m||a((function(){if(o&&1!==m({b:1},m(p({},"a",{enumerable:!0,get:function(){p(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=m({},e)[n]||i(m({},t)).join("")!=r}))?function(e,t){var n=d(e),r=arguments.length,a=1,m=l.f,p=c.f;while(r>a){var g,h=u(arguments[a++]),v=m?f(i(h),m(h)):i(h),b=v.length,y=0;while(b>y)g=v[y++],o&&!s(p,h,g)||(n[g]=h[g])}return n}:m},30:function(e,t,n){var o,r=n(9670),s=n(6048),a=n(748),i=n(3501),l=n(490),c=n(317),d=n(6200),u=">",m="<",p="prototype",f="script",g=d("IE_PROTO"),h=function(){},v=function(e){return m+f+u+e+m+"/"+f+u},b=function(e){e.write(v("")),e.close();var t=e.parentWindow.Object;return e=null,t},y=function(){var e,t=c("iframe"),n="java"+f+":";return t.style.display="none",l.appendChild(t),t.src=String(n),e=t.contentWindow.document,e.open(),e.write(v("document.F=Object")),e.close(),e.F},x=function(){try{o=new ActiveXObject("htmlfile")}catch(t){}x="undefined"!=typeof document?document.domain&&o?b(o):y():b(o);var e=a.length;while(e--)delete x[p][a[e]];return x()};i[g]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(h[p]=r(e),n=new h,h[p]=null,n[g]=e):n=x(),void 0===t?n:s.f(n,t)}},6048:function(e,t,n){var o=n(9781),r=n(3353),s=n(3070),a=n(9670),i=n(5656),l=n(1956);t.f=o&&!r?Object.defineProperties:function(e,t){a(e);var n,o=i(t),r=l(t),c=r.length,d=0;while(c>d)s.f(e,n=r[d++],o[n]);return e}},3070:function(e,t,n){var o=n(9781),r=n(4664),s=n(3353),a=n(9670),i=n(4948),l=TypeError,c=Object.defineProperty,d=Object.getOwnPropertyDescriptor,u="enumerable",m="configurable",p="writable";t.f=o?s?function(e,t,n){if(a(e),t=i(t),a(n),"function"===typeof e&&"prototype"===t&&"value"in n&&p in n&&!n[p]){var o=d(e,t);o&&o[p]&&(e[t]=n.value,n={configurable:m in n?n[m]:o[m],enumerable:u in n?n[u]:o[u],writable:!1})}return c(e,t,n)}:c:function(e,t,n){if(a(e),t=i(t),a(n),r)try{return c(e,t,n)}catch(o){}if("get"in n||"set"in n)throw l("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},1236:function(e,t,n){var o=n(9781),r=n(6916),s=n(5296),a=n(9114),i=n(5656),l=n(4948),c=n(2597),d=n(4664),u=Object.getOwnPropertyDescriptor;t.f=o?u:function(e,t){if(e=i(e),t=l(t),d)try{return u(e,t)}catch(n){}if(c(e,t))return a(!r(s.f,e,t),e[t])}},8006:function(e,t,n){var o=n(6324),r=n(748),s=r.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return o(e,s)}},5181:function(e,t){t.f=Object.getOwnPropertySymbols},9518:function(e,t,n){var o=n(2597),r=n(614),s=n(7908),a=n(6200),i=n(8544),l=a("IE_PROTO"),c=Object,d=c.prototype;e.exports=i?c.getPrototypeOf:function(e){var t=s(e);if(o(t,l))return t[l];var n=t.constructor;return r(n)&&t instanceof n?n.prototype:t instanceof c?d:null}},7976:function(e,t,n){var o=n(1702);e.exports=o({}.isPrototypeOf)},6324:function(e,t,n){var o=n(1702),r=n(2597),s=n(5656),a=n(1318).indexOf,i=n(3501),l=o([].push);e.exports=function(e,t){var n,o=s(e),c=0,d=[];for(n in o)!r(i,n)&&r(o,n)&&l(d,n);while(t.length>c)r(o,n=t[c++])&&(~a(d,n)||l(d,n));return d}},1956:function(e,t,n){var o=n(6324),r=n(748);e.exports=Object.keys||function(e){return o(e,r)}},5296:function(e,t){"use strict";var n={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,r=o&&!n.call({1:2},1);t.f=r?function(e){var t=o(this,e);return!!t&&t.enumerable}:n},7674:function(e,t,n){var o=n(5668),r=n(9670),s=n(6077);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{e=o(Object.prototype,"__proto__","set"),e(n,[]),t=n instanceof Array}catch(a){}return function(n,o){return r(n),s(o),t?e(n,o):n.__proto__=o,n}}():void 0)},2140:function(e,t,n){var o=n(6916),r=n(614),s=n(111),a=TypeError;e.exports=function(e,t){var n,i;if("string"===t&&r(n=e.toString)&&!s(i=o(n,e)))return i;if(r(n=e.valueOf)&&!s(i=o(n,e)))return i;if("string"!==t&&r(n=e.toString)&&!s(i=o(n,e)))return i;throw a("Can't convert object to primitive value")}},3887:function(e,t,n){var o=n(5005),r=n(1702),s=n(8006),a=n(5181),i=n(9670),l=r([].concat);e.exports=o("Reflect","ownKeys")||function(e){var t=s.f(i(e)),n=a.f;return n?l(t,n(e)):t}},2534:function(e){e.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}},3702:function(e,t,n){var o=n(7854),r=n(2492),s=n(614),a=n(4705),i=n(2788),l=n(5112),c=n(7871),d=n(3823),u=n(1913),m=n(7392),p=r&&r.prototype,f=l("species"),g=!1,h=s(o.PromiseRejectionEvent),v=a("Promise",(function(){var e=i(r),t=e!==String(r);if(!t&&66===m)return!0;if(u&&(!p["catch"]||!p["finally"]))return!0;if(!m||m<51||!/native code/.test(e)){var n=new r((function(e){e(1)})),o=function(e){e((function(){}),(function(){}))},s=n.constructor={};if(s[f]=o,g=n.then((function(){}))instanceof o,!g)return!0}return!t&&(c||d)&&!h}));e.exports={CONSTRUCTOR:v,REJECTION_EVENT:h,SUBCLASSING:g}},2492:function(e,t,n){var o=n(7854);e.exports=o.Promise},9478:function(e,t,n){var o=n(9670),r=n(111),s=n(8523);e.exports=function(e,t){if(o(e),r(t)&&t.constructor===e)return t;var n=s.f(e),a=n.resolve;return a(t),n.promise}},612:function(e,t,n){var o=n(2492),r=n(7072),s=n(3702).CONSTRUCTOR;e.exports=s||!r((function(e){o.all(e).then(void 0,(function(){}))}))},2626:function(e,t,n){var o=n(3070).f;e.exports=function(e,t,n){n in e||o(e,n,{configurable:!0,get:function(){return t[n]},set:function(e){t[n]=e}})}},8572:function(e){var t=function(){this.head=null,this.tail=null};t.prototype={add:function(e){var t={item:e,next:null},n=this.tail;n?n.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e){var t=this.head=e.next;return null===t&&(this.tail=null),e.item}}},e.exports=t},7651:function(e,t,n){var o=n(6916),r=n(9670),s=n(614),a=n(4326),i=n(2261),l=TypeError;e.exports=function(e,t){var n=e.exec;if(s(n)){var c=o(n,e,t);return null!==c&&r(c),c}if("RegExp"===a(e))return o(i,e,t);throw l("RegExp#exec called on incompatible receiver")}},2261:function(e,t,n){"use strict";var o=n(6916),r=n(1702),s=n(1340),a=n(7066),i=n(2999),l=n(2309),c=n(30),d=n(9909).get,u=n(9441),m=n(7168),p=l("native-string-replace",String.prototype.replace),f=RegExp.prototype.exec,g=f,h=r("".charAt),v=r("".indexOf),b=r("".replace),y=r("".slice),x=function(){var e=/a/,t=/b*/g;return o(f,e,"a"),o(f,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),w=i.BROKEN_CARET,C=void 0!==/()??/.exec("")[1],S=x||C||w||u||m;S&&(g=function(e){var t,n,r,i,l,u,m,S=this,_=d(S),k=s(e),E=_.raw;if(E)return E.lastIndex=S.lastIndex,t=o(g,E,k),S.lastIndex=E.lastIndex,t;var O=_.groups,T=w&&S.sticky,A=o(a,S),R=S.source,N=0,D=k;if(T&&(A=b(A,"y",""),-1===v(A,"g")&&(A+="g"),D=y(k,S.lastIndex),S.lastIndex>0&&(!S.multiline||S.multiline&&"\n"!==h(k,S.lastIndex-1))&&(R="(?: "+R+")",D=" "+D,N++),n=new RegExp("^(?:"+R+")",A)),C&&(n=new RegExp("^"+R+"$(?!\\s)",A)),x&&(r=S.lastIndex),i=o(f,T?n:S,D),T?i?(i.input=y(i.input,N),i[0]=y(i[0],N),i.index=S.lastIndex,S.lastIndex+=i[0].length):S.lastIndex=0:x&&i&&(S.lastIndex=S.global?i.index+i[0].length:r),C&&i&&i.length>1&&o(p,i[0],n,(function(){for(l=1;l<arguments.length-2;l++)void 0===arguments[l]&&(i[l]=void 0)})),i&&O)for(i.groups=u=c(null),l=0;l<O.length;l++)m=O[l],u[m[0]]=i[m[1]];return i}),e.exports=g},7066:function(e,t,n){"use strict";var o=n(9670);e.exports=function(){var e=o(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},4706:function(e,t,n){var o=n(6916),r=n(2597),s=n(7976),a=n(7066),i=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in i||r(e,"flags")||!s(i,e)?t:o(a,e)}},2999:function(e,t,n){var o=n(7293),r=n(7854),s=r.RegExp,a=o((function(){var e=s("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),i=a||o((function(){return!s("a","y").sticky})),l=a||o((function(){var e=s("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));e.exports={BROKEN_CARET:l,MISSED_STICKY:i,UNSUPPORTED_Y:a}},9441:function(e,t,n){var o=n(7293),r=n(7854),s=r.RegExp;e.exports=o((function(){var e=s(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},7168:function(e,t,n){var o=n(7293),r=n(7854),s=r.RegExp;e.exports=o((function(){var e=s("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},4488:function(e,t,n){var o=n(8554),r=TypeError;e.exports=function(e){if(o(e))throw r("Can't call method on "+e);return e}},6340:function(e,t,n){"use strict";var o=n(5005),r=n(7045),s=n(5112),a=n(9781),i=s("species");e.exports=function(e){var t=o(e);a&&t&&!t[i]&&r(t,i,{configurable:!0,get:function(){return this}})}},8003:function(e,t,n){var o=n(3070).f,r=n(2597),s=n(5112),a=s("toStringTag");e.exports=function(e,t,n){e&&!n&&(e=e.prototype),e&&!r(e,a)&&o(e,a,{configurable:!0,value:t})}},6200:function(e,t,n){var o=n(2309),r=n(9711),s=o("keys");e.exports=function(e){return s[e]||(s[e]=r(e))}},5465:function(e,t,n){var o=n(7854),r=n(3072),s="__core-js_shared__",a=o[s]||r(s,{});e.exports=a},2309:function(e,t,n){var o=n(1913),r=n(5465);(e.exports=function(e,t){return r[e]||(r[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.30.1",mode:o?"pure":"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.30.1/LICENSE",source:"https://github.com/zloirock/core-js"})},6707:function(e,t,n){var o=n(9670),r=n(9483),s=n(8554),a=n(5112),i=a("species");e.exports=function(e,t){var n,a=o(e).constructor;return void 0===a||s(n=o(a)[i])?t:r(n)}},8710:function(e,t,n){var o=n(1702),r=n(9303),s=n(1340),a=n(4488),i=o("".charAt),l=o("".charCodeAt),c=o("".slice),d=function(e){return function(t,n){var o,d,u=s(a(t)),m=r(n),p=u.length;return m<0||m>=p?e?"":void 0:(o=l(u,m),o<55296||o>56319||m+1===p||(d=l(u,m+1))<56320||d>57343?e?i(u,m):o:e?c(u,m,m+2):d-56320+(o-55296<<10)+65536)}};e.exports={codeAt:d(!1),charAt:d(!0)}},3197:function(e,t,n){var o=n(1702),r=2147483647,s=36,a=1,i=26,l=38,c=700,d=72,u=128,m="-",p=/[^\0-\u007E]/,f=/[.\u3002\uFF0E\uFF61]/g,g="Overflow: input needs wider integers to process",h=s-a,v=RangeError,b=o(f.exec),y=Math.floor,x=String.fromCharCode,w=o("".charCodeAt),C=o([].join),S=o([].push),_=o("".replace),k=o("".split),E=o("".toLowerCase),O=function(e){var t=[],n=0,o=e.length;while(n<o){var r=w(e,n++);if(r>=55296&&r<=56319&&n<o){var s=w(e,n++);56320==(64512&s)?S(t,((1023&r)<<10)+(1023&s)+65536):(S(t,r),n--)}else S(t,r)}return t},T=function(e){return e+22+75*(e<26)},A=function(e,t,n){var o=0;e=n?y(e/c):e>>1,e+=y(e/t);while(e>h*i>>1)e=y(e/h),o+=s;return y(o+(h+1)*e/(e+l))},R=function(e){var t=[];e=O(e);var n,o,l=e.length,c=u,p=0,f=d;for(n=0;n<e.length;n++)o=e[n],o<128&&S(t,x(o));var h=t.length,b=h;h&&S(t,m);while(b<l){var w=r;for(n=0;n<e.length;n++)o=e[n],o>=c&&o<w&&(w=o);var _=b+1;if(w-c>y((r-p)/_))throw v(g);for(p+=(w-c)*_,c=w,n=0;n<e.length;n++){if(o=e[n],o<c&&++p>r)throw v(g);if(o==c){var k=p,E=s;while(1){var R=E<=f?a:E>=f+i?i:E-f;if(k<R)break;var N=k-R,D=s-R;S(t,x(T(R+N%D))),k=y(N/D),E+=s}S(t,x(T(k))),f=A(p,_,b==h),p=0,b++}}p++,c++}return C(t,"")};e.exports=function(e){var t,n,o=[],r=k(_(E(e),f,"."),".");for(t=0;t<r.length;t++)n=r[t],S(o,b(p,n)?"xn--"+R(n):n);return C(o,".")}},6091:function(e,t,n){var o=n(6530).PROPER,r=n(7293),s=n(1361),a="​᠎";e.exports=function(e){return r((function(){return!!s[e]()||a[e]()!==a||o&&s[e].name!==e}))}},3111:function(e,t,n){var o=n(1702),r=n(4488),s=n(1340),a=n(1361),i=o("".replace),l=RegExp("^["+a+"]+"),c=RegExp("(^|[^"+a+"])["+a+"]+$"),d=function(e){return function(t){var n=s(r(t));return 1&e&&(n=i(n,l,"")),2&e&&(n=i(n,c,"$1")),n}};e.exports={start:d(1),end:d(2),trim:d(3)}},6293:function(e,t,n){var o=n(7392),r=n(7293);e.exports=!!Object.getOwnPropertySymbols&&!r((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&o&&o<41}))},261:function(e,t,n){var o,r,s,a,i=n(7854),l=n(2104),c=n(9974),d=n(614),u=n(2597),m=n(7293),p=n(490),f=n(206),g=n(317),h=n(8053),v=n(6833),b=n(5268),y=i.setImmediate,x=i.clearImmediate,w=i.process,C=i.Dispatch,S=i.Function,_=i.MessageChannel,k=i.String,E=0,O={},T="onreadystatechange";m((function(){o=i.location}));var A=function(e){if(u(O,e)){var t=O[e];delete O[e],t()}},R=function(e){return function(){A(e)}},N=function(e){A(e.data)},D=function(e){i.postMessage(k(e),o.protocol+"//"+o.host)};y&&x||(y=function(e){h(arguments.length,1);var t=d(e)?e:S(e),n=f(arguments,1);return O[++E]=function(){l(t,void 0,n)},r(E),E},x=function(e){delete O[e]},b?r=function(e){w.nextTick(R(e))}:C&&C.now?r=function(e){C.now(R(e))}:_&&!v?(s=new _,a=s.port2,s.port1.onmessage=N,r=c(a.postMessage,a)):i.addEventListener&&d(i.postMessage)&&!i.importScripts&&o&&"file:"!==o.protocol&&!m(D)?(r=D,i.addEventListener("message",N,!1)):r=T in g("script")?function(e){p.appendChild(g("script"))[T]=function(){p.removeChild(this),A(e)}}:function(e){setTimeout(R(e),0)}),e.exports={set:y,clear:x}},1400:function(e,t,n){var o=n(9303),r=Math.max,s=Math.min;e.exports=function(e,t){var n=o(e);return n<0?r(n+t,0):s(n,t)}},4599:function(e,t,n){var o=n(7593),r=TypeError;e.exports=function(e){var t=o(e,"number");if("number"==typeof t)throw r("Can't convert number to bigint");return BigInt(t)}},7067:function(e,t,n){var o=n(9303),r=n(7466),s=RangeError;e.exports=function(e){if(void 0===e)return 0;var t=o(e),n=r(t);if(t!==n)throw s("Wrong length or index");return n}},5656:function(e,t,n){var o=n(8361),r=n(4488);e.exports=function(e){return o(r(e))}},9303:function(e,t,n){var o=n(4758);e.exports=function(e){var t=+e;return t!==t||0===t?0:o(t)}},7466:function(e,t,n){var o=n(9303),r=Math.min;e.exports=function(e){return e>0?r(o(e),9007199254740991):0}},7908:function(e,t,n){var o=n(4488),r=Object;e.exports=function(e){return r(o(e))}},4590:function(e,t,n){var o=n(3002),r=RangeError;e.exports=function(e,t){var n=o(e);if(n%t)throw r("Wrong offset");return n}},3002:function(e,t,n){var o=n(9303),r=RangeError;e.exports=function(e){var t=o(e);if(t<0)throw r("The argument can't be less than 0");return t}},7593:function(e,t,n){var o=n(6916),r=n(111),s=n(2190),a=n(8173),i=n(2140),l=n(5112),c=TypeError,d=l("toPrimitive");e.exports=function(e,t){if(!r(e)||s(e))return e;var n,l=a(e,d);if(l){if(void 0===t&&(t="default"),n=o(l,e,t),!r(n)||s(n))return n;throw c("Can't convert object to primitive value")}return void 0===t&&(t="number"),i(e,t)}},4948:function(e,t,n){var o=n(7593),r=n(2190);e.exports=function(e){var t=o(e,"string");return r(t)?t:t+""}},1694:function(e,t,n){var o=n(5112),r=o("toStringTag"),s={};s[r]="z",e.exports="[object z]"===String(s)},1340:function(e,t,n){var o=n(648),r=String;e.exports=function(e){if("Symbol"===o(e))throw TypeError("Cannot convert a Symbol value to a string");return r(e)}},4038:function(e,t,n){var o=n(5268);e.exports=function(e){try{if(o)return Function('return require("'+e+'")')()}catch(t){}}},6330:function(e){var t=String;e.exports=function(e){try{return t(e)}catch(n){return"Object"}}},9843:function(e,t,n){"use strict";var o=n(2109),r=n(7854),s=n(6916),a=n(9781),i=n(3832),l=n(260),c=n(3331),d=n(5787),u=n(9114),m=n(8880),p=n(5988),f=n(7466),g=n(7067),h=n(4590),v=n(4948),b=n(2597),y=n(648),x=n(111),w=n(2190),C=n(30),S=n(7976),_=n(7674),k=n(8006).f,E=n(7321),O=n(2092).forEach,T=n(6340),A=n(7045),R=n(3070),N=n(1236),D=n(9909),B=n(9587),M=D.get,I=D.set,P=D.enforce,L=R.f,F=N.f,z=Math.round,j=r.RangeError,U=c.ArrayBuffer,H=U.prototype,$=c.DataView,V=l.NATIVE_ARRAY_BUFFER_VIEWS,W=l.TYPED_ARRAY_TAG,q=l.TypedArray,G=l.TypedArrayPrototype,K=l.aTypedArrayConstructor,Y=l.isTypedArray,X="BYTES_PER_ELEMENT",J="Wrong length",Q=function(e,t){K(e);var n=0,o=t.length,r=new e(o);while(o>n)r[n]=t[n++];return r},Z=function(e,t){A(e,t,{configurable:!0,get:function(){return M(this)[t]}})},ee=function(e){var t;return S(H,e)||"ArrayBuffer"==(t=y(e))||"SharedArrayBuffer"==t},te=function(e,t){return Y(e)&&!w(t)&&t in e&&p(+t)&&t>=0},ne=function(e,t){return t=v(t),te(e,t)?u(2,e[t]):F(e,t)},oe=function(e,t,n){return t=v(t),!(te(e,t)&&x(n)&&b(n,"value"))||b(n,"get")||b(n,"set")||n.configurable||b(n,"writable")&&!n.writable||b(n,"enumerable")&&!n.enumerable?L(e,t,n):(e[t]=n.value,e)};a?(V||(N.f=ne,R.f=oe,Z(G,"buffer"),Z(G,"byteOffset"),Z(G,"byteLength"),Z(G,"length")),o({target:"Object",stat:!0,forced:!V},{getOwnPropertyDescriptor:ne,defineProperty:oe}),e.exports=function(e,t,n){var a=e.match(/\d+/)[0]/8,l=e+(n?"Clamped":"")+"Array",c="get"+e,u="set"+e,p=r[l],v=p,b=v&&v.prototype,y={},w=function(e,t){var n=M(e);return n.view[c](t*a+n.byteOffset,!0)},S=function(e,t,o){var r=M(e);n&&(o=(o=z(o))<0?0:o>255?255:255&o),r.view[u](t*a+r.byteOffset,o,!0)},A=function(e,t){L(e,t,{get:function(){return w(this,t)},set:function(e){return S(this,t,e)},enumerable:!0})};V?i&&(v=t((function(e,t,n,o){return d(e,b),B(function(){return x(t)?ee(t)?void 0!==o?new p(t,h(n,a),o):void 0!==n?new p(t,h(n,a)):new p(t):Y(t)?Q(v,t):s(E,v,t):new p(g(t))}(),e,v)})),_&&_(v,q),O(k(p),(function(e){e in v||m(v,e,p[e])})),v.prototype=b):(v=t((function(e,t,n,o){d(e,b);var r,i,l,c=0,u=0;if(x(t)){if(!ee(t))return Y(t)?Q(v,t):s(E,v,t);r=t,u=h(n,a);var m=t.byteLength;if(void 0===o){if(m%a)throw j(J);if(i=m-u,i<0)throw j(J)}else if(i=f(o)*a,i+u>m)throw j(J);l=i/a}else l=g(t),i=l*a,r=new U(i);I(e,{buffer:r,byteOffset:u,byteLength:i,length:l,view:new $(r)});while(c<l)A(e,c++)})),_&&_(v,q),b=v.prototype=C(G)),b.constructor!==v&&m(b,"constructor",v),P(b).TypedArrayConstructor=v,W&&m(b,W,l);var R=v!=p;y[l]=v,o({global:!0,constructor:!0,forced:R,sham:!V},y),X in v||m(v,X,a),X in b||m(b,X,a),T(l)}):e.exports=function(){}},3832:function(e,t,n){var o=n(7854),r=n(7293),s=n(7072),a=n(260).NATIVE_ARRAY_BUFFER_VIEWS,i=o.ArrayBuffer,l=o.Int8Array;e.exports=!a||!r((function(){l(1)}))||!r((function(){new l(-1)}))||!s((function(e){new l,new l(null),new l(1.5),new l(e)}),!0)||r((function(){return 1!==new l(new i(2),1,void 0).length}))},7321:function(e,t,n){var o=n(9974),r=n(6916),s=n(9483),a=n(7908),i=n(6244),l=n(4121),c=n(1246),d=n(7659),u=n(4067),m=n(260).aTypedArrayConstructor,p=n(4599);e.exports=function(e){var t,n,f,g,h,v,b,y,x=s(this),w=a(e),C=arguments.length,S=C>1?arguments[1]:void 0,_=void 0!==S,k=c(w);if(k&&!d(k)){b=l(w,k),y=b.next,w=[];while(!(v=r(y,b)).done)w.push(v.value)}for(_&&C>2&&(S=o(S,arguments[2])),n=i(w),f=new(m(x))(n),g=u(f),t=0;n>t;t++)h=_?S(w[t],t):w[t],f[t]=g?p(h):+h;return f}},9711:function(e,t,n){var o=n(1702),r=0,s=Math.random(),a=o(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+a(++r+s,36)}},5143:function(e,t,n){var o=n(7293),r=n(5112),s=n(9781),a=n(1913),i=r("iterator");e.exports=!o((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,o){t["delete"]("b"),n+=o+e})),a&&!e.toJSON||!t.size&&(a||!s)||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[i]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},3307:function(e,t,n){var o=n(6293);e.exports=o&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:function(e,t,n){var o=n(9781),r=n(7293);e.exports=o&&r((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},8053:function(e){var t=TypeError;e.exports=function(e,n){if(e<n)throw t("Not enough arguments");return e}},4811:function(e,t,n){var o=n(7854),r=n(614),s=o.WeakMap;e.exports=r(s)&&/native code/.test(String(s))},5112:function(e,t,n){var o=n(7854),r=n(2309),s=n(2597),a=n(9711),i=n(6293),l=n(3307),c=o.Symbol,d=r("wks"),u=l?c["for"]||c:c&&c.withoutSetter||a;e.exports=function(e){return s(d,e)||(d[e]=i&&s(c,e)?c[e]:u("Symbol."+e)),d[e]}},1361:function(e){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},9191:function(e,t,n){"use strict";var o=n(5005),r=n(2597),s=n(8880),a=n(7976),i=n(7674),l=n(9920),c=n(2626),d=n(9587),u=n(6277),m=n(8340),p=n(5392),f=n(9781),g=n(1913);e.exports=function(e,t,n,h){var v="stackTraceLimit",b=h?2:1,y=e.split("."),x=y[y.length-1],w=o.apply(null,y);if(w){var C=w.prototype;if(!g&&r(C,"cause")&&delete C.cause,!n)return w;var S=o("Error"),_=t((function(e,t){var n=u(h?t:e,void 0),o=h?new w(e):new w;return void 0!==n&&s(o,"message",n),p(o,_,o.stack,2),this&&a(C,this)&&d(o,this,_),arguments.length>b&&m(o,arguments[b]),o}));if(_.prototype=C,"Error"!==x?i?i(_,S):l(_,S,{name:!0}):f&&v in w&&(c(_,w,v),c(_,w,"prepareStackTrace")),l(_,w),!g)try{C.name!==x&&s(C,"name",x),C.constructor=_}catch(k){}return _}}},9575:function(e,t,n){"use strict";var o=n(2109),r=n(1470),s=n(7293),a=n(3331),i=n(9670),l=n(1400),c=n(7466),d=n(6707),u=a.ArrayBuffer,m=a.DataView,p=m.prototype,f=r(u.prototype.slice),g=r(p.getUint8),h=r(p.setUint8),v=s((function(){return!new u(2).slice(1,void 0).byteLength}));o({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:v},{slice:function(e,t){if(f&&void 0===t)return f(i(this),e);var n=i(this).byteLength,o=l(e,n),r=l(void 0===t?n:t,n),s=new(d(this,u))(c(r-o)),a=new m(this),p=new m(s),v=0;while(o<r)h(p,v++,g(a,o++));return s}})},6992:function(e,t,n){"use strict";var o=n(5656),r=n(1223),s=n(7497),a=n(9909),i=n(3070).f,l=n(1656),c=n(6178),d=n(1913),u=n(9781),m="Array Iterator",p=a.set,f=a.getterFor(m);e.exports=l(Array,"Array",(function(e,t){p(this,{type:m,target:o(e),index:0,kind:t})}),(function(){var e=f(this),t=e.target,n=e.kind,o=e.index++;return!t||o>=t.length?(e.target=void 0,c(void 0,!0)):c("keys"==n?o:"values"==n?t[o]:[o,t[o]],!1)}),"values");var g=s.Arguments=s.Array;if(r("keys"),r("values"),r("entries"),!d&&u&&"values"!==g.name)try{i(g,"name",{value:"values"})}catch(h){}},7658:function(e,t,n){"use strict";var o=n(2109),r=n(7908),s=n(6244),a=n(3658),i=n(7207),l=n(7293),c=l((function(){return 4294967297!==[].push.call({length:4294967296},1)})),d=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}},u=c||!d();o({target:"Array",proto:!0,arity:1,forced:u},{push:function(e){var t=r(this),n=s(t),o=arguments.length;i(n+o);for(var l=0;l<o;l++)t[n]=arguments[l],n++;return a(t,n),n}})},5069:function(e,t,n){"use strict";var o=n(2109),r=n(1702),s=n(3157),a=r([].reverse),i=[1,2];o({target:"Array",proto:!0,forced:String(i)===String(i.reverse())},{reverse:function(){return s(this)&&(this.length=this.length),a(this)}})},2707:function(e,t,n){"use strict";var o=n(2109),r=n(1702),s=n(9662),a=n(7908),i=n(6244),l=n(5117),c=n(1340),d=n(7293),u=n(4362),m=n(9341),p=n(8886),f=n(256),g=n(7392),h=n(8008),v=[],b=r(v.sort),y=r(v.push),x=d((function(){v.sort(void 0)})),w=d((function(){v.sort(null)})),C=m("sort"),S=!d((function(){if(g)return g<70;if(!(p&&p>3)){if(f)return!0;if(h)return h<603;var e,t,n,o,r="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(o=0;o<47;o++)v.push({k:t+o,v:n})}for(v.sort((function(e,t){return t.v-e.v})),o=0;o<v.length;o++)t=v[o].k.charAt(0),r.charAt(r.length-1)!==t&&(r+=t);return"DGBEFHACIJK"!==r}})),_=x||!w||!C||!S,k=function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:c(t)>c(n)?1:-1}};o({target:"Array",proto:!0,forced:_},{sort:function(e){void 0!==e&&s(e);var t=a(this);if(S)return void 0===e?b(t):b(t,e);var n,o,r=[],c=i(t);for(o=0;o<c;o++)o in t&&y(r,t[o]);u(r,k(e)),n=i(r),o=0;while(o<n)t[o]=r[o++];while(o<c)l(t,o++);return t}})},541:function(e,t,n){"use strict";var o=n(2109),r=n(7908),s=n(6244),a=n(3658),i=n(5117),l=n(7207),c=1!==[].unshift(0),d=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(e){return e instanceof TypeError}},u=c||!d();o({target:"Array",proto:!0,arity:1,forced:u},{unshift:function(e){var t=r(this),n=s(t),o=arguments.length;if(o){l(n+o);var c=n;while(c--){var d=c+o;c in t?t[d]=t[c]:i(t,d)}for(var u=0;u<o;u++)t[u]=arguments[u]}return a(t,n+o)}})},1703:function(e,t,n){var o=n(2109),r=n(7854),s=n(2104),a=n(9191),i="WebAssembly",l=r[i],c=7!==Error("e",{cause:7}).cause,d=function(e,t){var n={};n[e]=a(e,t,c),o({global:!0,constructor:!0,arity:1,forced:c},n)},u=function(e,t){if(l&&l[e]){var n={};n[e]=a(i+"."+e,t,c),o({target:i,stat:!0,constructor:!0,arity:1,forced:c},n)}};d("Error",(function(e){return function(t){return s(e,this,arguments)}})),d("EvalError",(function(e){return function(t){return s(e,this,arguments)}})),d("RangeError",(function(e){return function(t){return s(e,this,arguments)}})),d("ReferenceError",(function(e){return function(t){return s(e,this,arguments)}})),d("SyntaxError",(function(e){return function(t){return s(e,this,arguments)}})),d("TypeError",(function(e){return function(t){return s(e,this,arguments)}})),d("URIError",(function(e){return function(t){return s(e,this,arguments)}})),u("CompileError",(function(e){return function(t){return s(e,this,arguments)}})),u("LinkError",(function(e){return function(t){return s(e,this,arguments)}})),u("RuntimeError",(function(e){return function(t){return s(e,this,arguments)}}))},8862:function(e,t,n){var o=n(2109),r=n(5005),s=n(2104),a=n(6916),i=n(1702),l=n(7293),c=n(614),d=n(2190),u=n(206),m=n(8044),p=n(6293),f=String,g=r("JSON","stringify"),h=i(/./.exec),v=i("".charAt),b=i("".charCodeAt),y=i("".replace),x=i(1..toString),w=/[\uD800-\uDFFF]/g,C=/^[\uD800-\uDBFF]$/,S=/^[\uDC00-\uDFFF]$/,_=!p||l((function(){var e=r("Symbol")();return"[null]"!=g([e])||"{}"!=g({a:e})||"{}"!=g(Object(e))})),k=l((function(){return'"\\udf06\\ud834"'!==g("\udf06\ud834")||'"\\udead"'!==g("\udead")})),E=function(e,t){var n=u(arguments),o=m(t);if(c(o)||void 0!==e&&!d(e))return n[1]=function(e,t){if(c(o)&&(t=a(o,this,f(e),t)),!d(t))return t},s(g,null,n)},O=function(e,t,n){var o=v(n,t-1),r=v(n,t+1);return h(C,e)&&!h(S,r)||h(S,e)&&!h(C,o)?"\\u"+x(b(e,0),16):e};g&&o({target:"JSON",stat:!0,arity:3,forced:_||k},{stringify:function(e,t,n){var o=u(arguments),r=s(_?E:g,null,o);return k&&"string"==typeof r?y(r,w,O):r}})},7922:function(e,t,n){"use strict";var o=n(2109),r=n(6916),s=n(9662),a=n(8523),i=n(2534),l=n(408),c=n(612);o({target:"Promise",stat:!0,forced:c},{allSettled:function(e){var t=this,n=a.f(t),o=n.resolve,c=n.reject,d=i((function(){var n=s(t.resolve),a=[],i=0,c=1;l(e,(function(e){var s=i++,l=!1;c++,r(n,t,e).then((function(e){l||(l=!0,a[s]={status:"fulfilled",value:e},--c||o(a))}),(function(e){l||(l=!0,a[s]={status:"rejected",reason:e},--c||o(a))}))})),--c||o(a)}));return d.error&&c(d.value),n.promise}})},821:function(e,t,n){"use strict";var o=n(2109),r=n(6916),s=n(9662),a=n(8523),i=n(2534),l=n(408),c=n(612);o({target:"Promise",stat:!0,forced:c},{all:function(e){var t=this,n=a.f(t),o=n.resolve,c=n.reject,d=i((function(){var n=s(t.resolve),a=[],i=0,d=1;l(e,(function(e){var s=i++,l=!1;d++,r(n,t,e).then((function(e){l||(l=!0,a[s]=e,--d||o(a))}),c)})),--d||o(a)}));return d.error&&c(d.value),n.promise}})},4164:function(e,t,n){"use strict";var o=n(2109),r=n(1913),s=n(3702).CONSTRUCTOR,a=n(2492),i=n(5005),l=n(614),c=n(8052),d=a&&a.prototype;if(o({target:"Promise",proto:!0,forced:s,real:!0},{catch:function(e){return this.then(void 0,e)}}),!r&&l(a)){var u=i("Promise").prototype["catch"];d["catch"]!==u&&c(d,"catch",u,{unsafe:!0})}},3401:function(e,t,n){"use strict";var o,r,s,a,i=n(2109),l=n(1913),c=n(5268),d=n(7854),u=n(6916),m=n(8052),p=n(7674),f=n(8003),g=n(6340),h=n(9662),v=n(614),b=n(111),y=n(5787),x=n(6707),w=n(261).set,C=n(5948),S=n(842),_=n(2534),k=n(8572),E=n(9909),O=n(2492),T=n(3702),A=n(8523),R="Promise",N=T.CONSTRUCTOR,D=T.REJECTION_EVENT,B=T.SUBCLASSING,M=E.getterFor(R),I=E.set,P=O&&O.prototype,L=O,F=P,z=d.TypeError,j=d.document,U=d.process,H=A.f,$=H,V=!!(j&&j.createEvent&&d.dispatchEvent),W="unhandledrejection",q="rejectionhandled",G=0,K=1,Y=2,X=1,J=2,Q=function(e){var t;return!(!b(e)||!v(t=e.then))&&t},Z=function(e,t){var n,o,r,s=t.value,a=t.state==K,i=a?e.ok:e.fail,l=e.resolve,c=e.reject,d=e.domain;try{i?(a||(t.rejection===J&&re(t),t.rejection=X),!0===i?n=s:(d&&d.enter(),n=i(s),d&&(d.exit(),r=!0)),n===e.promise?c(z("Promise-chain cycle")):(o=Q(n))?u(o,n,l,c):l(n)):c(s)}catch(m){d&&!r&&d.exit(),c(m)}},ee=function(e,t){e.notified||(e.notified=!0,C((function(){var n,o=e.reactions;while(n=o.get())Z(n,e);e.notified=!1,t&&!e.rejection&&ne(e)})))},te=function(e,t,n){var o,r;V?(o=j.createEvent("Event"),o.promise=t,o.reason=n,o.initEvent(e,!1,!0),d.dispatchEvent(o)):o={promise:t,reason:n},!D&&(r=d["on"+e])?r(o):e===W&&S("Unhandled promise rejection",n)},ne=function(e){u(w,d,(function(){var t,n=e.facade,o=e.value,r=oe(e);if(r&&(t=_((function(){c?U.emit("unhandledRejection",o,n):te(W,n,o)})),e.rejection=c||oe(e)?J:X,t.error))throw t.value}))},oe=function(e){return e.rejection!==X&&!e.parent},re=function(e){u(w,d,(function(){var t=e.facade;c?U.emit("rejectionHandled",t):te(q,t,e.value)}))},se=function(e,t,n){return function(o){e(t,o,n)}},ae=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=Y,ee(e,!0))},ie=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw z("Promise can't be resolved itself");var o=Q(t);o?C((function(){var n={done:!1};try{u(o,t,se(ie,n,e),se(ae,n,e))}catch(r){ae(n,r,e)}})):(e.value=t,e.state=K,ee(e,!1))}catch(r){ae({done:!1},r,e)}}};if(N&&(L=function(e){y(this,F),h(e),u(o,this);var t=M(this);try{e(se(ie,t),se(ae,t))}catch(n){ae(t,n)}},F=L.prototype,o=function(e){I(this,{type:R,done:!1,notified:!1,parent:!1,reactions:new k,rejection:!1,state:G,value:void 0})},o.prototype=m(F,"then",(function(e,t){var n=M(this),o=H(x(this,L));return n.parent=!0,o.ok=!v(e)||e,o.fail=v(t)&&t,o.domain=c?U.domain:void 0,n.state==G?n.reactions.add(o):C((function(){Z(o,n)})),o.promise})),r=function(){var e=new o,t=M(e);this.promise=e,this.resolve=se(ie,t),this.reject=se(ae,t)},A.f=H=function(e){return e===L||e===s?new r(e):$(e)},!l&&v(O)&&P!==Object.prototype)){a=P.then,B||m(P,"then",(function(e,t){var n=this;return new L((function(e,t){u(a,n,e,t)})).then(e,t)}),{unsafe:!0});try{delete P.constructor}catch(le){}p&&p(P,F)}i({global:!0,constructor:!0,wrap:!0,forced:N},{Promise:L}),f(L,R,!1,!0),g(R)},7727:function(e,t,n){"use strict";var o=n(2109),r=n(1913),s=n(2492),a=n(7293),i=n(5005),l=n(614),c=n(6707),d=n(9478),u=n(8052),m=s&&s.prototype,p=!!s&&a((function(){m["finally"].call({then:function(){}},(function(){}))}));if(o({target:"Promise",proto:!0,real:!0,forced:p},{finally:function(e){var t=c(this,i("Promise")),n=l(e);return this.then(n?function(n){return d(t,e()).then((function(){return n}))}:e,n?function(n){return d(t,e()).then((function(){throw n}))}:e)}}),!r&&l(s)){var f=i("Promise").prototype["finally"];m["finally"]!==f&&u(m,"finally",f,{unsafe:!0})}},8674:function(e,t,n){n(3401),n(821),n(4164),n(6027),n(683),n(6294)},6027:function(e,t,n){"use strict";var o=n(2109),r=n(6916),s=n(9662),a=n(8523),i=n(2534),l=n(408),c=n(612);o({target:"Promise",stat:!0,forced:c},{race:function(e){var t=this,n=a.f(t),o=n.reject,c=i((function(){var a=s(t.resolve);l(e,(function(e){r(a,t,e).then(n.resolve,o)}))}));return c.error&&o(c.value),n.promise}})},683:function(e,t,n){"use strict";var o=n(2109),r=n(6916),s=n(8523),a=n(3702).CONSTRUCTOR;o({target:"Promise",stat:!0,forced:a},{reject:function(e){var t=s.f(this);return r(t.reject,void 0,e),t.promise}})},6294:function(e,t,n){"use strict";var o=n(2109),r=n(5005),s=n(1913),a=n(2492),i=n(3702).CONSTRUCTOR,l=n(9478),c=r("Promise"),d=s&&!i;o({target:"Promise",stat:!0,forced:s||i},{resolve:function(e){return l(d&&this===c?a:this,e)}})},1299:function(e,t,n){var o=n(2109),r=n(7854),s=n(8003);o({global:!0},{Reflect:{}}),s(r.Reflect,"Reflect",!0)},4603:function(e,t,n){var o=n(9781),r=n(7854),s=n(1702),a=n(4705),i=n(9587),l=n(8880),c=n(8006).f,d=n(7976),u=n(7850),m=n(1340),p=n(4706),f=n(2999),g=n(2626),h=n(8052),v=n(7293),b=n(2597),y=n(9909).enforce,x=n(6340),w=n(5112),C=n(9441),S=n(7168),_=w("match"),k=r.RegExp,E=k.prototype,O=r.SyntaxError,T=s(E.exec),A=s("".charAt),R=s("".replace),N=s("".indexOf),D=s("".slice),B=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,M=/a/g,I=/a/g,P=new k(M)!==M,L=f.MISSED_STICKY,F=f.UNSUPPORTED_Y,z=o&&(!P||L||C||S||v((function(){return I[_]=!1,k(M)!=M||k(I)==I||"/a/i"!=k(M,"i")}))),j=function(e){for(var t,n=e.length,o=0,r="",s=!1;o<=n;o++)t=A(e,o),"\\"!==t?s||"."!==t?("["===t?s=!0:"]"===t&&(s=!1),r+=t):r+="[\\s\\S]":r+=t+A(e,++o);return r},U=function(e){for(var t,n=e.length,o=0,r="",s=[],a={},i=!1,l=!1,c=0,d="";o<=n;o++){if(t=A(e,o),"\\"===t)t+=A(e,++o);else if("]"===t)i=!1;else if(!i)switch(!0){case"["===t:i=!0;break;case"("===t:T(B,D(e,o+1))&&(o+=2,l=!0),r+=t,c++;continue;case">"===t&&l:if(""===d||b(a,d))throw new O("Invalid capture group name");a[d]=!0,s[s.length]=[d,c],l=!1,d="";continue}l?d+=t:r+=t}return[r,s]};if(a("RegExp",z)){for(var H=function(e,t){var n,o,r,s,a,c,f=d(E,this),g=u(e),h=void 0===t,v=[],b=e;if(!f&&g&&h&&e.constructor===H)return e;if((g||d(E,e))&&(e=e.source,h&&(t=p(b))),e=void 0===e?"":m(e),t=void 0===t?"":m(t),b=e,C&&"dotAll"in M&&(o=!!t&&N(t,"s")>-1,o&&(t=R(t,/s/g,""))),n=t,L&&"sticky"in M&&(r=!!t&&N(t,"y")>-1,r&&F&&(t=R(t,/y/g,""))),S&&(s=U(e),e=s[0],v=s[1]),a=i(k(e,t),f?this:E,H),(o||r||v.length)&&(c=y(a),o&&(c.dotAll=!0,c.raw=H(j(e),n)),r&&(c.sticky=!0),v.length&&(c.groups=v)),e!==b)try{l(a,"source",""===b?"(?:)":b)}catch(x){}return a},$=c(k),V=0;$.length>V;)g(H,k,$[V++]);E.constructor=H,H.prototype=E,h(r,"RegExp",H,{constructor:!0})}x("RegExp")},8450:function(e,t,n){var o=n(9781),r=n(9441),s=n(4326),a=n(7045),i=n(9909).get,l=RegExp.prototype,c=TypeError;o&&r&&a(l,"dotAll",{configurable:!0,get:function(){if(this!==l){if("RegExp"===s(this))return!!i(this).dotAll;throw c("Incompatible receiver, RegExp required")}}})},4916:function(e,t,n){"use strict";var o=n(2109),r=n(2261);o({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},8783:function(e,t,n){"use strict";var o=n(8710).charAt,r=n(1340),s=n(9909),a=n(1656),i=n(6178),l="String Iterator",c=s.set,d=s.getterFor(l);a(String,"String",(function(e){c(this,{type:l,string:r(e),index:0})}),(function(){var e,t=d(this),n=t.string,r=t.index;return r>=n.length?i(void 0,!0):(e=o(n,r),t.index+=e.length,i(e,!1))}))},6373:function(e,t,n){"use strict";var o=n(2109),r=n(6916),s=n(1470),a=n(3061),i=n(6178),l=n(4488),c=n(7466),d=n(1340),u=n(9670),m=n(8554),p=n(4326),f=n(7850),g=n(4706),h=n(8173),v=n(8052),b=n(7293),y=n(5112),x=n(6707),w=n(1530),C=n(7651),S=n(9909),_=n(1913),k=y("matchAll"),E="RegExp String",O=E+" Iterator",T=S.set,A=S.getterFor(O),R=RegExp.prototype,N=TypeError,D=s("".indexOf),B=s("".matchAll),M=!!B&&!b((function(){B("a",/./)})),I=a((function(e,t,n,o){T(this,{type:O,regexp:e,string:t,global:n,unicode:o,done:!1})}),E,(function(){var e=A(this);if(e.done)return i(void 0,!0);var t=e.regexp,n=e.string,o=C(t,n);return null===o?(e.done=!0,i(void 0,!0)):e.global?(""===d(o[0])&&(t.lastIndex=w(n,c(t.lastIndex),e.unicode)),i(o,!1)):(e.done=!0,i(o,!1))})),P=function(e){var t,n,o,r=u(this),s=d(e),a=x(r,RegExp),i=d(g(r));return t=new a(a===RegExp?r.source:r,i),n=!!~D(i,"g"),o=!!~D(i,"u"),t.lastIndex=c(r.lastIndex),new I(t,s,n,o)};o({target:"String",proto:!0,forced:M},{matchAll:function(e){var t,n,o,s,a=l(this);if(m(e)){if(M)return B(a,e)}else{if(f(e)&&(t=d(l(g(e))),!~D(t,"g")))throw N("`.matchAll` does not allow non-global regexes");if(M)return B(a,e);if(o=h(e,k),void 0===o&&_&&"RegExp"==p(e)&&(o=P),o)return r(o,e,a)}return n=d(a),s=new RegExp(e,"g"),_?r(P,s,n):s[k](n)}}),_||k in R||v(R,k,P)},5306:function(e,t,n){"use strict";var o=n(2104),r=n(6916),s=n(1702),a=n(7007),i=n(7293),l=n(9670),c=n(614),d=n(8554),u=n(9303),m=n(7466),p=n(1340),f=n(4488),g=n(1530),h=n(8173),v=n(647),b=n(7651),y=n(5112),x=y("replace"),w=Math.max,C=Math.min,S=s([].concat),_=s([].push),k=s("".indexOf),E=s("".slice),O=function(e){return void 0===e?e:String(e)},T=function(){return"$0"==="a".replace(/./,"$0")}(),A=function(){return!!/./[x]&&""===/./[x]("a","$0")}(),R=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));a("replace",(function(e,t,n){var s=A?"$":"$0";return[function(e,n){var o=f(this),s=d(e)?void 0:h(e,x);return s?r(s,e,o,n):r(t,p(o),e,n)},function(e,r){var a=l(this),i=p(e);if("string"==typeof r&&-1===k(r,s)&&-1===k(r,"$<")){var d=n(t,a,i,r);if(d.done)return d.value}var f=c(r);f||(r=p(r));var h=a.global;if(h){var y=a.unicode;a.lastIndex=0}var x=[];while(1){var T=b(a,i);if(null===T)break;if(_(x,T),!h)break;var A=p(T[0]);""===A&&(a.lastIndex=g(i,m(a.lastIndex),y))}for(var R="",N=0,D=0;D<x.length;D++){T=x[D];for(var B=p(T[0]),M=w(C(u(T.index),i.length),0),I=[],P=1;P<T.length;P++)_(I,O(T[P]));var L=T.groups;if(f){var F=S([B],I,M,i);void 0!==L&&_(F,L);var z=p(o(r,void 0,F))}else z=v(B,i,M,I,L,r);M>=N&&(R+=E(i,N,M)+z,N=M+B.length)}return R+E(i,N)}]}),!R||!T||A)},3210:function(e,t,n){"use strict";var o=n(2109),r=n(3111).trim,s=n(6091);o({target:"String",proto:!0,forced:s("trim")},{trim:function(){return r(this)}})},1817:function(e,t,n){"use strict";var o=n(2109),r=n(9781),s=n(7854),a=n(1702),i=n(2597),l=n(614),c=n(7976),d=n(1340),u=n(7045),m=n(9920),p=s.Symbol,f=p&&p.prototype;if(r&&l(p)&&(!("description"in f)||void 0!==p().description)){var g={},h=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:d(arguments[0]),t=c(f,this)?new p(e):void 0===e?p():p(e);return""===e&&(g[t]=!0),t};m(h,p),h.prototype=f,f.constructor=h;var v="Symbol(test)"==String(p("test")),b=a(f.valueOf),y=a(f.toString),x=/^Symbol\((.*)\)[^)]+$/,w=a("".replace),C=a("".slice);u(f,"description",{configurable:!0,get:function(){var e=b(this);if(i(g,e))return"";var t=y(e),n=v?C(t,7,-1):w(t,x,"$1");return""===n?void 0:n}}),o({global:!0,constructor:!0,forced:!0},{Symbol:h})}},8675:function(e,t,n){"use strict";var o=n(260),r=n(6244),s=n(9303),a=o.aTypedArray,i=o.exportTypedArrayMethod;i("at",(function(e){var t=a(this),n=r(t),o=s(e),i=o>=0?o:n+o;return i<0||i>=n?void 0:t[i]}))},3105:function(e,t,n){"use strict";var o=n(260),r=n(1285),s=n(4599),a=n(648),i=n(6916),l=n(1702),c=n(7293),d=o.aTypedArray,u=o.exportTypedArrayMethod,m=l("".slice),p=c((function(){var e=0;return new Int8Array(2).fill({valueOf:function(){return e++}}),1!==e}));u("fill",(function(e){var t=arguments.length;d(this);var n="Big"===m(a(this),0,3)?s(e):+e;return i(r,this,n,t>1?arguments[1]:void 0,t>2?arguments[2]:void 0)}),p)},2958:function(e,t,n){"use strict";var o=n(260),r=n(9671).findLastIndex,s=o.aTypedArray,a=o.exportTypedArrayMethod;a("findLastIndex",(function(e){return r(s(this),e,arguments.length>1?arguments[1]:void 0)}))},3408:function(e,t,n){"use strict";var o=n(260),r=n(9671).findLast,s=o.aTypedArray,a=o.exportTypedArrayMethod;a("findLast",(function(e){return r(s(this),e,arguments.length>1?arguments[1]:void 0)}))},3462:function(e,t,n){"use strict";var o=n(7854),r=n(6916),s=n(260),a=n(6244),i=n(4590),l=n(7908),c=n(7293),d=o.RangeError,u=o.Int8Array,m=u&&u.prototype,p=m&&m.set,f=s.aTypedArray,g=s.exportTypedArrayMethod,h=!c((function(){var e=new Uint8ClampedArray(2);return r(p,e,{length:1,0:3},1),3!==e[1]})),v=h&&s.NATIVE_ARRAY_BUFFER_VIEWS&&c((function(){var e=new u(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]}));g("set",(function(e){f(this);var t=i(arguments.length>1?arguments[1]:void 0,1),n=l(e);if(h)return r(p,this,n,t);var o=this.length,s=a(n),c=0;if(s+t>o)throw d("Wrong length");while(c<s)this[t+c]=n[c++]}),!h||v)},3824:function(e,t,n){"use strict";var o=n(7854),r=n(1470),s=n(7293),a=n(9662),i=n(4362),l=n(260),c=n(8886),d=n(256),u=n(7392),m=n(8008),p=l.aTypedArray,f=l.exportTypedArrayMethod,g=o.Uint16Array,h=g&&r(g.prototype.sort),v=!!h&&!(s((function(){h(new g(2),null)}))&&s((function(){h(new g(2),{})}))),b=!!h&&!s((function(){if(u)return u<74;if(c)return c<67;if(d)return!0;if(m)return m<602;var e,t,n=new g(516),o=Array(516);for(e=0;e<516;e++)t=e%4,n[e]=515-e,o[e]=e-2*t+3;for(h(n,(function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(n[e]!==o[e])return!0})),y=function(e){return function(t,n){return void 0!==e?+e(t,n)||0:n!==n?-1:t!==t?1:0===t&&0===n?1/t>0&&1/n<0?1:-1:t>n}};f("sort",(function(e){return void 0!==e&&a(e),b?h(this,e):i(p(this),y(e))}),!b||v)},1439:function(e,t,n){"use strict";var o=n(1843),r=n(260),s=r.aTypedArray,a=r.exportTypedArrayMethod,i=r.getTypedArrayConstructor;a("toReversed",(function(){return o(s(this),i(this))}))},7585:function(e,t,n){"use strict";var o=n(260),r=n(1702),s=n(9662),a=n(7745),i=o.aTypedArray,l=o.getTypedArrayConstructor,c=o.exportTypedArrayMethod,d=r(o.TypedArrayPrototype.sort);c("toSorted",(function(e){void 0!==e&&s(e);var t=i(this),n=a(l(t),t);return d(n,e)}))},2472:function(e,t,n){var o=n(9843);o("Uint8",(function(e){return function(t,n,o){return e(this,t,n,o)}}))},5315:function(e,t,n){"use strict";var o=n(1572),r=n(260),s=n(4067),a=n(9303),i=n(4599),l=r.aTypedArray,c=r.getTypedArrayConstructor,d=r.exportTypedArrayMethod,u=!!function(){try{new Int8Array(1)["with"](2,{valueOf:function(){throw 8}})}catch(e){return 8===e}}();d("with",{with:function(e,t){var n=l(this),r=a(e),d=s(n)?i(t):+t;return o(n,c(n),r,d)}}["with"],!u)},3767:function(e,t,n){n(1439)},8585:function(e,t,n){n(7585)},8696:function(e,t,n){n(5315)},3948:function(e,t,n){var o=n(7854),r=n(8324),s=n(8509),a=n(6992),i=n(8880),l=n(5112),c=l("iterator"),d=l("toStringTag"),u=a.values,m=function(e,t){if(e){if(e[c]!==u)try{i(e,c,u)}catch(o){e[c]=u}if(e[d]||i(e,d,t),r[t])for(var n in a)if(e[n]!==a[n])try{i(e,n,a[n])}catch(o){e[n]=a[n]}}};for(var p in r)m(o[p]&&o[p].prototype,p);m(s,"DOMTokenList")},7714:function(e,t,n){"use strict";var o=n(2109),r=n(4038),s=n(5005),a=n(7293),i=n(30),l=n(9114),c=n(3070).f,d=n(8052),u=n(7045),m=n(2597),p=n(5787),f=n(9670),g=n(7762),h=n(6277),v=n(3678),b=n(1060),y=n(9909),x=n(9781),w=n(1913),C="DOMException",S="DATA_CLONE_ERR",_=s("Error"),k=s(C)||function(){try{var e=s("MessageChannel")||r("worker_threads").MessageChannel;(new e).port1.postMessage(new WeakMap)}catch(t){if(t.name==S&&25==t.code)return t.constructor}}(),E=k&&k.prototype,O=_.prototype,T=y.set,A=y.getterFor(C),R="stack"in _(C),N=function(e){return m(v,e)&&v[e].m?v[e].c:0},D=function(){p(this,B);var e=arguments.length,t=h(e<1?void 0:arguments[0]),n=h(e<2?void 0:arguments[1],"Error"),o=N(n);if(T(this,{type:C,name:n,message:t,code:o}),x||(this.name=n,this.message=t,this.code=o),R){var r=_(t);r.name=C,c(this,"stack",l(1,b(r.stack,1)))}},B=D.prototype=i(O),M=function(e){return{enumerable:!0,configurable:!0,get:e}},I=function(e){return M((function(){return A(this)[e]}))};x&&(u(B,"code",I("code")),u(B,"message",I("message")),u(B,"name",I("name"))),c(B,"constructor",l(1,D));var P=a((function(){return!(new k instanceof _)})),L=P||a((function(){return O.toString!==g||"2: 1"!==String(new k(1,2))})),F=P||a((function(){return 25!==new k(1,"DataCloneError").code})),z=P||25!==k[S]||25!==E[S],j=w?L||F||z:P;o({global:!0,constructor:!0,forced:j},{DOMException:j?D:k});var U=s(C),H=U.prototype;for(var $ in L&&(w||k===U)&&d(H,"toString",g),F&&x&&k===U&&u(H,"code",M((function(){return N(f(this).name)}))),v)if(m(v,$)){var V=v[$],W=V.s,q=l(6,V.c);m(U,W)||c(U,W,q),m(H,W)||c(H,W,q)}},2801:function(e,t,n){"use strict";var o=n(2109),r=n(7854),s=n(5005),a=n(9114),i=n(3070).f,l=n(2597),c=n(5787),d=n(9587),u=n(6277),m=n(3678),p=n(1060),f=n(9781),g=n(1913),h="DOMException",v=s("Error"),b=s(h),y=function(){c(this,x);var e=arguments.length,t=u(e<1?void 0:arguments[0]),n=u(e<2?void 0:arguments[1],"Error"),o=new b(t,n),r=v(t);return r.name=h,i(o,"stack",a(1,p(r.stack,1))),d(o,this,y),o},x=y.prototype=b.prototype,w="stack"in v(h),C="stack"in new b(1,2),S=b&&f&&Object.getOwnPropertyDescriptor(r,h),_=!!S&&!(S.writable&&S.configurable),k=w&&!_&&!C;o({global:!0,constructor:!0,forced:g||k},{DOMException:k?y:b});var E=s(h),O=E.prototype;if(O.constructor!==E)for(var T in g||i(O,"constructor",a(1,E)),m)if(l(m,T)){var A=m[T],R=A.s;l(E,R)||i(E,R,a(6,A.c))}},1174:function(e,t,n){var o=n(5005),r=n(8003),s="DOMException";r(o(s),s)},5556:function(e,t,n){"use strict";n(6992);var o=n(2109),r=n(7854),s=n(6916),a=n(1702),i=n(9781),l=n(5143),c=n(8052),d=n(7045),u=n(9190),m=n(8003),p=n(3061),f=n(9909),g=n(5787),h=n(614),v=n(2597),b=n(9974),y=n(648),x=n(9670),w=n(111),C=n(1340),S=n(30),_=n(9114),k=n(4121),E=n(1246),O=n(8053),T=n(5112),A=n(4362),R=T("iterator"),N="URLSearchParams",D=N+"Iterator",B=f.set,M=f.getterFor(N),I=f.getterFor(D),P=Object.getOwnPropertyDescriptor,L=function(e){if(!i)return r[e];var t=P(r,e);return t&&t.value},F=L("fetch"),z=L("Request"),j=L("Headers"),U=z&&z.prototype,H=j&&j.prototype,$=r.RegExp,V=r.TypeError,W=r.decodeURIComponent,q=r.encodeURIComponent,G=a("".charAt),K=a([].join),Y=a([].push),X=a("".replace),J=a([].shift),Q=a([].splice),Z=a("".split),ee=a("".slice),te=/\+/g,ne=Array(4),oe=function(e){return ne[e-1]||(ne[e-1]=$("((?:%[\\da-f]{2}){"+e+"})","gi"))},re=function(e){try{return W(e)}catch(t){return e}},se=function(e){var t=X(e,te," "),n=4;try{return W(t)}catch(o){while(n)t=X(t,oe(n--),re);return t}},ae=/[!'()~]|%20/g,ie={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},le=function(e){return ie[e]},ce=function(e){return X(q(e),ae,le)},de=p((function(e,t){B(this,{type:D,iterator:k(M(e).entries),kind:t})}),"Iterator",(function(){var e=I(this),t=e.kind,n=e.iterator.next(),o=n.value;return n.done||(n.value="keys"===t?o.key:"values"===t?o.value:[o.key,o.value]),n}),!0),ue=function(e){this.entries=[],this.url=null,void 0!==e&&(w(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===G(e,0)?ee(e,1):e:C(e)))};ue.prototype={type:N,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,n,o,r,a,i,l,c=E(e);if(c){t=k(e,c),n=t.next;while(!(o=s(n,t)).done){if(r=k(x(o.value)),a=r.next,(i=s(a,r)).done||(l=s(a,r)).done||!s(a,r).done)throw V("Expected sequence with length 2");Y(this.entries,{key:C(i.value),value:C(l.value)})}}else for(var d in e)v(e,d)&&Y(this.entries,{key:d,value:C(e[d])})},parseQuery:function(e){if(e){var t,n,o=Z(e,"&"),r=0;while(r<o.length)t=o[r++],t.length&&(n=Z(t,"="),Y(this.entries,{key:se(J(n)),value:se(K(n,"="))}))}},serialize:function(){var e,t=this.entries,n=[],o=0;while(o<t.length)e=t[o++],Y(n,ce(e.key)+"="+ce(e.value));return K(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var me=function(){g(this,pe);var e=arguments.length>0?arguments[0]:void 0,t=B(this,new ue(e));i||(this.length=t.entries.length)},pe=me.prototype;if(u(pe,{append:function(e,t){O(arguments.length,2);var n=M(this);Y(n.entries,{key:C(e),value:C(t)}),i||this.length++,n.updateURL()},delete:function(e){O(arguments.length,1);var t=M(this),n=t.entries,o=C(e),r=0;while(r<n.length)n[r].key===o?Q(n,r,1):r++;i||(this.length=n.length),t.updateURL()},get:function(e){O(arguments.length,1);for(var t=M(this).entries,n=C(e),o=0;o<t.length;o++)if(t[o].key===n)return t[o].value;return null},getAll:function(e){O(arguments.length,1);for(var t=M(this).entries,n=C(e),o=[],r=0;r<t.length;r++)t[r].key===n&&Y(o,t[r].value);return o},has:function(e){O(arguments.length,1);var t=M(this).entries,n=C(e),o=0;while(o<t.length)if(t[o++].key===n)return!0;return!1},set:function(e,t){O(arguments.length,1);for(var n,o=M(this),r=o.entries,s=!1,a=C(e),l=C(t),c=0;c<r.length;c++)n=r[c],n.key===a&&(s?Q(r,c--,1):(s=!0,n.value=l));s||Y(r,{key:a,value:l}),i||(this.length=r.length),o.updateURL()},sort:function(){var e=M(this);A(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){var t,n=M(this).entries,o=b(e,arguments.length>1?arguments[1]:void 0),r=0;while(r<n.length)t=n[r++],o(t.value,t.key,this)},keys:function(){return new de(this,"keys")},values:function(){return new de(this,"values")},entries:function(){return new de(this,"entries")}},{enumerable:!0}),c(pe,R,pe.entries,{name:"entries"}),c(pe,"toString",(function(){return M(this).serialize()}),{enumerable:!0}),i&&d(pe,"size",{get:function(){return M(this).entries.length},configurable:!0,enumerable:!0}),m(me,N),o({global:!0,constructor:!0,forced:!l},{URLSearchParams:me}),!l&&h(j)){var fe=a(H.has),ge=a(H.set),he=function(e){if(w(e)){var t,n=e.body;if(y(n)===N)return t=e.headers?new j(e.headers):new j,fe(t,"content-type")||ge(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),S(e,{body:_(0,C(n)),headers:_(0,t)})}return e};if(h(F)&&o({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return F(e,arguments.length>1?he(arguments[1]):{})}}),h(z)){var ve=function(e){return g(this,U),new z(e,arguments.length>1?he(arguments[1]):{})};U.constructor=ve,ve.prototype=U,o({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:ve})}}e.exports={URLSearchParams:me,getState:M}},1637:function(e,t,n){n(5556)},8789:function(e,t,n){"use strict";n(8783);var o,r=n(2109),s=n(9781),a=n(5143),i=n(7854),l=n(9974),c=n(1702),d=n(8052),u=n(7045),m=n(5787),p=n(2597),f=n(1574),g=n(8457),h=n(1589),v=n(8710).codeAt,b=n(3197),y=n(1340),x=n(8003),w=n(8053),C=n(5556),S=n(9909),_=S.set,k=S.getterFor("URL"),E=C.URLSearchParams,O=C.getState,T=i.URL,A=i.TypeError,R=i.parseInt,N=Math.floor,D=Math.pow,B=c("".charAt),M=c(/./.exec),I=c([].join),P=c(1..toString),L=c([].pop),F=c([].push),z=c("".replace),j=c([].shift),U=c("".split),H=c("".slice),$=c("".toLowerCase),V=c([].unshift),W="Invalid authority",q="Invalid scheme",G="Invalid host",K="Invalid port",Y=/[a-z]/i,X=/[\d+-.a-z]/i,J=/\d/,Q=/^0x/i,Z=/^[0-7]+$/,ee=/^\d+$/,te=/^[\da-f]+$/i,ne=/[\0\t\n\r #%/:<>?@[\\\]^|]/,oe=/[\0\t\n\r #/:<>?@[\\\]^|]/,re=/^[\u0000-\u0020]+/,se=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,ae=/[\t\n\r]/g,ie=function(e){var t,n,o,r,s,a,i,l=U(e,".");if(l.length&&""==l[l.length-1]&&l.length--,t=l.length,t>4)return e;for(n=[],o=0;o<t;o++){if(r=l[o],""==r)return e;if(s=10,r.length>1&&"0"==B(r,0)&&(s=M(Q,r)?16:8,r=H(r,8==s?1:2)),""===r)a=0;else{if(!M(10==s?ee:8==s?Z:te,r))return e;a=R(r,s)}F(n,a)}for(o=0;o<t;o++)if(a=n[o],o==t-1){if(a>=D(256,5-t))return null}else if(a>255)return null;for(i=L(n),o=0;o<n.length;o++)i+=n[o]*D(256,3-o);return i},le=function(e){var t,n,o,r,s,a,i,l=[0,0,0,0,0,0,0,0],c=0,d=null,u=0,m=function(){return B(e,u)};if(":"==m()){if(":"!=B(e,1))return;u+=2,c++,d=c}while(m()){if(8==c)return;if(":"!=m()){t=n=0;while(n<4&&M(te,m()))t=16*t+R(m(),16),u++,n++;if("."==m()){if(0==n)return;if(u-=n,c>6)return;o=0;while(m()){if(r=null,o>0){if(!("."==m()&&o<4))return;u++}if(!M(J,m()))return;while(M(J,m())){if(s=R(m(),10),null===r)r=s;else{if(0==r)return;r=10*r+s}if(r>255)return;u++}l[c]=256*l[c]+r,o++,2!=o&&4!=o||c++}if(4!=o)return;break}if(":"==m()){if(u++,!m())return}else if(m())return;l[c++]=t}else{if(null!==d)return;u++,c++,d=c}}if(null!==d){a=c-d,c=7;while(0!=c&&a>0)i=l[c],l[c--]=l[d+a-1],l[d+--a]=i}else if(8!=c)return;return l},ce=function(e){for(var t=null,n=1,o=null,r=0,s=0;s<8;s++)0!==e[s]?(r>n&&(t=o,n=r),o=null,r=0):(null===o&&(o=s),++r);return r>n&&(t=o,n=r),t},de=function(e){var t,n,o,r;if("number"==typeof e){for(t=[],n=0;n<4;n++)V(t,e%256),e=N(e/256);return I(t,".")}if("object"==typeof e){for(t="",o=ce(e),n=0;n<8;n++)r&&0===e[n]||(r&&(r=!1),o===n?(t+=n?":":"::",r=!0):(t+=P(e[n],16),n<7&&(t+=":")));return"["+t+"]"}return e},ue={},me=f({},ue,{" ":1,'"':1,"<":1,">":1,"`":1}),pe=f({},me,{"#":1,"?":1,"{":1,"}":1}),fe=f({},pe,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),ge=function(e,t){var n=v(e,0);return n>32&&n<127&&!p(t,e)?e:encodeURIComponent(e)},he={ftp:21,file:null,http:80,https:443,ws:80,wss:443},ve=function(e,t){var n;return 2==e.length&&M(Y,B(e,0))&&(":"==(n=B(e,1))||!t&&"|"==n)},be=function(e){var t;return e.length>1&&ve(H(e,0,2))&&(2==e.length||"/"===(t=B(e,2))||"\\"===t||"?"===t||"#"===t)},ye=function(e){return"."===e||"%2e"===$(e)},xe=function(e){return e=$(e),".."===e||"%2e."===e||".%2e"===e||"%2e%2e"===e},we={},Ce={},Se={},_e={},ke={},Ee={},Oe={},Te={},Ae={},Re={},Ne={},De={},Be={},Me={},Ie={},Pe={},Le={},Fe={},ze={},je={},Ue={},He=function(e,t,n){var o,r,s,a=y(e);if(t){if(r=this.parse(a),r)throw A(r);this.searchParams=null}else{if(void 0!==n&&(o=new He(n,!0)),r=this.parse(a,null,o),r)throw A(r);s=O(new E),s.bindURL(this),this.searchParams=s}};He.prototype={type:"URL",parse:function(e,t,n){var r,s,a,i,l=this,c=t||we,d=0,u="",m=!1,f=!1,v=!1;e=y(e),t||(l.scheme="",l.username="",l.password="",l.host=null,l.port=null,l.path=[],l.query=null,l.fragment=null,l.cannotBeABaseURL=!1,e=z(e,re,""),e=z(e,se,"$1")),e=z(e,ae,""),r=g(e);while(d<=r.length){switch(s=r[d],c){case we:if(!s||!M(Y,s)){if(t)return q;c=Se;continue}u+=$(s),c=Ce;break;case Ce:if(s&&(M(X,s)||"+"==s||"-"==s||"."==s))u+=$(s);else{if(":"!=s){if(t)return q;u="",c=Se,d=0;continue}if(t&&(l.isSpecial()!=p(he,u)||"file"==u&&(l.includesCredentials()||null!==l.port)||"file"==l.scheme&&!l.host))return;if(l.scheme=u,t)return void(l.isSpecial()&&he[l.scheme]==l.port&&(l.port=null));u="","file"==l.scheme?c=Me:l.isSpecial()&&n&&n.scheme==l.scheme?c=_e:l.isSpecial()?c=Te:"/"==r[d+1]?(c=ke,d++):(l.cannotBeABaseURL=!0,F(l.path,""),c=ze)}break;case Se:if(!n||n.cannotBeABaseURL&&"#"!=s)return q;if(n.cannotBeABaseURL&&"#"==s){l.scheme=n.scheme,l.path=h(n.path),l.query=n.query,l.fragment="",l.cannotBeABaseURL=!0,c=Ue;break}c="file"==n.scheme?Me:Ee;continue;case _e:if("/"!=s||"/"!=r[d+1]){c=Ee;continue}c=Ae,d++;break;case ke:if("/"==s){c=Re;break}c=Fe;continue;case Ee:if(l.scheme=n.scheme,s==o)l.username=n.username,l.password=n.password,l.host=n.host,l.port=n.port,l.path=h(n.path),l.query=n.query;else if("/"==s||"\\"==s&&l.isSpecial())c=Oe;else if("?"==s)l.username=n.username,l.password=n.password,l.host=n.host,l.port=n.port,l.path=h(n.path),l.query="",c=je;else{if("#"!=s){l.username=n.username,l.password=n.password,l.host=n.host,l.port=n.port,l.path=h(n.path),l.path.length--,c=Fe;continue}l.username=n.username,l.password=n.password,l.host=n.host,l.port=n.port,l.path=h(n.path),l.query=n.query,l.fragment="",c=Ue}break;case Oe:if(!l.isSpecial()||"/"!=s&&"\\"!=s){if("/"!=s){l.username=n.username,l.password=n.password,l.host=n.host,l.port=n.port,c=Fe;continue}c=Re}else c=Ae;break;case Te:if(c=Ae,"/"!=s||"/"!=B(u,d+1))continue;d++;break;case Ae:if("/"!=s&&"\\"!=s){c=Re;continue}break;case Re:if("@"==s){m&&(u="%40"+u),m=!0,a=g(u);for(var b=0;b<a.length;b++){var x=a[b];if(":"!=x||v){var w=ge(x,fe);v?l.password+=w:l.username+=w}else v=!0}u=""}else if(s==o||"/"==s||"?"==s||"#"==s||"\\"==s&&l.isSpecial()){if(m&&""==u)return W;d-=g(u).length+1,u="",c=Ne}else u+=s;break;case Ne:case De:if(t&&"file"==l.scheme){c=Pe;continue}if(":"!=s||f){if(s==o||"/"==s||"?"==s||"#"==s||"\\"==s&&l.isSpecial()){if(l.isSpecial()&&""==u)return G;if(t&&""==u&&(l.includesCredentials()||null!==l.port))return;if(i=l.parseHost(u),i)return i;if(u="",c=Le,t)return;continue}"["==s?f=!0:"]"==s&&(f=!1),u+=s}else{if(""==u)return G;if(i=l.parseHost(u),i)return i;if(u="",c=Be,t==De)return}break;case Be:if(!M(J,s)){if(s==o||"/"==s||"?"==s||"#"==s||"\\"==s&&l.isSpecial()||t){if(""!=u){var C=R(u,10);if(C>65535)return K;l.port=l.isSpecial()&&C===he[l.scheme]?null:C,u=""}if(t)return;c=Le;continue}return K}u+=s;break;case Me:if(l.scheme="file","/"==s||"\\"==s)c=Ie;else{if(!n||"file"!=n.scheme){c=Fe;continue}if(s==o)l.host=n.host,l.path=h(n.path),l.query=n.query;else if("?"==s)l.host=n.host,l.path=h(n.path),l.query="",c=je;else{if("#"!=s){be(I(h(r,d),""))||(l.host=n.host,l.path=h(n.path),l.shortenPath()),c=Fe;continue}l.host=n.host,l.path=h(n.path),l.query=n.query,l.fragment="",c=Ue}}break;case Ie:if("/"==s||"\\"==s){c=Pe;break}n&&"file"==n.scheme&&!be(I(h(r,d),""))&&(ve(n.path[0],!0)?F(l.path,n.path[0]):l.host=n.host),c=Fe;continue;case Pe:if(s==o||"/"==s||"\\"==s||"?"==s||"#"==s){if(!t&&ve(u))c=Fe;else if(""==u){if(l.host="",t)return;c=Le}else{if(i=l.parseHost(u),i)return i;if("localhost"==l.host&&(l.host=""),t)return;u="",c=Le}continue}u+=s;break;case Le:if(l.isSpecial()){if(c=Fe,"/"!=s&&"\\"!=s)continue}else if(t||"?"!=s)if(t||"#"!=s){if(s!=o&&(c=Fe,"/"!=s))continue}else l.fragment="",c=Ue;else l.query="",c=je;break;case Fe:if(s==o||"/"==s||"\\"==s&&l.isSpecial()||!t&&("?"==s||"#"==s)){if(xe(u)?(l.shortenPath(),"/"==s||"\\"==s&&l.isSpecial()||F(l.path,"")):ye(u)?"/"==s||"\\"==s&&l.isSpecial()||F(l.path,""):("file"==l.scheme&&!l.path.length&&ve(u)&&(l.host&&(l.host=""),u=B(u,0)+":"),F(l.path,u)),u="","file"==l.scheme&&(s==o||"?"==s||"#"==s))while(l.path.length>1&&""===l.path[0])j(l.path);"?"==s?(l.query="",c=je):"#"==s&&(l.fragment="",c=Ue)}else u+=ge(s,pe);break;case ze:"?"==s?(l.query="",c=je):"#"==s?(l.fragment="",c=Ue):s!=o&&(l.path[0]+=ge(s,ue));break;case je:t||"#"!=s?s!=o&&("'"==s&&l.isSpecial()?l.query+="%27":l.query+="#"==s?"%23":ge(s,ue)):(l.fragment="",c=Ue);break;case Ue:s!=o&&(l.fragment+=ge(s,me));break}d++}},parseHost:function(e){var t,n,o;if("["==B(e,0)){if("]"!=B(e,e.length-1))return G;if(t=le(H(e,1,-1)),!t)return G;this.host=t}else if(this.isSpecial()){if(e=b(e),M(ne,e))return G;if(t=ie(e),null===t)return G;this.host=t}else{if(M(oe,e))return G;for(t="",n=g(e),o=0;o<n.length;o++)t+=ge(n[o],ue);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return p(he,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"==this.scheme&&1==t&&ve(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,n=e.username,o=e.password,r=e.host,s=e.port,a=e.path,i=e.query,l=e.fragment,c=t+":";return null!==r?(c+="//",e.includesCredentials()&&(c+=n+(o?":"+o:"")+"@"),c+=de(r),null!==s&&(c+=":"+s)):"file"==t&&(c+="//"),c+=e.cannotBeABaseURL?a[0]:a.length?"/"+I(a,"/"):"",null!==i&&(c+="?"+i),null!==l&&(c+="#"+l),c},setHref:function(e){var t=this.parse(e);if(t)throw A(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"==e)try{return new $e(e.path[0]).origin}catch(n){return"null"}return"file"!=e&&this.isSpecial()?e+"://"+de(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(y(e)+":",we)},getUsername:function(){return this.username},setUsername:function(e){var t=g(y(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<t.length;n++)this.username+=ge(t[n],fe)}},getPassword:function(){return this.password},setPassword:function(e){var t=g(y(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<t.length;n++)this.password+=ge(t[n],fe)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?de(e):de(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,Ne)},getHostname:function(){var e=this.host;return null===e?"":de(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,De)},getPort:function(){var e=this.port;return null===e?"":y(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(e=y(e),""==e?this.port=null:this.parse(e,Be))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+I(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,Le))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){e=y(e),""==e?this.query=null:("?"==B(e,0)&&(e=H(e,1)),this.query="",this.parse(e,je)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){e=y(e),""!=e?("#"==B(e,0)&&(e=H(e,1)),this.fragment="",this.parse(e,Ue)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var $e=function(e){var t=m(this,Ve),n=w(arguments.length,1)>1?arguments[1]:void 0,o=_(t,new He(e,!1,n));s||(t.href=o.serialize(),t.origin=o.getOrigin(),t.protocol=o.getProtocol(),t.username=o.getUsername(),t.password=o.getPassword(),t.host=o.getHost(),t.hostname=o.getHostname(),t.port=o.getPort(),t.pathname=o.getPathname(),t.search=o.getSearch(),t.searchParams=o.getSearchParams(),t.hash=o.getHash())},Ve=$e.prototype,We=function(e,t){return{get:function(){return k(this)[e]()},set:t&&function(e){return k(this)[t](e)},configurable:!0,enumerable:!0}};if(s&&(u(Ve,"href",We("serialize","setHref")),u(Ve,"origin",We("getOrigin")),u(Ve,"protocol",We("getProtocol","setProtocol")),u(Ve,"username",We("getUsername","setUsername")),u(Ve,"password",We("getPassword","setPassword")),u(Ve,"host",We("getHost","setHost")),u(Ve,"hostname",We("getHostname","setHostname")),u(Ve,"port",We("getPort","setPort")),u(Ve,"pathname",We("getPathname","setPathname")),u(Ve,"search",We("getSearch","setSearch")),u(Ve,"searchParams",We("getSearchParams")),u(Ve,"hash",We("getHash","setHash"))),d(Ve,"toJSON",(function(){return k(this).serialize()}),{enumerable:!0}),d(Ve,"toString",(function(){return k(this).serialize()}),{enumerable:!0}),T){var qe=T.createObjectURL,Ge=T.revokeObjectURL;qe&&d($e,"createObjectURL",l(qe,T)),Ge&&d($e,"revokeObjectURL",l(Ge,T))}x($e,"URL"),r({global:!0,constructor:!0,forced:!a,sham:!s},{URL:$e})},285:function(e,t,n){n(8789)},144:function(e,t,n){"use strict";n.d(t,{ZP:function(){return Jo}});
/*!
 * Vue.js v2.7.14
 * (c) 2014-2022 Evan You
 * Released under the MIT License.
 */
var o=Object.freeze({}),r=Array.isArray;function s(e){return void 0===e||null===e}function a(e){return void 0!==e&&null!==e}function i(e){return!0===e}function l(e){return!1===e}function c(e){return"string"===typeof e||"number"===typeof e||"symbol"===typeof e||"boolean"===typeof e}function d(e){return"function"===typeof e}function u(e){return null!==e&&"object"===typeof e}var m=Object.prototype.toString;function p(e){return"[object Object]"===m.call(e)}function f(e){return"[object RegExp]"===m.call(e)}function g(e){var t=parseFloat(String(e));return t>=0&&Math.floor(t)===t&&isFinite(e)}function h(e){return a(e)&&"function"===typeof e.then&&"function"===typeof e.catch}function v(e){return null==e?"":Array.isArray(e)||p(e)&&e.toString===m?JSON.stringify(e,null,2):String(e)}function b(e){var t=parseFloat(e);return isNaN(t)?e:t}function y(e,t){for(var n=Object.create(null),o=e.split(","),r=0;r<o.length;r++)n[o[r]]=!0;return t?function(e){return n[e.toLowerCase()]}:function(e){return n[e]}}y("slot,component",!0);var x=y("key,ref,slot,slot-scope,is");function w(e,t){var n=e.length;if(n){if(t===e[n-1])return void(e.length=n-1);var o=e.indexOf(t);if(o>-1)return e.splice(o,1)}}var C=Object.prototype.hasOwnProperty;function S(e,t){return C.call(e,t)}function _(e){var t=Object.create(null);return function(n){var o=t[n];return o||(t[n]=e(n))}}var k=/-(\w)/g,E=_((function(e){return e.replace(k,(function(e,t){return t?t.toUpperCase():""}))})),O=_((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})),T=/\B([A-Z])/g,A=_((function(e){return e.replace(T,"-$1").toLowerCase()}));function R(e,t){function n(n){var o=arguments.length;return o?o>1?e.apply(t,arguments):e.call(t,n):e.call(t)}return n._length=e.length,n}function N(e,t){return e.bind(t)}var D=Function.prototype.bind?N:R;function B(e,t){t=t||0;var n=e.length-t,o=new Array(n);while(n--)o[n]=e[n+t];return o}function M(e,t){for(var n in t)e[n]=t[n];return e}function I(e){for(var t={},n=0;n<e.length;n++)e[n]&&M(t,e[n]);return t}function P(e,t,n){}var L=function(e,t,n){return!1},F=function(e){return e};function z(e,t){if(e===t)return!0;var n=u(e),o=u(t);if(!n||!o)return!n&&!o&&String(e)===String(t);try{var r=Array.isArray(e),s=Array.isArray(t);if(r&&s)return e.length===t.length&&e.every((function(e,n){return z(e,t[n])}));if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(r||s)return!1;var a=Object.keys(e),i=Object.keys(t);return a.length===i.length&&a.every((function(n){return z(e[n],t[n])}))}catch(l){return!1}}function j(e,t){for(var n=0;n<e.length;n++)if(z(e[n],t))return n;return-1}function U(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}}function H(e,t){return e===t?0===e&&1/e!==1/t:e===e||t===t}var $="data-server-rendered",V=["component","directive","filter"],W=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch","renderTracked","renderTriggered"],q={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:L,isReservedAttr:L,isUnknownElement:L,getTagNamespace:P,parsePlatformTagName:F,mustUseProp:L,async:!0,_lifecycleHooks:W},G=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function K(e){var t=(e+"").charCodeAt(0);return 36===t||95===t}function Y(e,t,n,o){Object.defineProperty(e,t,{value:n,enumerable:!!o,writable:!0,configurable:!0})}var X=new RegExp("[^".concat(G.source,".$_\\d]"));function J(e){if(!X.test(e)){var t=e.split(".");return function(e){for(var n=0;n<t.length;n++){if(!e)return;e=e[t[n]]}return e}}}var Q="__proto__"in{},Z="undefined"!==typeof window,ee=Z&&window.navigator.userAgent.toLowerCase(),te=ee&&/msie|trident/.test(ee),ne=ee&&ee.indexOf("msie 9.0")>0,oe=ee&&ee.indexOf("edge/")>0;ee&&ee.indexOf("android");var re=ee&&/iphone|ipad|ipod|ios/.test(ee);ee&&/chrome\/\d+/.test(ee),ee&&/phantomjs/.test(ee);var se,ae=ee&&ee.match(/firefox\/(\d+)/),ie={}.watch,le=!1;if(Z)try{var ce={};Object.defineProperty(ce,"passive",{get:function(){le=!0}}),window.addEventListener("test-passive",null,ce)}catch(Ja){}var de=function(){return void 0===se&&(se=!Z&&"undefined"!==typeof n.g&&(n.g["process"]&&"server"===n.g["process"].env.VUE_ENV)),se},ue=Z&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function me(e){return"function"===typeof e&&/native code/.test(e.toString())}var pe,fe="undefined"!==typeof Symbol&&me(Symbol)&&"undefined"!==typeof Reflect&&me(Reflect.ownKeys);pe="undefined"!==typeof Set&&me(Set)?Set:function(){function e(){this.set=Object.create(null)}return e.prototype.has=function(e){return!0===this.set[e]},e.prototype.add=function(e){this.set[e]=!0},e.prototype.clear=function(){this.set=Object.create(null)},e}();var ge=null;function he(e){void 0===e&&(e=null),e||ge&&ge._scope.off(),ge=e,e&&e._scope.on()}var ve=function(){function e(e,t,n,o,r,s,a,i){this.tag=e,this.data=t,this.children=n,this.text=o,this.elm=r,this.ns=void 0,this.context=s,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=t&&t.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=i,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1}return Object.defineProperty(e.prototype,"child",{get:function(){return this.componentInstance},enumerable:!1,configurable:!0}),e}(),be=function(e){void 0===e&&(e="");var t=new ve;return t.text=e,t.isComment=!0,t};function ye(e){return new ve(void 0,void 0,void 0,String(e))}function xe(e){var t=new ve(e.tag,e.data,e.children&&e.children.slice(),e.text,e.elm,e.context,e.componentOptions,e.asyncFactory);return t.ns=e.ns,t.isStatic=e.isStatic,t.key=e.key,t.isComment=e.isComment,t.fnContext=e.fnContext,t.fnOptions=e.fnOptions,t.fnScopeId=e.fnScopeId,t.asyncMeta=e.asyncMeta,t.isCloned=!0,t}var we=0,Ce=[],Se=function(){for(var e=0;e<Ce.length;e++){var t=Ce[e];t.subs=t.subs.filter((function(e){return e})),t._pending=!1}Ce.length=0},_e=function(){function e(){this._pending=!1,this.id=we++,this.subs=[]}return e.prototype.addSub=function(e){this.subs.push(e)},e.prototype.removeSub=function(e){this.subs[this.subs.indexOf(e)]=null,this._pending||(this._pending=!0,Ce.push(this))},e.prototype.depend=function(t){e.target&&e.target.addDep(this)},e.prototype.notify=function(e){var t=this.subs.filter((function(e){return e}));for(var n=0,o=t.length;n<o;n++){var r=t[n];0,r.update()}},e}();_e.target=null;var ke=[];function Ee(e){ke.push(e),_e.target=e}function Oe(){ke.pop(),_e.target=ke[ke.length-1]}var Te=Array.prototype,Ae=Object.create(Te),Re=["push","pop","shift","unshift","splice","sort","reverse"];Re.forEach((function(e){var t=Te[e];Y(Ae,e,(function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var r,s=t.apply(this,n),a=this.__ob__;switch(e){case"push":case"unshift":r=n;break;case"splice":r=n.slice(2);break}return r&&a.observeArray(r),a.dep.notify(),s}))}));var Ne=Object.getOwnPropertyNames(Ae),De={},Be=!0;function Me(e){Be=e}var Ie={notify:P,depend:P,addSub:P,removeSub:P},Pe=function(){function e(e,t,n){if(void 0===t&&(t=!1),void 0===n&&(n=!1),this.value=e,this.shallow=t,this.mock=n,this.dep=n?Ie:new _e,this.vmCount=0,Y(e,"__ob__",this),r(e)){if(!n)if(Q)e.__proto__=Ae;else for(var o=0,s=Ne.length;o<s;o++){var a=Ne[o];Y(e,a,Ae[a])}t||this.observeArray(e)}else{var i=Object.keys(e);for(o=0;o<i.length;o++){a=i[o];Fe(e,a,De,void 0,t,n)}}}return e.prototype.observeArray=function(e){for(var t=0,n=e.length;t<n;t++)Le(e[t],!1,this.mock)},e}();function Le(e,t,n){return e&&S(e,"__ob__")&&e.__ob__ instanceof Pe?e.__ob__:!Be||!n&&de()||!r(e)&&!p(e)||!Object.isExtensible(e)||e.__v_skip||We(e)||e instanceof ve?void 0:new Pe(e,t,n)}function Fe(e,t,n,o,s,a){var i=new _e,l=Object.getOwnPropertyDescriptor(e,t);if(!l||!1!==l.configurable){var c=l&&l.get,d=l&&l.set;c&&!d||n!==De&&2!==arguments.length||(n=e[t]);var u=!s&&Le(n,!1,a);return Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=c?c.call(e):n;return _e.target&&(i.depend(),u&&(u.dep.depend(),r(t)&&Ue(t))),We(t)&&!s?t.value:t},set:function(t){var o=c?c.call(e):n;if(H(o,t)){if(d)d.call(e,t);else{if(c)return;if(!s&&We(o)&&!We(t))return void(o.value=t);n=t}u=!s&&Le(t,!1,a),i.notify()}}}),i}}function ze(e,t,n){if(!Ve(e)){var o=e.__ob__;return r(e)&&g(t)?(e.length=Math.max(e.length,t),e.splice(t,1,n),o&&!o.shallow&&o.mock&&Le(n,!1,!0),n):t in e&&!(t in Object.prototype)?(e[t]=n,n):e._isVue||o&&o.vmCount?n:o?(Fe(o.value,t,n,void 0,o.shallow,o.mock),o.dep.notify(),n):(e[t]=n,n)}}function je(e,t){if(r(e)&&g(t))e.splice(t,1);else{var n=e.__ob__;e._isVue||n&&n.vmCount||Ve(e)||S(e,t)&&(delete e[t],n&&n.dep.notify())}}function Ue(e){for(var t=void 0,n=0,o=e.length;n<o;n++)t=e[n],t&&t.__ob__&&t.__ob__.dep.depend(),r(t)&&Ue(t)}function He(e){return $e(e,!0),Y(e,"__v_isShallow",!0),e}function $e(e,t){if(!Ve(e)){Le(e,t,de());0}}function Ve(e){return!(!e||!e.__v_isReadonly)}function We(e){return!(!e||!0!==e.__v_isRef)}function qe(e,t,n){Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:function(){var e=t[n];if(We(e))return e.value;var o=e&&e.__ob__;return o&&o.dep.depend(),e},set:function(e){var o=t[n];We(o)&&!We(e)?o.value=e:t[n]=e}})}var Ge="watcher";"".concat(Ge," callback"),"".concat(Ge," getter"),"".concat(Ge," cleanup");var Ke;var Ye=function(){function e(e){void 0===e&&(e=!1),this.detached=e,this.active=!0,this.effects=[],this.cleanups=[],this.parent=Ke,!e&&Ke&&(this.index=(Ke.scopes||(Ke.scopes=[])).push(this)-1)}return e.prototype.run=function(e){if(this.active){var t=Ke;try{return Ke=this,e()}finally{Ke=t}}else 0},e.prototype.on=function(){Ke=this},e.prototype.off=function(){Ke=this.parent},e.prototype.stop=function(e){if(this.active){var t=void 0,n=void 0;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].teardown();for(t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){var o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0,this.active=!1}},e}();function Xe(e,t){void 0===t&&(t=Ke),t&&t.active&&t.effects.push(e)}function Je(e){var t=e._provided,n=e.$parent&&e.$parent._provided;return n===t?e._provided=Object.create(n):t}var Qe=_((function(e){var t="&"===e.charAt(0);e=t?e.slice(1):e;var n="~"===e.charAt(0);e=n?e.slice(1):e;var o="!"===e.charAt(0);return e=o?e.slice(1):e,{name:e,once:n,capture:o,passive:t}}));function Ze(e,t){function n(){var e=n.fns;if(!r(e))return Yt(e,null,arguments,t,"v-on handler");for(var o=e.slice(),s=0;s<o.length;s++)Yt(o[s],null,arguments,t,"v-on handler")}return n.fns=e,n}function et(e,t,n,o,r,a){var l,c,d,u;for(l in e)c=e[l],d=t[l],u=Qe(l),s(c)||(s(d)?(s(c.fns)&&(c=e[l]=Ze(c,a)),i(u.once)&&(c=e[l]=r(u.name,c,u.capture)),n(u.name,c,u.capture,u.passive,u.params)):c!==d&&(d.fns=c,e[l]=d));for(l in t)s(e[l])&&(u=Qe(l),o(u.name,t[l],u.capture))}function tt(e,t,n){var o;e instanceof ve&&(e=e.data.hook||(e.data.hook={}));var r=e[t];function l(){n.apply(this,arguments),w(o.fns,l)}s(r)?o=Ze([l]):a(r.fns)&&i(r.merged)?(o=r,o.fns.push(l)):o=Ze([r,l]),o.merged=!0,e[t]=o}function nt(e,t,n){var o=t.options.props;if(!s(o)){var r={},i=e.attrs,l=e.props;if(a(i)||a(l))for(var c in o){var d=A(c);ot(r,l,c,d,!0)||ot(r,i,c,d,!1)}return r}}function ot(e,t,n,o,r){if(a(t)){if(S(t,n))return e[n]=t[n],r||delete t[n],!0;if(S(t,o))return e[n]=t[o],r||delete t[o],!0}return!1}function rt(e){for(var t=0;t<e.length;t++)if(r(e[t]))return Array.prototype.concat.apply([],e);return e}function st(e){return c(e)?[ye(e)]:r(e)?it(e):void 0}function at(e){return a(e)&&a(e.text)&&l(e.isComment)}function it(e,t){var n,o,l,d,u=[];for(n=0;n<e.length;n++)o=e[n],s(o)||"boolean"===typeof o||(l=u.length-1,d=u[l],r(o)?o.length>0&&(o=it(o,"".concat(t||"","_").concat(n)),at(o[0])&&at(d)&&(u[l]=ye(d.text+o[0].text),o.shift()),u.push.apply(u,o)):c(o)?at(d)?u[l]=ye(d.text+o):""!==o&&u.push(ye(o)):at(o)&&at(d)?u[l]=ye(d.text+o.text):(i(e._isVList)&&a(o.tag)&&s(o.key)&&a(t)&&(o.key="__vlist".concat(t,"_").concat(n,"__")),u.push(o)));return u}function lt(e,t){var n,o,s,i,l=null;if(r(e)||"string"===typeof e)for(l=new Array(e.length),n=0,o=e.length;n<o;n++)l[n]=t(e[n],n);else if("number"===typeof e)for(l=new Array(e),n=0;n<e;n++)l[n]=t(n+1,n);else if(u(e))if(fe&&e[Symbol.iterator]){l=[];var c=e[Symbol.iterator](),d=c.next();while(!d.done)l.push(t(d.value,l.length)),d=c.next()}else for(s=Object.keys(e),l=new Array(s.length),n=0,o=s.length;n<o;n++)i=s[n],l[n]=t(e[i],i,n);return a(l)||(l=[]),l._isVList=!0,l}function ct(e,t,n,o){var r,s=this.$scopedSlots[e];s?(n=n||{},o&&(n=M(M({},o),n)),r=s(n)||(d(t)?t():t)):r=this.$slots[e]||(d(t)?t():t);var a=n&&n.slot;return a?this.$createElement("template",{slot:a},r):r}function dt(e){return _o(this.$options,"filters",e,!0)||F}function ut(e,t){return r(e)?-1===e.indexOf(t):e!==t}function mt(e,t,n,o,r){var s=q.keyCodes[t]||n;return r&&o&&!q.keyCodes[t]?ut(r,o):s?ut(s,e):o?A(o)!==t:void 0===e}function pt(e,t,n,o,s){if(n)if(u(n)){r(n)&&(n=I(n));var a=void 0,i=function(r){if("class"===r||"style"===r||x(r))a=e;else{var i=e.attrs&&e.attrs.type;a=o||q.mustUseProp(t,i,r)?e.domProps||(e.domProps={}):e.attrs||(e.attrs={})}var l=E(r),c=A(r);if(!(l in a)&&!(c in a)&&(a[r]=n[r],s)){var d=e.on||(e.on={});d["update:".concat(r)]=function(e){n[r]=e}}};for(var l in n)i(l)}else;return e}function ft(e,t){var n=this._staticTrees||(this._staticTrees=[]),o=n[e];return o&&!t||(o=n[e]=this.$options.staticRenderFns[e].call(this._renderProxy,this._c,this),ht(o,"__static__".concat(e),!1)),o}function gt(e,t,n){return ht(e,"__once__".concat(t).concat(n?"_".concat(n):""),!0),e}function ht(e,t,n){if(r(e))for(var o=0;o<e.length;o++)e[o]&&"string"!==typeof e[o]&&vt(e[o],"".concat(t,"_").concat(o),n);else vt(e,t,n)}function vt(e,t,n){e.isStatic=!0,e.key=t,e.isOnce=n}function bt(e,t){if(t)if(p(t)){var n=e.on=e.on?M({},e.on):{};for(var o in t){var r=n[o],s=t[o];n[o]=r?[].concat(r,s):s}}else;return e}function yt(e,t,n,o){t=t||{$stable:!n};for(var s=0;s<e.length;s++){var a=e[s];r(a)?yt(a,t,n):a&&(a.proxy&&(a.fn.proxy=!0),t[a.key]=a.fn)}return o&&(t.$key=o),t}function xt(e,t){for(var n=0;n<t.length;n+=2){var o=t[n];"string"===typeof o&&o&&(e[t[n]]=t[n+1])}return e}function wt(e,t){return"string"===typeof e?t+e:e}function Ct(e){e._o=gt,e._n=b,e._s=v,e._l=lt,e._t=ct,e._q=z,e._i=j,e._m=ft,e._f=dt,e._k=mt,e._b=pt,e._v=ye,e._e=be,e._u=yt,e._g=bt,e._d=xt,e._p=wt}function St(e,t){if(!e||!e.length)return{};for(var n={},o=0,r=e.length;o<r;o++){var s=e[o],a=s.data;if(a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot,s.context!==t&&s.fnContext!==t||!a||null==a.slot)(n.default||(n.default=[])).push(s);else{var i=a.slot,l=n[i]||(n[i]=[]);"template"===s.tag?l.push.apply(l,s.children||[]):l.push(s)}}for(var c in n)n[c].every(_t)&&delete n[c];return n}function _t(e){return e.isComment&&!e.asyncFactory||" "===e.text}function kt(e){return e.isComment&&e.asyncFactory}function Et(e,t,n,r){var s,a=Object.keys(n).length>0,i=t?!!t.$stable:!a,l=t&&t.$key;if(t){if(t._normalized)return t._normalized;if(i&&r&&r!==o&&l===r.$key&&!a&&!r.$hasNormal)return r;for(var c in s={},t)t[c]&&"$"!==c[0]&&(s[c]=Ot(e,n,c,t[c]))}else s={};for(var d in n)d in s||(s[d]=Tt(n,d));return t&&Object.isExtensible(t)&&(t._normalized=s),Y(s,"$stable",i),Y(s,"$key",l),Y(s,"$hasNormal",a),s}function Ot(e,t,n,o){var s=function(){var t=ge;he(e);var n=arguments.length?o.apply(null,arguments):o({});n=n&&"object"===typeof n&&!r(n)?[n]:st(n);var s=n&&n[0];return he(t),n&&(!s||1===n.length&&s.isComment&&!kt(s))?void 0:n};return o.proxy&&Object.defineProperty(t,n,{get:s,enumerable:!0,configurable:!0}),s}function Tt(e,t){return function(){return e[t]}}function At(e){var t=e.$options,n=t.setup;if(n){var o=e._setupContext=Rt(e);he(e),Ee();var r=Yt(n,null,[e._props||He({}),o],e,"setup");if(Oe(),he(),d(r))t.render=r;else if(u(r))if(e._setupState=r,r.__sfc){var s=e._setupProxy={};for(var a in r)"__sfc"!==a&&qe(s,r,a)}else for(var a in r)K(a)||qe(e,r,a);else 0}}function Rt(e){return{get attrs(){if(!e._attrsProxy){var t=e._attrsProxy={};Y(t,"_v_attr_proxy",!0),Nt(t,e.$attrs,o,e,"$attrs")}return e._attrsProxy},get listeners(){if(!e._listenersProxy){var t=e._listenersProxy={};Nt(t,e.$listeners,o,e,"$listeners")}return e._listenersProxy},get slots(){return Bt(e)},emit:D(e.$emit,e),expose:function(t){t&&Object.keys(t).forEach((function(n){return qe(e,t,n)}))}}}function Nt(e,t,n,o,r){var s=!1;for(var a in t)a in e?t[a]!==n[a]&&(s=!0):(s=!0,Dt(e,a,o,r));for(var a in e)a in t||(s=!0,delete e[a]);return s}function Dt(e,t,n,o){Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){return n[o][t]}})}function Bt(e){return e._slotsProxy||Mt(e._slotsProxy={},e.$scopedSlots),e._slotsProxy}function Mt(e,t){for(var n in t)e[n]=t[n];for(var n in e)n in t||delete e[n]}function It(e){e._vnode=null,e._staticTrees=null;var t=e.$options,n=e.$vnode=t._parentVnode,r=n&&n.context;e.$slots=St(t._renderChildren,r),e.$scopedSlots=n?Et(e.$parent,n.data.scopedSlots,e.$slots):o,e._c=function(t,n,o,r){return Vt(e,t,n,o,r,!1)},e.$createElement=function(t,n,o,r){return Vt(e,t,n,o,r,!0)};var s=n&&n.data;Fe(e,"$attrs",s&&s.attrs||o,null,!0),Fe(e,"$listeners",t._parentListeners||o,null,!0)}var Pt=null;function Lt(e){Ct(e.prototype),e.prototype.$nextTick=function(e){return ln(e,this)},e.prototype._render=function(){var e,t=this,n=t.$options,o=n.render,s=n._parentVnode;s&&t._isMounted&&(t.$scopedSlots=Et(t.$parent,s.data.scopedSlots,t.$slots,t.$scopedSlots),t._slotsProxy&&Mt(t._slotsProxy,t.$scopedSlots)),t.$vnode=s;try{he(t),Pt=t,e=o.call(t._renderProxy,t.$createElement)}catch(Ja){Kt(Ja,t,"render"),e=t._vnode}finally{Pt=null,he()}return r(e)&&1===e.length&&(e=e[0]),e instanceof ve||(e=be()),e.parent=s,e}}function Ft(e,t){return(e.__esModule||fe&&"Module"===e[Symbol.toStringTag])&&(e=e.default),u(e)?t.extend(e):e}function zt(e,t,n,o,r){var s=be();return s.asyncFactory=e,s.asyncMeta={data:t,context:n,children:o,tag:r},s}function jt(e,t){if(i(e.error)&&a(e.errorComp))return e.errorComp;if(a(e.resolved))return e.resolved;var n=Pt;if(n&&a(e.owners)&&-1===e.owners.indexOf(n)&&e.owners.push(n),i(e.loading)&&a(e.loadingComp))return e.loadingComp;if(n&&!a(e.owners)){var o=e.owners=[n],r=!0,l=null,c=null;n.$on("hook:destroyed",(function(){return w(o,n)}));var d=function(e){for(var t=0,n=o.length;t<n;t++)o[t].$forceUpdate();e&&(o.length=0,null!==l&&(clearTimeout(l),l=null),null!==c&&(clearTimeout(c),c=null))},m=U((function(n){e.resolved=Ft(n,t),r?o.length=0:d(!0)})),p=U((function(t){a(e.errorComp)&&(e.error=!0,d(!0))})),f=e(m,p);return u(f)&&(h(f)?s(e.resolved)&&f.then(m,p):h(f.component)&&(f.component.then(m,p),a(f.error)&&(e.errorComp=Ft(f.error,t)),a(f.loading)&&(e.loadingComp=Ft(f.loading,t),0===f.delay?e.loading=!0:l=setTimeout((function(){l=null,s(e.resolved)&&s(e.error)&&(e.loading=!0,d(!1))}),f.delay||200)),a(f.timeout)&&(c=setTimeout((function(){c=null,s(e.resolved)&&p(null)}),f.timeout)))),r=!1,e.loading?e.loadingComp:e.resolved}}function Ut(e){if(r(e))for(var t=0;t<e.length;t++){var n=e[t];if(a(n)&&(a(n.componentOptions)||kt(n)))return n}}var Ht=1,$t=2;function Vt(e,t,n,o,s,a){return(r(n)||c(n))&&(s=o,o=n,n=void 0),i(a)&&(s=$t),Wt(e,t,n,o,s)}function Wt(e,t,n,o,s){if(a(n)&&a(n.__ob__))return be();if(a(n)&&a(n.is)&&(t=n.is),!t)return be();var i,l;if(r(o)&&d(o[0])&&(n=n||{},n.scopedSlots={default:o[0]},o.length=0),s===$t?o=st(o):s===Ht&&(o=rt(o)),"string"===typeof t){var c=void 0;l=e.$vnode&&e.$vnode.ns||q.getTagNamespace(t),i=q.isReservedTag(t)?new ve(q.parsePlatformTagName(t),n,o,void 0,void 0,e):n&&n.pre||!a(c=_o(e.$options,"components",t))?new ve(t,n,o,void 0,void 0,e):ao(c,n,e,o,t)}else i=ao(t,n,e,o);return r(i)?i:a(i)?(a(l)&&qt(i,l),a(n)&&Gt(n),i):be()}function qt(e,t,n){if(e.ns=t,"foreignObject"===e.tag&&(t=void 0,n=!0),a(e.children))for(var o=0,r=e.children.length;o<r;o++){var l=e.children[o];a(l.tag)&&(s(l.ns)||i(n)&&"svg"!==l.tag)&&qt(l,t,n)}}function Gt(e){u(e.style)&&pn(e.style),u(e.class)&&pn(e.class)}function Kt(e,t,n){Ee();try{if(t){var o=t;while(o=o.$parent){var r=o.$options.errorCaptured;if(r)for(var s=0;s<r.length;s++)try{var a=!1===r[s].call(o,e,t,n);if(a)return}catch(Ja){Xt(Ja,o,"errorCaptured hook")}}}Xt(e,t,n)}finally{Oe()}}function Yt(e,t,n,o,r){var s;try{s=n?e.apply(t,n):e.call(t),s&&!s._isVue&&h(s)&&!s._handled&&(s.catch((function(e){return Kt(e,o,r+" (Promise/async)")})),s._handled=!0)}catch(Ja){Kt(Ja,o,r)}return s}function Xt(e,t,n){if(q.errorHandler)try{return q.errorHandler.call(null,e,t,n)}catch(Ja){Ja!==e&&Jt(Ja,null,"config.errorHandler")}Jt(e,t,n)}function Jt(e,t,n){if(!Z||"undefined"===typeof console)throw e;console.error(e)}var Qt,Zt=!1,en=[],tn=!1;function nn(){tn=!1;var e=en.slice(0);en.length=0;for(var t=0;t<e.length;t++)e[t]()}if("undefined"!==typeof Promise&&me(Promise)){var on=Promise.resolve();Qt=function(){on.then(nn),re&&setTimeout(P)},Zt=!0}else if(te||"undefined"===typeof MutationObserver||!me(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())Qt="undefined"!==typeof setImmediate&&me(setImmediate)?function(){setImmediate(nn)}:function(){setTimeout(nn,0)};else{var rn=1,sn=new MutationObserver(nn),an=document.createTextNode(String(rn));sn.observe(an,{characterData:!0}),Qt=function(){rn=(rn+1)%2,an.data=String(rn)},Zt=!0}function ln(e,t){var n;if(en.push((function(){if(e)try{e.call(t)}catch(Ja){Kt(Ja,t,"nextTick")}else n&&n(t)})),tn||(tn=!0,Qt()),!e&&"undefined"!==typeof Promise)return new Promise((function(e){n=e}))}function cn(e){return function(t,n){if(void 0===n&&(n=ge),n)return dn(n,e,t)}}function dn(e,t,n){var o=e.$options;o[t]=ho(o[t],n)}cn("beforeMount"),cn("mounted"),cn("beforeUpdate"),cn("updated"),cn("beforeDestroy"),cn("destroyed"),cn("activated"),cn("deactivated"),cn("serverPrefetch"),cn("renderTracked"),cn("renderTriggered"),cn("errorCaptured");var un="2.7.14";var mn=new pe;function pn(e){return fn(e,mn),mn.clear(),e}function fn(e,t){var n,o,s=r(e);if(!(!s&&!u(e)||e.__v_skip||Object.isFrozen(e)||e instanceof ve)){if(e.__ob__){var a=e.__ob__.dep.id;if(t.has(a))return;t.add(a)}if(s){n=e.length;while(n--)fn(e[n],t)}else if(We(e))fn(e.value,t);else{o=Object.keys(e),n=o.length;while(n--)fn(e[o[n]],t)}}}var gn,hn=0,vn=function(){function e(e,t,n,o,r){Xe(this,Ke&&!Ke._vm?Ke:e?e._scope:void 0),(this.vm=e)&&r&&(e._watcher=this),o?(this.deep=!!o.deep,this.user=!!o.user,this.lazy=!!o.lazy,this.sync=!!o.sync,this.before=o.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++hn,this.active=!0,this.post=!1,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new pe,this.newDepIds=new pe,this.expression="",d(t)?this.getter=t:(this.getter=J(t),this.getter||(this.getter=P)),this.value=this.lazy?void 0:this.get()}return e.prototype.get=function(){var e;Ee(this);var t=this.vm;try{e=this.getter.call(t,t)}catch(Ja){if(!this.user)throw Ja;Kt(Ja,t,'getter for watcher "'.concat(this.expression,'"'))}finally{this.deep&&pn(e),Oe(),this.cleanupDeps()}return e},e.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},e.prototype.cleanupDeps=function(){var e=this.deps.length;while(e--){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},e.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():Yn(this)},e.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||u(e)||this.deep){var t=this.value;if(this.value=e,this.user){var n='callback for watcher "'.concat(this.expression,'"');Yt(this.cb,this.vm,[e,t],this.vm,n)}else this.cb.call(this.vm,e,t)}}},e.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},e.prototype.depend=function(){var e=this.deps.length;while(e--)this.deps[e].depend()},e.prototype.teardown=function(){if(this.vm&&!this.vm._isBeingDestroyed&&w(this.vm._scope.effects,this),this.active){var e=this.deps.length;while(e--)this.deps[e].removeSub(this);this.active=!1,this.onStop&&this.onStop()}},e}();function bn(e){e._events=Object.create(null),e._hasHookEvent=!1;var t=e.$options._parentListeners;t&&Cn(e,t)}function yn(e,t){gn.$on(e,t)}function xn(e,t){gn.$off(e,t)}function wn(e,t){var n=gn;return function o(){var r=t.apply(null,arguments);null!==r&&n.$off(e,o)}}function Cn(e,t,n){gn=e,et(t,n||{},yn,xn,wn,e),gn=void 0}function Sn(e){var t=/^hook:/;e.prototype.$on=function(e,n){var o=this;if(r(e))for(var s=0,a=e.length;s<a;s++)o.$on(e[s],n);else(o._events[e]||(o._events[e]=[])).push(n),t.test(e)&&(o._hasHookEvent=!0);return o},e.prototype.$once=function(e,t){var n=this;function o(){n.$off(e,o),t.apply(n,arguments)}return o.fn=t,n.$on(e,o),n},e.prototype.$off=function(e,t){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(r(e)){for(var o=0,s=e.length;o<s;o++)n.$off(e[o],t);return n}var a,i=n._events[e];if(!i)return n;if(!t)return n._events[e]=null,n;var l=i.length;while(l--)if(a=i[l],a===t||a.fn===t){i.splice(l,1);break}return n},e.prototype.$emit=function(e){var t=this,n=t._events[e];if(n){n=n.length>1?B(n):n;for(var o=B(arguments,1),r='event handler for "'.concat(e,'"'),s=0,a=n.length;s<a;s++)Yt(n[s],t,o,t,r)}return t}}var _n=null;function kn(e){var t=_n;return _n=e,function(){_n=t}}function En(e){var t=e.$options,n=t.parent;if(n&&!t.abstract){while(n.$options.abstract&&n.$parent)n=n.$parent;n.$children.push(e)}e.$parent=n,e.$root=n?n.$root:e,e.$children=[],e.$refs={},e._provided=n?n._provided:Object.create(null),e._watcher=null,e._inactive=null,e._directInactive=!1,e._isMounted=!1,e._isDestroyed=!1,e._isBeingDestroyed=!1}function On(e){e.prototype._update=function(e,t){var n=this,o=n.$el,r=n._vnode,s=kn(n);n._vnode=e,n.$el=r?n.__patch__(r,e):n.__patch__(n.$el,e,t,!1),s(),o&&(o.__vue__=null),n.$el&&(n.$el.__vue__=n);var a=n;while(a&&a.$vnode&&a.$parent&&a.$vnode===a.$parent._vnode)a.$parent.$el=a.$el,a=a.$parent},e.prototype.$forceUpdate=function(){var e=this;e._watcher&&e._watcher.update()},e.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){Bn(e,"beforeDestroy"),e._isBeingDestroyed=!0;var t=e.$parent;!t||t._isBeingDestroyed||e.$options.abstract||w(t.$children,e),e._scope.stop(),e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,e.__patch__(e._vnode,null),Bn(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null),e.$vnode&&(e.$vnode.parent=null)}}}function Tn(e,t,n){var o;e.$el=t,e.$options.render||(e.$options.render=be),Bn(e,"beforeMount"),o=function(){e._update(e._render(),n)};var r={before:function(){e._isMounted&&!e._isDestroyed&&Bn(e,"beforeUpdate")}};new vn(e,o,P,r,!0),n=!1;var s=e._preWatchers;if(s)for(var a=0;a<s.length;a++)s[a].run();return null==e.$vnode&&(e._isMounted=!0,Bn(e,"mounted")),e}function An(e,t,n,r,s){var a=r.data.scopedSlots,i=e.$scopedSlots,l=!!(a&&!a.$stable||i!==o&&!i.$stable||a&&e.$scopedSlots.$key!==a.$key||!a&&e.$scopedSlots.$key),c=!!(s||e.$options._renderChildren||l),d=e.$vnode;e.$options._parentVnode=r,e.$vnode=r,e._vnode&&(e._vnode.parent=r),e.$options._renderChildren=s;var u=r.data.attrs||o;e._attrsProxy&&Nt(e._attrsProxy,u,d.data&&d.data.attrs||o,e,"$attrs")&&(c=!0),e.$attrs=u,n=n||o;var m=e.$options._parentListeners;if(e._listenersProxy&&Nt(e._listenersProxy,n,m||o,e,"$listeners"),e.$listeners=e.$options._parentListeners=n,Cn(e,n,m),t&&e.$options.props){Me(!1);for(var p=e._props,f=e.$options._propKeys||[],g=0;g<f.length;g++){var h=f[g],v=e.$options.props;p[h]=ko(h,v,t,e)}Me(!0),e.$options.propsData=t}c&&(e.$slots=St(s,r.context),e.$forceUpdate())}function Rn(e){while(e&&(e=e.$parent))if(e._inactive)return!0;return!1}function Nn(e,t){if(t){if(e._directInactive=!1,Rn(e))return}else if(e._directInactive)return;if(e._inactive||null===e._inactive){e._inactive=!1;for(var n=0;n<e.$children.length;n++)Nn(e.$children[n]);Bn(e,"activated")}}function Dn(e,t){if((!t||(e._directInactive=!0,!Rn(e)))&&!e._inactive){e._inactive=!0;for(var n=0;n<e.$children.length;n++)Dn(e.$children[n]);Bn(e,"deactivated")}}function Bn(e,t,n,o){void 0===o&&(o=!0),Ee();var r=ge;o&&he(e);var s=e.$options[t],a="".concat(t," hook");if(s)for(var i=0,l=s.length;i<l;i++)Yt(s[i],e,n||null,e,a);e._hasHookEvent&&e.$emit("hook:"+t),o&&he(r),Oe()}var Mn=[],In=[],Pn={},Ln=!1,Fn=!1,zn=0;function jn(){zn=Mn.length=In.length=0,Pn={},Ln=Fn=!1}var Un=0,Hn=Date.now;if(Z&&!te){var $n=window.performance;$n&&"function"===typeof $n.now&&Hn()>document.createEvent("Event").timeStamp&&(Hn=function(){return $n.now()})}var Vn=function(e,t){if(e.post){if(!t.post)return 1}else if(t.post)return-1;return e.id-t.id};function Wn(){var e,t;for(Un=Hn(),Fn=!0,Mn.sort(Vn),zn=0;zn<Mn.length;zn++)e=Mn[zn],e.before&&e.before(),t=e.id,Pn[t]=null,e.run();var n=In.slice(),o=Mn.slice();jn(),Kn(n),qn(o),Se(),ue&&q.devtools&&ue.emit("flush")}function qn(e){var t=e.length;while(t--){var n=e[t],o=n.vm;o&&o._watcher===n&&o._isMounted&&!o._isDestroyed&&Bn(o,"updated")}}function Gn(e){e._inactive=!1,In.push(e)}function Kn(e){for(var t=0;t<e.length;t++)e[t]._inactive=!0,Nn(e[t],!0)}function Yn(e){var t=e.id;if(null==Pn[t]&&(e!==_e.target||!e.noRecurse)){if(Pn[t]=!0,Fn){var n=Mn.length-1;while(n>zn&&Mn[n].id>e.id)n--;Mn.splice(n+1,0,e)}else Mn.push(e);Ln||(Ln=!0,ln(Wn))}}function Xn(e){var t=e.$options.provide;if(t){var n=d(t)?t.call(e):t;if(!u(n))return;for(var o=Je(e),r=fe?Reflect.ownKeys(n):Object.keys(n),s=0;s<r.length;s++){var a=r[s];Object.defineProperty(o,a,Object.getOwnPropertyDescriptor(n,a))}}}function Jn(e){var t=Qn(e.$options.inject,e);t&&(Me(!1),Object.keys(t).forEach((function(n){Fe(e,n,t[n])})),Me(!0))}function Qn(e,t){if(e){for(var n=Object.create(null),o=fe?Reflect.ownKeys(e):Object.keys(e),r=0;r<o.length;r++){var s=o[r];if("__ob__"!==s){var a=e[s].from;if(a in t._provided)n[s]=t._provided[a];else if("default"in e[s]){var i=e[s].default;n[s]=d(i)?i.call(t):i}else 0}}return n}}function Zn(e,t,n,s,a){var l,c=this,d=a.options;S(s,"_uid")?(l=Object.create(s),l._original=s):(l=s,s=s._original);var u=i(d._compiled),m=!u;this.data=e,this.props=t,this.children=n,this.parent=s,this.listeners=e.on||o,this.injections=Qn(d.inject,s),this.slots=function(){return c.$slots||Et(s,e.scopedSlots,c.$slots=St(n,s)),c.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return Et(s,e.scopedSlots,this.slots())}}),u&&(this.$options=d,this.$slots=this.slots(),this.$scopedSlots=Et(s,e.scopedSlots,this.$slots)),d._scopeId?this._c=function(e,t,n,o){var a=Vt(l,e,t,n,o,m);return a&&!r(a)&&(a.fnScopeId=d._scopeId,a.fnContext=s),a}:this._c=function(e,t,n,o){return Vt(l,e,t,n,o,m)}}function eo(e,t,n,s,i){var l=e.options,c={},d=l.props;if(a(d))for(var u in d)c[u]=ko(u,d,t||o);else a(n.attrs)&&no(c,n.attrs),a(n.props)&&no(c,n.props);var m=new Zn(n,c,i,s,e),p=l.render.call(null,m._c,m);if(p instanceof ve)return to(p,n,m.parent,l,m);if(r(p)){for(var f=st(p)||[],g=new Array(f.length),h=0;h<f.length;h++)g[h]=to(f[h],n,m.parent,l,m);return g}}function to(e,t,n,o,r){var s=xe(e);return s.fnContext=n,s.fnOptions=o,t.slot&&((s.data||(s.data={})).slot=t.slot),s}function no(e,t){for(var n in t)e[E(n)]=t[n]}function oo(e){return e.name||e.__name||e._componentTag}Ct(Zn.prototype);var ro={init:function(e,t){if(e.componentInstance&&!e.componentInstance._isDestroyed&&e.data.keepAlive){var n=e;ro.prepatch(n,n)}else{var o=e.componentInstance=io(e,_n);o.$mount(t?e.elm:void 0,t)}},prepatch:function(e,t){var n=t.componentOptions,o=t.componentInstance=e.componentInstance;An(o,n.propsData,n.listeners,t,n.children)},insert:function(e){var t=e.context,n=e.componentInstance;n._isMounted||(n._isMounted=!0,Bn(n,"mounted")),e.data.keepAlive&&(t._isMounted?Gn(n):Nn(n,!0))},destroy:function(e){var t=e.componentInstance;t._isDestroyed||(e.data.keepAlive?Dn(t,!0):t.$destroy())}},so=Object.keys(ro);function ao(e,t,n,o,r){if(!s(e)){var l=n.$options._base;if(u(e)&&(e=l.extend(e)),"function"===typeof e){var c;if(s(e.cid)&&(c=e,e=jt(c,l),void 0===e))return zt(c,t,n,o,r);t=t||{},Yo(e),a(t.model)&&uo(e.options,t);var d=nt(t,e,r);if(i(e.options.functional))return eo(e,d,t,n,o);var m=t.on;if(t.on=t.nativeOn,i(e.options.abstract)){var p=t.slot;t={},p&&(t.slot=p)}lo(t);var f=oo(e.options)||r,g=new ve("vue-component-".concat(e.cid).concat(f?"-".concat(f):""),t,void 0,void 0,void 0,n,{Ctor:e,propsData:d,listeners:m,tag:r,children:o},c);return g}}}function io(e,t){var n={_isComponent:!0,_parentVnode:e,parent:t},o=e.data.inlineTemplate;return a(o)&&(n.render=o.render,n.staticRenderFns=o.staticRenderFns),new e.componentOptions.Ctor(n)}function lo(e){for(var t=e.hook||(e.hook={}),n=0;n<so.length;n++){var o=so[n],r=t[o],s=ro[o];r===s||r&&r._merged||(t[o]=r?co(s,r):s)}}function co(e,t){var n=function(n,o){e(n,o),t(n,o)};return n._merged=!0,n}function uo(e,t){var n=e.model&&e.model.prop||"value",o=e.model&&e.model.event||"input";(t.attrs||(t.attrs={}))[n]=t.model.value;var s=t.on||(t.on={}),i=s[o],l=t.model.callback;a(i)?(r(i)?-1===i.indexOf(l):i!==l)&&(s[o]=[l].concat(i)):s[o]=l}var mo=P,po=q.optionMergeStrategies;function fo(e,t,n){if(void 0===n&&(n=!0),!t)return e;for(var o,r,s,a=fe?Reflect.ownKeys(t):Object.keys(t),i=0;i<a.length;i++)o=a[i],"__ob__"!==o&&(r=e[o],s=t[o],n&&S(e,o)?r!==s&&p(r)&&p(s)&&fo(r,s):ze(e,o,s));return e}function go(e,t,n){return n?function(){var o=d(t)?t.call(n,n):t,r=d(e)?e.call(n,n):e;return o?fo(o,r):r}:t?e?function(){return fo(d(t)?t.call(this,this):t,d(e)?e.call(this,this):e)}:t:e}function ho(e,t){var n=t?e?e.concat(t):r(t)?t:[t]:e;return n?vo(n):n}function vo(e){for(var t=[],n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t}function bo(e,t,n,o){var r=Object.create(e||null);return t?M(r,t):r}po.data=function(e,t,n){return n?go(e,t,n):t&&"function"!==typeof t?e:go(e,t)},W.forEach((function(e){po[e]=ho})),V.forEach((function(e){po[e+"s"]=bo})),po.watch=function(e,t,n,o){if(e===ie&&(e=void 0),t===ie&&(t=void 0),!t)return Object.create(e||null);if(!e)return t;var s={};for(var a in M(s,e),t){var i=s[a],l=t[a];i&&!r(i)&&(i=[i]),s[a]=i?i.concat(l):r(l)?l:[l]}return s},po.props=po.methods=po.inject=po.computed=function(e,t,n,o){if(!e)return t;var r=Object.create(null);return M(r,e),t&&M(r,t),r},po.provide=function(e,t){return e?function(){var n=Object.create(null);return fo(n,d(e)?e.call(this):e),t&&fo(n,d(t)?t.call(this):t,!1),n}:t};var yo=function(e,t){return void 0===t?e:t};function xo(e,t){var n=e.props;if(n){var o,s,a,i={};if(r(n)){o=n.length;while(o--)s=n[o],"string"===typeof s&&(a=E(s),i[a]={type:null})}else if(p(n))for(var l in n)s=n[l],a=E(l),i[a]=p(s)?s:{type:s};else 0;e.props=i}}function wo(e,t){var n=e.inject;if(n){var o=e.inject={};if(r(n))for(var s=0;s<n.length;s++)o[n[s]]={from:n[s]};else if(p(n))for(var a in n){var i=n[a];o[a]=p(i)?M({from:a},i):{from:i}}else 0}}function Co(e){var t=e.directives;if(t)for(var n in t){var o=t[n];d(o)&&(t[n]={bind:o,update:o})}}function So(e,t,n){if(d(t)&&(t=t.options),xo(t,n),wo(t,n),Co(t),!t._base&&(t.extends&&(e=So(e,t.extends,n)),t.mixins))for(var o=0,r=t.mixins.length;o<r;o++)e=So(e,t.mixins[o],n);var s,a={};for(s in e)i(s);for(s in t)S(e,s)||i(s);function i(o){var r=po[o]||yo;a[o]=r(e[o],t[o],n,o)}return a}function _o(e,t,n,o){if("string"===typeof n){var r=e[t];if(S(r,n))return r[n];var s=E(n);if(S(r,s))return r[s];var a=O(s);if(S(r,a))return r[a];var i=r[n]||r[s]||r[a];return i}}function ko(e,t,n,o){var r=t[e],s=!S(n,e),a=n[e],i=Ro(Boolean,r.type);if(i>-1)if(s&&!S(r,"default"))a=!1;else if(""===a||a===A(e)){var l=Ro(String,r.type);(l<0||i<l)&&(a=!0)}if(void 0===a){a=Eo(o,r,e);var c=Be;Me(!0),Le(a),Me(c)}return a}function Eo(e,t,n){if(S(t,"default")){var o=t.default;return e&&e.$options.propsData&&void 0===e.$options.propsData[n]&&void 0!==e._props[n]?e._props[n]:d(o)&&"Function"!==To(t.type)?o.call(e):o}}var Oo=/^\s*function (\w+)/;function To(e){var t=e&&e.toString().match(Oo);return t?t[1]:""}function Ao(e,t){return To(e)===To(t)}function Ro(e,t){if(!r(t))return Ao(t,e)?0:-1;for(var n=0,o=t.length;n<o;n++)if(Ao(t[n],e))return n;return-1}var No={enumerable:!0,configurable:!0,get:P,set:P};function Do(e,t,n){No.get=function(){return this[t][n]},No.set=function(e){this[t][n]=e},Object.defineProperty(e,n,No)}function Bo(e){var t=e.$options;if(t.props&&Mo(e,t.props),At(e),t.methods&&Ho(e,t.methods),t.data)Io(e);else{var n=Le(e._data={});n&&n.vmCount++}t.computed&&Fo(e,t.computed),t.watch&&t.watch!==ie&&$o(e,t.watch)}function Mo(e,t){var n=e.$options.propsData||{},o=e._props=He({}),r=e.$options._propKeys=[],s=!e.$parent;s||Me(!1);var a=function(s){r.push(s);var a=ko(s,t,n,e);Fe(o,s,a),s in e||Do(e,"_props",s)};for(var i in t)a(i);Me(!0)}function Io(e){var t=e.$options.data;t=e._data=d(t)?Po(t,e):t||{},p(t)||(t={});var n=Object.keys(t),o=e.$options.props,r=(e.$options.methods,n.length);while(r--){var s=n[r];0,o&&S(o,s)||K(s)||Do(e,"_data",s)}var a=Le(t);a&&a.vmCount++}function Po(e,t){Ee();try{return e.call(t,t)}catch(Ja){return Kt(Ja,t,"data()"),{}}finally{Oe()}}var Lo={lazy:!0};function Fo(e,t){var n=e._computedWatchers=Object.create(null),o=de();for(var r in t){var s=t[r],a=d(s)?s:s.get;0,o||(n[r]=new vn(e,a||P,P,Lo)),r in e||zo(e,r,s)}}function zo(e,t,n){var o=!de();d(n)?(No.get=o?jo(t):Uo(n),No.set=P):(No.get=n.get?o&&!1!==n.cache?jo(t):Uo(n.get):P,No.set=n.set||P),Object.defineProperty(e,t,No)}function jo(e){return function(){var t=this._computedWatchers&&this._computedWatchers[e];if(t)return t.dirty&&t.evaluate(),_e.target&&t.depend(),t.value}}function Uo(e){return function(){return e.call(this,this)}}function Ho(e,t){e.$options.props;for(var n in t)e[n]="function"!==typeof t[n]?P:D(t[n],e)}function $o(e,t){for(var n in t){var o=t[n];if(r(o))for(var s=0;s<o.length;s++)Vo(e,n,o[s]);else Vo(e,n,o)}}function Vo(e,t,n,o){return p(n)&&(o=n,n=n.handler),"string"===typeof n&&(n=e[n]),e.$watch(t,n,o)}function Wo(e){var t={get:function(){return this._data}},n={get:function(){return this._props}};Object.defineProperty(e.prototype,"$data",t),Object.defineProperty(e.prototype,"$props",n),e.prototype.$set=ze,e.prototype.$delete=je,e.prototype.$watch=function(e,t,n){var o=this;if(p(t))return Vo(o,e,t,n);n=n||{},n.user=!0;var r=new vn(o,e,t,n);if(n.immediate){var s='callback for immediate watcher "'.concat(r.expression,'"');Ee(),Yt(t,o,[r.value],o,s),Oe()}return function(){r.teardown()}}}var qo=0;function Go(e){e.prototype._init=function(e){var t=this;t._uid=qo++,t._isVue=!0,t.__v_skip=!0,t._scope=new Ye(!0),t._scope._vm=!0,e&&e._isComponent?Ko(t,e):t.$options=So(Yo(t.constructor),e||{},t),t._renderProxy=t,t._self=t,En(t),bn(t),It(t),Bn(t,"beforeCreate",void 0,!1),Jn(t),Bo(t),Xn(t),Bn(t,"created"),t.$options.el&&t.$mount(t.$options.el)}}function Ko(e,t){var n=e.$options=Object.create(e.constructor.options),o=t._parentVnode;n.parent=t.parent,n._parentVnode=o;var r=o.componentOptions;n.propsData=r.propsData,n._parentListeners=r.listeners,n._renderChildren=r.children,n._componentTag=r.tag,t.render&&(n.render=t.render,n.staticRenderFns=t.staticRenderFns)}function Yo(e){var t=e.options;if(e.super){var n=Yo(e.super),o=e.superOptions;if(n!==o){e.superOptions=n;var r=Xo(e);r&&M(e.extendOptions,r),t=e.options=So(n,e.extendOptions),t.name&&(t.components[t.name]=e)}}return t}function Xo(e){var t,n=e.options,o=e.sealedOptions;for(var r in n)n[r]!==o[r]&&(t||(t={}),t[r]=n[r]);return t}function Jo(e){this._init(e)}function Qo(e){e.use=function(e){var t=this._installedPlugins||(this._installedPlugins=[]);if(t.indexOf(e)>-1)return this;var n=B(arguments,1);return n.unshift(this),d(e.install)?e.install.apply(e,n):d(e)&&e.apply(null,n),t.push(e),this}}function Zo(e){e.mixin=function(e){return this.options=So(this.options,e),this}}function er(e){e.cid=0;var t=1;e.extend=function(e){e=e||{};var n=this,o=n.cid,r=e._Ctor||(e._Ctor={});if(r[o])return r[o];var s=oo(e)||oo(n.options);var a=function(e){this._init(e)};return a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.cid=t++,a.options=So(n.options,e),a["super"]=n,a.options.props&&tr(a),a.options.computed&&nr(a),a.extend=n.extend,a.mixin=n.mixin,a.use=n.use,V.forEach((function(e){a[e]=n[e]})),s&&(a.options.components[s]=a),a.superOptions=n.options,a.extendOptions=e,a.sealedOptions=M({},a.options),r[o]=a,a}}function tr(e){var t=e.options.props;for(var n in t)Do(e.prototype,"_props",n)}function nr(e){var t=e.options.computed;for(var n in t)zo(e.prototype,n,t[n])}function or(e){V.forEach((function(t){e[t]=function(e,n){return n?("component"===t&&p(n)&&(n.name=n.name||e,n=this.options._base.extend(n)),"directive"===t&&d(n)&&(n={bind:n,update:n}),this.options[t+"s"][e]=n,n):this.options[t+"s"][e]}}))}function rr(e){return e&&(oo(e.Ctor.options)||e.tag)}function sr(e,t){return r(e)?e.indexOf(t)>-1:"string"===typeof e?e.split(",").indexOf(t)>-1:!!f(e)&&e.test(t)}function ar(e,t){var n=e.cache,o=e.keys,r=e._vnode;for(var s in n){var a=n[s];if(a){var i=a.name;i&&!t(i)&&ir(n,s,o,r)}}}function ir(e,t,n,o){var r=e[t];!r||o&&r.tag===o.tag||r.componentInstance.$destroy(),e[t]=null,w(n,t)}Go(Jo),Wo(Jo),Sn(Jo),On(Jo),Lt(Jo);var lr=[String,RegExp,Array],cr={name:"keep-alive",abstract:!0,props:{include:lr,exclude:lr,max:[String,Number]},methods:{cacheVNode:function(){var e=this,t=e.cache,n=e.keys,o=e.vnodeToCache,r=e.keyToCache;if(o){var s=o.tag,a=o.componentInstance,i=o.componentOptions;t[r]={name:rr(i),tag:s,componentInstance:a},n.push(r),this.max&&n.length>parseInt(this.max)&&ir(t,n[0],n,this._vnode),this.vnodeToCache=null}}},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var e in this.cache)ir(this.cache,e,this.keys)},mounted:function(){var e=this;this.cacheVNode(),this.$watch("include",(function(t){ar(e,(function(e){return sr(t,e)}))})),this.$watch("exclude",(function(t){ar(e,(function(e){return!sr(t,e)}))}))},updated:function(){this.cacheVNode()},render:function(){var e=this.$slots.default,t=Ut(e),n=t&&t.componentOptions;if(n){var o=rr(n),r=this,s=r.include,a=r.exclude;if(s&&(!o||!sr(s,o))||a&&o&&sr(a,o))return t;var i=this,l=i.cache,c=i.keys,d=null==t.key?n.Ctor.cid+(n.tag?"::".concat(n.tag):""):t.key;l[d]?(t.componentInstance=l[d].componentInstance,w(c,d),c.push(d)):(this.vnodeToCache=t,this.keyToCache=d),t.data.keepAlive=!0}return t||e&&e[0]}},dr={KeepAlive:cr};function ur(e){var t={get:function(){return q}};Object.defineProperty(e,"config",t),e.util={warn:mo,extend:M,mergeOptions:So,defineReactive:Fe},e.set=ze,e.delete=je,e.nextTick=ln,e.observable=function(e){return Le(e),e},e.options=Object.create(null),V.forEach((function(t){e.options[t+"s"]=Object.create(null)})),e.options._base=e,M(e.options.components,dr),Qo(e),Zo(e),er(e),or(e)}ur(Jo),Object.defineProperty(Jo.prototype,"$isServer",{get:de}),Object.defineProperty(Jo.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Jo,"FunctionalRenderContext",{value:Zn}),Jo.version=un;var mr=y("style,class"),pr=y("input,textarea,option,select,progress"),fr=function(e,t,n){return"value"===n&&pr(e)&&"button"!==t||"selected"===n&&"option"===e||"checked"===n&&"input"===e||"muted"===n&&"video"===e},gr=y("contenteditable,draggable,spellcheck"),hr=y("events,caret,typing,plaintext-only"),vr=function(e,t){return Cr(t)||"false"===t?"false":"contenteditable"===e&&hr(t)?t:"true"},br=y("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible"),yr="http://www.w3.org/1999/xlink",xr=function(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)},wr=function(e){return xr(e)?e.slice(6,e.length):""},Cr=function(e){return null==e||!1===e};function Sr(e){var t=e.data,n=e,o=e;while(a(o.componentInstance))o=o.componentInstance._vnode,o&&o.data&&(t=_r(o.data,t));while(a(n=n.parent))n&&n.data&&(t=_r(t,n.data));return kr(t.staticClass,t.class)}function _r(e,t){return{staticClass:Er(e.staticClass,t.staticClass),class:a(e.class)?[e.class,t.class]:t.class}}function kr(e,t){return a(e)||a(t)?Er(e,Or(t)):""}function Er(e,t){return e?t?e+" "+t:e:t||""}function Or(e){return Array.isArray(e)?Tr(e):u(e)?Ar(e):"string"===typeof e?e:""}function Tr(e){for(var t,n="",o=0,r=e.length;o<r;o++)a(t=Or(e[o]))&&""!==t&&(n&&(n+=" "),n+=t);return n}function Ar(e){var t="";for(var n in e)e[n]&&(t&&(t+=" "),t+=n);return t}var Rr={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},Nr=y("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),Dr=y("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),Br=function(e){return Nr(e)||Dr(e)};function Mr(e){return Dr(e)?"svg":"math"===e?"math":void 0}var Ir=Object.create(null);function Pr(e){if(!Z)return!0;if(Br(e))return!1;if(e=e.toLowerCase(),null!=Ir[e])return Ir[e];var t=document.createElement(e);return e.indexOf("-")>-1?Ir[e]=t.constructor===window.HTMLUnknownElement||t.constructor===window.HTMLElement:Ir[e]=/HTMLUnknownElement/.test(t.toString())}var Lr=y("text,number,password,search,email,tel,url");function Fr(e){if("string"===typeof e){var t=document.querySelector(e);return t||document.createElement("div")}return e}function zr(e,t){var n=document.createElement(e);return"select"!==e||t.data&&t.data.attrs&&void 0!==t.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n}function jr(e,t){return document.createElementNS(Rr[e],t)}function Ur(e){return document.createTextNode(e)}function Hr(e){return document.createComment(e)}function $r(e,t,n){e.insertBefore(t,n)}function Vr(e,t){e.removeChild(t)}function Wr(e,t){e.appendChild(t)}function qr(e){return e.parentNode}function Gr(e){return e.nextSibling}function Kr(e){return e.tagName}function Yr(e,t){e.textContent=t}function Xr(e,t){e.setAttribute(t,"")}var Jr=Object.freeze({__proto__:null,createElement:zr,createElementNS:jr,createTextNode:Ur,createComment:Hr,insertBefore:$r,removeChild:Vr,appendChild:Wr,parentNode:qr,nextSibling:Gr,tagName:Kr,setTextContent:Yr,setStyleScope:Xr}),Qr={create:function(e,t){Zr(t)},update:function(e,t){e.data.ref!==t.data.ref&&(Zr(e,!0),Zr(t))},destroy:function(e){Zr(e,!0)}};function Zr(e,t){var n=e.data.ref;if(a(n)){var o=e.context,s=e.componentInstance||e.elm,i=t?null:s,l=t?void 0:s;if(d(n))Yt(n,o,[i],o,"template ref function");else{var c=e.data.refInFor,u="string"===typeof n||"number"===typeof n,m=We(n),p=o.$refs;if(u||m)if(c){var f=u?p[n]:n.value;t?r(f)&&w(f,s):r(f)?f.includes(s)||f.push(s):u?(p[n]=[s],es(o,n,p[n])):n.value=[s]}else if(u){if(t&&p[n]!==s)return;p[n]=l,es(o,n,i)}else if(m){if(t&&n.value!==s)return;n.value=i}else 0}}}function es(e,t,n){var o=e._setupState;o&&S(o,t)&&(We(o[t])?o[t].value=n:o[t]=n)}var ts=new ve("",{},[]),ns=["create","activate","update","remove","destroy"];function os(e,t){return e.key===t.key&&e.asyncFactory===t.asyncFactory&&(e.tag===t.tag&&e.isComment===t.isComment&&a(e.data)===a(t.data)&&rs(e,t)||i(e.isAsyncPlaceholder)&&s(t.asyncFactory.error))}function rs(e,t){if("input"!==e.tag)return!0;var n,o=a(n=e.data)&&a(n=n.attrs)&&n.type,r=a(n=t.data)&&a(n=n.attrs)&&n.type;return o===r||Lr(o)&&Lr(r)}function ss(e,t,n){var o,r,s={};for(o=t;o<=n;++o)r=e[o].key,a(r)&&(s[r]=o);return s}function as(e){var t,n,o={},l=e.modules,d=e.nodeOps;for(t=0;t<ns.length;++t)for(o[ns[t]]=[],n=0;n<l.length;++n)a(l[n][ns[t]])&&o[ns[t]].push(l[n][ns[t]]);function u(e){return new ve(d.tagName(e).toLowerCase(),{},[],void 0,e)}function m(e,t){function n(){0===--n.listeners&&p(e)}return n.listeners=t,n}function p(e){var t=d.parentNode(e);a(t)&&d.removeChild(t,e)}function f(e,t,n,o,r,s,l){if(a(e.elm)&&a(s)&&(e=s[l]=xe(e)),e.isRootInsert=!r,!g(e,t,n,o)){var c=e.data,u=e.children,m=e.tag;a(m)?(e.elm=e.ns?d.createElementNS(e.ns,m):d.createElement(m,e),S(e),x(e,u,t),a(c)&&C(e,t),b(n,e.elm,o)):i(e.isComment)?(e.elm=d.createComment(e.text),b(n,e.elm,o)):(e.elm=d.createTextNode(e.text),b(n,e.elm,o))}}function g(e,t,n,o){var r=e.data;if(a(r)){var s=a(e.componentInstance)&&r.keepAlive;if(a(r=r.hook)&&a(r=r.init)&&r(e,!1),a(e.componentInstance))return h(e,t),b(n,e.elm,o),i(s)&&v(e,t,n,o),!0}}function h(e,t){a(e.data.pendingInsert)&&(t.push.apply(t,e.data.pendingInsert),e.data.pendingInsert=null),e.elm=e.componentInstance.$el,w(e)?(C(e,t),S(e)):(Zr(e),t.push(e))}function v(e,t,n,r){var s,i=e;while(i.componentInstance)if(i=i.componentInstance._vnode,a(s=i.data)&&a(s=s.transition)){for(s=0;s<o.activate.length;++s)o.activate[s](ts,i);t.push(i);break}b(n,e.elm,r)}function b(e,t,n){a(e)&&(a(n)?d.parentNode(n)===e&&d.insertBefore(e,t,n):d.appendChild(e,t))}function x(e,t,n){if(r(t)){0;for(var o=0;o<t.length;++o)f(t[o],n,e.elm,null,!0,t,o)}else c(e.text)&&d.appendChild(e.elm,d.createTextNode(String(e.text)))}function w(e){while(e.componentInstance)e=e.componentInstance._vnode;return a(e.tag)}function C(e,n){for(var r=0;r<o.create.length;++r)o.create[r](ts,e);t=e.data.hook,a(t)&&(a(t.create)&&t.create(ts,e),a(t.insert)&&n.push(e))}function S(e){var t;if(a(t=e.fnScopeId))d.setStyleScope(e.elm,t);else{var n=e;while(n)a(t=n.context)&&a(t=t.$options._scopeId)&&d.setStyleScope(e.elm,t),n=n.parent}a(t=_n)&&t!==e.context&&t!==e.fnContext&&a(t=t.$options._scopeId)&&d.setStyleScope(e.elm,t)}function _(e,t,n,o,r,s){for(;o<=r;++o)f(n[o],s,e,t,!1,n,o)}function k(e){var t,n,r=e.data;if(a(r))for(a(t=r.hook)&&a(t=t.destroy)&&t(e),t=0;t<o.destroy.length;++t)o.destroy[t](e);if(a(t=e.children))for(n=0;n<e.children.length;++n)k(e.children[n])}function E(e,t,n){for(;t<=n;++t){var o=e[t];a(o)&&(a(o.tag)?(O(o),k(o)):p(o.elm))}}function O(e,t){if(a(t)||a(e.data)){var n,r=o.remove.length+1;for(a(t)?t.listeners+=r:t=m(e.elm,r),a(n=e.componentInstance)&&a(n=n._vnode)&&a(n.data)&&O(n,t),n=0;n<o.remove.length;++n)o.remove[n](e,t);a(n=e.data.hook)&&a(n=n.remove)?n(e,t):t()}else p(e.elm)}function T(e,t,n,o,r){var i,l,c,u,m=0,p=0,g=t.length-1,h=t[0],v=t[g],b=n.length-1,y=n[0],x=n[b],w=!r;while(m<=g&&p<=b)s(h)?h=t[++m]:s(v)?v=t[--g]:os(h,y)?(R(h,y,o,n,p),h=t[++m],y=n[++p]):os(v,x)?(R(v,x,o,n,b),v=t[--g],x=n[--b]):os(h,x)?(R(h,x,o,n,b),w&&d.insertBefore(e,h.elm,d.nextSibling(v.elm)),h=t[++m],x=n[--b]):os(v,y)?(R(v,y,o,n,p),w&&d.insertBefore(e,v.elm,h.elm),v=t[--g],y=n[++p]):(s(i)&&(i=ss(t,m,g)),l=a(y.key)?i[y.key]:A(y,t,m,g),s(l)?f(y,o,e,h.elm,!1,n,p):(c=t[l],os(c,y)?(R(c,y,o,n,p),t[l]=void 0,w&&d.insertBefore(e,c.elm,h.elm)):f(y,o,e,h.elm,!1,n,p)),y=n[++p]);m>g?(u=s(n[b+1])?null:n[b+1].elm,_(e,u,n,p,b,o)):p>b&&E(t,m,g)}function A(e,t,n,o){for(var r=n;r<o;r++){var s=t[r];if(a(s)&&os(e,s))return r}}function R(e,t,n,r,l,c){if(e!==t){a(t.elm)&&a(r)&&(t=r[l]=xe(t));var u=t.elm=e.elm;if(i(e.isAsyncPlaceholder))a(t.asyncFactory.resolved)?B(e.elm,t,n):t.isAsyncPlaceholder=!0;else if(i(t.isStatic)&&i(e.isStatic)&&t.key===e.key&&(i(t.isCloned)||i(t.isOnce)))t.componentInstance=e.componentInstance;else{var m,p=t.data;a(p)&&a(m=p.hook)&&a(m=m.prepatch)&&m(e,t);var f=e.children,g=t.children;if(a(p)&&w(t)){for(m=0;m<o.update.length;++m)o.update[m](e,t);a(m=p.hook)&&a(m=m.update)&&m(e,t)}s(t.text)?a(f)&&a(g)?f!==g&&T(u,f,g,n,c):a(g)?(a(e.text)&&d.setTextContent(u,""),_(u,null,g,0,g.length-1,n)):a(f)?E(f,0,f.length-1):a(e.text)&&d.setTextContent(u,""):e.text!==t.text&&d.setTextContent(u,t.text),a(p)&&a(m=p.hook)&&a(m=m.postpatch)&&m(e,t)}}}function N(e,t,n){if(i(n)&&a(e.parent))e.parent.data.pendingInsert=t;else for(var o=0;o<t.length;++o)t[o].data.hook.insert(t[o])}var D=y("attrs,class,staticClass,staticStyle,key");function B(e,t,n,o){var r,s=t.tag,l=t.data,c=t.children;if(o=o||l&&l.pre,t.elm=e,i(t.isComment)&&a(t.asyncFactory))return t.isAsyncPlaceholder=!0,!0;if(a(l)&&(a(r=l.hook)&&a(r=r.init)&&r(t,!0),a(r=t.componentInstance)))return h(t,n),!0;if(a(s)){if(a(c))if(e.hasChildNodes())if(a(r=l)&&a(r=r.domProps)&&a(r=r.innerHTML)){if(r!==e.innerHTML)return!1}else{for(var d=!0,u=e.firstChild,m=0;m<c.length;m++){if(!u||!B(u,c[m],n,o)){d=!1;break}u=u.nextSibling}if(!d||u)return!1}else x(t,c,n);if(a(l)){var p=!1;for(var f in l)if(!D(f)){p=!0,C(t,n);break}!p&&l["class"]&&pn(l["class"])}}else e.data!==t.text&&(e.data=t.text);return!0}return function(e,t,n,r){if(!s(t)){var l=!1,c=[];if(s(e))l=!0,f(t,c);else{var m=a(e.nodeType);if(!m&&os(e,t))R(e,t,c,null,null,r);else{if(m){if(1===e.nodeType&&e.hasAttribute($)&&(e.removeAttribute($),n=!0),i(n)&&B(e,t,c))return N(t,c,!0),e;e=u(e)}var p=e.elm,g=d.parentNode(p);if(f(t,c,p._leaveCb?null:g,d.nextSibling(p)),a(t.parent)){var h=t.parent,v=w(t);while(h){for(var b=0;b<o.destroy.length;++b)o.destroy[b](h);if(h.elm=t.elm,v){for(var y=0;y<o.create.length;++y)o.create[y](ts,h);var x=h.data.hook.insert;if(x.merged)for(var C=1;C<x.fns.length;C++)x.fns[C]()}else Zr(h);h=h.parent}}a(g)?E([e],0,0):a(e.tag)&&k(e)}}return N(t,c,l),t.elm}a(e)&&k(e)}}var is={create:ls,update:ls,destroy:function(e){ls(e,ts)}};function ls(e,t){(e.data.directives||t.data.directives)&&cs(e,t)}function cs(e,t){var n,o,r,s=e===ts,a=t===ts,i=us(e.data.directives,e.context),l=us(t.data.directives,t.context),c=[],d=[];for(n in l)o=i[n],r=l[n],o?(r.oldValue=o.value,r.oldArg=o.arg,ps(r,"update",t,e),r.def&&r.def.componentUpdated&&d.push(r)):(ps(r,"bind",t,e),r.def&&r.def.inserted&&c.push(r));if(c.length){var u=function(){for(var n=0;n<c.length;n++)ps(c[n],"inserted",t,e)};s?tt(t,"insert",u):u()}if(d.length&&tt(t,"postpatch",(function(){for(var n=0;n<d.length;n++)ps(d[n],"componentUpdated",t,e)})),!s)for(n in i)l[n]||ps(i[n],"unbind",e,e,a)}var ds=Object.create(null);function us(e,t){var n,o,r=Object.create(null);if(!e)return r;for(n=0;n<e.length;n++){if(o=e[n],o.modifiers||(o.modifiers=ds),r[ms(o)]=o,t._setupState&&t._setupState.__sfc){var s=o.def||_o(t,"_setupState","v-"+o.name);o.def="function"===typeof s?{bind:s,update:s}:s}o.def=o.def||_o(t.$options,"directives",o.name,!0)}return r}function ms(e){return e.rawName||"".concat(e.name,".").concat(Object.keys(e.modifiers||{}).join("."))}function ps(e,t,n,o,r){var s=e.def&&e.def[t];if(s)try{s(n.elm,e,n,o,r)}catch(Ja){Kt(Ja,n.context,"directive ".concat(e.name," ").concat(t," hook"))}}var fs=[Qr,is];function gs(e,t){var n=t.componentOptions;if((!a(n)||!1!==n.Ctor.options.inheritAttrs)&&(!s(e.data.attrs)||!s(t.data.attrs))){var o,r,l,c=t.elm,d=e.data.attrs||{},u=t.data.attrs||{};for(o in(a(u.__ob__)||i(u._v_attr_proxy))&&(u=t.data.attrs=M({},u)),u)r=u[o],l=d[o],l!==r&&hs(c,o,r,t.data.pre);for(o in(te||oe)&&u.value!==d.value&&hs(c,"value",u.value),d)s(u[o])&&(xr(o)?c.removeAttributeNS(yr,wr(o)):gr(o)||c.removeAttribute(o))}}function hs(e,t,n,o){o||e.tagName.indexOf("-")>-1?vs(e,t,n):br(t)?Cr(n)?e.removeAttribute(t):(n="allowfullscreen"===t&&"EMBED"===e.tagName?"true":t,e.setAttribute(t,n)):gr(t)?e.setAttribute(t,vr(t,n)):xr(t)?Cr(n)?e.removeAttributeNS(yr,wr(t)):e.setAttributeNS(yr,t,n):vs(e,t,n)}function vs(e,t,n){if(Cr(n))e.removeAttribute(t);else{if(te&&!ne&&"TEXTAREA"===e.tagName&&"placeholder"===t&&""!==n&&!e.__ieph){var o=function(t){t.stopImmediatePropagation(),e.removeEventListener("input",o)};e.addEventListener("input",o),e.__ieph=!0}e.setAttribute(t,n)}}var bs={create:gs,update:gs};function ys(e,t){var n=t.elm,o=t.data,r=e.data;if(!(s(o.staticClass)&&s(o.class)&&(s(r)||s(r.staticClass)&&s(r.class)))){var i=Sr(t),l=n._transitionClasses;a(l)&&(i=Er(i,Or(l))),i!==n._prevClass&&(n.setAttribute("class",i),n._prevClass=i)}}var xs,ws={create:ys,update:ys},Cs="__r",Ss="__c";function _s(e){if(a(e[Cs])){var t=te?"change":"input";e[t]=[].concat(e[Cs],e[t]||[]),delete e[Cs]}a(e[Ss])&&(e.change=[].concat(e[Ss],e.change||[]),delete e[Ss])}function ks(e,t,n){var o=xs;return function r(){var s=t.apply(null,arguments);null!==s&&Ts(e,r,n,o)}}var Es=Zt&&!(ae&&Number(ae[1])<=53);function Os(e,t,n,o){if(Es){var r=Un,s=t;t=s._wrapper=function(e){if(e.target===e.currentTarget||e.timeStamp>=r||e.timeStamp<=0||e.target.ownerDocument!==document)return s.apply(this,arguments)}}xs.addEventListener(e,t,le?{capture:n,passive:o}:n)}function Ts(e,t,n,o){(o||xs).removeEventListener(e,t._wrapper||t,n)}function As(e,t){if(!s(e.data.on)||!s(t.data.on)){var n=t.data.on||{},o=e.data.on||{};xs=t.elm||e.elm,_s(n),et(n,o,Os,Ts,ks,t.context),xs=void 0}}var Rs,Ns={create:As,update:As,destroy:function(e){return As(e,ts)}};function Ds(e,t){if(!s(e.data.domProps)||!s(t.data.domProps)){var n,o,r=t.elm,l=e.data.domProps||{},c=t.data.domProps||{};for(n in(a(c.__ob__)||i(c._v_attr_proxy))&&(c=t.data.domProps=M({},c)),l)n in c||(r[n]="");for(n in c){if(o=c[n],"textContent"===n||"innerHTML"===n){if(t.children&&(t.children.length=0),o===l[n])continue;1===r.childNodes.length&&r.removeChild(r.childNodes[0])}if("value"===n&&"PROGRESS"!==r.tagName){r._value=o;var d=s(o)?"":String(o);Bs(r,d)&&(r.value=d)}else if("innerHTML"===n&&Dr(r.tagName)&&s(r.innerHTML)){Rs=Rs||document.createElement("div"),Rs.innerHTML="<svg>".concat(o,"</svg>");var u=Rs.firstChild;while(r.firstChild)r.removeChild(r.firstChild);while(u.firstChild)r.appendChild(u.firstChild)}else if(o!==l[n])try{r[n]=o}catch(Ja){}}}}function Bs(e,t){return!e.composing&&("OPTION"===e.tagName||Ms(e,t)||Is(e,t))}function Ms(e,t){var n=!0;try{n=document.activeElement!==e}catch(Ja){}return n&&e.value!==t}function Is(e,t){var n=e.value,o=e._vModifiers;if(a(o)){if(o.number)return b(n)!==b(t);if(o.trim)return n.trim()!==t.trim()}return n!==t}var Ps={create:Ds,update:Ds},Ls=_((function(e){var t={},n=/;(?![^(]*\))/g,o=/:(.+)/;return e.split(n).forEach((function(e){if(e){var n=e.split(o);n.length>1&&(t[n[0].trim()]=n[1].trim())}})),t}));function Fs(e){var t=zs(e.style);return e.staticStyle?M(e.staticStyle,t):t}function zs(e){return Array.isArray(e)?I(e):"string"===typeof e?Ls(e):e}function js(e,t){var n,o={};if(t){var r=e;while(r.componentInstance)r=r.componentInstance._vnode,r&&r.data&&(n=Fs(r.data))&&M(o,n)}(n=Fs(e.data))&&M(o,n);var s=e;while(s=s.parent)s.data&&(n=Fs(s.data))&&M(o,n);return o}var Us,Hs=/^--/,$s=/\s*!important$/,Vs=function(e,t,n){if(Hs.test(t))e.style.setProperty(t,n);else if($s.test(n))e.style.setProperty(A(t),n.replace($s,""),"important");else{var o=qs(t);if(Array.isArray(n))for(var r=0,s=n.length;r<s;r++)e.style[o]=n[r];else e.style[o]=n}},Ws=["Webkit","Moz","ms"],qs=_((function(e){if(Us=Us||document.createElement("div").style,e=E(e),"filter"!==e&&e in Us)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<Ws.length;n++){var o=Ws[n]+t;if(o in Us)return o}}));function Gs(e,t){var n=t.data,o=e.data;if(!(s(n.staticStyle)&&s(n.style)&&s(o.staticStyle)&&s(o.style))){var r,i,l=t.elm,c=o.staticStyle,d=o.normalizedStyle||o.style||{},u=c||d,m=zs(t.data.style)||{};t.data.normalizedStyle=a(m.__ob__)?M({},m):m;var p=js(t,!0);for(i in u)s(p[i])&&Vs(l,i,"");for(i in p)r=p[i],r!==u[i]&&Vs(l,i,null==r?"":r)}}var Ks={create:Gs,update:Gs},Ys=/\s+/;function Xs(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(Ys).forEach((function(t){return e.classList.add(t)})):e.classList.add(t);else{var n=" ".concat(e.getAttribute("class")||""," ");n.indexOf(" "+t+" ")<0&&e.setAttribute("class",(n+t).trim())}}function Js(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(Ys).forEach((function(t){return e.classList.remove(t)})):e.classList.remove(t),e.classList.length||e.removeAttribute("class");else{var n=" ".concat(e.getAttribute("class")||""," "),o=" "+t+" ";while(n.indexOf(o)>=0)n=n.replace(o," ");n=n.trim(),n?e.setAttribute("class",n):e.removeAttribute("class")}}function Qs(e){if(e){if("object"===typeof e){var t={};return!1!==e.css&&M(t,Zs(e.name||"v")),M(t,e),t}return"string"===typeof e?Zs(e):void 0}}var Zs=_((function(e){return{enterClass:"".concat(e,"-enter"),enterToClass:"".concat(e,"-enter-to"),enterActiveClass:"".concat(e,"-enter-active"),leaveClass:"".concat(e,"-leave"),leaveToClass:"".concat(e,"-leave-to"),leaveActiveClass:"".concat(e,"-leave-active")}})),ea=Z&&!ne,ta="transition",na="animation",oa="transition",ra="transitionend",sa="animation",aa="animationend";ea&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(oa="WebkitTransition",ra="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(sa="WebkitAnimation",aa="webkitAnimationEnd"));var ia=Z?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(e){return e()};function la(e){ia((function(){ia(e)}))}function ca(e,t){var n=e._transitionClasses||(e._transitionClasses=[]);n.indexOf(t)<0&&(n.push(t),Xs(e,t))}function da(e,t){e._transitionClasses&&w(e._transitionClasses,t),Js(e,t)}function ua(e,t,n){var o=pa(e,t),r=o.type,s=o.timeout,a=o.propCount;if(!r)return n();var i=r===ta?ra:aa,l=0,c=function(){e.removeEventListener(i,d),n()},d=function(t){t.target===e&&++l>=a&&c()};setTimeout((function(){l<a&&c()}),s+1),e.addEventListener(i,d)}var ma=/\b(transform|all)(,|$)/;function pa(e,t){var n,o=window.getComputedStyle(e),r=(o[oa+"Delay"]||"").split(", "),s=(o[oa+"Duration"]||"").split(", "),a=fa(r,s),i=(o[sa+"Delay"]||"").split(", "),l=(o[sa+"Duration"]||"").split(", "),c=fa(i,l),d=0,u=0;t===ta?a>0&&(n=ta,d=a,u=s.length):t===na?c>0&&(n=na,d=c,u=l.length):(d=Math.max(a,c),n=d>0?a>c?ta:na:null,u=n?n===ta?s.length:l.length:0);var m=n===ta&&ma.test(o[oa+"Property"]);return{type:n,timeout:d,propCount:u,hasTransform:m}}function fa(e,t){while(e.length<t.length)e=e.concat(e);return Math.max.apply(null,t.map((function(t,n){return ga(t)+ga(e[n])})))}function ga(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function ha(e,t){var n=e.elm;a(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb());var o=Qs(e.data.transition);if(!s(o)&&!a(n._enterCb)&&1===n.nodeType){var r=o.css,i=o.type,l=o.enterClass,c=o.enterToClass,m=o.enterActiveClass,p=o.appearClass,f=o.appearToClass,g=o.appearActiveClass,h=o.beforeEnter,v=o.enter,y=o.afterEnter,x=o.enterCancelled,w=o.beforeAppear,C=o.appear,S=o.afterAppear,_=o.appearCancelled,k=o.duration,E=_n,O=_n.$vnode;while(O&&O.parent)E=O.context,O=O.parent;var T=!E._isMounted||!e.isRootInsert;if(!T||C||""===C){var A=T&&p?p:l,R=T&&g?g:m,N=T&&f?f:c,D=T&&w||h,B=T&&d(C)?C:v,M=T&&S||y,I=T&&_||x,P=b(u(k)?k.enter:k);0;var L=!1!==r&&!ne,F=ya(B),z=n._enterCb=U((function(){L&&(da(n,N),da(n,R)),z.cancelled?(L&&da(n,A),I&&I(n)):M&&M(n),n._enterCb=null}));e.data.show||tt(e,"insert",(function(){var t=n.parentNode,o=t&&t._pending&&t._pending[e.key];o&&o.tag===e.tag&&o.elm._leaveCb&&o.elm._leaveCb(),B&&B(n,z)})),D&&D(n),L&&(ca(n,A),ca(n,R),la((function(){da(n,A),z.cancelled||(ca(n,N),F||(ba(P)?setTimeout(z,P):ua(n,i,z)))}))),e.data.show&&(t&&t(),B&&B(n,z)),L||F||z()}}}function va(e,t){var n=e.elm;a(n._enterCb)&&(n._enterCb.cancelled=!0,n._enterCb());var o=Qs(e.data.transition);if(s(o)||1!==n.nodeType)return t();if(!a(n._leaveCb)){var r=o.css,i=o.type,l=o.leaveClass,c=o.leaveToClass,d=o.leaveActiveClass,m=o.beforeLeave,p=o.leave,f=o.afterLeave,g=o.leaveCancelled,h=o.delayLeave,v=o.duration,y=!1!==r&&!ne,x=ya(p),w=b(u(v)?v.leave:v);0;var C=n._leaveCb=U((function(){n.parentNode&&n.parentNode._pending&&(n.parentNode._pending[e.key]=null),y&&(da(n,c),da(n,d)),C.cancelled?(y&&da(n,l),g&&g(n)):(t(),f&&f(n)),n._leaveCb=null}));h?h(S):S()}function S(){C.cancelled||(!e.data.show&&n.parentNode&&((n.parentNode._pending||(n.parentNode._pending={}))[e.key]=e),m&&m(n),y&&(ca(n,l),ca(n,d),la((function(){da(n,l),C.cancelled||(ca(n,c),x||(ba(w)?setTimeout(C,w):ua(n,i,C)))}))),p&&p(n,C),y||x||C())}}function ba(e){return"number"===typeof e&&!isNaN(e)}function ya(e){if(s(e))return!1;var t=e.fns;return a(t)?ya(Array.isArray(t)?t[0]:t):(e._length||e.length)>1}function xa(e,t){!0!==t.data.show&&ha(t)}var wa=Z?{create:xa,activate:xa,remove:function(e,t){!0!==e.data.show?va(e,t):t()}}:{},Ca=[bs,ws,Ns,Ps,Ks,wa],Sa=Ca.concat(fs),_a=as({nodeOps:Jr,modules:Sa});ne&&document.addEventListener("selectionchange",(function(){var e=document.activeElement;e&&e.vmodel&&Da(e,"input")}));var ka={inserted:function(e,t,n,o){"select"===n.tag?(o.elm&&!o.elm._vOptions?tt(n,"postpatch",(function(){ka.componentUpdated(e,t,n)})):Ea(e,t,n.context),e._vOptions=[].map.call(e.options,Aa)):("textarea"===n.tag||Lr(e.type))&&(e._vModifiers=t.modifiers,t.modifiers.lazy||(e.addEventListener("compositionstart",Ra),e.addEventListener("compositionend",Na),e.addEventListener("change",Na),ne&&(e.vmodel=!0)))},componentUpdated:function(e,t,n){if("select"===n.tag){Ea(e,t,n.context);var o=e._vOptions,r=e._vOptions=[].map.call(e.options,Aa);if(r.some((function(e,t){return!z(e,o[t])}))){var s=e.multiple?t.value.some((function(e){return Ta(e,r)})):t.value!==t.oldValue&&Ta(t.value,r);s&&Da(e,"change")}}}};function Ea(e,t,n){Oa(e,t,n),(te||oe)&&setTimeout((function(){Oa(e,t,n)}),0)}function Oa(e,t,n){var o=t.value,r=e.multiple;if(!r||Array.isArray(o)){for(var s,a,i=0,l=e.options.length;i<l;i++)if(a=e.options[i],r)s=j(o,Aa(a))>-1,a.selected!==s&&(a.selected=s);else if(z(Aa(a),o))return void(e.selectedIndex!==i&&(e.selectedIndex=i));r||(e.selectedIndex=-1)}}function Ta(e,t){return t.every((function(t){return!z(t,e)}))}function Aa(e){return"_value"in e?e._value:e.value}function Ra(e){e.target.composing=!0}function Na(e){e.target.composing&&(e.target.composing=!1,Da(e.target,"input"))}function Da(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}function Ba(e){return!e.componentInstance||e.data&&e.data.transition?e:Ba(e.componentInstance._vnode)}var Ma={bind:function(e,t,n){var o=t.value;n=Ba(n);var r=n.data&&n.data.transition,s=e.__vOriginalDisplay="none"===e.style.display?"":e.style.display;o&&r?(n.data.show=!0,ha(n,(function(){e.style.display=s}))):e.style.display=o?s:"none"},update:function(e,t,n){var o=t.value,r=t.oldValue;if(!o!==!r){n=Ba(n);var s=n.data&&n.data.transition;s?(n.data.show=!0,o?ha(n,(function(){e.style.display=e.__vOriginalDisplay})):va(n,(function(){e.style.display="none"}))):e.style.display=o?e.__vOriginalDisplay:"none"}},unbind:function(e,t,n,o,r){r||(e.style.display=e.__vOriginalDisplay)}},Ia={model:ka,show:Ma},Pa={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function La(e){var t=e&&e.componentOptions;return t&&t.Ctor.options.abstract?La(Ut(t.children)):e}function Fa(e){var t={},n=e.$options;for(var o in n.propsData)t[o]=e[o];var r=n._parentListeners;for(var o in r)t[E(o)]=r[o];return t}function za(e,t){if(/\d-keep-alive$/.test(t.tag))return e("keep-alive",{props:t.componentOptions.propsData})}function ja(e){while(e=e.parent)if(e.data.transition)return!0}function Ua(e,t){return t.key===e.key&&t.tag===e.tag}var Ha=function(e){return e.tag||kt(e)},$a=function(e){return"show"===e.name},Va={name:"transition",props:Pa,abstract:!0,render:function(e){var t=this,n=this.$slots.default;if(n&&(n=n.filter(Ha),n.length)){0;var o=this.mode;0;var r=n[0];if(ja(this.$vnode))return r;var s=La(r);if(!s)return r;if(this._leaving)return za(e,r);var a="__transition-".concat(this._uid,"-");s.key=null==s.key?s.isComment?a+"comment":a+s.tag:c(s.key)?0===String(s.key).indexOf(a)?s.key:a+s.key:s.key;var i=(s.data||(s.data={})).transition=Fa(this),l=this._vnode,d=La(l);if(s.data.directives&&s.data.directives.some($a)&&(s.data.show=!0),d&&d.data&&!Ua(s,d)&&!kt(d)&&(!d.componentInstance||!d.componentInstance._vnode.isComment)){var u=d.data.transition=M({},i);if("out-in"===o)return this._leaving=!0,tt(u,"afterLeave",(function(){t._leaving=!1,t.$forceUpdate()})),za(e,r);if("in-out"===o){if(kt(s))return l;var m,p=function(){m()};tt(i,"afterEnter",p),tt(i,"enterCancelled",p),tt(u,"delayLeave",(function(e){m=e}))}}return r}}},Wa=M({tag:String,moveClass:String},Pa);delete Wa.mode;var qa={props:Wa,beforeMount:function(){var e=this,t=this._update;this._update=function(n,o){var r=kn(e);e.__patch__(e._vnode,e.kept,!1,!0),e._vnode=e.kept,r(),t.call(e,n,o)}},render:function(e){for(var t=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),o=this.prevChildren=this.children,r=this.$slots.default||[],s=this.children=[],a=Fa(this),i=0;i<r.length;i++){var l=r[i];if(l.tag)if(null!=l.key&&0!==String(l.key).indexOf("__vlist"))s.push(l),n[l.key]=l,(l.data||(l.data={})).transition=a;else;}if(o){var c=[],d=[];for(i=0;i<o.length;i++){l=o[i];l.data.transition=a,l.data.pos=l.elm.getBoundingClientRect(),n[l.key]?c.push(l):d.push(l)}this.kept=e(t,null,c),this.removed=d}return e(t,null,s)},updated:function(){var e=this.prevChildren,t=this.moveClass||(this.name||"v")+"-move";e.length&&this.hasMove(e[0].elm,t)&&(e.forEach(Ga),e.forEach(Ka),e.forEach(Ya),this._reflow=document.body.offsetHeight,e.forEach((function(e){if(e.data.moved){var n=e.elm,o=n.style;ca(n,t),o.transform=o.WebkitTransform=o.transitionDuration="",n.addEventListener(ra,n._moveCb=function e(o){o&&o.target!==n||o&&!/transform$/.test(o.propertyName)||(n.removeEventListener(ra,e),n._moveCb=null,da(n,t))})}})))},methods:{hasMove:function(e,t){if(!ea)return!1;if(this._hasMove)return this._hasMove;var n=e.cloneNode();e._transitionClasses&&e._transitionClasses.forEach((function(e){Js(n,e)})),Xs(n,t),n.style.display="none",this.$el.appendChild(n);var o=pa(n);return this.$el.removeChild(n),this._hasMove=o.hasTransform}}};function Ga(e){e.elm._moveCb&&e.elm._moveCb(),e.elm._enterCb&&e.elm._enterCb()}function Ka(e){e.data.newPos=e.elm.getBoundingClientRect()}function Ya(e){var t=e.data.pos,n=e.data.newPos,o=t.left-n.left,r=t.top-n.top;if(o||r){e.data.moved=!0;var s=e.elm.style;s.transform=s.WebkitTransform="translate(".concat(o,"px,").concat(r,"px)"),s.transitionDuration="0s"}}var Xa={Transition:Va,TransitionGroup:qa};Jo.config.mustUseProp=fr,Jo.config.isReservedTag=Br,Jo.config.isReservedAttr=mr,Jo.config.getTagNamespace=Mr,Jo.config.isUnknownElement=Pr,M(Jo.options.directives,Ia),M(Jo.options.components,Xa),Jo.prototype.__patch__=Z?_a:P,Jo.prototype.$mount=function(e,t){return e=e&&Z?Fr(e):void 0,Tn(this,e,t)},Z&&setTimeout((function(){q.devtools&&ue&&ue.emit("init",Jo)}),0)},8853:function(e,t,n){var o=n(2944);function r(e,t,n){return t=o(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.exports=r,e.exports.__esModule=!0,e.exports["default"]=e.exports},2214:function(e,t,n){n(7658);var o=n(8853);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}e.exports=s,e.exports.__esModule=!0,e.exports["default"]=e.exports},22:function(e,t,n){var o=n(621);function r(e,t){if(null==e)return{};var n,r,s=o(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}e.exports=r,e.exports.__esModule=!0,e.exports["default"]=e.exports},621:function(e){function t(e,t){if(null==e)return{};var n,o,r={},s=Object.keys(e);for(o=0;o<s.length;o++)n=s[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}e.exports=t,e.exports.__esModule=!0,e.exports["default"]=e.exports},6857:function(e,t,n){n(1817),n(1703);var o=n(1692)["default"];function r(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}e.exports=r,e.exports.__esModule=!0,e.exports["default"]=e.exports},2944:function(e,t,n){var o=n(1692)["default"],r=n(6857);function s(e){var t=r(e,"string");return"symbol"===o(t)?t:String(t)}e.exports=s,e.exports.__esModule=!0,e.exports["default"]=e.exports},1692:function(e,t,n){function o(t){return e.exports=o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports["default"]=e.exports,o(t)}n(1817),n(3948),e.exports=o,e.exports.__esModule=!0,e.exports["default"]=e.exports}}]);